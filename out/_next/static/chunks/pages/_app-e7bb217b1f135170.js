(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{8417:function(e,r,n){"use strict";n.d(r,{Z:function(){return G}});var i=function(){function e(e){var r=this;this._insertTag=function(e){var n;n=0===r.tags.length?r.insertionPoint?r.insertionPoint.nextSibling:r.prepend?r.container.firstChild:r.before:r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(e,n),r.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var r=e.prototype;return r.hydrate=function(e){e.forEach(this._insertTag)},r.insert=function(e){if(this.ctr%(this.isSpeedy?65e3:1)==0){var r;this._insertTag(((r=document.createElement("style")).setAttribute("data-emotion",this.key),void 0!==this.nonce&&r.setAttribute("nonce",this.nonce),r.appendChild(document.createTextNode("")),r.setAttribute("data-s",""),r))}var n=this.tags[this.tags.length-1];if(this.isSpeedy){var i=function(e){if(e.sheet)return e.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===e)return document.styleSheets[r]}(n);try{i.insertRule(e,i.cssRules.length)}catch(e){}}else n.appendChild(document.createTextNode(e));this.ctr++},r.flush=function(){this.tags.forEach(function(e){return e.parentNode&&e.parentNode.removeChild(e)}),this.tags=[],this.ctr=0},e}(),a=Math.abs,s=String.fromCharCode,o=Object.assign;function l(e,r,n){return e.replace(r,n)}function u(e,r){return e.indexOf(r)}function c(e,r){return 0|e.charCodeAt(r)}function h(e,r,n){return e.slice(r,n)}function d(e){return e.length}function p(e,r){return r.push(e),e}var f=1,m=1,g=0,v=0,y=0,x="";function b(e,r,n,i,a,s,o){return{value:e,root:r,parent:n,type:i,props:a,children:s,line:f,column:m,length:o,return:""}}function _(e,r){return o(b("",null,null,"",null,null,0),e,{length:-e.length},r)}function S(){return y=v<g?c(x,v++):0,m++,10===y&&(m=1,f++),y}function w(){return c(x,v)}function M(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function T(e){return f=m=1,g=d(x=e),v=0,[]}function E(e){var r,n;return(r=v-1,n=function e(r){for(;S();)switch(y){case r:return v;case 34:case 39:34!==r&&39!==r&&e(y);break;case 40:41===r&&e(r);break;case 92:S()}return v}(91===e?e+2:40===e?e+1:e),h(x,r,n)).trim()}var A="-ms-",C="-moz-",R="-webkit-",P="comm",L="rule",k="decl",D="@keyframes";function I(e,r){for(var n="",i=e.length,a=0;a<i;a++)n+=r(e[a],a,e,r)||"";return n}function O(e,r,n,i){switch(e.type){case"@import":case k:return e.return=e.return||e.value;case P:return"";case D:return e.return=e.value+"{"+I(e.children,i)+"}";case L:e.value=e.props.join(",")}return d(n=I(e.children,i))?e.return=e.value+"{"+n+"}":""}function N(e,r,n,i,s,o,u,c,d,p,f){for(var m=s-1,g=0===s?o:[""],v=g.length,y=0,x=0,_=0;y<i;++y)for(var S=0,w=h(e,m+1,m=a(x=u[y])),M=e;S<v;++S)(M=(x>0?g[S]+" "+w:l(w,/&\f/g,g[S])).trim())&&(d[_++]=M);return b(e,r,n,0===s?L:c,d,p,f)}function z(e,r,n,i){return b(e,r,n,k,h(e,0,i),h(e,i+1,-1),i)}var B=function(e,r,n){for(var i=0,a=0;i=a,a=w(),38===i&&12===a&&(r[n]=1),!M(a);)S();return h(x,e,v)},F=function(e,r){var n=-1,i=44;do switch(M(i)){case 0:38===i&&12===w()&&(r[n]=1),e[n]+=B(v-1,r,n);break;case 2:e[n]+=E(i);break;case 4:if(44===i){e[++n]=58===w()?"&\f":"",r[n]=e[n].length;break}default:e[n]+=s(i)}while(i=S());return e},U=function(e,r){var n;return n=F(T(e),r),x="",n},V=new WeakMap,j=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var r=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===r.charCodeAt(0)||V.get(n))&&!i){V.set(e,!0);for(var a=[],s=U(r,a),o=n.props,l=0,u=0;l<s.length;l++)for(var c=0;c<o.length;c++,u++)e.props[u]=a[l]?s[l].replace(/&\f/g,o[c]):o[c]+" "+s[l]}}},H=function(e){if("decl"===e.type){var r=e.value;108===r.charCodeAt(0)&&98===r.charCodeAt(2)&&(e.return="",e.value="")}},W=[function(e,r,n,i){if(e.length>-1&&!e.return)switch(e.type){case k:e.return=function e(r,n){switch(45^c(r,0)?(((n<<2^c(r,0))<<2^c(r,1))<<2^c(r,2))<<2^c(r,3):0){case 5103:return R+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return R+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return R+r+C+r+A+r+r;case 6828:case 4268:return R+r+A+r+r;case 6165:return R+r+A+"flex-"+r+r;case 5187:return R+r+l(r,/(\w+).+(:[^]+)/,R+"box-$1$2"+A+"flex-$1$2")+r;case 5443:return R+r+A+"flex-item-"+l(r,/flex-|-self/,"")+r;case 4675:return R+r+A+"flex-line-pack"+l(r,/align-content|flex-|-self/,"")+r;case 5548:return R+r+A+l(r,"shrink","negative")+r;case 5292:return R+r+A+l(r,"basis","preferred-size")+r;case 6060:return R+"box-"+l(r,"-grow","")+R+r+A+l(r,"grow","positive")+r;case 4554:return R+l(r,/([^-])(transform)/g,"$1"+R+"$2")+r;case 6187:return l(l(l(r,/(zoom-|grab)/,R+"$1"),/(image-set)/,R+"$1"),r,"")+r;case 5495:case 3959:return l(r,/(image-set\([^]*)/,R+"$1$`$1");case 4968:return l(l(r,/(.+:)(flex-)?(.*)/,R+"box-pack:$3"+A+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+R+r+r;case 4095:case 3583:case 4068:case 2532:return l(r,/(.+)-inline(.+)/,R+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(r)-1-n>6)switch(c(r,n+1)){case 109:if(45!==c(r,n+4))break;case 102:return l(r,/(.+:)(.+)-([^]+)/,"$1"+R+"$2-$3$1"+C+(108==c(r,n+3)?"$3":"$2-$3"))+r;case 115:return~u(r,"stretch")?e(l(r,"stretch","fill-available"),n)+r:r}break;case 4949:if(115!==c(r,n+1))break;case 6444:switch(c(r,d(r)-3-(~u(r,"!important")&&10))){case 107:return l(r,":",":"+R)+r;case 101:return l(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+R+(45===c(r,14)?"inline-":"")+"box$3$1"+R+"$2$3$1"+A+"$2box$3")+r}break;case 5936:switch(c(r,n+11)){case 114:return R+r+A+l(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return R+r+A+l(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return R+r+A+l(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return R+r+A+r+r}return r}(e.value,e.length);break;case D:return I([_(e,{value:l(e.value,"@","@"+R)})],i);case L:if(e.length)return e.props.map(function(r){var n;switch(n=r,(n=/(::plac\w+|:read-\w+)/.exec(n))?n[0]:n){case":read-only":case":read-write":return I([_(e,{props:[l(r,/:(read-\w+)/,":"+C+"$1")]})],i);case"::placeholder":return I([_(e,{props:[l(r,/:(plac\w+)/,":"+R+"input-$1")]}),_(e,{props:[l(r,/:(plac\w+)/,":"+C+"$1")]}),_(e,{props:[l(r,/:(plac\w+)/,A+"input-$1")]})],i)}return""}).join("")}}],G=function(e){var r,n,a,o,g,_=e.key;if("css"===_){var A=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(A,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var C=e.stylisPlugins||W,R={},L=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+_+' "]'),function(e){for(var r=e.getAttribute("data-emotion").split(" "),n=1;n<r.length;n++)R[r[n]]=!0;L.push(e)});var k=(n=(r=[j,H].concat(C,[O,(a=function(e){g.insert(e)},function(e){!e.root&&(e=e.return)&&a(e)})])).length,function(e,i,a,s){for(var o="",l=0;l<n;l++)o+=r[l](e,i,a,s)||"";return o}),D=function(e){var r,n;return I((n=function e(r,n,i,a,o,g,_,T,A){for(var C,R=0,L=0,k=_,D=0,I=0,O=0,B=1,F=1,U=1,V=0,j="",H=o,W=g,G=a,q=j;F;)switch(O=V,V=S()){case 40:if(108!=O&&58==c(q,k-1)){-1!=u(q+=l(E(V),"&","&\f"),"&\f")&&(U=-1);break}case 34:case 39:case 91:q+=E(V);break;case 9:case 10:case 13:case 32:q+=function(e){for(;y=w();)if(y<33)S();else break;return M(e)>2||M(y)>3?"":" "}(O);break;case 92:q+=function(e,r){for(var n;--r&&S()&&!(y<48)&&!(y>102)&&(!(y>57)||!(y<65))&&(!(y>70)||!(y<97)););return n=v+(r<6&&32==w()&&32==S()),h(x,e,n)}(v-1,7);continue;case 47:switch(w()){case 42:case 47:p(b(C=function(e,r){for(;S();)if(e+y===57)break;else if(e+y===84&&47===w())break;return"/*"+h(x,r,v-1)+"*"+s(47===e?e:S())}(S(),v),n,i,P,s(y),h(C,2,-2),0),A);break;default:q+="/"}break;case 123*B:T[R++]=d(q)*U;case 125*B:case 59:case 0:switch(V){case 0:case 125:F=0;case 59+L:I>0&&d(q)-k&&p(I>32?z(q+";",a,i,k-1):z(l(q," ","")+";",a,i,k-2),A);break;case 59:q+=";";default:if(p(G=N(q,n,i,R,L,o,T,j,H=[],W=[],k),g),123===V){if(0===L)e(q,n,G,G,H,g,k,T,W);else switch(99===D&&110===c(q,3)?100:D){case 100:case 109:case 115:e(r,G,G,a&&p(N(r,G,G,0,0,o,T,j,o,H=[],k),W),o,W,k,T,a?H:W);break;default:e(q,G,G,G,[""],W,0,T,W)}}}R=L=I=0,B=U=1,j=q="",k=_;break;case 58:k=1+d(q),I=O;default:if(B<1){if(123==V)--B;else if(125==V&&0==B++&&125==(y=v>0?c(x,--v):0,m--,10===y&&(m=1,f--),y))continue}switch(q+=s(V),V*B){case 38:U=L>0?1:(q+="\f",-1);break;case 44:T[R++]=(d(q)-1)*U,U=1;break;case 64:45===w()&&(q+=E(S())),D=w(),L=k=d(j=q+=function(e){for(;!M(w());)S();return h(x,e,v)}(v)),V++;break;case 45:45===O&&2==d(q)&&(B=0)}}return g}("",null,null,null,[""],r=T(r=e),0,[0],r),x="",n),k)},B={key:_,sheet:new i({key:_,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:R,registered:{},insert:function(e,r,n,i){g=n,D(e?e+"{"+r.styles+"}":r.styles),i&&(B.inserted[r.name]=!0)}};return B.sheet.hydrate(L),B}},5042:function(e,r){"use strict";r.Z=function(e){var r=Object.create(null);return function(n){return void 0===r[n]&&(r[n]=e(n)),r[n]}}},1683:function(e,r,n){"use strict";n.d(r,{T:function(){return c},a:function(){return d},w:function(){return u}});var i=n(7294),a=n(8417),s=n(7462),o=function(e){var r=new WeakMap;return function(n){if(r.has(n))return r.get(n);var i=e(n);return r.set(n,i),i}};n(8137),n(7278);var l=(0,i.createContext)("undefined"!=typeof HTMLElement?(0,a.Z)({key:"css"}):null);l.Provider;var u=function(e){return(0,i.forwardRef)(function(r,n){return e(r,(0,i.useContext)(l),n)})},c=(0,i.createContext)({}),h=o(function(e){return o(function(r){return"function"==typeof r?r(e):(0,s.Z)({},e,r)})}),d=function(e){var r=(0,i.useContext)(c);return e.theme!==r&&(r=h(r)(e.theme)),(0,i.createElement)(c.Provider,{value:r},e.children)}},917:function(e,r,n){"use strict";n.d(r,{F4:function(){return h},xB:function(){return u}});var i=n(7294);n(8417);var a=n(1683);n(8679);var s=n(444),o=n(8137),l=n(7278),u=(0,a.w)(function(e,r){var n=e.styles,u=(0,o.O)([n],void 0,(0,i.useContext)(a.T)),c=(0,i.useRef)();return(0,l.j)(function(){var e=r.key+"-global",n=new r.sheet.constructor({key:e,nonce:r.sheet.nonce,container:r.sheet.container,speedy:r.sheet.isSpeedy}),i=!1,a=document.querySelector('style[data-emotion="'+e+" "+u.name+'"]');return r.sheet.tags.length&&(n.before=r.sheet.tags[0]),null!==a&&(i=!0,a.setAttribute("data-emotion",e),n.hydrate([a])),c.current=[n,i],function(){n.flush()}},[r]),(0,l.j)(function(){var e=c.current,n=e[0];if(e[1]){e[1]=!1;return}if(void 0!==u.next&&(0,s.My)(r,u.next,!0),n.tags.length){var i=n.tags[n.tags.length-1].nextElementSibling;n.before=i,n.flush()}r.insert("",u,n,!1)},[r,u.name]),null});function c(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,o.O)(r)}var h=function(){var e=c.apply(void 0,arguments),r="animation-"+e.name;return{name:r,styles:"@keyframes "+r+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},8137:function(e,r,n){"use strict";n.d(r,{O:function(){return g}});var i,a=function(e){for(var r,n=0,i=0,a=e.length;a>=4;++i,a-=4)r=(65535&(r=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))*1540483477+((r>>>16)*59797<<16),r^=r>>>24,n=(65535&r)*1540483477+((r>>>16)*59797<<16)^(65535&n)*1540483477+((n>>>16)*59797<<16);switch(a){case 3:n^=(255&e.charCodeAt(i+2))<<16;case 2:n^=(255&e.charCodeAt(i+1))<<8;case 1:n^=255&e.charCodeAt(i),n=(65535&n)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,(((n=(65535&n)*1540483477+((n>>>16)*59797<<16))^n>>>15)>>>0).toString(36)},s={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},o=n(5042),l=/[A-Z]|^ms/g,u=/_EMO_([^_]+?)_([^]*?)_EMO_/g,c=function(e){return 45===e.charCodeAt(1)},h=function(e){return null!=e&&"boolean"!=typeof e},d=(0,o.Z)(function(e){return c(e)?e:e.replace(l,"-$&").toLowerCase()}),p=function(e,r){switch(e){case"animation":case"animationName":if("string"==typeof r)return r.replace(u,function(e,r,n){return i={name:r,styles:n,next:i},r})}return 1===s[e]||c(e)||"number"!=typeof r||0===r?r:r+"px"};function f(e,r,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return i={name:n.name,styles:n.styles,next:i},n.name;if(void 0!==n.styles){var a=n.next;if(void 0!==a)for(;void 0!==a;)i={name:a.name,styles:a.styles,next:i},a=a.next;return n.styles+";"}return function(e,r,n){var i="";if(Array.isArray(n))for(var a=0;a<n.length;a++)i+=f(e,r,n[a])+";";else for(var s in n){var o=n[s];if("object"!=typeof o)null!=r&&void 0!==r[o]?i+=s+"{"+r[o]+"}":h(o)&&(i+=d(s)+":"+p(s,o)+";");else if(Array.isArray(o)&&"string"==typeof o[0]&&(null==r||void 0===r[o[0]]))for(var l=0;l<o.length;l++)h(o[l])&&(i+=d(s)+":"+p(s,o[l])+";");else{var u=f(e,r,o);switch(s){case"animation":case"animationName":i+=d(s)+":"+u+";";break;default:i+=s+"{"+u+"}"}}}return i}(e,r,n);case"function":if(void 0!==e){var s=i,o=n(e);return i=s,f(e,r,o)}}if(null==r)return n;var l=r[n];return void 0!==l?l:n}var m=/label:\s*([^\s;\n{]+)\s*(;|$)/g,g=function(e,r,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var s,o=!0,l="";i=void 0;var u=e[0];null==u||void 0===u.raw?(o=!1,l+=f(n,r,u)):l+=u[0];for(var c=1;c<e.length;c++)l+=f(n,r,e[c]),o&&(l+=u[c]);m.lastIndex=0;for(var h="";null!==(s=m.exec(l));)h+="-"+s[1];return{name:a(l)+h,styles:l,next:i}}},6829:function(e,r,n){"use strict";n.d(r,{Z:function(){return y}});var i=n(7294),a=n(7462),s=n(5042),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,l=(0,s.Z)(function(e){return o.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&91>e.charCodeAt(2)}),u=n(1683),c=n(444),h=n(8137),d=n(7278),p=function(e){return"theme"!==e},f=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?l:p},m=function(e,r,n){var i;if(r){var a=r.shouldForwardProp;i=e.__emotion_forwardProp&&a?function(r){return e.__emotion_forwardProp(r)&&a(r)}:a}return"function"!=typeof i&&n&&(i=e.__emotion_forwardProp),i},g=function(e){var r=e.cache,n=e.serialized,i=e.isStringTag;return(0,c.hC)(r,n,i),(0,d.L)(function(){return(0,c.My)(r,n,i)}),null},v=(function e(r,n){var s,o,l=r.__emotion_real===r,d=l&&r.__emotion_base||r;void 0!==n&&(s=n.label,o=n.target);var p=m(r,n,l),v=p||f(d),y=!v("as");return function(){var x=arguments,b=l&&void 0!==r.__emotion_styles?r.__emotion_styles.slice(0):[];if(void 0!==s&&b.push("label:"+s+";"),null==x[0]||void 0===x[0].raw)b.push.apply(b,x);else{b.push(x[0][0]);for(var _=x.length,S=1;S<_;S++)b.push(x[S],x[0][S])}var w=(0,u.w)(function(e,r,n){var a=y&&e.as||d,s="",l=[],m=e;if(null==e.theme){for(var x in m={},e)m[x]=e[x];m.theme=(0,i.useContext)(u.T)}"string"==typeof e.className?s=(0,c.fp)(r.registered,l,e.className):null!=e.className&&(s=e.className+" ");var _=(0,h.O)(b.concat(l),r.registered,m);s+=r.key+"-"+_.name,void 0!==o&&(s+=" "+o);var S=y&&void 0===p?f(a):v,w={};for(var M in e)(!y||"as"!==M)&&S(M)&&(w[M]=e[M]);return w.className=s,w.ref=n,(0,i.createElement)(i.Fragment,null,(0,i.createElement)(g,{cache:r,serialized:_,isStringTag:"string"==typeof a}),(0,i.createElement)(a,w))});return w.displayName=void 0!==s?s:"Styled("+("string"==typeof d?d:d.displayName||d.name||"Component")+")",w.defaultProps=r.defaultProps,w.__emotion_real=w,w.__emotion_base=d,w.__emotion_styles=b,w.__emotion_forwardProp=p,Object.defineProperty(w,"toString",{value:function(){return"."+o}}),w.withComponent=function(r,i){return e(r,(0,a.Z)({},n,i,{shouldForwardProp:m(w,i,!0)})).apply(void 0,b)},w}}).bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(e){v[e]=v(e)});var y=v},7278:function(e,r,n){"use strict";n.d(r,{L:function(){return o},j:function(){return l}});var i,a=n(7294),s=!!(i||(i=n.t(a,2))).useInsertionEffect&&(i||(i=n.t(a,2))).useInsertionEffect,o=s||function(e){return e()},l=s||a.useLayoutEffect},444:function(e,r,n){"use strict";function i(e,r,n){var i="";return n.split(" ").forEach(function(n){void 0!==e[n]?r.push(e[n]+";"):i+=n+" "}),i}n.d(r,{My:function(){return s},fp:function(){return i},hC:function(){return a}});var a=function(e,r,n){var i=e.key+"-"+r.name;!1===n&&void 0===e.registered[i]&&(e.registered[i]=r.styles)},s=function(e,r,n){a(e,r,n);var i=e.key+"-"+r.name;if(void 0===e.inserted[r.name]){var s=r;do e.insert(r===s?"."+i:"",s,e.sheet,!0),s=s.next;while(void 0!==s)}}},2350:function(){},8679:function(e,r,n){"use strict";var i=n(9864),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function u(e){return i.isMemo(e)?o:l[e.$$typeof]||a}l[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l[i.Memo]=o;var c=Object.defineProperty,h=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(r,n,i){if("string"!=typeof n){if(m){var a=f(n);a&&a!==m&&e(r,a,i)}var o=h(n);d&&(o=o.concat(d(n)));for(var l=u(r),g=u(n),v=0;v<o.length;++v){var y=o[v];if(!s[y]&&!(i&&i[y])&&!(g&&g[y])&&!(l&&l[y])){var x=p(n,y);try{c(r,y,x)}catch(e){}}}}return r}},8554:function(e,r,n){e=n.nmd(e);var i,a,s,o,l,u,c,h,d,p,f="__lodash_hash_undefined__",m="[object Arguments]",g="[object Function]",v="[object Object]",y=/^\[object .+?Constructor\]$/,x=/^(?:0|[1-9]\d*)$/,b={};b["[object Float32Array]"]=b["[object Float64Array]"]=b["[object Int8Array]"]=b["[object Int16Array]"]=b["[object Int32Array]"]=b["[object Uint8Array]"]=b["[object Uint8ClampedArray]"]=b["[object Uint16Array]"]=b["[object Uint32Array]"]=!0,b[m]=b["[object Array]"]=b["[object ArrayBuffer]"]=b["[object Boolean]"]=b["[object DataView]"]=b["[object Date]"]=b["[object Error]"]=b[g]=b["[object Map]"]=b["[object Number]"]=b[v]=b["[object RegExp]"]=b["[object Set]"]=b["[object String]"]=b["[object WeakMap]"]=!1;var _="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,S="object"==typeof self&&self&&self.Object===Object&&self,w=_||S||Function("return this")(),M=r&&!r.nodeType&&r,T=M&&e&&!e.nodeType&&e,E=T&&T.exports===M,A=E&&_.process,C=function(){try{var e=T&&T.require&&T.require("util").types;if(e)return e;return A&&A.binding&&A.binding("util")}catch(e){}}(),R=C&&C.isTypedArray,P=Array.prototype,L=Function.prototype,k=Object.prototype,D=w["__core-js_shared__"],I=L.toString,O=k.hasOwnProperty,N=(u=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",z=k.toString,B=I.call(Object),F=RegExp("^"+I.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U=E?w.Buffer:void 0,V=w.Symbol,j=w.Uint8Array,H=U?U.allocUnsafe:void 0,W=(c=Object.getPrototypeOf,h=Object,function(e){return c(h(e))}),G=Object.create,q=k.propertyIsEnumerable,$=P.splice,X=V?V.toStringTag:void 0,Y=function(){try{var e=ep(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Z=U?U.isBuffer:void 0,J=Math.max,K=Date.now,Q=ep(w,"Map"),ee=ep(Object,"create"),et=function(){function e(){}return function(r){if(!eT(r))return{};if(G)return G(r);e.prototype=r;var n=new e;return e.prototype=void 0,n}}();function er(e){var r=-1,n=null==e?0:e.length;for(this.clear();++r<n;){var i=e[r];this.set(i[0],i[1])}}function en(e){var r=-1,n=null==e?0:e.length;for(this.clear();++r<n;){var i=e[r];this.set(i[0],i[1])}}function ei(e){var r=-1,n=null==e?0:e.length;for(this.clear();++r<n;){var i=e[r];this.set(i[0],i[1])}}function ea(e){var r=this.__data__=new en(e);this.size=r.size}function es(e,r,n){(void 0===n||ey(e[r],n))&&(void 0!==n||r in e)||el(e,r,n)}function eo(e,r){for(var n=e.length;n--;)if(ey(e[n][0],r))return n;return -1}function el(e,r,n){"__proto__"==r&&Y?Y(e,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[r]=n}er.prototype.clear=function(){this.__data__=ee?ee(null):{},this.size=0},er.prototype.delete=function(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r},er.prototype.get=function(e){var r=this.__data__;if(ee){var n=r[e];return n===f?void 0:n}return O.call(r,e)?r[e]:void 0},er.prototype.has=function(e){var r=this.__data__;return ee?void 0!==r[e]:O.call(r,e)},er.prototype.set=function(e,r){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ee&&void 0===r?f:r,this},en.prototype.clear=function(){this.__data__=[],this.size=0},en.prototype.delete=function(e){var r=this.__data__,n=eo(r,e);return!(n<0)&&(n==r.length-1?r.pop():$.call(r,n,1),--this.size,!0)},en.prototype.get=function(e){var r=this.__data__,n=eo(r,e);return n<0?void 0:r[n][1]},en.prototype.has=function(e){return eo(this.__data__,e)>-1},en.prototype.set=function(e,r){var n=this.__data__,i=eo(n,e);return i<0?(++this.size,n.push([e,r])):n[i][1]=r,this},ei.prototype.clear=function(){this.size=0,this.__data__={hash:new er,map:new(Q||en),string:new er}},ei.prototype.delete=function(e){var r=ed(this,e).delete(e);return this.size-=r?1:0,r},ei.prototype.get=function(e){return ed(this,e).get(e)},ei.prototype.has=function(e){return ed(this,e).has(e)},ei.prototype.set=function(e,r){var n=ed(this,e),i=n.size;return n.set(e,r),this.size+=n.size==i?0:1,this},ea.prototype.clear=function(){this.__data__=new en,this.size=0},ea.prototype.delete=function(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n},ea.prototype.get=function(e){return this.__data__.get(e)},ea.prototype.has=function(e){return this.__data__.has(e)},ea.prototype.set=function(e,r){var n=this.__data__;if(n instanceof en){var i=n.__data__;if(!Q||i.length<199)return i.push([e,r]),this.size=++n.size,this;n=this.__data__=new ei(i)}return n.set(e,r),this.size=n.size,this};var eu=function(e,r,n){for(var i=-1,a=Object(e),s=n(e),o=s.length;o--;){var l=s[++i];if(!1===r(a[l],l,a))break}return e};function ec(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":X&&X in Object(e)?function(e){var r=O.call(e,X),n=e[X];try{e[X]=void 0;var i=!0}catch(e){}var a=z.call(e);return i&&(r?e[X]=n:delete e[X]),a}(e):z.call(e)}function eh(e){return eE(e)&&ec(e)==m}function ed(e,r){var n,i=e.__data__;return("string"==(n=typeof r)||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof r?"string":"hash"]:i.map}function ep(e,r){var n=null==e?void 0:e[r];return!(!eT(n)||N&&N in n)&&(ew(n)?F:y).test(function(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(n))?n:void 0}function ef(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&x.test(e))&&e>-1&&e%1==0&&e<r}function em(e){var r=e&&e.constructor,n="function"==typeof r&&r.prototype||k;return e===n}function eg(e,r){if(("constructor"!==r||"function"!=typeof e[r])&&"__proto__"!=r)return e[r]}var ev=(i=Y?function(e,r){return Y(e,"toString",{configurable:!0,enumerable:!1,value:function(){return r},writable:!0})}:eP,a=0,s=0,function(){var e=K(),r=16-(e-s);if(s=e,r>0){if(++a>=800)return arguments[0]}else a=0;return i.apply(void 0,arguments)});function ey(e,r){return e===r||e!=e&&r!=r}var ex=eh(function(){return arguments}())?eh:function(e){return eE(e)&&O.call(e,"callee")&&!q.call(e,"callee")},eb=Array.isArray;function e_(e){return null!=e&&eM(e.length)&&!ew(e)}var eS=Z||function(){return!1};function ew(e){if(!eT(e))return!1;var r=ec(e);return r==g||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}function eM(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function eT(e){var r=typeof e;return null!=e&&("object"==r||"function"==r)}function eE(e){return null!=e&&"object"==typeof e}var eA=R?function(e){return R(e)}:function(e){return eE(e)&&eM(e.length)&&!!b[ec(e)]};function eC(e){return e_(e)?function(e,r){var n=eb(e),i=!n&&ex(e),a=!n&&!i&&eS(e),s=!n&&!i&&!a&&eA(e),o=n||i||a||s,l=o?function(e,r){for(var n=-1,i=Array(e);++n<e;)i[n]=r(n);return i}(e.length,String):[],u=l.length;for(var c in e)(r||O.call(e,c))&&!(o&&("length"==c||a&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ef(c,u)))&&l.push(c);return l}(e,!0):function(e){if(!eT(e))return function(e){var r=[];if(null!=e)for(var n in Object(e))r.push(n);return r}(e);var r=em(e),n=[];for(var i in e)"constructor"==i&&(r||!O.call(e,i))||n.push(i);return n}(e)}var eR=(d=function(e,r,n,i){!function e(r,n,i,a,s){r!==n&&eu(n,function(o,l){if(s||(s=new ea),eT(o))(function(e,r,n,i,a,s,o){var l=eg(e,n),u=eg(r,n),c=o.get(u);if(c){es(e,n,c);return}var h=s?s(l,u,n+"",e,r,o):void 0,d=void 0===h;if(d){var p,f,m=eb(u),g=!m&&eS(u),y=!m&&!g&&eA(u);h=u,m||g||y?eb(l)?h=l:eE(l)&&e_(l)?h=function(e,r){var n=-1,i=e.length;for(r||(r=Array(i));++n<i;)r[n]=e[n];return r}(l):g?(d=!1,h=function(e,r){if(r)return e.slice();var n=e.length,i=H?H(n):new e.constructor(n);return e.copy(i),i}(u,!0)):y?(d=!1,f=new(p=u.buffer).constructor(p.byteLength),new j(f).set(new j(p)),h=new u.constructor(f,u.byteOffset,u.length)):h=[]:function(e){if(!eE(e)||ec(e)!=v)return!1;var r=W(e);if(null===r)return!0;var n=O.call(r,"constructor")&&r.constructor;return"function"==typeof n&&n instanceof n&&I.call(n)==B}(u)||ex(u)?(h=l,ex(l)?h=function(e,r,n,i){var a=!n;n||(n={});for(var s=-1,o=r.length;++s<o;){var l=r[s],u=i?i(n[l],e[l],l,n,e):void 0;void 0===u&&(u=e[l]),a?el(n,l,u):function(e,r,n){var i=e[r];O.call(e,r)&&ey(i,n)&&(void 0!==n||r in e)||el(e,r,n)}(n,l,u)}return n}(l,eC(l)):(!eT(l)||ew(l))&&(h="function"!=typeof u.constructor||em(u)?{}:et(W(u)))):d=!1}d&&(o.set(u,h),a(h,u,i,s,o),o.delete(u)),es(e,n,h)})(r,n,l,i,e,a,s);else{var u=a?a(eg(r,l),o,l+"",r,n,s):void 0;void 0===u&&(u=o),es(r,l,u)}},eC)}(e,r,n,i)},ev((o=p=function(e,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(a=d.length>3&&"function"==typeof a?(i--,a):void 0,s&&function(e,r,n){if(!eT(n))return!1;var i=typeof r;return("number"==i?!!(e_(n)&&ef(r,n.length)):"string"==i&&(r in n))&&ey(n[r],e)}(r[0],r[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++n<i;){var o=r[n];o&&d(e,o,n,a)}return e},l=J((l=void 0,o.length-1),0),function(){for(var e=arguments,r=-1,n=J(e.length-l,0),i=Array(n);++r<n;)i[r]=e[l+r];r=-1;for(var a=Array(l+1);++r<l;)a[r]=e[r];return a[l]=eP(i),function(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}(o,this,a)}),p+""));function eP(e){return e}e.exports=eR},3454:function(e,r,n){"use strict";var i,a;e.exports=(null==(i=n.g.process)?void 0:i.env)&&"object"==typeof(null==(a=n.g.process)?void 0:a.env)?n.g.process:n(7663)},1118:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(7661)}])},227:function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDomainLocale=function(e,r,n,i){return!1},("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},9749:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(6495).Z,a=n(2648).Z,s=n(1598).Z,o=n(7273).Z,l=s(n(7294)),u=a(n(3121)),c=n(2675),h=n(139),d=n(8730);n(7238);var p=a(n(9824));let f={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/",loader:"akamai",dangerouslyAllowSVG:!1,unoptimized:!0};function m(e){return void 0!==e.default}function g(e){return"number"==typeof e||void 0===e?e:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function v(e,r,n,a,s,o,l){if(!e||e["data-loaded-src"]===r)return;e["data-loaded-src"]=r;let u="decode"in e?e.decode():Promise.resolve();u.catch(()=>{}).then(()=>{if(e.parentNode){if("blur"===n&&o(!0),null==a?void 0:a.current){let r=new Event("load");Object.defineProperty(r,"target",{writable:!1,value:e});let n=!1,s=!1;a.current(i({},r,{nativeEvent:r,currentTarget:e,target:e,isDefaultPrevented:()=>n,isPropagationStopped:()=>s,persist:()=>{},preventDefault:()=>{n=!0,r.preventDefault()},stopPropagation:()=>{s=!0,r.stopPropagation()}}))}(null==s?void 0:s.current)&&s.current(e)}})}let y=l.forwardRef((e,r)=>{var{imgAttributes:n,heightInt:a,widthInt:s,qualityInt:u,className:c,imgStyle:h,blurStyle:d,isLazy:p,fill:f,placeholder:m,loading:g,srcString:y,config:x,unoptimized:b,loader:_,onLoadRef:S,onLoadingCompleteRef:w,setBlurComplete:M,setShowAltText:T,onLoad:E,onError:A}=e,C=o(e,["imgAttributes","heightInt","widthInt","qualityInt","className","imgStyle","blurStyle","isLazy","fill","placeholder","loading","srcString","config","unoptimized","loader","onLoadRef","onLoadingCompleteRef","setBlurComplete","setShowAltText","onLoad","onError"]);return g=p?"lazy":g,l.default.createElement(l.default.Fragment,null,l.default.createElement("img",Object.assign({},C,n,{width:s,height:a,decoding:"async","data-nimg":f?"fill":"1",className:c,loading:g,style:i({},h,d),ref:l.useCallback(e=>{r&&("function"==typeof r?r(e):"object"==typeof r&&(r.current=e)),e&&(A&&(e.src=e.src),e.complete&&v(e,y,m,S,w,M,b))},[y,m,S,w,M,A,b,r]),onLoad:e=>{let r=e.currentTarget;v(r,y,m,S,w,M,b)},onError:e=>{T(!0),"blur"===m&&M(!0),A&&A(e)}})))}),x=l.forwardRef((e,r)=>{let n,a;var s,{src:v,sizes:x,unoptimized:b=!1,priority:_=!1,loading:S,className:w,quality:M,width:T,height:E,fill:A,style:C,onLoad:R,onLoadingComplete:P,placeholder:L="empty",blurDataURL:k,layout:D,objectFit:I,objectPosition:O,lazyBoundary:N,lazyRoot:z}=e,B=o(e,["src","sizes","unoptimized","priority","loading","className","quality","width","height","fill","style","onLoad","onLoadingComplete","placeholder","blurDataURL","layout","objectFit","objectPosition","lazyBoundary","lazyRoot"]);let F=l.useContext(d.ImageConfigContext),U=l.useMemo(()=>{let e=f||F||h.imageConfigDefault,r=[...e.deviceSizes,...e.imageSizes].sort((e,r)=>e-r),n=e.deviceSizes.sort((e,r)=>e-r);return i({},e,{allSizes:r,deviceSizes:n})},[F]),V=B,j=V.loader||p.default;delete V.loader;let H="__next_img_default"in j;if(H){if("custom"===U.loader)throw Error('Image with src "'.concat(v,'" is missing "loader" prop.')+"\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader")}else{let e=j;j=r=>{let{config:n}=r,i=o(r,["config"]);return e(i)}}if(D){"fill"===D&&(A=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[D];e&&(C=i({},C,e));let r={responsive:"100vw",fill:"100vw"}[D];r&&!x&&(x=r)}let W="",G=g(T),q=g(E);if("object"==typeof(s=v)&&(m(s)||void 0!==s.src)){let e=m(v)?v.default:v;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ".concat(JSON.stringify(e)));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ".concat(JSON.stringify(e)));if(n=e.blurWidth,a=e.blurHeight,k=k||e.blurDataURL,W=e.src,!A){if(G||q){if(G&&!q){let r=G/e.width;q=Math.round(e.height*r)}else if(!G&&q){let r=q/e.height;G=Math.round(e.width*r)}}else G=e.width,q=e.height}}let $=!_&&("lazy"===S||void 0===S);((v="string"==typeof v?v:W).startsWith("data:")||v.startsWith("blob:"))&&(b=!0,$=!1),U.unoptimized&&(b=!0),H&&v.endsWith(".svg")&&!U.dangerouslyAllowSVG&&(b=!0);let[X,Y]=l.useState(!1),[Z,J]=l.useState(!1),K=g(M),Q=Object.assign(A?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:I,objectPosition:O}:{},Z?{}:{color:"transparent"},C),ee="blur"===L&&k&&!X?{backgroundSize:Q.objectFit||"cover",backgroundPosition:Q.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:'url("data:image/svg+xml;charset=utf-8,'.concat(c.getImageBlurSvg({widthInt:G,heightInt:q,blurWidth:n,blurHeight:a,blurDataURL:k}),'")')}:{},et=function(e){let{config:r,src:n,unoptimized:i,width:a,quality:s,sizes:o,loader:l}=e;if(i)return{src:n,srcSet:void 0,sizes:void 0};let{widths:u,kind:c}=function(e,r,n){let{deviceSizes:i,allSizes:a}=e;if(n){let e=/(^|\s)(1?\d?\d)vw/g,r=[];for(let i;i=e.exec(n);i)r.push(parseInt(i[2]));if(r.length){let e=.01*Math.min(...r);return{widths:a.filter(r=>r>=i[0]*e),kind:"w"}}return{widths:a,kind:"w"}}if("number"!=typeof r)return{widths:i,kind:"w"};let s=[...new Set([r,2*r].map(e=>a.find(r=>r>=e)||a[a.length-1]))];return{widths:s,kind:"x"}}(r,a,o),h=u.length-1;return{sizes:o||"w"!==c?o:"100vw",srcSet:u.map((e,i)=>"".concat(l({config:r,src:n,quality:s,width:e})," ").concat("w"===c?e:i+1).concat(c)).join(", "),src:l({config:r,src:n,quality:s,width:u[h]})}}({config:U,src:v,unoptimized:b,width:G,quality:K,sizes:x,loader:j}),er=v,en={imageSrcSet:et.srcSet,imageSizes:et.sizes,crossOrigin:V.crossOrigin},ei=l.useRef(R);l.useEffect(()=>{ei.current=R},[R]);let ea=l.useRef(P);l.useEffect(()=>{ea.current=P},[P]);let es=i({isLazy:$,imgAttributes:et,heightInt:q,widthInt:G,qualityInt:K,className:w,imgStyle:Q,blurStyle:ee,loading:S,config:U,fill:A,unoptimized:b,placeholder:L,loader:j,srcString:er,onLoadRef:ei,onLoadingCompleteRef:ea,setBlurComplete:Y,setShowAltText:J},V);return l.default.createElement(l.default.Fragment,null,l.default.createElement(y,Object.assign({},es,{ref:r})),_?l.default.createElement(u.default,null,l.default.createElement("link",Object.assign({key:"__nimg-"+et.src+et.srcSet+et.sizes,rel:"preload",as:"image",href:et.srcSet?void 0:et.src},en))):null)});r.default=x,("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},1551:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(2648).Z,a=n(7273).Z,s=i(n(7294)),o=n(1003),l=n(7795),u=n(4465),c=n(2692),h=n(8245),d=n(9246),p=n(227),f=n(3468);let m=new Set;function g(e,r,n,i){if(o.isLocalURL(r)){if(!i.bypassPrefetchedCheck){let a=void 0!==i.locale?i.locale:"locale"in e?e.locale:void 0,s=r+"%"+n+"%"+a;if(m.has(s))return;m.add(s)}Promise.resolve(e.prefetch(r,n,i)).catch(e=>{})}}function v(e){return"string"==typeof e?e:l.formatUrl(e)}let y=s.default.forwardRef(function(e,r){let n,i;let{href:l,as:m,children:y,prefetch:x,passHref:b,replace:_,shallow:S,scroll:w,locale:M,onClick:T,onMouseEnter:E,onTouchStart:A,legacyBehavior:C=!1}=e,R=a(e,["href","as","children","prefetch","passHref","replace","shallow","scroll","locale","onClick","onMouseEnter","onTouchStart","legacyBehavior"]);n=y,C&&("string"==typeof n||"number"==typeof n)&&(n=s.default.createElement("a",null,n));let P=!1!==x,L=s.default.useContext(c.RouterContext),k=s.default.useContext(h.AppRouterContext),D=null!=L?L:k,I=!L,{href:O,as:N}=s.default.useMemo(()=>{if(!L){let e=v(l);return{href:e,as:m?v(m):e}}let[e,r]=o.resolveHref(L,l,!0);return{href:e,as:m?o.resolveHref(L,m):r||e}},[L,l,m]),z=s.default.useRef(O),B=s.default.useRef(N);C&&(i=s.default.Children.only(n));let F=C?i&&"object"==typeof i&&i.ref:r,[U,V,j]=d.useIntersection({rootMargin:"200px"}),H=s.default.useCallback(e=>{(B.current!==N||z.current!==O)&&(j(),B.current=N,z.current=O),U(e),F&&("function"==typeof F?F(e):"object"==typeof F&&(F.current=e))},[N,F,O,j,U]);s.default.useEffect(()=>{D&&V&&P&&g(D,O,N,{locale:M})},[N,O,V,M,P,null==L?void 0:L.locale,D]);let W={ref:H,onClick(e){C||"function"!=typeof T||T(e),C&&i.props&&"function"==typeof i.props.onClick&&i.props.onClick(e),D&&!e.defaultPrevented&&function(e,r,n,i,a,l,u,c,h,d){let{nodeName:p}=e.currentTarget,f="A"===p.toUpperCase();if(f&&(function(e){let{target:r}=e.currentTarget;return r&&"_self"!==r||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!o.isLocalURL(n)))return;e.preventDefault();let m=()=>{"beforePopState"in r?r[a?"replace":"push"](n,i,{shallow:l,locale:c,scroll:u}):r[a?"replace":"push"](i||n,{forceOptimisticNavigation:!d})};h?s.default.startTransition(m):m()}(e,D,O,N,_,S,w,M,I,P)},onMouseEnter(e){C||"function"!=typeof E||E(e),C&&i.props&&"function"==typeof i.props.onMouseEnter&&i.props.onMouseEnter(e),D&&(P||!I)&&g(D,O,N,{locale:M,priority:!0,bypassPrefetchedCheck:!0})},onTouchStart(e){C||"function"!=typeof A||A(e),C&&i.props&&"function"==typeof i.props.onTouchStart&&i.props.onTouchStart(e),D&&(P||!I)&&g(D,O,N,{locale:M,priority:!0,bypassPrefetchedCheck:!0})}};if(!C||b||"a"===i.type&&!("href"in i.props)){let e=void 0!==M?M:null==L?void 0:L.locale,r=(null==L?void 0:L.isLocaleDomain)&&p.getDomainLocale(N,e,null==L?void 0:L.locales,null==L?void 0:L.domainLocales);W.href=r||f.addBasePath(u.addLocale(N,e,null==L?void 0:L.defaultLocale))}return C?s.default.cloneElement(i,W):s.default.createElement("a",Object.assign({},R,W),n)});r.default=y,("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},9246:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useIntersection=function(e){let{rootRef:r,rootMargin:n,disabled:u}=e,c=u||!s,[h,d]=i.useState(!1),p=i.useRef(null),f=i.useCallback(e=>{p.current=e},[]);i.useEffect(()=>{if(s){if(c||h)return;let e=p.current;if(e&&e.tagName){let i=function(e,r,n){let{id:i,observer:a,elements:s}=function(e){let r;let n={root:e.root||null,margin:e.rootMargin||""},i=l.find(e=>e.root===n.root&&e.margin===n.margin);if(i&&(r=o.get(i)))return r;let a=new Map,s=new IntersectionObserver(e=>{e.forEach(e=>{let r=a.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;r&&n&&r(n)})},e);return r={id:n,observer:s,elements:a},l.push(n),o.set(n,r),r}(n);return s.set(e,r),a.observe(e),function(){if(s.delete(e),a.unobserve(e),0===s.size){a.disconnect(),o.delete(i);let e=l.findIndex(e=>e.root===i.root&&e.margin===i.margin);e>-1&&l.splice(e,1)}}}(e,e=>e&&d(e),{root:null==r?void 0:r.current,rootMargin:n});return i}}else if(!h){let e=a.requestIdleCallback(()=>d(!0));return()=>a.cancelIdleCallback(e)}},[c,n,r,h,p.current]);let m=i.useCallback(()=>{d(!1)},[]);return[f,h,m]};var i=n(7294),a=n(4686);let s="function"==typeof IntersectionObserver,o=new Map,l=[];("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},2675:function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getImageBlurSvg=function(e){let{widthInt:r,heightInt:n,blurWidth:i,blurHeight:a,blurDataURL:s}=e,o=i||r,l=a||n,u=s.startsWith("data:image/jpeg")?"%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'/%3E%3C/feComponentTransfer%3E%":"";return o&&l?"%3Csvg xmlns='http%3A//www.w3.org/2000/svg' viewBox='0 0 ".concat(o," ").concat(l,"'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='").concat(i&&a?"1":"20","'/%3E").concat(u,"%3C/filter%3E%3Cimage preserveAspectRatio='none' filter='url(%23b)' x='0' y='0' height='100%25' width='100%25' href='").concat(s,"'/%3E%3C/svg%3E"):"%3Csvg xmlns='http%3A//www.w3.org/2000/svg'%3E%3Cimage style='filter:blur(20px)' x='0' y='0' height='100%25' width='100%25' href='".concat(s,"'/%3E%3C/svg%3E")}},9824:function(e,r){"use strict";function n(e){let{config:r,src:n,width:i,quality:a}=e;return"".concat(r.path,"?url=").concat(encodeURIComponent(n),"&w=").concat(i,"&q=").concat(a||75)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n.__next_img_default=!0,r.default=n},2470:function(e,r,n){var i=n(3454);n(2350);var a=n(7294),s=a&&"object"==typeof a&&"default"in a?a:{default:a};function o(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=void 0!==i&&i.env&&!0,u=function(e){return"[object String]"===Object.prototype.toString.call(e)},c=function(){function e(e){var r=void 0===e?{}:e,n=r.name,i=void 0===n?"stylesheet":n,a=r.optimizeForSpeed,s=void 0===a?l:a;h(u(i),"`name` must be a string"),this._name=i,this._deletedRulePlaceholder="#"+i+"-deleted-rule____{}",h("boolean"==typeof s,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=s,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var o=document.querySelector('meta[property="csp-nonce"]');this._nonce=o?o.getAttribute("content"):null}var r,n=e.prototype;return n.setOptimizeForSpeed=function(e){h("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),h(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},n.isOptimizeForSpeed=function(){return this._optimizeForSpeed},n.inject=function(){var e=this;if(h(!this._injected,"sheet already injected"),this._injected=!0,this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(l||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(r,n){return"number"==typeof n?e._serverSheet.cssRules[n]={cssText:r}:e._serverSheet.cssRules.push({cssText:r}),n},deleteRule:function(r){e._serverSheet.cssRules[r]=null}}},n.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===e)return document.styleSheets[r]},n.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},n.insertRule=function(e,r){if(h(u(e),"`insertRule` accepts only strings"),this._optimizeForSpeed){var n=this.getSheet();"number"!=typeof r&&(r=n.cssRules.length);try{n.insertRule(e,r)}catch(r){return l||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var i=this._tags[r];this._tags.push(this.makeStyleTag(this._name,e,i))}return this._rulesCount++},n.replaceRule=function(e,r){if(this._optimizeForSpeed){var n=this.getSheet();if(r.trim()||(r=this._deletedRulePlaceholder),!n.cssRules[e])return e;n.deleteRule(e);try{n.insertRule(r,e)}catch(i){l||console.warn("StyleSheet: illegal rule: \n\n"+r+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),n.insertRule(this._deletedRulePlaceholder,e)}}else{var i=this._tags[e];h(i,"old rule at index `"+e+"` not found"),i.textContent=r}return e},n.deleteRule=function(e){if(this._optimizeForSpeed)this.replaceRule(e,"");else{var r=this._tags[e];h(r,"rule at index `"+e+"` not found"),r.parentNode.removeChild(r),this._tags[e]=null}},n.flush=function(){this._injected=!1,this._rulesCount=0,this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]},n.cssRules=function(){var e=this;return this._tags.reduce(function(r,n){return n?r=r.concat(Array.prototype.map.call(e.getSheetForTag(n).cssRules,function(r){return r.cssText===e._deletedRulePlaceholder?null:r})):r.push(null),r},[])},n.makeStyleTag=function(e,r,n){r&&h(u(r),"makeStyleTag accepts only strings as second parameter");var i=document.createElement("style");this._nonce&&i.setAttribute("nonce",this._nonce),i.type="text/css",i.setAttribute("data-"+e,""),r&&i.appendChild(document.createTextNode(r));var a=document.head||document.getElementsByTagName("head")[0];return n?a.insertBefore(i,n):a.appendChild(i),i},o(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),r&&o(e,r),e}();function h(e,r){if(!e)throw Error("StyleSheet: "+r+".")}var d=function(e){for(var r=5381,n=e.length;n;)r=33*r^e.charCodeAt(--n);return r>>>0},p={};function f(e,r){if(!r)return"jsx-"+e;var n=String(r),i=e+n;return p[i]||(p[i]="jsx-"+d(e+"-"+n)),p[i]}function m(e,r){var n=e+r;return p[n]||(p[n]=r.replace(/__jsx-style-dynamic-selector/g,e)),p[n]}var g=function(){function e(e){var r=void 0===e?{}:e,n=r.styleSheet,i=void 0===n?null:n,a=r.optimizeForSpeed,s=void 0!==a&&a;this._sheet=i||new c({name:"styled-jsx",optimizeForSpeed:s}),this._sheet.inject(),i&&"boolean"==typeof s&&(this._sheet.setOptimizeForSpeed(s),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var r=e.prototype;return r.add=function(e){var r=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,r){return e[r]=0,e},{}));var n=this.getIdAndRules(e),i=n.styleId,a=n.rules;if(i in this._instancesCounts){this._instancesCounts[i]+=1;return}var s=a.map(function(e){return r._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[i]=s,this._instancesCounts[i]=1},r.remove=function(e){var r=this,n=this.getIdAndRules(e).styleId;if(function(e,r){if(!e)throw Error("StyleSheetRegistry: "+r+".")}(n in this._instancesCounts,"styleId: `"+n+"` not found"),this._instancesCounts[n]-=1,this._instancesCounts[n]<1){var i=this._fromServer&&this._fromServer[n];i?(i.parentNode.removeChild(i),delete this._fromServer[n]):(this._indices[n].forEach(function(e){return r._sheet.deleteRule(e)}),delete this._indices[n]),delete this._instancesCounts[n]}},r.update=function(e,r){this.add(r),this.remove(e)},r.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},r.cssRules=function(){var e=this,r=this._fromServer?Object.keys(this._fromServer).map(function(r){return[r,e._fromServer[r]]}):[],n=this._sheet.cssRules();return r.concat(Object.keys(this._indices).map(function(r){return[r,e._indices[r].map(function(e){return n[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return Boolean(e[1])}))},r.styles=function(e){var r,n;return r=this.cssRules(),void 0===(n=e)&&(n={}),r.map(function(e){var r=e[0],i=e[1];return s.default.createElement("style",{id:"__"+r,key:"__"+r,nonce:n.nonce?n.nonce:void 0,dangerouslySetInnerHTML:{__html:i}})})},r.getIdAndRules=function(e){var r=e.children,n=e.dynamic,i=e.id;if(n){var a=f(i,n);return{styleId:a,rules:Array.isArray(r)?r.map(function(e){return m(a,e)}):[m(a,r)]}}return{styleId:f(i),rules:Array.isArray(r)?r:[r]}},r.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,r){return e[r.id.slice(2)]=r,e},{})},e}(),v=a.createContext(null);v.displayName="StyleSheetContext";var y=s.default.useInsertionEffect||s.default.useLayoutEffect,x=new g;function b(e){var r=x||a.useContext(v);return r&&y(function(){return r.add(e),function(){r.remove(e)}},[e.id,String(e.dynamic)]),null}b.dynamic=function(e){return e.map(function(e){return f(e[0],e[1])}).join(" ")},r.style=b},1857:function(e,r,n){"use strict";e.exports=n(2470).style},7661:function(e,r,n){"use strict";let i;n.r(r),n.d(r,{default:function(){return m2}});var a,s,o,l,u,c,h,d,p,f,m,g,v,y,x,b,_,S,w,M,T,E,A,C,R,P,L,k,D=n(5893),I=n(7294),O=n(917),N=`
  :root {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root {
      --chakra-vh: 100dvh;
    }
  }
`,z=()=>(0,D.jsx)(O.xB,{styles:N}),B=()=>(0,D.jsx)(O.xB,{styles:`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        font-feature-settings: 'kern';
      }

      *,
      *::before,
      *::after {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
      }

      main {
        display: block;
      }

      hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      pre,
      code,
      kbd,
      samp {
        font-family: SFMono-Regular,  Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      b,
      strong {
        font-weight: bold;
      }

      small {
        font-size: 80%;
      }

      sub,
      sup {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      sub {
        bottom: -0.25em;
      }

      sup {
        top: -0.5em;
      }

      img {
        border-style: none;
      }

      button,
      input,
      optgroup,
      select,
      textarea {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      button,
      input {
        overflow: visible;
      }

      button,
      select {
        text-transform: none;
      }

      button::-moz-focus-inner,
      [type="button"]::-moz-focus-inner,
      [type="reset"]::-moz-focus-inner,
      [type="submit"]::-moz-focus-inner {
        border-style: none;
        padding: 0;
      }

      fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      progress {
        vertical-align: baseline;
      }

      textarea {
        overflow: auto;
      }

      [type="checkbox"],
      [type="radio"] {
        box-sizing: border-box;
        padding: 0;
      }

      [type="number"]::-webkit-inner-spin-button,
      [type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      input[type="number"] {
        -moz-appearance: textfield;
      }

      [type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      [type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      details {
        display: block;
      }

      summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      body,
      blockquote,
      dl,
      dd,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      hr,
      figure,
      p,
      pre {
        margin: 0;
      }

      button {
        background: transparent;
        padding: 0;
      }

      fieldset {
        margin: 0;
        padding: 0;
      }

      ol,
      ul {
        margin: 0;
        padding: 0;
      }

      textarea {
        resize: vertical;
      }

      button,
      [role="button"] {
        cursor: pointer;
      }

      button::-moz-focus-inner {
        border: 0 !important;
      }

      table {
        border-collapse: collapse;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-size: inherit;
        font-weight: inherit;
      }

      button,
      input,
      optgroup,
      select,
      textarea {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      img,
      svg,
      video,
      canvas,
      audio,
      iframe,
      embed,
      object {
        display: block;
      }

      img,
      video {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible] :focus:not([data-focus-visible-added]):not([data-focus-visible-disabled]) {
        outline: none;
        box-shadow: none;
      }

      select::-ms-expand {
        display: none;
      }

      ${N}
    `}),F=n(6810),U=n(2498),V=n(3179),j=n(1759),H=n(6597),W=n(1683);function G(e){let{cssVarsRoot:r,theme:n,children:i}=e,a=(0,I.useMemo)(()=>(0,V.c0)(n),[n]);return(0,D.jsxs)(W.a,{theme:a,children:[(0,D.jsx)(q,{root:r}),i]})}function q({root:e=":host, :root"}){let r=[e,"[data-theme]"].join(",");return(0,D.jsx)(O.xB,{styles:e=>({[r]:e.__cssVars})})}var[$,X]=function(e={}){let{strict:r=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:i}=e,a=(0,I.createContext)(void 0);return a.displayName=i,[a.Provider,function e(){var i;let s=(0,I.useContext)(a);if(!s&&r){let r=Error(n);throw r.name="ContextError",null==(i=Error.captureStackTrace)||i.call(Error,r,e),r}return s},a]}({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function Y(){let{colorMode:e}=(0,U.If)();return(0,D.jsx)(O.xB,{styles:r=>{let n=(0,j.Wf)(r,"styles.global"),i=(0,H.Pu)(n,{theme:r,colorMode:e});if(!i)return;let a=(0,V.iv)(i)(r);return a}})}var Z={light:"chakra-ui-light",dark:"chakra-ui-dark"},J="chakra-ui-color-mode",K={ssr:!1,type:"localStorage",get(e){let r;if(!(null==globalThis?void 0:globalThis.document))return e;try{r=localStorage.getItem(J)||e}catch(e){}return r||e},set(e){try{localStorage.setItem(J,e)}catch(e){}}},Q=n(6245),ee=()=>{};function et(e,r){return"cookie"===e.type&&e.ssr?e.get(r):r}function er(e){let{value:r,children:n,options:{useSystemColorMode:i,initialColorMode:a,disableTransitionOnChange:s}={},colorModeManager:o=K}=e,l="dark"===a?"dark":"light",[u,c]=(0,I.useState)(()=>et(o,l)),[h,d]=(0,I.useState)(()=>et(o)),{getSystemTheme:p,setClassName:f,setDataset:m,addListener:g}=(0,I.useMemo)(()=>(function(e={}){let{preventTransition:r=!0}=e,n={setDataset:e=>{let i=r?n.preventTransition():void 0;document.documentElement.dataset.theme=e,document.documentElement.style.colorScheme=e,null==i||i()},setClassName(e){document.body.classList.add(e?Z.dark:Z.light),document.body.classList.remove(e?Z.light:Z.dark)},query:()=>window.matchMedia("(prefers-color-scheme: dark)"),getSystemTheme(e){var r;let i=null!=(r=n.query().matches)?r:"dark"===e;return i?"dark":"light"},addListener(e){let r=n.query(),i=r=>{e(r.matches?"dark":"light")};return"function"==typeof r.addListener?r.addListener(i):r.addEventListener("change",i),()=>{"function"==typeof r.removeListener?r.removeListener(i):r.removeEventListener("change",i)}},preventTransition(){let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(e)})})}}};return n})({preventTransition:s}),[s]),v="system"!==a||u?u:h,y=(0,I.useCallback)(e=>{let r="system"===e?p():e;c(r),f("dark"===r),m(r),o.set(r)},[o,p,f,m]);(0,Q.G)(()=>{"system"===a&&d(p())},[]),(0,I.useEffect)(()=>{let e=o.get();if(e){y(e);return}if("system"===a){y("system");return}y(l)},[o,l,a,y]);let x=(0,I.useCallback)(()=>{y("dark"===v?"light":"dark")},[v,y]);(0,I.useEffect)(()=>{if(i)return g(y)},[i,g,y]);let b=(0,I.useMemo)(()=>({colorMode:null!=r?r:v,toggleColorMode:r?ee:x,setColorMode:r?ee:y,forced:void 0!==r}),[v,x,y,r]);return(0,D.jsx)(U.kc.Provider,{value:b,children:n})}er.displayName="ColorModeProvider";var en=(0,I.createContext)({getDocument:()=>document,getWindow:()=>window});function ei(e){let{children:r,environment:n,disabled:i}=e,a=(0,I.useRef)(null),s=(0,I.useMemo)(()=>n||{getDocument:()=>{var e,r;return null!=(r=null==(e=a.current)?void 0:e.ownerDocument)?r:document},getWindow:()=>{var e,r;return null!=(r=null==(e=a.current)?void 0:e.ownerDocument.defaultView)?r:window}},[n]);return(0,D.jsxs)(en.Provider,{value:s,children:[r,(!i||!n)&&(0,D.jsx)("span",{id:"__chakra_env",hidden:!0,ref:a})]})}en.displayName="EnvironmentContext",ei.displayName="EnvironmentProvider";var ea=e=>{let{children:r,colorModeManager:n,portalZIndex:i,resetCSS:a=!0,theme:s={},environment:o,cssVarsRoot:l,disableEnvironment:u}=e,c=(0,D.jsx)(ei,{environment:o,disabled:u,children:r});return(0,D.jsx)(G,{theme:s,cssVarsRoot:l,children:(0,D.jsxs)(er,{colorModeManager:n,options:s.config,children:[a?(0,D.jsx)(B,{}):(0,D.jsx)(z,{}),(0,D.jsx)(Y,{}),i?(0,D.jsx)(F.h,{zIndex:i,children:c}):c]})})},es={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},eo={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},el={...eo,max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch",container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}},eu={breakpoints:{base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},zIndices:{hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},radii:{none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},blur:{none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},colors:{transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},...es,sizes:el,shadows:{xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},space:eo,borders:{none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},transition:{property:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},easing:{"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},duration:{"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"}}};function ec(e,r={}){let n=!1;function i(r){let n=["container","root"].includes(null!=r?r:"")?[e]:[e,r],i=n.filter(Boolean).join("__"),a=`chakra-${i}`,s={className:a,selector:`.${a}`,toString:()=>r};return s}return{parts:function(...a){for(let e of(!function(){if(!n){n=!0;return}throw Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}(),a))r[e]=i(e);return ec(e,r)},toPart:i,extend:function(...n){for(let e of n)e in r||(r[e]=i(e));return ec(e,r)},selectors:function(){let e=Object.fromEntries(Object.entries(r).map(([e,r])=>[e,r.selector]));return e},classnames:function(){let e=Object.fromEntries(Object.entries(r).map(([e,r])=>[e,r.className]));return e},get keys(){return Object.keys(r)},__type:{}}}var eh=ec("accordion").parts("root","container","button","panel").extend("icon"),ed=ec("alert").parts("title","description","container").extend("icon","spinner"),ep=ec("avatar").parts("label","badge","container").extend("excessLabel","group"),ef=ec("breadcrumb").parts("link","item","container").extend("separator");ec("button").parts();var em=ec("checkbox").parts("control","icon","container").extend("label");ec("progress").parts("track","filledTrack").extend("label");var eg=ec("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),ev=ec("editable").parts("preview","input","textarea"),ey=ec("form").parts("container","requiredIndicator","helperText"),ex=ec("formError").parts("text","icon"),eb=ec("input").parts("addon","field","element"),e_=ec("list").parts("container","item","icon"),eS=ec("menu").parts("button","list","item").extend("groupTitle","command","divider"),ew=ec("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),eM=ec("numberinput").parts("root","field","stepperGroup","stepper");ec("pininput").parts("field");var eT=ec("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),eE=ec("progress").parts("label","filledTrack","track"),eA=ec("radio").parts("container","control","label"),eC=ec("select").parts("field","icon"),eR=ec("slider").parts("container","track","thumb","filledTrack","mark"),eP=ec("stat").parts("container","label","helpText","number","icon"),eL=ec("switch").parts("container","track","thumb"),ek=ec("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),eD=ec("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),eI=ec("tag").parts("container","label","closeButton"),eO=ec("card").parts("container","header","body","footer");function eN(e){let r=function(e,r="-"){return e.replace(/\s+/g,r)}(e.toString());return r.includes("\\.")?e:Number.isInteger(parseFloat(e.toString()))?e:r.replace(".","\\.")}function ez(e,r){var n,i;let a=function(e,r=""){return`--${function(e,r=""){return[r,eN(e)].filter(Boolean).join("-")}(e,r)}`}(e,null==r?void 0:r.prefix);return{variable:a,reference:(n="string"==typeof(i=null==r?void 0:r.fallback)?i:null==i?void 0:i.reference,`var(${eN(a)}${n?`, ${n}`:""})`)}}var eB=n(5432);function eF(e){return(0,eB.Kn)(e)&&e.reference?e.reference:String(e)}var eU=(e,...r)=>r.map(eF).join(` ${e} `).replace(/calc/g,""),eV=(...e)=>`calc(${eU("+",...e)})`,ej=(...e)=>`calc(${eU("-",...e)})`,eH=(...e)=>`calc(${eU("*",...e)})`,eW=(...e)=>`calc(${eU("/",...e)})`,eG=e=>{let r=eF(e);return null==r||Number.isNaN(parseFloat(r))?eH(r,-1):String(r).startsWith("-")?String(r).slice(1):`-${r}`},eq=Object.assign(e=>({add:(...r)=>eq(eV(e,...r)),subtract:(...r)=>eq(ej(e,...r)),multiply:(...r)=>eq(eH(e,...r)),divide:(...r)=>eq(eW(e,...r)),negate:()=>eq(eG(e)),toString:()=>e.toString()}),{add:eV,subtract:ej,multiply:eH,divide:eW,negate:eG}),{defineMultiStyleConfig:e$,definePartsStyle:eX}=(0,V.D)(eL.keys),eY=ez("switch-track-width"),eZ=ez("switch-track-height"),eJ=ez("switch-track-diff"),eK=eq.subtract(eY,eZ),eQ=ez("switch-thumb-x"),e0=ez("switch-bg"),e1=(0,V.k0)(e=>{let{colorScheme:r}=e;return{borderRadius:"full",p:"0.5",width:[eY.reference],height:[eZ.reference],transitionProperty:"common",transitionDuration:"fast",[e0.variable]:"colors.gray.300",_dark:{[e0.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[e0.variable]:`colors.${r}.500`,_dark:{[e0.variable]:`colors.${r}.200`}},bg:e0.reference}}),e2=(0,V.k0)({bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[eZ.reference],height:[eZ.reference],_checked:{transform:`translateX(${eQ.reference})`}}),e3=eX(e=>({container:{[eJ.variable]:eK,[eQ.variable]:eJ.reference,_rtl:{[eQ.variable]:eq(eJ).negate().toString()}},track:e1(e),thumb:e2})),e5=e$({baseStyle:e3,sizes:{sm:eX({container:{[eY.variable]:"1.375rem",[eZ.variable]:"sizes.3"}}),md:eX({container:{[eY.variable]:"1.875rem",[eZ.variable]:"sizes.4"}}),lg:eX({container:{[eY.variable]:"2.875rem",[eZ.variable]:"sizes.6"}})},defaultProps:{size:"md",colorScheme:"blue"}});function e4(e,r){return n=>"dark"===n.colorMode?r:e}function e6(e){let{orientation:r,vertical:n,horizontal:i}=e;return r?"vertical"===r?n:i:{}}var{defineMultiStyleConfig:e9,definePartsStyle:e7}=(0,V.D)(ek.keys),e8=e7({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),te=(0,V.k0)({"&[data-is-numeric=true]":{textAlign:"end"}}),tt={simple:e7(e=>{let{colorScheme:r}=e;return{th:{color:e4("gray.600","gray.400")(e),borderBottom:"1px",borderColor:e4(`${r}.100`,`${r}.700`)(e),...te},td:{borderBottom:"1px",borderColor:e4(`${r}.100`,`${r}.700`)(e),...te},caption:{color:e4("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),striped:e7(e=>{let{colorScheme:r}=e;return{th:{color:e4("gray.600","gray.400")(e),borderBottom:"1px",borderColor:e4(`${r}.100`,`${r}.700`)(e),...te},td:{borderBottom:"1px",borderColor:e4(`${r}.100`,`${r}.700`)(e),...te},caption:{color:e4("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:e4(`${r}.100`,`${r}.700`)(e)},td:{background:e4(`${r}.100`,`${r}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),unstyled:(0,V.k0)({})},tr=e9({baseStyle:e8,variants:tt,sizes:{sm:e7({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:e7({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:e7({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}});function tn(e,r,n){return Math.min(Math.max(e,n),r)}var ti=class extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}};function ta(e){if("string"!=typeof e)throw new ti(e);if("transparent"===e.trim().toLowerCase())return[0,0,0,0];let r=e.trim();r=tp.test(e)?function(e){let r=e.toLowerCase().trim(),n=to[function(e){let r=5381,n=e.length;for(;n;)r=33*r^e.charCodeAt(--n);return(r>>>0)%2341}(r)];if(!n)throw new ti(e);return`#${n}`}(e):e;let n=tu.exec(r);if(n){let e=Array.from(n).slice(1);return[...e.slice(0,3).map(e=>parseInt(tl(e,2),16)),parseInt(tl(e[3]||"f",2),16)/255]}let i=tc.exec(r);if(i){let e=Array.from(i).slice(1);return[...e.slice(0,3).map(e=>parseInt(e,16)),parseInt(e[3]||"ff",16)/255]}let a=th.exec(r);if(a){let e=Array.from(a).slice(1);return[...e.slice(0,3).map(e=>parseInt(e,10)),parseFloat(e[3]||"1")]}let s=td.exec(r);if(s){let[r,n,i,a]=Array.from(s).slice(1).map(parseFloat);if(tn(0,100,n)!==n||tn(0,100,i)!==i)throw new ti(e);return[...tm(r,n,i),Number.isNaN(a)?1:a]}throw new ti(e)}let ts=e=>parseInt(e.replace(/_/g,""),36),to="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,r)=>{let n=ts(r.substring(0,3)),i=ts(r.substring(3)).toString(16),a="";for(let e=0;e<6-i.length;e++)a+="0";return e[n]=`${a}${i}`,e},{}),tl=(e,r)=>Array.from(Array(r)).map(()=>e).join(""),tu=RegExp(`^#${tl("([a-f0-9])",3)}([a-f0-9])?$`,"i"),tc=RegExp(`^#${tl("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),th=RegExp(`^rgba?\\(\\s*(\\d+)\\s*${tl(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),td=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,tp=/^[a-z]+$/i,tf=e=>Math.round(255*e),tm=(e,r,n)=>{let i=n/100;if(0===r)return[i,i,i].map(tf);let a=(e%360+360)%360/60,s=(1-Math.abs(2*i-1))*(r/100),o=s*(1-Math.abs(a%2-1)),l=0,u=0,c=0;a>=0&&a<1?(l=s,u=o):a>=1&&a<2?(l=o,u=s):a>=2&&a<3?(u=s,c=o):a>=3&&a<4?(u=o,c=s):a>=4&&a<5?(l=o,c=s):a>=5&&a<6&&(l=s,c=o);let h=i-s/2,d=l+h,p=u+h,f=c+h;return[d,p,f].map(tf)};var tg=e=>0===Object.keys(e).length,tv=(e,r,n)=>{let i=function(e,r,n,i,a){for(r=r.split?r.split("."):r,i=0;i<r.length;i++)e=e?e[r[i]]:a;return e===a?n:e}(e,`colors.${r}`,r);try{return!function(e){let[r,n,i,a]=ta(e),s=e=>{let r=tn(0,255,e).toString(16);return 1===r.length?`0${r}`:r};s(r),s(n),s(i),a<1&&s(Math.round(255*a))}(i),i}catch{return null!=n?n:"#000000"}},ty=e=>{let[r,n,i]=ta(e);return(299*r+587*n+114*i)/1e3},tx=e=>r=>{let n=tv(r,e),i=ty(n);return i<128?"dark":"light"},tb=e=>r=>"dark"===tx(e)(r),t_=(e,r)=>n=>{let i=tv(n,e);return function(e,r){let[n,i,a,s]=ta(e);return`rgba(${tn(0,255,n).toFixed()}, ${tn(0,255,i).toFixed()}, ${tn(0,255,a).toFixed()}, ${parseFloat(tn(0,1,s-r).toFixed(3))})`}(i,1-r)};function tS(e="1rem",r="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${r} 25%,
    transparent 25%,
    transparent 50%,
    ${r} 50%,
    ${r} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${e} ${e}`}}var tw=()=>`#${Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0")}`,tM=(0,V.gJ)("tabs-color"),tT=(0,V.gJ)("tabs-bg"),tE=(0,V.gJ)("tabs-border-color"),{defineMultiStyleConfig:tA,definePartsStyle:tC}=(0,V.D)(eD.keys),tR=(0,V.k0)(e=>{let{orientation:r}=e;return{display:"vertical"===r?"flex":"block"}}),tP=(0,V.k0)(e=>{let{isFitted:r}=e;return{flex:r?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}}),tL=(0,V.k0)(e=>{let{align:r="start",orientation:n}=e;return{justifyContent:({end:"flex-end",center:"center",start:"flex-start"})[r],flexDirection:"vertical"===n?"column":"row"}}),tk=(0,V.k0)({p:4}),tD=tA({baseStyle:tC(e=>({root:tR(e),tab:tP(e),tablist:tL(e),tabpanel:tk})),sizes:{sm:tC({tab:{py:1,px:4,fontSize:"sm"}}),md:tC({tab:{fontSize:"md",py:2,px:4}}),lg:tC({tab:{fontSize:"lg",py:3,px:4}})},variants:{line:tC(e=>{let{colorScheme:r,orientation:n}=e,i="vertical"===n?"borderStart":"borderBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",["vertical"===n?"marginStart":"marginBottom"]:"-2px",_selected:{[tM.variable]:`colors.${r}.600`,_dark:{[tM.variable]:`colors.${r}.300`},borderColor:"currentColor"},_active:{[tT.variable]:"colors.gray.200",_dark:{[tT.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:tM.reference,bg:tT.reference}}}),enclosed:tC(e=>{let{colorScheme:r}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[tE.variable]:"transparent",_selected:{[tM.variable]:`colors.${r}.600`,[tE.variable]:"colors.white",_dark:{[tM.variable]:`colors.${r}.300`,[tE.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:tE.reference},color:tM.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),"enclosed-colored":tC(e=>{let{colorScheme:r}=e;return{tab:{border:"1px solid",borderColor:"inherit",[tT.variable]:"colors.gray.50",_dark:{[tT.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[tT.variable]:"colors.white",[tM.variable]:`colors.${r}.600`,_dark:{[tT.variable]:"colors.gray.800",[tM.variable]:`colors.${r}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:tM.reference,bg:tT.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),"soft-rounded":tC(e=>{let{colorScheme:r,theme:n}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:tv(n,`${r}.700`),bg:tv(n,`${r}.100`)}}}}),"solid-rounded":tC(e=>{let{colorScheme:r}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[tM.variable]:"colors.gray.600",_dark:{[tM.variable]:"inherit"},_selected:{[tM.variable]:"colors.white",[tT.variable]:`colors.${r}.600`,_dark:{[tM.variable]:"colors.gray.800",[tT.variable]:`colors.${r}.300`}},color:tM.reference,bg:tT.reference}}}),unstyled:tC({})},defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),tI=(0,V.k0)({px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold"}),tO=(0,V.gJ)("badge-bg"),tN=(0,V.gJ)("badge-color"),tz=(0,V.k0)(e=>{let{colorScheme:r,theme:n}=e,i=t_(`${r}.500`,.6)(n);return{[tO.variable]:`colors.${r}.500`,[tN.variable]:"colors.white",_dark:{[tO.variable]:i,[tN.variable]:"colors.whiteAlpha.800"},bg:tO.reference,color:tN.reference}}),tB=(0,V.k0)(e=>{let{colorScheme:r,theme:n}=e,i=t_(`${r}.200`,.16)(n);return{[tO.variable]:`colors.${r}.100`,[tN.variable]:`colors.${r}.800`,_dark:{[tO.variable]:i,[tN.variable]:`colors.${r}.200`},bg:tO.reference,color:tN.reference}}),tF=(0,V.k0)(e=>{let{colorScheme:r,theme:n}=e,i=t_(`${r}.200`,.8)(n);return{[tN.variable]:`colors.${r}.500`,_dark:{[tN.variable]:i},color:tN.reference,boxShadow:`inset 0 0 0px 1px ${tN.reference}`}}),tU=(0,V.fj)({baseStyle:tI,variants:{solid:tz,subtle:tB,outline:tF},defaultProps:{variant:"subtle",colorScheme:"gray"}}),{defineMultiStyleConfig:tV,definePartsStyle:tj}=(0,V.D)(eI.keys),tH=tj({container:(0,V.k0)({fontWeight:"medium",lineHeight:1.2,outline:0,borderRadius:"md",_focusVisible:{boxShadow:"outline"}}),label:(0,V.k0)({lineHeight:1.2,overflow:"visible"}),closeButton:(0,V.k0)({fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}})}),tW={sm:tj({container:{minH:"5",minW:"5",fontSize:"xs",px:"2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:tj({container:{minH:"6",minW:"6",fontSize:"sm",px:"2"}}),lg:tj({container:{minH:"8",minW:"8",fontSize:"md",px:"3"}})},tG=tV({variants:{subtle:tj(e=>{var r;return{container:null==(r=tU.variants)?void 0:r.subtle(e)}}),solid:tj(e=>{var r;return{container:null==(r=tU.variants)?void 0:r.solid(e)}}),outline:tj(e=>{var r;return{container:null==(r=tU.variants)?void 0:r.outline(e)}})},baseStyle:tH,sizes:tW,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:tq,defineMultiStyleConfig:t$}=(0,V.D)(eb.keys),tX=tq({field:{width:"100%",minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),tY={lg:(0,V.k0)({fontSize:"lg",px:"4",h:"12",borderRadius:"md"}),md:(0,V.k0)({fontSize:"md",px:"4",h:"10",borderRadius:"md"}),sm:(0,V.k0)({fontSize:"sm",px:"3",h:"8",borderRadius:"sm"}),xs:(0,V.k0)({fontSize:"xs",px:"2",h:"6",borderRadius:"sm"})};function tZ(e){let{focusBorderColor:r,errorBorderColor:n}=e;return{focusBorderColor:r||e4("blue.500","blue.300")(e),errorBorderColor:n||e4("red.500","red.300")(e)}}var tJ=t$({baseStyle:tX,sizes:{lg:tq({field:tY.lg,addon:tY.lg}),md:tq({field:tY.md,addon:tY.md}),sm:tq({field:tY.sm,addon:tY.sm}),xs:tq({field:tY.xs,addon:tY.xs})},variants:{outline:tq(e=>{let{theme:r}=e,{focusBorderColor:n,errorBorderColor:i}=tZ(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:e4("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:tv(r,i),boxShadow:`0 0 0 1px ${tv(r,i)}`},_focusVisible:{zIndex:1,borderColor:tv(r,n),boxShadow:`0 0 0 1px ${tv(r,n)}`}},addon:{border:"1px solid",borderColor:e4("inherit","whiteAlpha.50")(e),bg:e4("gray.100","whiteAlpha.300")(e)}}}),filled:tq(e=>{let{theme:r}=e,{focusBorderColor:n,errorBorderColor:i}=tZ(e);return{field:{border:"2px solid",borderColor:"transparent",bg:e4("gray.100","whiteAlpha.50")(e),_hover:{bg:e4("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:tv(r,i)},_focusVisible:{bg:"transparent",borderColor:tv(r,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:e4("gray.100","whiteAlpha.50")(e)}}}),flushed:tq(e=>{let{theme:r}=e,{focusBorderColor:n,errorBorderColor:i}=tZ(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:tv(r,i),boxShadow:`0px 1px 0px 0px ${tv(r,i)}`},_focusVisible:{borderColor:tv(r,n),boxShadow:`0px 1px 0px 0px ${tv(r,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),unstyled:tq({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}})},defaultProps:{size:"md",variant:"outline"}}),tK=(0,V.k0)({...null==(c=tJ.baseStyle)?void 0:c.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"}),tQ={outline:(0,V.k0)(e=>{var r,n;return null!=(n=null==(r=tJ.variants)?void 0:r.outline(e).field)?n:{}}),flushed:(0,V.k0)(e=>{var r,n;return null!=(n=null==(r=tJ.variants)?void 0:r.flushed(e).field)?n:{}}),filled:(0,V.k0)(e=>{var r,n;return null!=(n=null==(r=tJ.variants)?void 0:r.filled(e).field)?n:{}}),unstyled:null!=(d=null==(h=tJ.variants)?void 0:h.unstyled.field)?d:{}},t0={xs:null!=(f=null==(p=tJ.sizes)?void 0:p.xs.field)?f:{},sm:null!=(g=null==(m=tJ.sizes)?void 0:m.sm.field)?g:{},md:null!=(y=null==(v=tJ.sizes)?void 0:v.md.field)?y:{},lg:null!=(b=null==(x=tJ.sizes)?void 0:x.lg.field)?b:{}},t1=(0,V.fj)({baseStyle:tK,sizes:t0,variants:tQ,defaultProps:{size:"md",variant:"outline"}}),t2=ez("tooltip-bg"),t3=ez("tooltip-fg"),t5=ez("popper-arrow-bg"),t4=(0,V.k0)({bg:t2.reference,color:t3.reference,[t2.variable]:"colors.gray.700",[t3.variable]:"colors.whiteAlpha.900",_dark:{[t2.variable]:"colors.gray.300",[t3.variable]:"colors.gray.900"},[t5.variable]:t2.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"}),t6=(0,V.fj)({baseStyle:t4}),{defineMultiStyleConfig:t9,definePartsStyle:t7}=(0,V.D)(eE.keys),t8=(0,V.k0)(e=>{let{colorScheme:r,theme:n,isIndeterminate:i,hasStripe:a}=e,s=e4(tS(),tS("1rem","rgba(0,0,0,0.1)"))(e),o=e4(`${r}.500`,`${r}.200`)(e),l=`linear-gradient(
    to right,
    transparent 0%,
    ${tv(n,o)} 50%,
    transparent 100%
  )`;return{...!i&&a&&s,...i?{bgImage:l}:{bgColor:o}}}),re=(0,V.k0)({lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"}),rt=(0,V.k0)(e=>({bg:e4("gray.100","whiteAlpha.300")(e)})),rr=(0,V.k0)(e=>({transitionProperty:"common",transitionDuration:"slow",...t8(e)})),rn=t7(e=>({label:re,filledTrack:rr(e),track:rt(e)})),ri=t9({sizes:{xs:t7({track:{h:"1"}}),sm:t7({track:{h:"2"}}),md:t7({track:{h:"3"}}),lg:t7({track:{h:"4"}})},baseStyle:rn,defaultProps:{size:"md",colorScheme:"blue"}}),ra=e=>"function"==typeof e;function rs(e,...r){return ra(e)?e(...r):e}var{definePartsStyle:ro,defineMultiStyleConfig:rl}=(0,V.D)(em.keys),ru=(0,V.gJ)("checkbox-size"),rc=(0,V.k0)(e=>{let{colorScheme:r}=e;return{w:ru.reference,h:ru.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:e4(`${r}.500`,`${r}.200`)(e),borderColor:e4(`${r}.500`,`${r}.200`)(e),color:e4("white","gray.900")(e),_hover:{bg:e4(`${r}.600`,`${r}.300`)(e),borderColor:e4(`${r}.600`,`${r}.300`)(e)},_disabled:{borderColor:e4("gray.200","transparent")(e),bg:e4("gray.200","whiteAlpha.300")(e),color:e4("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:e4(`${r}.500`,`${r}.200`)(e),borderColor:e4(`${r}.500`,`${r}.200`)(e),color:e4("white","gray.900")(e)},_disabled:{bg:e4("gray.100","whiteAlpha.100")(e),borderColor:e4("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:e4("red.500","red.300")(e)}}}),rh=(0,V.k0)({_disabled:{cursor:"not-allowed"}}),rd=(0,V.k0)({userSelect:"none",_disabled:{opacity:.4}}),rp=(0,V.k0)({transitionProperty:"transform",transitionDuration:"normal"}),rf=rl({baseStyle:ro(e=>({icon:rp,container:rh,control:rs(rc,e),label:rd})),sizes:{sm:ro({control:{[ru.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:ro({control:{[ru.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:ro({control:{[ru.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:rm,definePartsStyle:rg}=(0,V.D)(eA.keys),rv=(0,V.k0)(e=>{var r;let n=null==(r=rs(rf.baseStyle,e))?void 0:r.control;return{...n,borderRadius:"full",_checked:{...null==n?void 0:n._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}}),ry=rm({baseStyle:rg(e=>{var r,n;return{label:null==(r=rf.baseStyle)?void 0:r.call(rf,e).label,container:null==(n=rf.baseStyle)?void 0:n.call(rf,e).container,control:rv(e)}}),sizes:{md:rg({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:rg({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:rg({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:rx,definePartsStyle:rb}=(0,V.D)(eC.keys),r_=(0,V.gJ)("select-bg"),rS=rb({field:(0,V.k0)({...null==(_=tJ.baseStyle)?void 0:_.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:r_.reference,[r_.variable]:"colors.white",_dark:{[r_.variable]:"colors.gray.700"},"> option, > optgroup":{bg:r_.reference}}),icon:(0,V.k0)({width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}})}),rw=(0,V.k0)({paddingInlineEnd:"8"}),rM=rx({baseStyle:rS,sizes:{lg:{...null==(S=tJ.sizes)?void 0:S.lg,field:{...null==(w=tJ.sizes)?void 0:w.lg.field,...rw}},md:{...null==(M=tJ.sizes)?void 0:M.md,field:{...null==(T=tJ.sizes)?void 0:T.md.field,...rw}},sm:{...null==(E=tJ.sizes)?void 0:E.sm,field:{...null==(A=tJ.sizes)?void 0:A.sm.field,...rw}},xs:{...null==(C=tJ.sizes)?void 0:C.xs,field:{...null==(R=tJ.sizes)?void 0:R.xs.field,...rw},icon:{insetEnd:"1"}}},variants:tJ.variants,defaultProps:tJ.defaultProps}),rT=(0,V.gJ)("skeleton-start-color"),rE=(0,V.gJ)("skeleton-end-color"),rA=(0,V.k0)({[rT.variable]:"colors.gray.100",[rE.variable]:"colors.gray.400",_dark:{[rT.variable]:"colors.gray.800",[rE.variable]:"colors.gray.600"},background:rT.reference,borderColor:rE.reference,opacity:.7,borderRadius:"sm"}),rC=(0,V.fj)({baseStyle:rA}),rR=(0,V.gJ)("skip-link-bg"),rP=(0,V.k0)({borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[rR.variable]:"colors.white",_dark:{[rR.variable]:"colors.gray.700"},bg:rR.reference}}),rL=(0,V.fj)({baseStyle:rP}),{defineMultiStyleConfig:rk,definePartsStyle:rD}=(0,V.D)(eR.keys),rI=(0,V.gJ)("slider-thumb-size"),rO=(0,V.gJ)("slider-track-size"),rN=(0,V.gJ)("slider-bg"),rz=(0,V.k0)(e=>{let{orientation:r}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...e6({orientation:r,vertical:{h:"100%"},horizontal:{w:"100%"}})}}),rB=(0,V.k0)(e=>{let r=e6({orientation:e.orientation,horizontal:{h:rO.reference},vertical:{w:rO.reference}});return{...r,overflow:"hidden",borderRadius:"sm",[rN.variable]:"colors.gray.200",_dark:{[rN.variable]:"colors.whiteAlpha.200"},_disabled:{[rN.variable]:"colors.gray.300",_dark:{[rN.variable]:"colors.whiteAlpha.300"}},bg:rN.reference}}),rF=(0,V.k0)(e=>{let{orientation:r}=e,n=e6({orientation:r,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}});return{...n,w:rI.reference,h:rI.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}}),rU=(0,V.k0)(e=>{let{colorScheme:r}=e;return{width:"inherit",height:"inherit",[rN.variable]:`colors.${r}.500`,_dark:{[rN.variable]:`colors.${r}.200`},bg:rN.reference}}),rV=rk({baseStyle:rD(e=>({container:rz(e),track:rB(e),thumb:rF(e),filledTrack:rU(e)})),sizes:{lg:rD({container:{[rI.variable]:"sizes.4",[rO.variable]:"sizes.1"}}),md:rD({container:{[rI.variable]:"sizes.3.5",[rO.variable]:"sizes.1"}}),sm:rD({container:{[rI.variable]:"sizes.2.5",[rO.variable]:"sizes.0.5"}})},defaultProps:{size:"md",colorScheme:"blue"}}),rj=ez("spinner-size"),rH=(0,V.k0)({width:[rj.reference],height:[rj.reference]}),rW={xs:(0,V.k0)({[rj.variable]:"sizes.3"}),sm:(0,V.k0)({[rj.variable]:"sizes.4"}),md:(0,V.k0)({[rj.variable]:"sizes.6"}),lg:(0,V.k0)({[rj.variable]:"sizes.8"}),xl:(0,V.k0)({[rj.variable]:"sizes.12"})},rG=(0,V.fj)({baseStyle:rH,sizes:rW,defaultProps:{size:"md"}}),{defineMultiStyleConfig:rq,definePartsStyle:r$}=(0,V.D)(eP.keys),rX=rq({baseStyle:r$({container:{},label:(0,V.k0)({fontWeight:"medium"}),helpText:(0,V.k0)({opacity:.8,marginBottom:"2"}),number:(0,V.k0)({verticalAlign:"baseline",fontWeight:"semibold"}),icon:(0,V.k0)({marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"})}),sizes:{md:r$({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},defaultProps:{size:"md"}}),rY=(0,V.gJ)("kbd-bg"),rZ=(0,V.k0)({[rY.variable]:"colors.gray.100",_dark:{[rY.variable]:"colors.whiteAlpha.100"},bg:rY.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"}),rJ=(0,V.fj)({baseStyle:rZ}),rK=(0,V.k0)({transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}}),rQ=(0,V.fj)({baseStyle:rK}),{defineMultiStyleConfig:r0,definePartsStyle:r1}=(0,V.D)(e_.keys),r2=r0({baseStyle:r1({icon:(0,V.k0)({marginEnd:"2",display:"inline",verticalAlign:"text-bottom"})})}),{defineMultiStyleConfig:r3,definePartsStyle:r5}=(0,V.D)(eS.keys),r4=(0,V.gJ)("menu-bg"),r6=(0,V.gJ)("menu-shadow"),r9=(0,V.k0)({[r4.variable]:"#fff",[r6.variable]:"shadows.sm",_dark:{[r4.variable]:"colors.gray.700",[r6.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:r4.reference,boxShadow:r6.reference}),r7=(0,V.k0)({py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[r4.variable]:"colors.gray.100",_dark:{[r4.variable]:"colors.whiteAlpha.100"}},_active:{[r4.variable]:"colors.gray.200",_dark:{[r4.variable]:"colors.whiteAlpha.200"}},_expanded:{[r4.variable]:"colors.gray.100",_dark:{[r4.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:r4.reference}),r8=(0,V.k0)({mx:4,my:2,fontWeight:"semibold",fontSize:"sm"}),ne=(0,V.k0)({opacity:.6}),nt=(0,V.k0)({border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6}),nr=r3({baseStyle:r5({button:(0,V.k0)({transitionProperty:"common",transitionDuration:"normal"}),list:r9,item:r7,groupTitle:r8,command:ne,divider:nt})}),{defineMultiStyleConfig:nn,definePartsStyle:ni}=(0,V.D)(ew.keys),na=(0,V.k0)({bg:"blackAlpha.600",zIndex:"modal"}),ns=(0,V.k0)(e=>{let{isCentered:r,scrollBehavior:n}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:r?"center":"flex-start",overflow:"inside"===n?"hidden":"auto",overscrollBehaviorY:"none"}}),no=(0,V.k0)(e=>{let{scrollBehavior:r}=e;return{borderRadius:"md",bg:e4("white","gray.700")(e),color:"inherit",my:"16",zIndex:"modal",maxH:"inside"===r?"calc(100% - 7.5rem)":void 0,boxShadow:e4("lg","dark-lg")(e)}}),nl=(0,V.k0)({px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"}),nu=(0,V.k0)({position:"absolute",top:"2",insetEnd:"3"}),nc=(0,V.k0)(e=>{let{scrollBehavior:r}=e;return{px:"6",py:"2",flex:"1",overflow:"inside"===r?"auto":void 0}}),nh=(0,V.k0)({px:"6",py:"4"});function nd(e){return"full"===e?ni({dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}):ni({dialog:{maxW:e}})}var np=nn({baseStyle:ni(e=>({overlay:na,dialogContainer:rs(ns,e),dialog:rs(no,e),header:nl,closeButton:nu,body:rs(nc,e),footer:nh})),sizes:{xs:nd("xs"),sm:nd("sm"),md:nd("md"),lg:nd("lg"),xl:nd("xl"),"2xl":nd("2xl"),"3xl":nd("3xl"),"4xl":nd("4xl"),"5xl":nd("5xl"),"6xl":nd("6xl"),full:nd("full")},defaultProps:{size:"md"}}),{defineMultiStyleConfig:nf,definePartsStyle:nm}=(0,V.D)(eM.keys),ng=ez("number-input-stepper-width"),nv=ez("number-input-input-padding"),ny=eq(ng).add("0.5rem").toString(),nx=ez("number-input-bg"),nb=ez("number-input-color"),n_=ez("number-input-border-color"),nS=(0,V.k0)({[ng.variable]:"sizes.6",[nv.variable]:ny}),nw=(0,V.k0)(e=>{var r,n;return null!=(n=null==(r=rs(tJ.baseStyle,e))?void 0:r.field)?n:{}}),nM=(0,V.k0)({width:ng.reference}),nT=(0,V.k0)({borderStart:"1px solid",borderStartColor:n_.reference,color:nb.reference,bg:nx.reference,[nb.variable]:"colors.chakra-body-text",[n_.variable]:"colors.chakra-border-color",_dark:{[nb.variable]:"colors.whiteAlpha.800",[n_.variable]:"colors.whiteAlpha.300"},_active:{[nx.variable]:"colors.gray.200",_dark:{[nx.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}});function nE(e){var r,n,i;let a=null==(r=tJ.sizes)?void 0:r[e],s={lg:"md",md:"md",sm:"sm",xs:"sm"},o=null!=(i=null==(n=a.field)?void 0:n.fontSize)?i:"md",l=es.fontSizes[o];return nm({field:{...a.field,paddingInlineEnd:nv.reference,verticalAlign:"top"},stepper:{fontSize:eq(l).multiply(.75).toString(),_first:{borderTopEndRadius:s[e]},_last:{borderBottomEndRadius:s[e],mt:"-1px",borderTopWidth:1}}})}var nA=nf({baseStyle:nm(e=>{var r;return{root:nS,field:null!=(r=rs(nw,e))?r:{},stepperGroup:nM,stepper:nT}}),sizes:{xs:nE("xs"),sm:nE("sm"),md:nE("md"),lg:nE("lg")},variants:tJ.variants,defaultProps:tJ.defaultProps}),nC=(0,V.k0)({...null==(P=tJ.baseStyle)?void 0:P.field,textAlign:"center"}),nR={lg:(0,V.k0)({fontSize:"lg",w:12,h:12,borderRadius:"md"}),md:(0,V.k0)({fontSize:"md",w:10,h:10,borderRadius:"md"}),sm:(0,V.k0)({fontSize:"sm",w:8,h:8,borderRadius:"sm"}),xs:(0,V.k0)({fontSize:"xs",w:6,h:6,borderRadius:"sm"})},nP={outline:(0,V.k0)(e=>{var r,n,i;return null!=(i=null==(n=rs(null==(r=tJ.variants)?void 0:r.outline,e))?void 0:n.field)?i:{}}),flushed:(0,V.k0)(e=>{var r,n,i;return null!=(i=null==(n=rs(null==(r=tJ.variants)?void 0:r.flushed,e))?void 0:n.field)?i:{}}),filled:(0,V.k0)(e=>{var r,n,i;return null!=(i=null==(n=rs(null==(r=tJ.variants)?void 0:r.filled,e))?void 0:n.field)?i:{}}),unstyled:null!=(k=null==(L=tJ.variants)?void 0:L.unstyled.field)?k:{}},nL=(0,V.fj)({baseStyle:nC,sizes:nR,variants:nP,defaultProps:tJ.defaultProps}),{defineMultiStyleConfig:nk,definePartsStyle:nD}=(0,V.D)(eT.keys),nI=ez("popper-bg"),nO=ez("popper-arrow-bg"),nN=ez("popper-arrow-shadow-color"),nz=nk({baseStyle:nD({popper:(0,V.k0)({zIndex:10}),content:(0,V.k0)({[nI.variable]:"colors.white",bg:nI.reference,[nO.variable]:nI.reference,[nN.variable]:"colors.gray.200",_dark:{[nI.variable]:"colors.gray.700",[nN.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}}),header:(0,V.k0)({px:3,py:2,borderBottomWidth:"1px"}),body:(0,V.k0)({px:3,py:2}),footer:(0,V.k0)({px:3,py:2,borderTopWidth:"1px"}),closeButton:(0,V.k0)({position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2})})}),{definePartsStyle:nB,defineMultiStyleConfig:nF}=(0,V.D)(eg.keys),nU=(0,V.gJ)("drawer-bg"),nV=(0,V.gJ)("drawer-box-shadow");function nj(e){return"full"===e?nB({dialog:{maxW:"100vw",h:"100vh"}}):nB({dialog:{maxW:e}})}var nH=(0,V.k0)({bg:"blackAlpha.600",zIndex:"overlay"}),nW=(0,V.k0)({display:"flex",zIndex:"modal",justifyContent:"center"}),nG=(0,V.k0)(e=>{let{isFullHeight:r}=e;return{...r&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[nU.variable]:"colors.white",[nV.variable]:"shadows.lg",_dark:{[nU.variable]:"colors.gray.700",[nV.variable]:"shadows.dark-lg"},bg:nU.reference,boxShadow:nV.reference}}),nq=(0,V.k0)({px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"}),n$=(0,V.k0)({position:"absolute",top:"2",insetEnd:"3"}),nX=(0,V.k0)({px:"6",py:"2",flex:"1",overflow:"auto"}),nY=(0,V.k0)({px:"6",py:"4"}),nZ=nF({baseStyle:nB(e=>({overlay:nH,dialogContainer:nW,dialog:rs(nG,e),header:nq,closeButton:n$,body:nX,footer:nY})),sizes:{xs:nj("xs"),sm:nj("md"),md:nj("lg"),lg:nj("2xl"),xl:nj("4xl"),full:nj("full")},defaultProps:{size:"xs"}}),{definePartsStyle:nJ,defineMultiStyleConfig:nK}=(0,V.D)(ev.keys),nQ=nK({baseStyle:nJ({preview:(0,V.k0)({borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"}),input:(0,V.k0)({borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}}),textarea:(0,V.k0)({borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}})})}),{definePartsStyle:n0,defineMultiStyleConfig:n1}=(0,V.D)(ey.keys),n2=(0,V.gJ)("form-control-color"),n3=n1({baseStyle:n0({container:{width:"100%",position:"relative"},requiredIndicator:(0,V.k0)({marginStart:"1",[n2.variable]:"colors.red.500",_dark:{[n2.variable]:"colors.red.300"},color:n2.reference}),helperText:(0,V.k0)({mt:"2",[n2.variable]:"colors.gray.600",_dark:{[n2.variable]:"colors.whiteAlpha.600"},color:n2.reference,lineHeight:"normal",fontSize:"sm"})})}),{definePartsStyle:n5,defineMultiStyleConfig:n4}=(0,V.D)(ex.keys),n6=(0,V.gJ)("form-error-color"),n9=n4({baseStyle:n5({text:(0,V.k0)({[n6.variable]:"colors.red.500",_dark:{[n6.variable]:"colors.red.300"},color:n6.reference,mt:"2",fontSize:"sm",lineHeight:"normal"}),icon:(0,V.k0)({marginEnd:"0.5em",[n6.variable]:"colors.red.500",_dark:{[n6.variable]:"colors.red.300"},color:n6.reference})})}),n7=(0,V.k0)({fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}}),n8=(0,V.fj)({baseStyle:n7}),ie=(0,V.k0)({fontFamily:"heading",fontWeight:"bold"}),it={"4xl":(0,V.k0)({fontSize:["6xl",null,"7xl"],lineHeight:1}),"3xl":(0,V.k0)({fontSize:["5xl",null,"6xl"],lineHeight:1}),"2xl":(0,V.k0)({fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]}),xl:(0,V.k0)({fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]}),lg:(0,V.k0)({fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]}),md:(0,V.k0)({fontSize:"xl",lineHeight:1.2}),sm:(0,V.k0)({fontSize:"md",lineHeight:1.2}),xs:(0,V.k0)({fontSize:"sm",lineHeight:1.2})},ir=(0,V.fj)({baseStyle:ie,sizes:it,defaultProps:{size:"xl"}}),{defineMultiStyleConfig:ii,definePartsStyle:ia}=(0,V.D)(ef.keys),is=ii({baseStyle:ia({link:(0,V.k0)({transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}})})}),io=(0,V.k0)({lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}}),il=(0,V.k0)(e=>{let{colorScheme:r,theme:n}=e;if("gray"===r)return{color:e4("inherit","whiteAlpha.900")(e),_hover:{bg:e4("gray.100","whiteAlpha.200")(e)},_active:{bg:e4("gray.200","whiteAlpha.300")(e)}};let i=t_(`${r}.200`,.12)(n),a=t_(`${r}.200`,.24)(n);return{color:e4(`${r}.600`,`${r}.200`)(e),bg:"transparent",_hover:{bg:e4(`${r}.50`,i)(e)},_active:{bg:e4(`${r}.100`,a)(e)}}}),iu=(0,V.k0)(e=>{let{colorScheme:r}=e,n=e4("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:"gray"===r?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...rs(il,e)}}),ic={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},ih=(0,V.k0)(e=>{var r;let{colorScheme:n}=e;if("gray"===n){let r=e4("gray.100","whiteAlpha.200")(e);return{bg:r,_hover:{bg:e4("gray.200","whiteAlpha.300")(e),_disabled:{bg:r}},_active:{bg:e4("gray.300","whiteAlpha.400")(e)}}}let{bg:i=`${n}.500`,color:a="white",hoverBg:s=`${n}.600`,activeBg:o=`${n}.700`}=null!=(r=ic[n])?r:{},l=e4(i,`${n}.200`)(e);return{bg:l,color:e4(a,"gray.800")(e),_hover:{bg:e4(s,`${n}.300`)(e),_disabled:{bg:l}},_active:{bg:e4(o,`${n}.400`)(e)}}}),id=(0,V.k0)(e=>{let{colorScheme:r}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:e4(`${r}.500`,`${r}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:e4(`${r}.700`,`${r}.500`)(e)}}}),ip=(0,V.k0)({bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"}),im={lg:(0,V.k0)({h:"12",minW:"12",fontSize:"lg",px:"6"}),md:(0,V.k0)({h:"10",minW:"10",fontSize:"md",px:"4"}),sm:(0,V.k0)({h:"8",minW:"8",fontSize:"sm",px:"3"}),xs:(0,V.k0)({h:"6",minW:"6",fontSize:"xs",px:"2"})},ig=(0,V.fj)({baseStyle:io,variants:{ghost:il,outline:iu,solid:ih,link:id,unstyled:ip},sizes:im,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}}),{definePartsStyle:iv,defineMultiStyleConfig:iy}=(0,V.D)(eO.keys),ix=(0,V.gJ)("card-bg"),ib=(0,V.gJ)("card-padding"),i_=(0,V.gJ)("card-shadow"),iS=(0,V.gJ)("card-radius"),iw=(0,V.gJ)("card-border-width","0"),iM=(0,V.gJ)("card-border-color"),iT=iv({container:{[ix.variable]:"colors.chakra-body-bg",backgroundColor:ix.reference,boxShadow:i_.reference,borderRadius:iS.reference,color:"chakra-body-text",borderWidth:iw.reference,borderColor:iM.reference},body:{padding:ib.reference,flex:"1 1 0%"},header:{padding:ib.reference},footer:{padding:ib.reference}}),iE={sm:iv({container:{[iS.variable]:"radii.base",[ib.variable]:"space.3"}}),md:iv({container:{[iS.variable]:"radii.md",[ib.variable]:"space.5"}}),lg:iv({container:{[iS.variable]:"radii.xl",[ib.variable]:"space.7"}})},iA=iy({baseStyle:iT,variants:{elevated:iv({container:{[i_.variable]:"shadows.base",_dark:{[ix.variable]:"colors.gray.700"}}}),outline:iv({container:{[iw.variable]:"1px",[iM.variable]:"colors.chakra-border-color"}}),filled:iv({container:{[ix.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[ib.variable]:0},header:{[ib.variable]:0},footer:{[ib.variable]:0}}},sizes:iE,defaultProps:{variant:"elevated",size:"md"}}),iC=ez("close-button-size"),iR=ez("close-button-bg"),iP=(0,V.k0)({w:[iC.reference],h:[iC.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[iR.variable]:"colors.blackAlpha.100",_dark:{[iR.variable]:"colors.whiteAlpha.100"}},_active:{[iR.variable]:"colors.blackAlpha.200",_dark:{[iR.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:iR.reference}),iL={lg:(0,V.k0)({[iC.variable]:"sizes.10",fontSize:"md"}),md:(0,V.k0)({[iC.variable]:"sizes.8",fontSize:"xs"}),sm:(0,V.k0)({[iC.variable]:"sizes.6",fontSize:"2xs"})},ik=(0,V.fj)({baseStyle:iP,sizes:iL,defaultProps:{size:"md"}}),{variants:iD,defaultProps:iI}=tU,iO=(0,V.k0)({fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm"}),iN=(0,V.fj)({baseStyle:iO,variants:iD,defaultProps:iI}),iz=(0,V.k0)({w:"100%",mx:"auto",maxW:"prose",px:"4"}),iB=(0,V.fj)({baseStyle:iz}),iF=(0,V.k0)({opacity:.6,borderColor:"inherit"}),iU=(0,V.k0)({borderStyle:"solid"}),iV=(0,V.k0)({borderStyle:"dashed"}),ij=(0,V.fj)({baseStyle:iF,variants:{solid:iU,dashed:iV},defaultProps:{variant:"solid"}}),{definePartsStyle:iH,defineMultiStyleConfig:iW}=(0,V.D)(eh.keys),iG=iW({baseStyle:iH({container:(0,V.k0)({borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}}),button:(0,V.k0)({transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"}),panel:(0,V.k0)({pt:"2",px:"4",pb:"5"}),icon:(0,V.k0)({fontSize:"1.25em"})})}),{definePartsStyle:iq,defineMultiStyleConfig:i$}=(0,V.D)(ed.keys),iX=(0,V.gJ)("alert-fg"),iY=(0,V.gJ)("alert-bg");function iZ(e){let{theme:r,colorScheme:n}=e,i=t_(`${n}.200`,.16)(r);return{light:`colors.${n}.100`,dark:i}}var iJ=i$({baseStyle:iq({container:{bg:iY.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:iX.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:iX.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}}),variants:{subtle:iq(e=>{let{colorScheme:r}=e,n=iZ(e);return{container:{[iX.variable]:`colors.${r}.500`,[iY.variable]:n.light,_dark:{[iX.variable]:`colors.${r}.200`,[iY.variable]:n.dark}}}}),"left-accent":iq(e=>{let{colorScheme:r}=e,n=iZ(e);return{container:{[iX.variable]:`colors.${r}.500`,[iY.variable]:n.light,_dark:{[iX.variable]:`colors.${r}.200`,[iY.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:iX.reference}}}),"top-accent":iq(e=>{let{colorScheme:r}=e,n=iZ(e);return{container:{[iX.variable]:`colors.${r}.500`,[iY.variable]:n.light,_dark:{[iX.variable]:`colors.${r}.200`,[iY.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:iX.reference}}}),solid:iq(e=>{let{colorScheme:r}=e;return{container:{[iX.variable]:"colors.white",[iY.variable]:`colors.${r}.500`,_dark:{[iX.variable]:"colors.gray.900",[iY.variable]:`colors.${r}.200`},color:iX.reference}}})},defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:iK,defineMultiStyleConfig:iQ}=(0,V.D)(ep.keys),i0=(0,V.gJ)("avatar-border-color"),i1=(0,V.gJ)("avatar-bg"),i2=(0,V.k0)({borderRadius:"full",border:"0.2em solid",[i0.variable]:"white",_dark:{[i0.variable]:"colors.gray.800"},borderColor:i0.reference}),i3=(0,V.k0)({[i1.variable]:"colors.gray.200",_dark:{[i1.variable]:"colors.whiteAlpha.400"},bgColor:i1.reference}),i5=(0,V.gJ)("avatar-background"),i4=(0,V.k0)(e=>{let{name:r,theme:n}=e,i=r?function(e){var r;let n=tw();return!e||tg(e)?n:e.string&&e.colors?function(e,r){let n=0;if(0===e.length)return r[0];for(let r=0;r<e.length;r+=1)n=e.charCodeAt(r)+((n<<5)-n),n&=n;return n=(n%r.length+r.length)%r.length,r[n]}(e.string,e.colors):e.string&&!e.colors?function(e){let r=0;if(0===e.length)return r.toString();for(let n=0;n<e.length;n+=1)r=e.charCodeAt(n)+((r<<5)-r),r&=r;let n="#";for(let e=0;e<3;e+=1){let i=r>>8*e&255;n+=`00${i.toString(16)}`.substr(-2)}return n}(e.string):e.colors&&!e.string?(r=e.colors)[Math.floor(Math.random()*r.length)]:n}({string:r}):"colors.gray.400",a=tb(i)(n),s="white";return a||(s="gray.800"),{bg:i5.reference,"&:not([data-loaded])":{[i5.variable]:i},color:s,[i0.variable]:"colors.white",_dark:{[i0.variable]:"colors.gray.800"},borderColor:i0.reference,verticalAlign:"top"}});function i6(e){let r="100%"!==e?el[e]:void 0;return iK({container:{width:e,height:e,fontSize:`calc(${null!=r?r:e} / 2.5)`},excessLabel:{width:e,height:e},label:{fontSize:`calc(${null!=r?r:e} / 2.5)`,lineHeight:"100%"!==e?null!=r?r:e:void 0}})}var i9=iQ({baseStyle:iK(e=>({badge:rs(i2,e),excessLabel:rs(i3,e),container:rs(i4,e)})),sizes:{"2xs":i6(4),xs:i6(6),sm:i6(8),md:i6(12),lg:i6(16),xl:i6(24),"2xl":i6(32),full:i6("100%")},defaultProps:{size:"md"}}),i7={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},i8={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color",wordWrap:"break-word"}}},ae={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},at={semanticTokens:i7,direction:"ltr",...eu,components:{Accordion:iG,Alert:iJ,Avatar:i9,Badge:tU,Breadcrumb:is,Button:ig,Checkbox:rf,CloseButton:ik,Code:iN,Container:iB,Divider:ij,Drawer:nZ,Editable:nQ,Form:n3,FormError:n9,FormLabel:n8,Heading:ir,Input:tJ,Kbd:rJ,Link:rQ,List:r2,Menu:nr,Modal:np,NumberInput:nA,PinInput:nL,Popover:nz,Progress:ri,Radio:ry,Select:rM,Skeleton:rC,SkipLink:rL,Slider:rV,Spinner:rG,Stat:rX,Switch:e5,Table:tr,Tabs:tD,Tag:tG,Textarea:t1,Tooltip:t6,Card:iA},styles:i8,config:ae},ar={semanticTokens:i7,direction:"ltr",components:{},...eu,styles:i8,config:ae},an=(e,r)=>e.find(e=>e.id===r);function ai(e,r){let n=aa(e,r),i=n?e[n].findIndex(e=>e.id===r):-1;return{position:n,index:i}}function aa(e,r){for(let[n,i]of Object.entries(e))if(an(i,r))return n}function as(e,r=[]){let n=(0,I.useRef)(e);return(0,I.useEffect)(()=>{n.current=e}),(0,I.useCallback)((...e)=>{var r;return null==(r=n.current)?void 0:r.call(n,...e)},r)}function ao(e,r){let n=(0,I.useRef)(!1),i=(0,I.useRef)(!1);(0,I.useEffect)(()=>{let r=n.current,a=r&&i.current;if(a)return e();i.current=!0},r),(0,I.useEffect)(()=>(n.current=!0,()=>{n.current=!1}),[])}var al=n(5947),au=n(1615),ac=n(4579),ah={initial:e=>{let{position:r}=e,n=["top","bottom"].includes(r)?"y":"x",i=["top-right","bottom-right"].includes(r)?1:-1;return"bottom"===r&&(i=1),{opacity:0,[n]:24*i}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},ad=(0,I.memo)(e=>{let{id:r,message:n,onCloseComplete:i,onRequestRemove:a,requestClose:s=!1,position:o="bottom",duration:l=5e3,containerStyle:u,motionVariants:c=ah,toastSpacing:h="0.5rem"}=e,[d,p]=(0,I.useState)(l),f=(0,al.hO)();ao(()=>{f||null==i||i()},[f]),ao(()=>{p(l)},[l]);let m=()=>p(null),g=()=>p(l),v=()=>{f&&a()};(0,I.useEffect)(()=>{f&&s&&a()},[f,s,a]),function(e,r){let n=as(e);(0,I.useEffect)(()=>{if(null==r)return;let e=null;return e=window.setTimeout(()=>{n()},r),()=>{e&&window.clearTimeout(e)}},[r,n])}(v,d);let y=(0,I.useMemo)(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:h,...u}),[u,h]),x=(0,I.useMemo)(()=>(function(e){let r=e.includes("right"),n=e.includes("left"),i="center";return r&&(i="flex-end"),n&&(i="flex-start"),{display:"flex",flexDirection:"column",alignItems:i}})(o),[o]);return(0,D.jsx)(au.E.li,{layout:!0,className:"chakra-toast",variants:c,initial:"initial",animate:"animate",exit:"exit",onHoverStart:m,onHoverEnd:g,custom:{position:o},style:x,children:(0,D.jsx)(ac.m.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:y,children:(0,eB.Pu)(n,{id:r,onClose:v})})})});ad.displayName="ToastComponent";var ap=n(6877);function af(e){return(0,D.jsx)(ap.J,{viewBox:"0 0 24 24",...e,children:(0,D.jsx)("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var am=n(5227),ag=n(295),[av,ay]=(0,am.k)({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[ax,ab]=(0,am.k)({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),a_={info:{icon:function(e){return(0,D.jsx)(ap.J,{viewBox:"0 0 24 24",...e,children:(0,D.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})},colorScheme:"blue"},warning:{icon:af,colorScheme:"orange"},success:{icon:function(e){return(0,D.jsx)(ap.J,{viewBox:"0 0 24 24",...e,children:(0,D.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})},colorScheme:"green"},error:{icon:af,colorScheme:"red"},loading:{icon:ag.$,colorScheme:"blue"}},aS=n(5059),aw=n(1639),aM=(0,aS.G)(function(e,r){var n;let{status:i="info",addRole:a=!0,...s}=(0,V.Lr)(e),o=null!=(n=e.colorScheme)?n:a_[i].colorScheme,l=(0,aw.jC)("Alert",{...e,colorScheme:o}),u={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...l.container};return(0,D.jsx)(av,{value:{status:i},children:(0,D.jsx)(ax,{value:l,children:(0,D.jsx)(ac.m.div,{role:a?"alert":void 0,ref:r,...s,className:(0,eB.cx)("chakra-alert",e.className),__css:u})})})});function aT(e){let{status:r}=ay(),n=a_[r].icon,i=ab(),a="loading"===r?i.spinner:i.icon;return(0,D.jsx)(ac.m.span,{display:"inherit",...e,className:(0,eB.cx)("chakra-alert__icon",e.className),__css:a,children:e.children||(0,D.jsx)(n,{h:"100%",w:"100%"})})}aM.displayName="Alert",aT.displayName="AlertIcon";var aE=(0,aS.G)(function(e,r){let n=ab();return(0,D.jsx)(ac.m.div,{ref:r,...e,className:(0,eB.cx)("chakra-alert__title",e.className),__css:n.title})});aE.displayName="AlertTitle";var aA=(0,aS.G)(function(e,r){let n=ab(),i={display:"inline",...n.description};return(0,D.jsx)(ac.m.div,{ref:r,...e,className:(0,eB.cx)("chakra-alert__desc",e.className),__css:i})});aA.displayName="AlertDescription";var aC=n(6989),aR=function(e){let r=e,n=new Set,i=e=>{r=e(r),n.forEach(e=>e())};return{getState:()=>r,subscribe:r=>(n.add(r),()=>{i(()=>e),n.delete(r)}),removeToast:(e,r)=>{i(n=>({...n,[r]:n[r].filter(r=>r.id!=e)}))},notify:(e,r)=>{let n=function(e,r={}){var n,i;aP+=1;let a=null!=(n=r.id)?n:aP,s=null!=(i=r.position)?i:"bottom";return{id:a,message:e,position:s,duration:r.duration,onCloseComplete:r.onCloseComplete,onRequestRemove:()=>aR.removeToast(String(a),s),status:r.status,requestClose:!1,containerStyle:r.containerStyle}}(e,r),{position:a,id:s}=n;return i(e=>{var r,i;let s=a.includes("top"),o=s?[n,...null!=(r=e[a])?r:[]]:[...null!=(i=e[a])?i:[],n];return{...e,[a]:o}}),s},update:(e,r)=>{e&&i(n=>{let i={...n},{position:a,index:s}=ai(i,e);return a&&-1!==s&&(i[a][s]={...i[a][s],...r,message:function(e={}){let{render:r,toastComponent:n=aL}=e,i=i=>"function"==typeof r?r({...i,...e}):(0,D.jsx)(n,{...i,...e});return i}(r)}),i})},closeAll:({positions:e}={})=>{i(r=>(null!=e?e:["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((e,n)=>(e[n]=r[n].map(e=>({...e,requestClose:!0})),e),{...r}))},close:e=>{i(r=>{let n=aa(r,e);return n?{...r,[n]:r[n].map(r=>r.id==e?{...r,requestClose:!0}:r)}:r})},isActive:e=>Boolean(ai(aR.getState(),e).position)}}({top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]}),aP=0,aL=e=>{let{status:r,variant:n="solid",id:i,title:a,isClosable:s,onClose:o,description:l,icon:u}=e,c=i?{root:`toast-${i}`,title:`toast-${i}-title`,description:`toast-${i}-description`}:void 0;return(0,D.jsxs)(aM,{addRole:!1,status:r,variant:n,id:null==c?void 0:c.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",children:[(0,D.jsx)(aT,{children:u}),(0,D.jsxs)(ac.m.div,{flex:"1",maxWidth:"100%",children:[a&&(0,D.jsx)(aE,{id:null==c?void 0:c.title,children:a}),l&&(0,D.jsx)(aA,{id:null==c?void 0:c.description,display:"block",children:l})]}),s&&(0,D.jsx)(aC.P,{size:"sm",onClick:o,position:"absolute",insetEnd:1,top:1})]})},ak=n(5820),aD=n(9598),[aI,aO]=(0,am.k)({name:"ToastOptionsContext",strict:!1}),aN=e=>{let r=(0,I.useSyncExternalStore)(aR.subscribe,aR.getState,aR.getState),{motionVariants:n,component:i=ad,portalProps:a}=e,s=Object.keys(r),o=s.map(e=>{let a=r[e];return(0,D.jsx)("ul",{role:"region","aria-live":"polite",id:`chakra-toast-manager-${e}`,style:function(e){let r=e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,n=e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,i=e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",a=e.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:5500,pointerEvents:"none",display:"flex",flexDirection:"column",margin:"top"===e||"bottom"===e?"0 auto":void 0,top:r,bottom:n,right:i,left:a}}(e),children:(0,D.jsx)(ak.M,{initial:!1,children:a.map(e=>(0,D.jsx)(i,{motionVariants:n,...e},e.id))})},e)});return(0,D.jsx)(aD.h,{...a,children:o})},az=e=>function({children:r,theme:n=e,toastOptions:i,...a}){return(0,D.jsxs)(ea,{theme:n,...a,children:[(0,D.jsx)(aI,{value:null==i?void 0:i.defaultOptions,children:r}),(0,D.jsx)(aN,{...i})]})},aB=az(at);az(ar);var aF=n(9008),aU=n.n(aF),aV=n(7297),aj=n(1664),aH=n.n(aj),aW=n(5675),aG=n.n(aW),aq=n(8911),a$=n(6829);function aX(){let e=(0,aV.Z)(['\nfont-weight"bold;\nfont-size: 18px;\ndisplay:inlin-flex;\nalign-items: center;\nheight: 30px:\nline-height: 20px;\npadding: 10px;\n\n&:hover img{\n    transform:rotate(20deg);\n}\n']);return aX=function(){return e},e}let aY=a$.Z.span(aX()),aZ=()=>{let e="/images/footprint".concat((0,U.ff)("","-dark"),".png");return(0,D.jsx)(aH(),{href:"/",children:(0,D.jsxs)(aY,{children:[(0,D.jsx)(aG(),{src:e,width:30,height:30,alt:"logo",quality:50}),(0,D.jsx)(aq.x,{color:(0,U.ff)("#D0021B","#E5E5E5"),fontFamily:"'Babylonica', cursive ",fontWeight:"bold",ml:5,children:"Deo Singiza"})]})})};var aJ=n(3838),aK=n(3100),aQ=n(6979),a0=(0,aS.G)(function(e,r){let{direction:n,align:i,justify:a,wrap:s,basis:o,grow:l,shrink:u,...c}=e;return(0,D.jsx)(ac.m.div,{ref:r,__css:{display:"flex",flexDirection:n,alignItems:i,justifyContent:a,flexWrap:s,flexBasis:o,flexGrow:l,flexShrink:u},...c})});a0.displayName="Flex";var a1=n(4418),a2=e=>(0,D.jsx)(ac.m.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});a2.displayName="StackItem";var a3=n(3951),a5="& > *:not(style) ~ *:not(style)",a4=n(2495),a6=(0,aS.G)((e,r)=>{let{isInline:n,direction:i,align:a,justify:s,spacing:o="0.5rem",wrap:l,children:u,divider:c,className:h,shouldWrapChildren:d,...p}=e,f=n?"row":null!=i?i:"column",m=(0,I.useMemo)(()=>(function(e){let{spacing:r,direction:n}=e,i={column:{marginTop:r,marginEnd:0,marginBottom:0,marginStart:0},row:{marginTop:0,marginEnd:0,marginBottom:0,marginStart:r},"column-reverse":{marginTop:0,marginEnd:0,marginBottom:r,marginStart:0},"row-reverse":{marginTop:0,marginEnd:r,marginBottom:0,marginStart:0}};return{flexDirection:n,[a5]:(0,a3.XQ)(n,e=>i[e])}})({direction:f,spacing:o}),[f,o]),g=(0,I.useMemo)(()=>(function(e){let{spacing:r,direction:n}=e,i={column:{my:r,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:r,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:r,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:r,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":(0,a3.XQ)(n,e=>i[e])}})({spacing:o,direction:f}),[o,f]),v=!!c,y=!d&&!v,x=(0,I.useMemo)(()=>{let e=(0,a4.W)(u);return y?e:e.map((r,n)=>{let i=void 0!==r.key?r.key:n,a=n+1===e.length,s=(0,D.jsx)(a2,{children:r},i),o=d?s:r;if(!v)return o;let l=(0,I.cloneElement)(c,{__css:g});return(0,D.jsxs)(I.Fragment,{children:[o,a?null:l]},i)})},[c,g,v,y,d,u]),b=(0,eB.cx)("chakra-stack",h);return(0,D.jsx)(ac.m.div,{ref:r,display:"flex",alignItems:a,justifyContent:s,flexDirection:m.flexDirection,flexWrap:l,className:b,__css:v?{}:{[a5]:m[a5]},...p,children:x})});a6.displayName="Stack";var a9=n(1103);function a7(e){let r=e.target,{tagName:n,isContentEditable:i}=r;return"INPUT"!==n&&"TEXTAREA"!==n&&!0!==i}var a8=Object.defineProperty,se=(e,r,n)=>r in e?a8(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,st=(e,r,n)=>(se(e,"symbol"!=typeof r?r+"":r,n),n);function sr(e){return e.sort((e,r)=>{let n=e.compareDocumentPosition(r);if(n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY)return -1;if(n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(!(n&Node.DOCUMENT_POSITION_DISCONNECTED)&&!(n&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC))return 0;throw Error("Cannot sort the given nodes.")})}var sn=e=>"object"==typeof e&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function si(e,r,n){let i=e+1;return n&&i>=r&&(i=0),i}function sa(e,r,n){let i=e-1;return n&&i<0&&(i=r),i}var ss="undefined"!=typeof window?I.useLayoutEffect:I.useEffect,so=e=>e,sl=class{constructor(){st(this,"descendants",new Map),st(this,"register",e=>{if(null!=e)return sn(e)?this.registerNode(e):r=>{this.registerNode(r,e)}}),st(this,"unregister",e=>{this.descendants.delete(e);let r=sr(Array.from(this.descendants.keys()));this.assignIndex(r)}),st(this,"destroy",()=>{this.descendants.clear()}),st(this,"assignIndex",e=>{this.descendants.forEach(r=>{let n=e.indexOf(r.node);r.index=n,r.node.dataset.index=r.index.toString()})}),st(this,"count",()=>this.descendants.size),st(this,"enabledCount",()=>this.enabledValues().length),st(this,"values",()=>{let e=Array.from(this.descendants.values());return e.sort((e,r)=>e.index-r.index)}),st(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),st(this,"item",e=>{if(0!==this.count())return this.values()[e]}),st(this,"enabledItem",e=>{if(0!==this.enabledCount())return this.enabledValues()[e]}),st(this,"first",()=>this.item(0)),st(this,"firstEnabled",()=>this.enabledItem(0)),st(this,"last",()=>this.item(this.descendants.size-1)),st(this,"lastEnabled",()=>{let e=this.enabledValues().length-1;return this.enabledItem(e)}),st(this,"indexOf",e=>{var r,n;return e&&null!=(n=null==(r=this.descendants.get(e))?void 0:r.index)?n:-1}),st(this,"enabledIndexOf",e=>null==e?-1:this.enabledValues().findIndex(r=>r.node.isSameNode(e))),st(this,"next",(e,r=!0)=>{let n=si(e,this.count(),r);return this.item(n)}),st(this,"nextEnabled",(e,r=!0)=>{let n=this.item(e);if(!n)return;let i=this.enabledIndexOf(n.node),a=si(i,this.enabledCount(),r);return this.enabledItem(a)}),st(this,"prev",(e,r=!0)=>{let n=sa(e,this.count()-1,r);return this.item(n)}),st(this,"prevEnabled",(e,r=!0)=>{let n=this.item(e);if(!n)return;let i=this.enabledIndexOf(n.node),a=sa(i,this.enabledCount()-1,r);return this.enabledItem(a)}),st(this,"registerNode",(e,r)=>{if(!e||this.descendants.has(e))return;let n=Array.from(this.descendants.keys()).concat(e),i=sr(n);(null==r?void 0:r.disabled)&&(r.disabled=!!r.disabled);let a={node:e,index:-1,...r};this.descendants.set(e,a),this.assignIndex(i)})}},[su,sc]=(0,am.k)({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"}),sh=n(1735),sd=n(9136),sp=(e,r)=>({var:e,varRef:r?`var(${e}, ${r})`:`var(${e})`}),sf={arrowShadowColor:sp("--popper-arrow-shadow-color"),arrowSize:sp("--popper-arrow-size","8px"),arrowSizeHalf:sp("--popper-arrow-size-half"),arrowBg:sp("--popper-arrow-bg"),transformOrigin:sp("--popper-transform-origin"),arrowOffset:sp("--popper-arrow-offset")},sm={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},sg=e=>sm[e],sv={scroll:!0,resize:!0},sy={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`},effect:({state:e})=>()=>{let r=e.elements.reference;e.elements.popper.style.width=`${r.offsetWidth}px`}},sx={name:"transformOrigin",enabled:!0,phase:"write",fn:({state:e})=>{sb(e)},effect:({state:e})=>()=>{sb(e)}},sb=e=>{e.elements.popper.style.setProperty(sf.transformOrigin.var,sg(e.placement))},s_={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:({state:e})=>{sS(e)}},sS=e=>{var r;if(!e.placement)return;let n=sw(e.placement);if((null==(r=e.elements)?void 0:r.arrow)&&n){Object.assign(e.elements.arrow.style,{[n.property]:n.value,width:sf.arrowSize.varRef,height:sf.arrowSize.varRef,zIndex:-1});let r={[sf.arrowSizeHalf.var]:`calc(${sf.arrowSize.varRef} / 2)`,[sf.arrowOffset.var]:`calc(${sf.arrowSizeHalf.varRef} * -1)`};for(let n in r)e.elements.arrow.style.setProperty(n,r[n])}},sw=e=>e.startsWith("top")?{property:"bottom",value:sf.arrowOffset.varRef}:e.startsWith("bottom")?{property:"top",value:sf.arrowOffset.varRef}:e.startsWith("left")?{property:"right",value:sf.arrowOffset.varRef}:e.startsWith("right")?{property:"left",value:sf.arrowOffset.varRef}:void 0,sM={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:({state:e})=>{sT(e)},effect:({state:e})=>()=>{sT(e)}},sT=e=>{var r;if(!e.elements.arrow)return;let n=e.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!n)return;let i=(r=e.placement).includes("top")?"1px 1px 1px 0 var(--popper-arrow-shadow-color)":r.includes("bottom")?"-1px -1px 1px 0 var(--popper-arrow-shadow-color)":r.includes("right")?"-1px 1px 1px 0 var(--popper-arrow-shadow-color)":r.includes("left")?"1px -1px 1px 0 var(--popper-arrow-shadow-color)":void 0;i&&n.style.setProperty("--popper-arrow-default-shadow",i),Object.assign(n.style,{transform:"rotate(45deg)",background:sf.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},sE={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},sA={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function sC(e){if(null==e)return window;if("[object Window]"!==e.toString()){var r=e.ownerDocument;return r&&r.defaultView||window}return e}function sR(e){var r=sC(e).Element;return e instanceof r||e instanceof Element}function sP(e){var r=sC(e).HTMLElement;return e instanceof r||e instanceof HTMLElement}function sL(e){if("undefined"==typeof ShadowRoot)return!1;var r=sC(e).ShadowRoot;return e instanceof r||e instanceof ShadowRoot}var sk=Math.max,sD=Math.min,sI=Math.round;function sO(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function sN(){return!/^((?!chrome|android).)*safari/i.test(sO())}function sz(e,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),a=1,s=1;r&&sP(e)&&(a=e.offsetWidth>0&&sI(i.width)/e.offsetWidth||1,s=e.offsetHeight>0&&sI(i.height)/e.offsetHeight||1);var o=(sR(e)?sC(e):window).visualViewport,l=!sN()&&n,u=(i.left+(l&&o?o.offsetLeft:0))/a,c=(i.top+(l&&o?o.offsetTop:0))/s,h=i.width/a,d=i.height/s;return{width:h,height:d,top:c,right:u+h,bottom:c+d,left:u,x:u,y:c}}function sB(e){var r=sC(e);return{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}}function sF(e){return e?(e.nodeName||"").toLowerCase():null}function sU(e){return((sR(e)?e.ownerDocument:e.document)||window.document).documentElement}function sV(e){return sz(sU(e)).left+sB(e).scrollLeft}function sj(e){return sC(e).getComputedStyle(e)}function sH(e){var r=sj(e),n=r.overflow,i=r.overflowX,a=r.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+i)}function sW(e){var r=sz(e),n=e.offsetWidth,i=e.offsetHeight;return 1>=Math.abs(r.width-n)&&(n=r.width),1>=Math.abs(r.height-i)&&(i=r.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function sG(e){return"html"===sF(e)?e:e.assignedSlot||e.parentNode||(sL(e)?e.host:null)||sU(e)}function sq(e,r){void 0===r&&(r=[]);var n,i=function e(r){return["html","body","#document"].indexOf(sF(r))>=0?r.ownerDocument.body:sP(r)&&sH(r)?r:e(sG(r))}(e),a=i===(null==(n=e.ownerDocument)?void 0:n.body),s=sC(i),o=a?[s].concat(s.visualViewport||[],sH(i)?i:[]):i,l=r.concat(o);return a?l:l.concat(sq(sG(o)))}function s$(e){return sP(e)&&"fixed"!==sj(e).position?e.offsetParent:null}function sX(e){for(var r=sC(e),n=s$(e);n&&["table","td","th"].indexOf(sF(n))>=0&&"static"===sj(n).position;)n=s$(n);return n&&("html"===sF(n)||"body"===sF(n)&&"static"===sj(n).position)?r:n||function(e){var r=/firefox/i.test(sO());if(/Trident/i.test(sO())&&sP(e)&&"fixed"===sj(e).position)return null;var n=sG(e);for(sL(n)&&(n=n.host);sP(n)&&0>["html","body"].indexOf(sF(n));){var i=sj(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||r&&"filter"===i.willChange||r&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(e)||r}var sY="bottom",sZ="right",sJ="left",sK="auto",sQ=["top",sY,sZ,sJ],s0="start",s1="viewport",s2="popper",s3=sQ.reduce(function(e,r){return e.concat([r+"-"+s0,r+"-end"])},[]),s5=[].concat(sQ,[sK]).reduce(function(e,r){return e.concat([r,r+"-"+s0,r+"-end"])},[]),s4=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"],s6={placement:"bottom",modifiers:[],strategy:"absolute"};function s9(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return!r.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}var s7={passive:!0};function s8(e){return e.split("-")[0]}function oe(e){return e.split("-")[1]}function ot(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function or(e){var r,n=e.reference,i=e.element,a=e.placement,s=a?s8(a):null,o=a?oe(a):null,l=n.x+n.width/2-i.width/2,u=n.y+n.height/2-i.height/2;switch(s){case"top":r={x:l,y:n.y-i.height};break;case sY:r={x:l,y:n.y+n.height};break;case sZ:r={x:n.x+n.width,y:u};break;case sJ:r={x:n.x-i.width,y:u};break;default:r={x:n.x,y:n.y}}var c=s?ot(s):null;if(null!=c){var h="y"===c?"height":"width";switch(o){case s0:r[c]=r[c]-(n[h]/2-i[h]/2);break;case"end":r[c]=r[c]+(n[h]/2-i[h]/2)}}return r}var on={top:"auto",right:"auto",bottom:"auto",left:"auto"};function oi(e){var r,n,i,a,s,o,l=e.popper,u=e.popperRect,c=e.placement,h=e.variation,d=e.offsets,p=e.position,f=e.gpuAcceleration,m=e.adaptive,g=e.roundOffsets,v=e.isFixed,y=d.x,x=void 0===y?0:y,b=d.y,_=void 0===b?0:b,S="function"==typeof g?g({x:x,y:_}):{x:x,y:_};x=S.x,_=S.y;var w=d.hasOwnProperty("x"),M=d.hasOwnProperty("y"),T=sJ,E="top",A=window;if(m){var C=sX(l),R="clientHeight",P="clientWidth";C===sC(l)&&"static"!==sj(C=sU(l)).position&&"absolute"===p&&(R="scrollHeight",P="scrollWidth"),("top"===c||(c===sJ||c===sZ)&&"end"===h)&&(E=sY,_-=(v&&C===A&&A.visualViewport?A.visualViewport.height:C[R])-u.height,_*=f?1:-1),(c===sJ||("top"===c||c===sY)&&"end"===h)&&(T=sZ,x-=(v&&C===A&&A.visualViewport?A.visualViewport.width:C[P])-u.width,x*=f?1:-1)}var L=Object.assign({position:p},m&&on),k=!0===g?(n=(r={x:x,y:_}).x,i=r.y,{x:sI(n*(a=window.devicePixelRatio||1))/a||0,y:sI(i*a)/a||0}):{x:x,y:_};return(x=k.x,_=k.y,f)?Object.assign({},L,((o={})[E]=M?"0":"",o[T]=w?"0":"",o.transform=1>=(A.devicePixelRatio||1)?"translate("+x+"px, "+_+"px)":"translate3d("+x+"px, "+_+"px, 0)",o)):Object.assign({},L,((s={})[E]=M?_+"px":"",s[T]=w?x+"px":"",s.transform="",s))}var oa={left:"right",right:"left",bottom:"top",top:"bottom"};function os(e){return e.replace(/left|right|bottom|top/g,function(e){return oa[e]})}var oo={start:"end",end:"start"};function ol(e){return e.replace(/start|end/g,function(e){return oo[e]})}function ou(e,r){var n=r.getRootNode&&r.getRootNode();if(e.contains(r))return!0;if(n&&sL(n)){var i=r;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function oc(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function oh(e,r,n){var i,a,s,o,l,u,c,h,d,p;return r===s1?oc(function(e,r){var n=sC(e),i=sU(e),a=n.visualViewport,s=i.clientWidth,o=i.clientHeight,l=0,u=0;if(a){s=a.width,o=a.height;var c=sN();(c||!c&&"fixed"===r)&&(l=a.offsetLeft,u=a.offsetTop)}return{width:s,height:o,x:l+sV(e),y:u}}(e,n)):sR(r)?((i=sz(r,!1,"fixed"===n)).top=i.top+r.clientTop,i.left=i.left+r.clientLeft,i.bottom=i.top+r.clientHeight,i.right=i.left+r.clientWidth,i.width=r.clientWidth,i.height=r.clientHeight,i.x=i.left,i.y=i.top,i):oc((a=sU(e),o=sU(a),l=sB(a),u=null==(s=a.ownerDocument)?void 0:s.body,c=sk(o.scrollWidth,o.clientWidth,u?u.scrollWidth:0,u?u.clientWidth:0),h=sk(o.scrollHeight,o.clientHeight,u?u.scrollHeight:0,u?u.clientHeight:0),d=-l.scrollLeft+sV(a),p=-l.scrollTop,"rtl"===sj(u||o).direction&&(d+=sk(o.clientWidth,u?u.clientWidth:0)-c),{width:c,height:h,x:d,y:p}))}function od(){return{top:0,right:0,bottom:0,left:0}}function op(e){return Object.assign({},od(),e)}function of(e,r){return r.reduce(function(r,n){return r[n]=e,r},{})}function om(e,r){void 0===r&&(r={});var n,i,a,s,o,l,u,c=r,h=c.placement,d=void 0===h?e.placement:h,p=c.strategy,f=void 0===p?e.strategy:p,m=c.boundary,g=c.rootBoundary,v=c.elementContext,y=void 0===v?s2:v,x=c.altBoundary,b=c.padding,_=void 0===b?0:b,S=op("number"!=typeof _?_:of(_,sQ)),w=e.rects.popper,M=e.elements[void 0!==x&&x?y===s2?"reference":s2:y],T=(n=sR(M)?M:M.contextElement||sU(e.elements.popper),l=(o=[].concat("clippingParents"===(i=void 0===m?"clippingParents":m)?(a=sq(sG(n)),sR(s=["absolute","fixed"].indexOf(sj(n).position)>=0&&sP(n)?sX(n):n)?a.filter(function(e){return sR(e)&&ou(e,s)&&"body"!==sF(e)}):[]):[].concat(i),[void 0===g?s1:g]))[0],(u=o.reduce(function(e,r){var i=oh(n,r,f);return e.top=sk(i.top,e.top),e.right=sD(i.right,e.right),e.bottom=sD(i.bottom,e.bottom),e.left=sk(i.left,e.left),e},oh(n,l,f))).width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u),E=sz(e.elements.reference),A=or({reference:E,element:w,strategy:"absolute",placement:d}),C=oc(Object.assign({},w,A)),R=y===s2?C:E,P={top:T.top-R.top+S.top,bottom:R.bottom-T.bottom+S.bottom,left:T.left-R.left+S.left,right:R.right-T.right+S.right},L=e.modifiersData.offset;if(y===s2&&L){var k=L[d];Object.keys(P).forEach(function(e){var r=[sZ,sY].indexOf(e)>=0?1:-1,n=["top",sY].indexOf(e)>=0?"y":"x";P[e]+=k[n]*r})}return P}function og(e,r,n){return sk(e,sD(r,n))}function ov(e,r,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-r.height-n.y,right:e.right-r.width+n.x,bottom:e.bottom-r.height+n.y,left:e.left-r.width-n.x}}function oy(e){return["top",sZ,sY,sJ].some(function(r){return e[r]>=0})}var ox=(o=void 0===(s=(a={defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var r=e.state,n=e.instance,i=e.options,a=i.scroll,s=void 0===a||a,o=i.resize,l=void 0===o||o,u=sC(r.elements.popper),c=[].concat(r.scrollParents.reference,r.scrollParents.popper);return s&&c.forEach(function(e){e.addEventListener("scroll",n.update,s7)}),l&&u.addEventListener("resize",n.update,s7),function(){s&&c.forEach(function(e){e.removeEventListener("scroll",n.update,s7)}),l&&u.removeEventListener("resize",n.update,s7)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var r=e.state,n=e.name;r.modifiersData[n]=or({reference:r.rects.reference,element:r.rects.popper,strategy:"absolute",placement:r.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var r=e.state,n=e.options,i=n.gpuAcceleration,a=n.adaptive,s=n.roundOffsets,o=void 0===s||s,l={placement:s8(r.placement),variation:oe(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:void 0===i||i,isFixed:"fixed"===r.options.strategy};null!=r.modifiersData.popperOffsets&&(r.styles.popper=Object.assign({},r.styles.popper,oi(Object.assign({},l,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:void 0===a||a,roundOffsets:o})))),null!=r.modifiersData.arrow&&(r.styles.arrow=Object.assign({},r.styles.arrow,oi(Object.assign({},l,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var r=e.state;Object.keys(r.elements).forEach(function(e){var n=r.styles[e]||{},i=r.attributes[e]||{},a=r.elements[e];sP(a)&&sF(a)&&(Object.assign(a.style,n),Object.keys(i).forEach(function(e){var r=i[e];!1===r?a.removeAttribute(e):a.setAttribute(e,!0===r?"":r)}))})},effect:function(e){var r=e.state,n={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,n.popper),r.styles=n,r.elements.arrow&&Object.assign(r.elements.arrow.style,n.arrow),function(){Object.keys(r.elements).forEach(function(e){var i=r.elements[e],a=r.attributes[e]||{},s=Object.keys(r.styles.hasOwnProperty(e)?r.styles[e]:n[e]).reduce(function(e,r){return e[r]="",e},{});sP(i)&&sF(i)&&(Object.assign(i.style,s),Object.keys(a).forEach(function(e){i.removeAttribute(e)}))})}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var r=e.state,n=e.options,i=e.name,a=n.offset,s=void 0===a?[0,0]:a,o=s5.reduce(function(e,n){var i,a,o,l,u,c;return e[n]=(i=r.rects,o=[sJ,"top"].indexOf(a=s8(n))>=0?-1:1,u=(l="function"==typeof s?s(Object.assign({},i,{placement:n})):s)[0],c=l[1],u=u||0,c=(c||0)*o,[sJ,sZ].indexOf(a)>=0?{x:c,y:u}:{x:u,y:c}),e},{}),l=o[r.placement],u=l.x,c=l.y;null!=r.modifiersData.popperOffsets&&(r.modifiersData.popperOffsets.x+=u,r.modifiersData.popperOffsets.y+=c),r.modifiersData[i]=o}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var r=e.state,n=e.options,i=e.name;if(!r.modifiersData[i]._skip){for(var a=n.mainAxis,s=void 0===a||a,o=n.altAxis,l=void 0===o||o,u=n.fallbackPlacements,c=n.padding,h=n.boundary,d=n.rootBoundary,p=n.altBoundary,f=n.flipVariations,m=void 0===f||f,g=n.allowedAutoPlacements,v=r.options.placement,y=s8(v),x=[v].concat(u||(y!==v&&m?function(e){if(s8(e)===sK)return[];var r=os(e);return[ol(e),r,ol(r)]}(v):[os(v)])).reduce(function(e,n){var i,a,s,o,l,u,p,f,v,y,x,b;return e.concat(s8(n)===sK?(a=(i={placement:n,boundary:h,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:g}).placement,s=i.boundary,o=i.rootBoundary,l=i.padding,u=i.flipVariations,f=void 0===(p=i.allowedAutoPlacements)?s5:p,0===(x=(y=(v=oe(a))?u?s3:s3.filter(function(e){return oe(e)===v}):sQ).filter(function(e){return f.indexOf(e)>=0})).length&&(x=y),Object.keys(b=x.reduce(function(e,n){return e[n]=om(r,{placement:n,boundary:s,rootBoundary:o,padding:l})[s8(n)],e},{})).sort(function(e,r){return b[e]-b[r]})):n)},[]),b=r.rects.reference,_=r.rects.popper,S=new Map,w=!0,M=x[0],T=0;T<x.length;T++){var E=x[T],A=s8(E),C=oe(E)===s0,R=["top",sY].indexOf(A)>=0,P=R?"width":"height",L=om(r,{placement:E,boundary:h,rootBoundary:d,altBoundary:p,padding:c}),k=R?C?sZ:sJ:C?sY:"top";b[P]>_[P]&&(k=os(k));var D=os(k),I=[];if(s&&I.push(L[A]<=0),l&&I.push(L[k]<=0,L[D]<=0),I.every(function(e){return e})){M=E,w=!1;break}S.set(E,I)}if(w)for(var O=m?3:1,N=function(e){var r=x.find(function(r){var n=S.get(r);if(n)return n.slice(0,e).every(function(e){return e})});if(r)return M=r,"break"},z=O;z>0&&"break"!==N(z);z--);r.placement!==M&&(r.modifiersData[i]._skip=!0,r.placement=M,r.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var r=e.state,n=e.options,i=e.name,a=n.mainAxis,s=n.altAxis,o=n.boundary,l=n.rootBoundary,u=n.altBoundary,c=n.padding,h=n.tether,d=void 0===h||h,p=n.tetherOffset,f=void 0===p?0:p,m=om(r,{boundary:o,rootBoundary:l,padding:c,altBoundary:u}),g=s8(r.placement),v=oe(r.placement),y=!v,x=ot(g),b="x"===x?"y":"x",_=r.modifiersData.popperOffsets,S=r.rects.reference,w=r.rects.popper,M="function"==typeof f?f(Object.assign({},r.rects,{placement:r.placement})):f,T="number"==typeof M?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),E=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,A={x:0,y:0};if(_){if(void 0===a||a){var C,R="y"===x?"top":sJ,P="y"===x?sY:sZ,L="y"===x?"height":"width",k=_[x],D=k+m[R],I=k-m[P],O=d?-w[L]/2:0,N=v===s0?S[L]:w[L],z=v===s0?-w[L]:-S[L],B=r.elements.arrow,F=d&&B?sW(B):{width:0,height:0},U=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:od(),V=U[R],j=U[P],H=og(0,S[L],F[L]),W=y?S[L]/2-O-H-V-T.mainAxis:N-H-V-T.mainAxis,G=y?-S[L]/2+O+H+j+T.mainAxis:z+H+j+T.mainAxis,q=r.elements.arrow&&sX(r.elements.arrow),$=q?"y"===x?q.clientTop||0:q.clientLeft||0:0,X=null!=(C=null==E?void 0:E[x])?C:0,Y=og(d?sD(D,k+W-X-$):D,k,d?sk(I,k+G-X):I);_[x]=Y,A[x]=Y-k}if(void 0!==s&&s){var Z,J,K=_[b],Q="y"===b?"height":"width",ee=K+m["x"===x?"top":sJ],et=K-m["x"===x?sY:sZ],er=-1!==["top",sJ].indexOf(g),en=null!=(Z=null==E?void 0:E[b])?Z:0,ei=er?ee:K-S[Q]-w[Q]-en+T.altAxis,ea=er?K+S[Q]+w[Q]-en-T.altAxis:et,es=d&&er?(J=og(ei,K,ea))>ea?ea:J:og(d?ei:ee,K,d?ea:et);_[b]=es,A[b]=es-K}r.modifiersData[i]=A}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var r,n,i=e.state,a=e.name,s=e.options,o=i.elements.arrow,l=i.modifiersData.popperOffsets,u=s8(i.placement),c=ot(u),h=[sJ,sZ].indexOf(u)>=0?"height":"width";if(o&&l){var d=op("number"!=typeof(r="function"==typeof(r=s.padding)?r(Object.assign({},i.rects,{placement:i.placement})):r)?r:of(r,sQ)),p=sW(o),f=i.rects.reference[h]+i.rects.reference[c]-l[c]-i.rects.popper[h],m=l[c]-i.rects.reference[c],g=sX(o),v=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,y=d["y"===c?"top":sJ],x=v-p[h]-d["y"===c?sY:sZ],b=v/2-p[h]/2+(f/2-m/2),_=og(y,b,x);i.modifiersData[a]=((n={})[c]=_,n.centerOffset=_-b,n)}},effect:function(e){var r=e.state,n=e.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=r.elements.popper.querySelector(i)))&&ou(r.elements.popper,i)&&(r.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var r=e.state,n=e.name,i=r.rects.reference,a=r.rects.popper,s=r.modifiersData.preventOverflow,o=om(r,{elementContext:"reference"}),l=om(r,{altBoundary:!0}),u=ov(o,i),c=ov(l,a,s),h=oy(u),d=oy(c);r.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:d},r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":d})}}]}).defaultModifiers)?[]:s,u=void 0===(l=a.defaultOptions)?s6:l,function(e,r,n){void 0===n&&(n=u);var i,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},s6,u),modifiersData:{},elements:{reference:e,popper:r},attributes:{},styles:{}},s=[],l=!1,c={state:a,setOptions:function(n){var i,l,d,p,f,m="function"==typeof n?n(a.options):n;h(),a.options=Object.assign({},u,a.options,m),a.scrollParents={reference:sR(e)?sq(e):e.contextElement?sq(e.contextElement):[],popper:sq(r)};var g=(l=Object.keys(i=[].concat(o,a.options.modifiers).reduce(function(e,r){var n=e[r.name];return e[r.name]=n?Object.assign({},n,r,{options:Object.assign({},n.options,r.options),data:Object.assign({},n.data,r.data)}):r,e},{})).map(function(e){return i[e]}),d=new Map,p=new Set,f=[],l.forEach(function(e){d.set(e.name,e)}),l.forEach(function(e){p.has(e.name)||function e(r){p.add(r.name),[].concat(r.requires||[],r.requiresIfExists||[]).forEach(function(r){if(!p.has(r)){var n=d.get(r);n&&e(n)}}),f.push(r)}(e)}),s4.reduce(function(e,r){return e.concat(f.filter(function(e){return e.phase===r}))},[]));return a.orderedModifiers=g.filter(function(e){return e.enabled}),a.orderedModifiers.forEach(function(e){var r=e.name,n=e.options,i=e.effect;if("function"==typeof i){var o=i({state:a,name:r,instance:c,options:void 0===n?{}:n});s.push(o||function(){})}}),c.update()},forceUpdate:function(){if(!l){var e,r,n,i,s,o,u,h,d,p,f,m,g=a.elements,v=g.reference,y=g.popper;if(s9(v,y)){a.rects={reference:(r=sX(y),n="fixed"===a.options.strategy,i=sP(r),h=sP(r)&&(o=sI((s=r.getBoundingClientRect()).width)/r.offsetWidth||1,u=sI(s.height)/r.offsetHeight||1,1!==o||1!==u),d=sU(r),p=sz(v,h,n),f={scrollLeft:0,scrollTop:0},m={x:0,y:0},(i||!i&&!n)&&(("body"!==sF(r)||sH(d))&&(f=(e=r)!==sC(e)&&sP(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:sB(e)),sP(r)?(m=sz(r,!0),m.x+=r.clientLeft,m.y+=r.clientTop):d&&(m.x=sV(d))),{x:p.left+f.scrollLeft-m.x,y:p.top+f.scrollTop-m.y,width:p.width,height:p.height}),popper:sW(y)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(e){return a.modifiersData[e.name]=Object.assign({},e.data)});for(var x=0;x<a.orderedModifiers.length;x++){if(!0===a.reset){a.reset=!1,x=-1;continue}var b=a.orderedModifiers[x],_=b.fn,S=b.options,w=void 0===S?{}:S,M=b.name;"function"==typeof _&&(a=_({state:a,options:w,name:M,instance:c})||a)}}}},update:function(){return i||(i=new Promise(function(e){Promise.resolve().then(function(){i=void 0,e(new Promise(function(e){c.forceUpdate(),e(a)}))})})),i},destroy:function(){h(),l=!0}};if(!s9(e,r))return c;function h(){s.forEach(function(e){return e()}),s=[]}return c.setOptions(n).then(function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)}),c});function ob(e,r){var n;let i=e.target;if(e.button>0)return!1;if(i){let e=o_(i);if(!e.contains(i))return!1}return!(null==(n=r.current)?void 0:n.contains(i))}function o_(e){var r;return null!=(r=null==e?void 0:e.ownerDocument)?r:document}var[oS,ow,oM,oT]=function(){let e=so(su),r=()=>so(sc()),n=e=>(function(e){let r=sc(),[n,i]=(0,I.useState)(-1),a=(0,I.useRef)(null);ss(()=>()=>{a.current&&r.unregister(a.current)},[]),ss(()=>{if(!a.current)return;let e=Number(a.current.dataset.index);n==e||Number.isNaN(e)||i(e)});let s=e?so(r.register(e)):so(r.register);return{descendants:r,index:n,enabledIndex:r.enabledIndexOf(a.current),register:(0,a9.lq)(s,a)}})(e),i=()=>(function(){let e=(0,I.useRef)(new sl);return ss(()=>()=>e.current.destroy()),e.current})();return[e,r,i,n]}(),[oE,oA]=(0,am.k)({strict:!1,name:"MenuContext"});function oC(e){var r;return null!=(r=null==e?void 0:e.ownerDocument)?r:document}function oR(e){let r=oC(e);return r.activeElement===e}function oP(e){var r;return function(e){var r;if(!(null!=e&&"object"==typeof e&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE))return!1;let n=null!=(r=e.ownerDocument.defaultView)?r:window;return e instanceof n.HTMLElement}(e)&&!!(null==(r=null==e?void 0:e.getAttribute("role"))?void 0:r.startsWith("menuitem"))}var oL=n(5119),[ok,oD]=(0,am.k)({name:"MenuStylesContext",errorMessage:"useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Menu />\" "}),oI=e=>{let{children:r}=e,n=(0,aw.jC)("Menu",e),i=(0,V.Lr)(e),{direction:a}=(0,oL.F)(),{descendants:s,...o}=function(e={}){let{id:r,closeOnSelect:n=!0,closeOnBlur:i=!0,initialFocusRef:a,autoSelect:s=!0,isLazy:o,isOpen:l,defaultIsOpen:u,onClose:c,onOpen:h,placement:d="bottom-start",lazyBehavior:p="unmount",direction:f,computePositionOnMount:m=!1,...g}=e,v=(0,I.useRef)(null),y=(0,I.useRef)(null),x=oM(),b=(0,I.useCallback)(()=>{requestAnimationFrame(()=>{var e;null==(e=v.current)||e.focus({preventScroll:!1})})},[]),_=(0,I.useCallback)(()=>{let e=setTimeout(()=>{var e;if(a)null==(e=a.current)||e.focus();else{let e=x.firstEnabled();e&&P(e.index)}});N.current.add(e)},[x,a]),S=(0,I.useCallback)(()=>{let e=setTimeout(()=>{let e=x.lastEnabled();e&&P(e.index)});N.current.add(e)},[x]),w=(0,I.useCallback)(()=>{null==h||h(),s?_():b()},[s,_,b,h]),{isOpen:M,onOpen:T,onClose:E,onToggle:A}=function(e={}){let{onClose:r,onOpen:n,isOpen:i,id:a}=e,s=as(n),o=as(r),[l,u]=(0,I.useState)(e.defaultIsOpen||!1),c=void 0!==i?i:l,h=void 0!==i,d=(0,I.useId)(),p=null!=a?a:`disclosure-${d}`,f=(0,I.useCallback)(()=>{h||u(!1),null==o||o()},[h,o]),m=(0,I.useCallback)(()=>{h||u(!0),null==s||s()},[h,s]),g=(0,I.useCallback)(()=>{c?f():m()},[c,m,f]);return{isOpen:c,onOpen:m,onClose:f,onToggle:g,isControlled:h,getButtonProps:function(e={}){return{...e,"aria-expanded":c,"aria-controls":p,onClick(r){var n;null==(n=e.onClick)||n.call(e,r),g()}}},getDisclosureProps:function(e={}){return{...e,hidden:!c,id:p}}}}({isOpen:l,defaultIsOpen:u,onClose:c,onOpen:w});!function(e){let{ref:r,handler:n,enabled:i=!0}=e,a=as(n),s=(0,I.useRef)({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),o=s.current;(0,I.useEffect)(()=>{if(!i)return;let e=e=>{ob(e,r)&&(o.isPointerDown=!0)},s=e=>{if(o.ignoreEmulatedMouseEvents){o.ignoreEmulatedMouseEvents=!1;return}o.isPointerDown&&n&&ob(e,r)&&(o.isPointerDown=!1,a(e))},l=e=>{o.ignoreEmulatedMouseEvents=!0,n&&o.isPointerDown&&ob(e,r)&&(o.isPointerDown=!1,a(e))},u=o_(r.current);return u.addEventListener("mousedown",e,!0),u.addEventListener("mouseup",s,!0),u.addEventListener("touchstart",e,!0),u.addEventListener("touchend",l,!0),()=>{u.removeEventListener("mousedown",e,!0),u.removeEventListener("mouseup",s,!0),u.removeEventListener("touchstart",e,!0),u.removeEventListener("touchend",l,!0)}},[n,r,a,o,i])}({enabled:M&&i,ref:v,handler:e=>{var r;(null==(r=y.current)?void 0:r.contains(e.target))||E()}});let C=function(e={}){let{enabled:r=!0,modifiers:n,placement:i="bottom",strategy:a="absolute",arrowPadding:s=8,eventListeners:o=!0,offset:l,gutter:u=8,flip:c=!0,boundary:h="clippingParents",preventOverflow:d=!0,matchWidth:p,direction:f="ltr"}=e,m=(0,I.useRef)(null),g=(0,I.useRef)(null),v=(0,I.useRef)(null),y=function(e,r="ltr"){var n,i;let a=(null==(n=sE[e])?void 0:n[r])||e;return"ltr"===r?a:null!=(i=sA[e])?i:a}(i,f),x=(0,I.useRef)(()=>{}),b=(0,I.useCallback)(()=>{var e;r&&m.current&&g.current&&(null==(e=x.current)||e.call(x),v.current=ox(m.current,g.current,{placement:y,modifiers:[sM,s_,sx,{...sy,enabled:!!p},{name:"eventListeners",..."object"==typeof o?{enabled:!0,options:{...sv,...o}}:{enabled:o,options:sv}},{name:"arrow",options:{padding:s}},{name:"offset",options:{offset:null!=l?l:[0,u]}},{name:"flip",enabled:!!c,options:{padding:8}},{name:"preventOverflow",enabled:!!d,options:{boundary:h}},...null!=n?n:[]],strategy:a}),v.current.forceUpdate(),x.current=v.current.destroy)},[y,r,n,p,o,s,l,u,c,d,h,a]);(0,I.useEffect)(()=>()=>{var e;m.current||g.current||(null==(e=v.current)||e.destroy(),v.current=null)},[]);let _=(0,I.useCallback)(e=>{m.current=e,b()},[b]),S=(0,I.useCallback)((e={},r=null)=>({...e,ref:(0,a9.lq)(_,r)}),[_]),w=(0,I.useCallback)(e=>{g.current=e,b()},[b]),M=(0,I.useCallback)((e={},r=null)=>({...e,ref:(0,a9.lq)(w,r),style:{...e.style,position:a,minWidth:p?void 0:"max-content",inset:"0 auto auto 0"}}),[a,w,p]),T=(0,I.useCallback)((e={},r=null)=>{let{size:n,shadowColor:i,bg:a,style:s,...o}=e;return{...o,ref:r,"data-popper-arrow":"",style:function(e){let{size:r,shadowColor:n,bg:i,style:a}=e,s={...a,position:"absolute"};return r&&(s["--popper-arrow-size"]=r),n&&(s["--popper-arrow-shadow-color"]=n),i&&(s["--popper-arrow-bg"]=i),s}(e)}},[]),E=(0,I.useCallback)((e={},r=null)=>({...e,ref:r,"data-popper-arrow-inner":""}),[]);return{update(){var e;null==(e=v.current)||e.update()},forceUpdate(){var e;null==(e=v.current)||e.forceUpdate()},transformOrigin:sf.transformOrigin.varRef,referenceRef:_,popperRef:w,getPopperProps:M,getArrowProps:T,getArrowInnerProps:E,getReferenceProps:S}}({...g,enabled:M||m,placement:d,direction:f}),[R,P]=(0,I.useState)(-1);ao(()=>{M||P(-1)},[M]),function(e,r){let{shouldFocus:n,visible:i,focusRef:a}=r,s=n&&!i;ao(()=>{if(!s||function(e){let r=e.current;if(!r)return!1;let n=(0,sh.vY)(r);return!(!n||r.contains(n))&&!!(0,sd.Wq)(n)}(e))return;let r=(null==a?void 0:a.current)||e.current;r&&requestAnimationFrame(()=>{r.focus()})},[s,e,a])}(v,{focusRef:y,visible:M,shouldFocus:!0});let L=function(e){let{isOpen:r,ref:n}=e,[i,a]=(0,I.useState)(r),[s,o]=(0,I.useState)(!1);return(0,I.useEffect)(()=>{s||(a(r),o(!0))},[r,s,i]),!function(e,r,n,i){let a=as(n);(0,I.useEffect)(()=>{let s="function"==typeof e?e():null!=e?e:document;if(n&&s)return s.addEventListener(r,a,i),()=>{s.removeEventListener(r,a,i)}},[r,e,i,a,n]),()=>{let n="function"==typeof e?e():null!=e?e:document;null==n||n.removeEventListener(r,a,i)}}(()=>n.current,"animationend",()=>{a(r)}),{present:!(!r&&!i),onComplete(){var e;let r=(0,sh.kR)(n.current),i=new r.CustomEvent("animationend",{bubbles:!0});null==(e=n.current)||e.dispatchEvent(i)}}}({isOpen:M,ref:v}),[k,D]=function(e,...r){let n=(0,I.useId)(),i=e||n;return(0,I.useMemo)(()=>r.map(e=>`${e}-${i}`),[i,r])}(r,"menu-button","menu-list"),O=(0,I.useCallback)(()=>{T(),b()},[T,b]),N=(0,I.useRef)(new Set([]));!function(e,r=[]){(0,I.useEffect)(()=>()=>e(),r)}(()=>{N.current.forEach(e=>clearTimeout(e)),N.current.clear()});let z=(0,I.useCallback)(()=>{T(),_()},[_,T]),B=(0,I.useCallback)(()=>{T(),S()},[T,S]),F=(0,I.useCallback)(()=>{var e,r;let n=oC(v.current),i=null==(e=v.current)?void 0:e.contains(n.activeElement);if(!(M&&!i))return;let a=null==(r=x.item(R))?void 0:r.node;null==a||a.focus()},[M,R,x]);return{openAndFocusMenu:O,openAndFocusFirstItem:z,openAndFocusLastItem:B,onTransitionEnd:F,unstable__animationState:L,descendants:x,popper:C,buttonId:k,menuId:D,forceUpdate:C.forceUpdate,orientation:"vertical",isOpen:M,onToggle:A,onOpen:T,onClose:E,menuRef:v,buttonRef:y,focusedIndex:R,closeOnSelect:n,closeOnBlur:i,autoSelect:s,setFocusedIndex:P,isLazy:o,lazyBehavior:p,initialFocusRef:a}}({...i,direction:a}),l=(0,I.useMemo)(()=>o,[o]),{isOpen:u,onClose:c,forceUpdate:h}=l;return(0,D.jsx)(oS,{value:s,children:(0,D.jsx)(oE,{value:l,children:(0,D.jsx)(ok,{value:n,children:(0,eB.Pu)(r,{isOpen:u,onClose:c,forceUpdate:h})})})})};oI.displayName="Menu";var oO=(0,aS.G)((e,r)=>{let n=oD();return(0,D.jsx)(ac.m.button,{ref:r,...e,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...n.button}})}),oN=(0,aS.G)((e,r)=>{let{children:n,as:i,...a}=e,s=function(e={},r=null){let n=oA(),{onToggle:i,popper:a,openAndFocusFirstItem:s,openAndFocusLastItem:o}=n,l=(0,I.useCallback)(e=>{let r=e.key,n={Enter:s,ArrowDown:s,ArrowUp:o}[r];n&&(e.preventDefault(),e.stopPropagation(),n(e))},[s,o]);return{...e,ref:(0,a9.lq)(n.buttonRef,r,a.referenceRef),id:n.buttonId,"data-active":(0,eB.PB)(n.isOpen),"aria-expanded":n.isOpen,"aria-haspopup":"menu","aria-controls":n.menuId,onClick:(0,eB.v0)(e.onClick,i),onKeyDown:(0,eB.v0)(e.onKeyDown,l)}}(a,r);return(0,D.jsx)(i||oO,{...s,className:(0,eB.cx)("chakra-menu__menu-button",e.className),children:(0,D.jsx)(ac.m.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:e.children})})});oN.displayName="MenuButton";var oz=n(9222),oB=(0,aS.G)((e,r)=>{let{icon:n,children:i,isRound:a,"aria-label":s,...o}=e,l=n||i,u=(0,I.isValidElement)(l)?(0,I.cloneElement)(l,{"aria-hidden":!0,focusable:!1}):null;return(0,D.jsx)(oz.z,{padding:"0",borderRadius:a?"full":void 0,ref:r,"aria-label":s,...o,children:u})});oB.displayName="IconButton";var oF={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},oU=(0,ac.m)(au.E.div),oV=(0,aS.G)(function(e,r){var n,i;let{rootProps:a,motionProps:s,...o}=e,{isOpen:l,onTransitionEnd:u,unstable__animationState:c}=oA(),h=function(e={},r=null){let n=oA();if(!n)throw Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");let{focusedIndex:i,setFocusedIndex:a,menuRef:s,isOpen:o,onClose:l,menuId:u,isLazy:c,lazyBehavior:h,unstable__animationState:d}=n,p=ow(),f=function(e={}){let{timeout:r=300,preventDefault:n=()=>!0}=e,[i,a]=(0,I.useState)([]),s=(0,I.useRef)(),o=()=>{s.current&&(clearTimeout(s.current),s.current=null)},l=()=>{o(),s.current=setTimeout(()=>{a([]),s.current=null},r)};return(0,I.useEffect)(()=>o,[]),function(e){return r=>{if("Backspace"===r.key){let e=[...i];e.pop(),a(e);return}if(function(e){let{key:r}=e;return 1===r.length||r.length>1&&/[^a-zA-Z0-9]/.test(r)}(r)){let s=i.concat(r.key);n(r)&&(r.preventDefault(),r.stopPropagation()),a(s),e(s.join("")),l()}}}}({preventDefault:e=>" "!==e.key&&oP(e.target)}),m=(0,I.useCallback)(e=>{let r=e.key,n={Tab:e=>e.preventDefault(),Escape:l,ArrowDown:()=>{let e=p.nextEnabled(i);e&&a(e.index)},ArrowUp:()=>{let e=p.prevEnabled(i);e&&a(e.index)}}[r];if(n){e.preventDefault(),n(e);return}let s=f(e=>{let r=function(e,r,n,i){if(null==r)return i;if(!i){let i=e.find(e=>n(e).toLowerCase().startsWith(r.toLowerCase()));return i}let a=e.filter(e=>n(e).toLowerCase().startsWith(r.toLowerCase()));if(a.length>0){let r;if(a.includes(i)){let e=a.indexOf(i);return(r=e+1)===a.length&&(r=0),a[r]}return r=e.indexOf(a[0]),e[r]}return i}(p.values(),e,e=>{var r,n;return null!=(n=null==(r=null==e?void 0:e.node)?void 0:r.textContent)?n:""},p.item(i));if(r){let e=p.indexOf(r.node);a(e)}});oP(e.target)&&s(e)},[p,i,f,l,a]),g=(0,I.useRef)(!1);o&&(g.current=!0);let v=function(e){let{wasSelected:r,enabled:n,isSelected:i,mode:a="unmount"}=e;return!n||!!i||"keepMounted"===a&&!!r}({wasSelected:g.current,enabled:c,mode:h,isSelected:d.present});return{...e,ref:(0,a9.lq)(s,r),children:v?e.children:null,tabIndex:-1,role:"menu",id:u,style:{...e.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:(0,eB.v0)(e.onKeyDown,m)}}(o,r),d=function(e={}){let{popper:r,isOpen:n}=oA();return r.getPopperProps({...e,style:{visibility:n?"visible":"hidden",...e.style}})}(a),p=oD();return(0,D.jsx)(ac.m.div,{...d,__css:{zIndex:null!=(i=e.zIndex)?i:null==(n=p.list)?void 0:n.zIndex},children:(0,D.jsx)(oU,{variants:oF,initial:!1,animate:l?"enter":"exit",__css:{outline:0,...p.list},...s,className:(0,eB.cx)("chakra-menu__menu-list",h.className),...h,onUpdate:u,onAnimationComplete:(0,eB.PP)(c.onComplete,h.onAnimationComplete)})})});oV.displayName="MenuList";var oj=(0,aS.G)((e,r)=>{let n=oD();return(0,D.jsx)(ac.m.span,{ref:r,...e,__css:n.command,className:"chakra-menu__command"})});oj.displayName="MenuCommand";var oH=(0,aS.G)((e,r)=>{let{type:n,...i}=e,a=oD(),s=i.as||n?null!=n?n:void 0:"button",o=(0,I.useMemo)(()=>({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,...a.item}),[a.item]);return(0,D.jsx)(ac.m.button,{ref:r,type:s,...i,__css:o})}),oW=e=>{let{className:r,children:n,...i}=e,a=I.Children.only(n),s=(0,I.isValidElement)(a)?(0,I.cloneElement)(a,{focusable:"false","aria-hidden":!0,className:(0,eB.cx)("chakra-menu__icon",a.props.className)}):null,o=(0,eB.cx)("chakra-menu__icon-wrapper",r);return(0,D.jsx)(ac.m.span,{className:o,...i,__css:{flexShrink:0},children:s})};oW.displayName="MenuIcon";var oG=(0,aS.G)((e,r)=>{let{icon:n,iconSpacing:i="0.75rem",command:a,commandSpacing:s="0.75rem",children:o,...l}=e,u=function(e={},r=null){let{onMouseEnter:n,onMouseMove:i,onMouseLeave:a,onClick:s,onFocus:o,isDisabled:l,isFocusable:u,closeOnSelect:c,type:h,...d}=e,p=oA(),{setFocusedIndex:f,focusedIndex:m,closeOnSelect:g,onClose:v,menuRef:y,isOpen:x,menuId:b}=p,_=(0,I.useRef)(null),S=`${b}-menuitem-${(0,I.useId)()}`,{index:w,register:M}=oT({disabled:l&&!u}),T=(0,I.useCallback)(e=>{null==n||n(e),l||f(w)},[f,w,l,n]),E=(0,I.useCallback)(e=>{null==i||i(e),_.current&&!oR(_.current)&&T(e)},[T,i]),A=(0,I.useCallback)(e=>{null==a||a(e),l||f(-1)},[f,l,a]),C=(0,I.useCallback)(e=>{null==s||s(e),oP(e.currentTarget)&&(null!=c?c:g)&&v()},[v,s,g,c]),R=(0,I.useCallback)(e=>{null==o||o(e),f(w)},[f,o,w]),P=w===m,L=l&&!u;ao(()=>{x&&(P&&!L&&_.current?requestAnimationFrame(()=>{var e;null==(e=_.current)||e.focus()}):y.current&&!oR(y.current)&&y.current.focus())},[P,L,y,x]);let k=function(e={}){let{ref:r,isDisabled:n,isFocusable:i,clickOnEnter:a=!0,clickOnSpace:s=!0,onMouseDown:o,onMouseUp:l,onClick:u,onKeyDown:c,onKeyUp:h,tabIndex:d,onMouseOver:p,onMouseLeave:f,...m}=e,[g,v]=(0,I.useState)(!0),[y,x]=(0,I.useState)(!1),b=function(){let e=(0,I.useRef)(new Map),r=e.current,n=(0,I.useCallback)((r,n,i,a)=>{e.current.set(i,{type:n,el:r,options:a}),r.addEventListener(n,i,a)},[]),i=(0,I.useCallback)((r,n,i,a)=>{r.removeEventListener(n,i,a),e.current.delete(i)},[]);return(0,I.useEffect)(()=>()=>{r.forEach((e,r)=>{i(e.el,e.type,r,e.options)})},[i,r]),{add:n,remove:i}}(),_=e=>{e&&"BUTTON"!==e.tagName&&v(!1)},S=n&&!i,w=(0,I.useCallback)(e=>{if(n){e.stopPropagation(),e.preventDefault();return}let r=e.currentTarget;r.focus(),null==u||u(e)},[n,u]),M=(0,I.useCallback)(e=>{y&&a7(e)&&(e.preventDefault(),e.stopPropagation(),x(!1),b.remove(document,"keyup",M,!1))},[y,b]),T=(0,I.useCallback)(e=>{if(null==c||c(e),n||e.defaultPrevented||e.metaKey||!a7(e.nativeEvent)||g)return;let r=a&&"Enter"===e.key,i=s&&" "===e.key;if(i&&(e.preventDefault(),x(!0)),r){e.preventDefault();let r=e.currentTarget;r.click()}b.add(document,"keyup",M,!1)},[n,g,c,a,s,b,M]),E=(0,I.useCallback)(e=>{if(null==h||h(e),n||e.defaultPrevented||e.metaKey||!a7(e.nativeEvent)||g)return;let r=s&&" "===e.key;if(r){e.preventDefault(),x(!1);let r=e.currentTarget;r.click()}},[s,g,n,h]),A=(0,I.useCallback)(e=>{0===e.button&&(x(!1),b.remove(document,"mouseup",A,!1))},[b]),C=(0,I.useCallback)(e=>{if(0!==e.button)return;if(n){e.stopPropagation(),e.preventDefault();return}g||x(!0);let r=e.currentTarget;r.focus({preventScroll:!0}),b.add(document,"mouseup",A,!1),null==o||o(e)},[n,g,o,b,A]),R=(0,I.useCallback)(e=>{0===e.button&&(g||x(!1),null==l||l(e))},[l,g]),P=(0,I.useCallback)(e=>{if(n){e.preventDefault();return}null==p||p(e)},[n,p]),L=(0,I.useCallback)(e=>{y&&(e.preventDefault(),x(!1)),null==f||f(e)},[y,f]),k=(0,a9.lq)(r,_);return g?{...m,ref:k,type:"button","aria-disabled":S?void 0:n,disabled:S,onClick:w,onMouseDown:o,onMouseUp:l,onKeyUp:h,onKeyDown:c,onMouseOver:p,onMouseLeave:f}:{...m,ref:k,role:"button","data-active":(0,eB.PB)(y),"aria-disabled":n?"true":void 0,tabIndex:S?void 0:g?d:d||0,onClick:w,onMouseDown:C,onMouseUp:R,onKeyUp:E,onKeyDown:T,onMouseOver:P,onMouseLeave:L}}({onClick:C,onFocus:R,onMouseEnter:T,onMouseMove:E,onMouseLeave:A,ref:(0,a9.lq)(M,_,r),isDisabled:l,isFocusable:u});return{...d,...k,type:null!=h?h:k.type,id:S,role:"menuitem",tabIndex:P?0:-1}}(l,r),c=n||a?(0,D.jsx)("span",{style:{pointerEvents:"none",flex:1},children:o}):o;return(0,D.jsxs)(oH,{...u,className:(0,eB.cx)("chakra-menu__menuitem",u.className),children:[n&&(0,D.jsx)(oW,{fontSize:"0.8em",marginEnd:i,children:n}),c,a&&(0,D.jsx)(oj,{marginStart:s,children:a})]})});oG.displayName="MenuItem";var oq=n(78),o$=(0,oq.I)({displayName:"HamburgerIcon",viewBox:"0 0 24 24",d:"M 3 5 A 1.0001 1.0001 0 1 0 3 7 L 21 7 A 1.0001 1.0001 0 1 0 21 5 L 3 5 z M 3 11 A 1.0001 1.0001 0 1 0 3 13 L 21 13 A 1.0001 1.0001 0 1 0 21 11 L 3 11 z M 3 17 A 1.0001 1.0001 0 1 0 3 19 L 21 19 A 1.0001 1.0001 0 1 0 21 17 L 3 17 z"}),oX=(0,oq.I)({d:"M21.4,13.7C20.6,13.9,19.8,14,19,14c-5,0-9-4-9-9c0-0.8,0.1-1.6,0.3-2.4c0.1-0.3,0-0.7-0.3-1 c-0.3-0.3-0.6-0.4-1-0.3C4.3,2.7,1,7.1,1,12c0,6.1,4.9,11,11,11c4.9,0,9.3-3.3,10.6-8.1c0.1-0.3,0-0.7-0.3-1 C22.1,13.7,21.7,13.6,21.4,13.7z",displayName:"MoonIcon"}),oY=(0,oq.I)({displayName:"SunIcon",path:(0,D.jsxs)("g",{strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:"2",fill:"none",stroke:"currentColor",children:[(0,D.jsx)("circle",{cx:"12",cy:"12",r:"5"}),(0,D.jsx)("path",{d:"M12 1v2"}),(0,D.jsx)("path",{d:"M12 21v2"}),(0,D.jsx)("path",{d:"M4.22 4.22l1.42 1.42"}),(0,D.jsx)("path",{d:"M18.36 18.36l1.42 1.42"}),(0,D.jsx)("path",{d:"M1 12h2"}),(0,D.jsx)("path",{d:"M21 12h2"}),(0,D.jsx)("path",{d:"M4.22 19.78l1.42-1.42"}),(0,D.jsx)("path",{d:"M18.36 5.64l1.42-1.42"})]})});let oZ=()=>{let{toggleColorMode:e}=(0,U.If)();return(0,D.jsx)(ak.M,{mode:"wait",initial:!1,children:(0,D.jsx)(au.E.div,{style:{display:"inline-block"},initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},transition:{duration:.2},children:(0,D.jsx)(oB,{"aria-label":"Toggle theme",color:(0,U.ff)("#3D3D3D","#E5E5E5"),icon:(0,U.ff)((0,D.jsx)(oX,{}),(0,D.jsx)(oY,{})),onClick:e})},(0,U.ff)("dark","light"))})},oJ=e=>{let{href:r,path:n,children:i}=e,a=n===r,s=(0,U.ff)("gray200.","whiteAlpha.900");return(0,D.jsx)(aH(),{href:r,children:(0,D.jsx)(aJ.r,{p:2,bg:a?"glassTeal":void 0,color:a?"#202023":s,children:i})})},oK=e=>{let{path:r}=e;return(0,D.jsx)(aK.xu,{position:"fixed",as:"nav",w:"100%",bg:(0,U.ff)("#ffffff98","#292d3a30"),style:{backdropFilter:"blur(10px"},zIndex:1,...e,children:(0,D.jsxs)(aQ.W,{display:"flex",p:2,maxW:"container.md",wrap:"wrap",align:"center",justify:"space-between",children:[(0,D.jsx)(a0,{align:"center",mr:5,children:(0,D.jsx)(a1.X,{as:"h1",size:"lg",letterSpacing:"tightre",children:(0,D.jsx)(aZ,{})})}),(0,D.jsxs)(a6,{direction:{base:"column",md:"row"},display:{base:"none",md:"flex"},width:{base:"full",md:"auto"},alignItems:"center",flexGrow:1,mt:{base:4,md:0},children:[(0,D.jsx)(oJ,{href:"https://astrumstellar.com",path:r,children:"Home"}),(0,D.jsx)(oJ,{href:"/services",path:r,children:"Services"}),(0,D.jsx)(oJ,{href:"/projects",path:r,children:"Projects"}),(0,D.jsx)(oJ,{href:"/contact",path:r,children:"Contact"}),(0,D.jsx)(oJ,{href:"https://github.com/deodagee/greenrepo",path:r,children:"Code"})]}),(0,D.jsxs)(aK.xu,{flex:1,align:"right",children:[(0,D.jsx)(oZ,{}),(0,D.jsx)(aK.xu,{ml:2,display:{base:"inline-block",md:"none"},children:(0,D.jsxs)(oI,{children:[(0,D.jsx)(oN,{as:oB,icon:(0,D.jsx)(o$,{}),variants:"outline","aria-label":"Options"}),(0,D.jsxs)(oV,{children:[(0,D.jsx)(aH(),{href:"https://astrumstellar.com",passHref:!0,children:(0,D.jsx)(oG,{as:aJ.r,children:"Home"})}),(0,D.jsx)(aH(),{href:"/services",passHref:!0,children:(0,D.jsx)(oG,{as:aJ.r,children:"Services"})}),(0,D.jsx)(aH(),{href:"/projects",passHref:!0,children:(0,D.jsx)(oG,{as:aJ.r,children:"Projects"})}),(0,D.jsx)(aH(),{href:"/contact",passHref:!0,children:(0,D.jsx)(oG,{as:aJ.r,children:"Contact"})}),(0,D.jsx)(aH(),{href:"https://github.com/deodagee/greenrepo",passHref:!0,children:(0,D.jsx)(oG,{as:aJ.r,children:"Source Code"})})]})]})})]})]})})},oQ={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o0={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o1="srgb",o2="srgb-linear",o3="300 es";class o5{addEventListener(e,r){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(r)&&n[e].push(r)}hasEventListener(e,r){if(void 0===this._listeners)return!1;let n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(r)}removeEventListener(e,r){if(void 0===this._listeners)return;let n=this._listeners,i=n[e];if(void 0!==i){let e=i.indexOf(r);-1!==e&&i.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let r=this._listeners,n=r[e.type];if(void 0!==n){e.target=this;let r=n.slice(0);for(let n=0,i=r.length;n<i;n++)r[n].call(this,e);e.target=null}}}let o4=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],o6=1234567,o9=Math.PI/180,o7=180/Math.PI;function o8(){let e=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,a=o4[255&e]+o4[e>>8&255]+o4[e>>16&255]+o4[e>>24&255]+"-"+o4[255&r]+o4[r>>8&255]+"-"+o4[r>>16&15|64]+o4[r>>24&255]+"-"+o4[63&n|128]+o4[n>>8&255]+"-"+o4[n>>16&255]+o4[n>>24&255]+o4[255&i]+o4[i>>8&255]+o4[i>>16&255]+o4[i>>24&255];return a.toLowerCase()}function le(e,r,n){return Math.max(r,Math.min(n,e))}function lt(e,r){return(e%r+r)%r}function lr(e,r,n){return(1-n)*e+n*r}function ln(e){return(e&e-1)==0&&0!==e}function li(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function la(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function ls(e,r){switch(r.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw Error("Invalid component type.")}}function lo(e,r){switch(r.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw Error("Invalid component type.")}}var ll=Object.freeze({__proto__:null,DEG2RAD:o9,RAD2DEG:o7,generateUUID:o8,clamp:le,euclideanModulo:lt,mapLinear:function(e,r,n,i,a){return i+(e-r)*(a-i)/(n-r)},inverseLerp:function(e,r,n){return e!==r?(n-e)/(r-e):0},lerp:lr,damp:function(e,r,n,i){return lr(e,r,1-Math.exp(-n*i))},pingpong:function(e,r=1){return r-Math.abs(lt(e,2*r)-r)},smoothstep:function(e,r,n){return e<=r?0:e>=n?1:(e=(e-r)/(n-r))*e*(3-2*e)},smootherstep:function(e,r,n){return e<=r?0:e>=n?1:(e=(e-r)/(n-r))*e*e*(e*(6*e-15)+10)},randInt:function(e,r){return e+Math.floor(Math.random()*(r-e+1))},randFloat:function(e,r){return e+Math.random()*(r-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(o6=e);let r=o6+=1831565813;return r=Math.imul(r^r>>>15,1|r),(((r^=r+Math.imul(r^r>>>7,61|r))^r>>>14)>>>0)/4294967296},degToRad:function(e){return e*o9},radToDeg:function(e){return e*o7},isPowerOfTwo:ln,ceilPowerOfTwo:li,floorPowerOfTwo:la,setQuaternionFromProperEuler:function(e,r,n,i,a){let s=Math.cos,o=Math.sin,l=s(n/2),u=o(n/2),c=s((r+i)/2),h=o((r+i)/2),d=s((r-i)/2),p=o((r-i)/2),f=s((i-r)/2),m=o((i-r)/2);switch(a){case"XYX":e.set(l*h,u*d,u*p,l*c);break;case"YZY":e.set(u*p,l*h,u*d,l*c);break;case"ZXZ":e.set(u*d,u*p,l*h,l*c);break;case"XZX":e.set(l*h,u*m,u*f,l*c);break;case"YXY":e.set(u*f,l*h,u*m,l*c);break;case"ZYZ":e.set(u*m,u*f,l*h,l*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}},normalize:lo,denormalize:ls});class lu{constructor(e=0,r=0){lu.prototype.isVector2=!0,this.x=e,this.y=r}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,r){return this.x=e,this.y=r,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let r=this.x,n=this.y,i=e.elements;return this.x=i[0]*r+i[3]*n+i[6],this.y=i[1]*r+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this}clampScalar(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this}clampLength(e,r){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(r,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){let e=Math.atan2(-this.y,-this.x)+Math.PI;return e}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let r=this.x-e.x,n=this.y-e.y;return r*r+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this}lerpVectors(e,r,n){return this.x=e.x+(r.x-e.x)*n,this.y=e.y+(r.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this}rotateAround(e,r){let n=Math.cos(r),i=Math.sin(r),a=this.x-e.x,s=this.y-e.y;return this.x=a*n-s*i+e.x,this.y=a*i+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class lc{constructor(){lc.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,r,n,i,a,s,o,l,u){let c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=r,c[4]=a,c[5]=l,c[6]=n,c[7]=s,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let r=this.elements,n=e.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],this}extractBasis(e,r,n){return e.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let r=e.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){let n=e.elements,i=r.elements,a=this.elements,s=n[0],o=n[3],l=n[6],u=n[1],c=n[4],h=n[7],d=n[2],p=n[5],f=n[8],m=i[0],g=i[3],v=i[6],y=i[1],x=i[4],b=i[7],_=i[2],S=i[5],w=i[8];return a[0]=s*m+o*y+l*_,a[3]=s*g+o*x+l*S,a[6]=s*v+o*b+l*w,a[1]=u*m+c*y+h*_,a[4]=u*g+c*x+h*S,a[7]=u*v+c*b+h*w,a[2]=d*m+p*y+f*_,a[5]=d*g+p*x+f*S,a[8]=d*v+p*b+f*w,this}multiplyScalar(e){let r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=e,r[4]*=e,r[7]*=e,r[2]*=e,r[5]*=e,r[8]*=e,this}determinant(){let e=this.elements,r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return r*s*c-r*o*u-n*a*c+n*o*l+i*a*u-i*s*l}invert(){let e=this.elements,r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=c*s-o*u,d=o*l-c*a,p=u*a-s*l,f=r*h+n*d+i*p;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);let m=1/f;return e[0]=h*m,e[1]=(i*u-c*n)*m,e[2]=(o*n-i*s)*m,e[3]=d*m,e[4]=(c*r-i*l)*m,e[5]=(i*a-o*r)*m,e[6]=p*m,e[7]=(n*l-u*r)*m,e[8]=(s*r-n*a)*m,this}transpose(){let e;let r=this.elements;return e=r[1],r[1]=r[3],r[3]=e,e=r[2],r[2]=r[6],r[6]=e,e=r[5],r[5]=r[7],r[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let r=this.elements;return e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8],this}setUvTransform(e,r,n,i,a,s,o){let l=Math.cos(a),u=Math.sin(a);return this.set(n*l,n*u,-n*(l*s+u*o)+s+e,-i*u,i*l,-i*(-u*s+l*o)+o+r,0,0,1),this}scale(e,r){return this.premultiply(lh.makeScale(e,r)),this}rotate(e){return this.premultiply(lh.makeRotation(-e)),this}translate(e,r){return this.premultiply(lh.makeTranslation(e,r)),this}makeTranslation(e,r){return this.set(1,0,e,0,1,r,0,0,1),this}makeRotation(e){let r=Math.cos(e),n=Math.sin(e);return this.set(r,-n,0,n,r,0,0,0,1),this}makeScale(e,r){return this.set(e,0,0,0,r,0,0,0,1),this}equals(e){let r=this.elements,n=e.elements;for(let e=0;e<9;e++)if(r[e]!==n[e])return!1;return!0}fromArray(e,r=0){for(let n=0;n<9;n++)this.elements[n]=e[n+r];return this}toArray(e=[],r=0){let n=this.elements;return e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],e[r+4]=n[4],e[r+5]=n[5],e[r+6]=n[6],e[r+7]=n[7],e[r+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}let lh=new lc;function ld(e){for(let r=e.length-1;r>=0;--r)if(e[r]>=65535)return!0;return!1}function lp(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function lf(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function lm(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;let lg={[o1]:{[o2]:lf},[o2]:{[o1]:lm}},lv={legacyMode:!0,get workingColorSpace(){return o2},set workingColorSpace(colorSpace){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,r,n){if(this.legacyMode||r===n||!r||!n)return e;if(lg[r]&&void 0!==lg[r][n]){let i=lg[r][n];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,r){return this.convert(e,this.workingColorSpace,r)},toWorkingColorSpace:function(e,r){return this.convert(e,r,this.workingColorSpace)}},ly={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},lx={r:0,g:0,b:0},lb={h:0,s:0,l:0},l_={h:0,s:0,l:0};function lS(e,r,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(r-e)*6*n:n<.5?r:n<2/3?e+(r-e)*6*(2/3-n):e}function lw(e,r){return r.r=e.r,r.g=e.g,r.b=e.b,r}class lM{constructor(e,r,n){if(this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===r&&void 0===n)return this.set(e);return this.setRGB(e,r,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,r=o1){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,lv.toWorkingColorSpace(this,r),this}setRGB(e,r,n,i=lv.workingColorSpace){return this.r=e,this.g=r,this.b=n,lv.toWorkingColorSpace(this,i),this}setHSL(e,r,n,i=lv.workingColorSpace){if(e=lt(e,1),r=le(r,0,1),n=le(n,0,1),0===r)this.r=this.g=this.b=n;else{let i=n<=.5?n*(1+r):n+r-n*r,a=2*n-i;this.r=lS(a,i,e+1/3),this.g=lS(a,i,e),this.b=lS(a,i,e-1/3)}return lv.toWorkingColorSpace(this,i),this}setStyle(e,r=o1){let n;function i(r){void 0!==r&&1>parseFloat(r)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;let a=n[1],s=n[2];switch(a){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,lv.toWorkingColorSpace(this,r),i(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,lv.toWorkingColorSpace(this,r),i(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){let n=parseFloat(e[1])/360,a=parseFloat(e[2])/100,s=parseFloat(e[3])/100;return i(e[4]),this.setHSL(n,a,s,r)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){let e=n[1],i=e.length;if(3===i)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,lv.toWorkingColorSpace(this,r),this;if(6===i)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,lv.toWorkingColorSpace(this,r),this}return e&&e.length>0?this.setColorName(e,r):this}setColorName(e,r=o1){let n=ly[e.toLowerCase()];return void 0!==n?this.setHex(n,r):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=lf(e.r),this.g=lf(e.g),this.b=lf(e.b),this}copyLinearToSRGB(e){return this.r=lm(e.r),this.g=lm(e.g),this.b=lm(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=o1){return lv.fromWorkingColorSpace(lw(this,lx),e),le(255*lx.r,0,255)<<16^le(255*lx.g,0,255)<<8^le(255*lx.b,0,255)<<0}getHexString(e=o1){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,r=lv.workingColorSpace){let n,i;lv.fromWorkingColorSpace(lw(this,lx),r);let a=lx.r,s=lx.g,o=lx.b,l=Math.max(a,s,o),u=Math.min(a,s,o),c=(u+l)/2;if(u===l)n=0,i=0;else{let e=l-u;switch(i=c<=.5?e/(l+u):e/(2-l-u),l){case a:n=(s-o)/e+(s<o?6:0);break;case s:n=(o-a)/e+2;break;case o:n=(a-s)/e+4}n/=6}return e.h=n,e.s=i,e.l=c,e}getRGB(e,r=lv.workingColorSpace){return lv.fromWorkingColorSpace(lw(this,lx),r),e.r=lx.r,e.g=lx.g,e.b=lx.b,e}getStyle(e=o1){return(lv.fromWorkingColorSpace(lw(this,lx),e),e!==o1)?`color(${e} ${lx.r} ${lx.g} ${lx.b})`:`rgb(${255*lx.r|0},${255*lx.g|0},${255*lx.b|0})`}offsetHSL(e,r,n){return this.getHSL(lb),lb.h+=e,lb.s+=r,lb.l+=n,this.setHSL(lb.h,lb.s,lb.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,r){return this.r=e.r+r.r,this.g=e.g+r.g,this.b=e.b+r.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,r){return this.r+=(e.r-this.r)*r,this.g+=(e.g-this.g)*r,this.b+=(e.b-this.b)*r,this}lerpColors(e,r,n){return this.r=e.r+(r.r-e.r)*n,this.g=e.g+(r.g-e.g)*n,this.b=e.b+(r.b-e.b)*n,this}lerpHSL(e,r){this.getHSL(lb),e.getHSL(l_);let n=lr(lb.h,l_.h,r),i=lr(lb.s,l_.s,r),a=lr(lb.l,l_.l,r);return this.setHSL(n,i,a),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,r=0){return this.r=e[r],this.g=e[r+1],this.b=e[r+2],this}toArray(e=[],r=0){return e[r]=this.r,e[r+1]=this.g,e[r+2]=this.b,e}fromBufferAttribute(e,r){return this.r=e.getX(r),this.g=e.getY(r),this.b=e.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}lM.NAMES=ly;class lT{static getDataURL(e){let r;if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)r=e;else{void 0===i&&(i=lp("canvas")),i.width=e.width,i.height=e.height;let n=i.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),r=i}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){let r=lp("canvas");r.width=e.width,r.height=e.height;let n=r.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let i=n.getImageData(0,0,e.width,e.height),a=i.data;for(let e=0;e<a.length;e++)a[e]=255*lf(a[e]/255);return n.putImageData(i,0,0),r}if(!e.data)return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e;{let r=e.data.slice(0);for(let e=0;e<r.length;e++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[e]=Math.floor(255*lf(r[e]/255)):r[e]=lf(r[e]);return{data:r,width:e.width,height:e.height}}}}class lE{constructor(e=null){this.isSource=!0,this.uuid=o8(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let r=void 0===e||"string"==typeof e;if(!r&&void 0!==e.images[this.uuid])return e.images[this.uuid];let n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let r=0,n=i.length;r<n;r++)i[r].isDataTexture?e.push(lA(i[r].image)):e.push(lA(i[r]))}else e=lA(i);n.url=e}return r||(e.images[this.uuid]=n),n}}function lA(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?lT.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let lC=0;class lR extends o5{constructor(e=lR.DEFAULT_IMAGE,r=lR.DEFAULT_MAPPING,n=1001,i=1001,a=1006,s=1008,o=1023,l=1009,u=lR.DEFAULT_ANISOTROPY,c=3e3){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:lC++}),this.uuid=o8(),this.name="",this.source=new lE(e),this.mipmaps=[],this.mapping=r,this.wrapS=n,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new lu(0,0),this.repeat=new lu(1,1),this.center=new lu(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new lc,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let r=void 0===e||"string"==typeof e;if(!r&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),r||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}lR.DEFAULT_IMAGE=null,lR.DEFAULT_MAPPING=300,lR.DEFAULT_ANISOTROPY=1;class lP{constructor(e=0,r=0,n=0,i=1){lP.prototype.isVector4=!0,this.x=e,this.y=r,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,r,n,i){return this.x=e,this.y=r,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this.w=e.w+r.w,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this.w+=e.w*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this.w=e.w-r.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let r=this.x,n=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*r+s[4]*n+s[8]*i+s[12]*a,this.y=s[1]*r+s[5]*n+s[9]*i+s[13]*a,this.z=s[2]*r+s[6]*n+s[10]*i+s[14]*a,this.w=s[3]*r+s[7]*n+s[11]*i+s[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let r=Math.sqrt(1-e.w*e.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/r,this.y=e.y/r,this.z=e.z/r),this}setAxisAngleFromRotationMatrix(e){let r,n,i;let a=e.elements,s=a[0],o=a[4],l=a[8],u=a[1],c=a[5],h=a[9],d=a[2],p=a[6],f=a[10];if(.01>Math.abs(o-u)&&.01>Math.abs(l-d)&&.01>Math.abs(h-p)){if(.1>Math.abs(o+u)&&.1>Math.abs(l+d)&&.1>Math.abs(h+p)&&.1>Math.abs(s+c+f-3))return this.set(1,0,0,0),this;let e=(s+1)/2,a=(c+1)/2,m=(f+1)/2,g=(o+u)/4,v=(l+d)/4,y=(h+p)/4;return e>a&&e>m?e<.01?(r=0,n=.707106781,i=.707106781):(n=g/(r=Math.sqrt(e)),i=v/r):a>m?a<.01?(r=.707106781,n=0,i=.707106781):(r=g/(n=Math.sqrt(a)),i=y/n):m<.01?(r=.707106781,n=.707106781,i=0):(r=v/(i=Math.sqrt(m)),n=y/i),this.set(r,n,i,Math.PI),this}let m=Math.sqrt((p-h)*(p-h)+(l-d)*(l-d)+(u-o)*(u-o));return .001>Math.abs(m)&&(m=1),this.x=(p-h)/m,this.y=(l-d)/m,this.z=(u-o)/m,this.w=Math.acos((s+c+f-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this.z=Math.max(e.z,Math.min(r.z,this.z)),this.w=Math.max(e.w,Math.min(r.w,this.w)),this}clampScalar(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this.z=Math.max(e,Math.min(r,this.z)),this.w=Math.max(e,Math.min(r,this.w)),this}clampLength(e,r){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(r,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this.w+=(e.w-this.w)*r,this}lerpVectors(e,r,n){return this.x=e.x+(r.x-e.x)*n,this.y=e.y+(r.y-e.y)*n,this.z=e.z+(r.z-e.z)*n,this.w=e.w+(r.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this.w=e[r+3],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e[r+3]=this.w,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this.w=e.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class lL extends o5{constructor(e=1,r=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=r,this.depth=1,this.scissor=new lP(0,0,e,r),this.scissorTest=!1,this.viewport=new lP(0,0,e,r),this.texture=new lR({width:e,height:r,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,r,n=1){(this.width!==e||this.height!==r||this.depth!==n)&&(this.width=e,this.height=r,this.depth=n,this.texture.image.width=e,this.texture.image.height=r,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let r=Object.assign({},e.texture.image);return this.texture.source=new lE(r),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class lk extends lR{constructor(e=null,r=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:r,height:n,depth:i},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class lD{constructor(e=0,r=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=r,this._z=n,this._w=i}static slerpFlat(e,r,n,i,a,s,o){let l=n[i+0],u=n[i+1],c=n[i+2],h=n[i+3],d=a[s+0],p=a[s+1],f=a[s+2],m=a[s+3];if(0===o){e[r+0]=l,e[r+1]=u,e[r+2]=c,e[r+3]=h;return}if(1===o){e[r+0]=d,e[r+1]=p,e[r+2]=f,e[r+3]=m;return}if(h!==m||l!==d||u!==p||c!==f){let e=1-o,r=l*d+u*p+c*f+h*m,n=r>=0?1:-1,i=1-r*r;if(i>Number.EPSILON){let a=Math.sqrt(i),s=Math.atan2(a,r*n);e=Math.sin(e*s)/a,o=Math.sin(o*s)/a}let a=o*n;if(l=l*e+d*a,u=u*e+p*a,c=c*e+f*a,h=h*e+m*a,e===1-o){let e=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=e,u*=e,c*=e,h*=e}}e[r]=l,e[r+1]=u,e[r+2]=c,e[r+3]=h}static multiplyQuaternionsFlat(e,r,n,i,a,s){let o=n[i],l=n[i+1],u=n[i+2],c=n[i+3],h=a[s],d=a[s+1],p=a[s+2],f=a[s+3];return e[r]=o*f+c*h+l*p-u*d,e[r+1]=l*f+c*d+u*h-o*p,e[r+2]=u*f+c*p+o*d-l*h,e[r+3]=c*f-o*h-l*d-u*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,r,n,i){return this._x=e,this._y=r,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,r){let n=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,l=Math.sin,u=o(n/2),c=o(i/2),h=o(a/2),d=l(n/2),p=l(i/2),f=l(a/2);switch(s){case"XYZ":this._x=d*c*h+u*p*f,this._y=u*p*h-d*c*f,this._z=u*c*f+d*p*h,this._w=u*c*h-d*p*f;break;case"YXZ":this._x=d*c*h+u*p*f,this._y=u*p*h-d*c*f,this._z=u*c*f-d*p*h,this._w=u*c*h+d*p*f;break;case"ZXY":this._x=d*c*h-u*p*f,this._y=u*p*h+d*c*f,this._z=u*c*f+d*p*h,this._w=u*c*h-d*p*f;break;case"ZYX":this._x=d*c*h-u*p*f,this._y=u*p*h+d*c*f,this._z=u*c*f-d*p*h,this._w=u*c*h+d*p*f;break;case"YZX":this._x=d*c*h+u*p*f,this._y=u*p*h+d*c*f,this._z=u*c*f-d*p*h,this._w=u*c*h-d*p*f;break;case"XZY":this._x=d*c*h-u*p*f,this._y=u*p*h-d*c*f,this._z=u*c*f+d*p*h,this._w=u*c*h+d*p*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==r&&this._onChangeCallback(),this}setFromAxisAngle(e,r){let n=r/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let r=e.elements,n=r[0],i=r[4],a=r[8],s=r[1],o=r[5],l=r[9],u=r[2],c=r[6],h=r[10],d=n+o+h;if(d>0){let e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-l)*e,this._y=(a-u)*e,this._z=(s-i)*e}else if(n>o&&n>h){let e=2*Math.sqrt(1+n-o-h);this._w=(c-l)/e,this._x=.25*e,this._y=(i+s)/e,this._z=(a+u)/e}else if(o>h){let e=2*Math.sqrt(1+o-n-h);this._w=(a-u)/e,this._x=(i+s)/e,this._y=.25*e,this._z=(l+c)/e}else{let e=2*Math.sqrt(1+h-n-o);this._w=(s-i)/e,this._x=(a+u)/e,this._y=(l+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,r){let n=e.dot(r)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*r.z-e.z*r.y,this._y=e.z*r.x-e.x*r.z,this._z=e.x*r.y-e.y*r.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(le(this.dot(e),-1,1)))}rotateTowards(e,r){let n=this.angleTo(e);return 0===n||this.slerp(e,Math.min(1,r/n)),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,r){let n=e._x,i=e._y,a=e._z,s=e._w,o=r._x,l=r._y,u=r._z,c=r._w;return this._x=n*c+s*o+i*u-a*l,this._y=i*c+s*l+a*o-n*u,this._z=a*c+s*u+n*l-i*o,this._w=s*c-n*o-i*l-a*u,this._onChangeCallback(),this}slerp(e,r){if(0===r)return this;if(1===r)return this.copy(e);let n=this._x,i=this._y,a=this._z,s=this._w,o=s*e._w+n*e._x+i*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=n,this._y=i,this._z=a,this;let l=1-o*o;if(l<=Number.EPSILON){let e=1-r;return this._w=e*s+r*this._w,this._x=e*n+r*this._x,this._y=e*i+r*this._y,this._z=e*a+r*this._z,this.normalize(),this._onChangeCallback(),this}let u=Math.sqrt(l),c=Math.atan2(u,o),h=Math.sin((1-r)*c)/u,d=Math.sin(r*c)/u;return this._w=s*h+this._w*d,this._x=n*h+this._x*d,this._y=i*h+this._y*d,this._z=a*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,r,n){return this.copy(e).slerp(r,n)}random(){let e=Math.random(),r=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(r*Math.cos(i),n*Math.sin(a),n*Math.cos(a),r*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,r=0){return this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e}fromBufferAttribute(e,r){return this._x=e.getX(r),this._y=e.getY(r),this._z=e.getZ(r),this._w=e.getW(r),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class lI{constructor(e=0,r=0,n=0){lI.prototype.isVector3=!0,this.x=e,this.y=r,this.z=n}set(e,r,n){return void 0===n&&(n=this.z),this.x=e,this.y=r,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this}applyEuler(e){return this.applyQuaternion(lN.setFromEuler(e))}applyAxisAngle(e,r){return this.applyQuaternion(lN.setFromAxisAngle(e,r))}applyMatrix3(e){let r=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*r+a[3]*n+a[6]*i,this.y=a[1]*r+a[4]*n+a[7]*i,this.z=a[2]*r+a[5]*n+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let r=this.x,n=this.y,i=this.z,a=e.elements,s=1/(a[3]*r+a[7]*n+a[11]*i+a[15]);return this.x=(a[0]*r+a[4]*n+a[8]*i+a[12])*s,this.y=(a[1]*r+a[5]*n+a[9]*i+a[13])*s,this.z=(a[2]*r+a[6]*n+a[10]*i+a[14])*s,this}applyQuaternion(e){let r=this.x,n=this.y,i=this.z,a=e.x,s=e.y,o=e.z,l=e.w,u=l*r+s*i-o*n,c=l*n+o*r-a*i,h=l*i+a*n-s*r,d=-a*r-s*n-o*i;return this.x=u*l+-(d*a)+-(c*o)- -(h*s),this.y=c*l+-(d*s)+-(h*a)- -(u*o),this.z=h*l+-(d*o)+-(u*s)- -(c*a),this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let r=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*r+a[4]*n+a[8]*i,this.y=a[1]*r+a[5]*n+a[9]*i,this.z=a[2]*r+a[6]*n+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this.z=Math.max(e.z,Math.min(r.z,this.z)),this}clampScalar(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this.z=Math.max(e,Math.min(r,this.z)),this}clampLength(e,r){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(r,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this}lerpVectors(e,r,n){return this.x=e.x+(r.x-e.x)*n,this.y=e.y+(r.y-e.y)*n,this.z=e.z+(r.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,r){let n=e.x,i=e.y,a=e.z,s=r.x,o=r.y,l=r.z;return this.x=i*l-a*o,this.y=a*s-n*l,this.z=n*o-i*s,this}projectOnVector(e){let r=e.lengthSq();if(0===r)return this.set(0,0,0);let n=e.dot(this)/r;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return lO.copy(this).projectOnVector(e),this.sub(lO)}reflect(e){return this.sub(lO.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let r=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===r)return Math.PI/2;let n=this.dot(e)/r;return Math.acos(le(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let r=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return r*r+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,r,n){let i=Math.sin(r)*e;return this.x=i*Math.sin(n),this.y=Math.cos(r)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,r,n){return this.x=e*Math.sin(r),this.y=n,this.z=e*Math.cos(r),this}setFromMatrixPosition(e){let r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(e){let r=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=r,this.y=n,this.z=i,this}setFromMatrixColumn(e,r){return this.fromArray(e.elements,4*r)}setFromMatrix3Column(e,r){return this.fromArray(e.elements,3*r)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,r=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(r),this.y=n*Math.sin(r),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}let lO=new lI,lN=new lD;class lz{constructor(e=new lI(Infinity,Infinity,Infinity),r=new lI(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=r}set(e,r){return this.min.copy(e),this.max.copy(r),this}setFromArray(e){let r=Infinity,n=Infinity,i=Infinity,a=-1/0,s=-1/0,o=-1/0;for(let l=0,u=e.length;l<u;l+=3){let u=e[l],c=e[l+1],h=e[l+2];u<r&&(r=u),c<n&&(n=c),h<i&&(i=h),u>a&&(a=u),c>s&&(s=c),h>o&&(o=h)}return this.min.set(r,n,i),this.max.set(a,s,o),this}setFromBufferAttribute(e){let r=Infinity,n=Infinity,i=Infinity,a=-1/0,s=-1/0,o=-1/0;for(let l=0,u=e.count;l<u;l++){let u=e.getX(l),c=e.getY(l),h=e.getZ(l);u<r&&(r=u),c<n&&(n=c),h<i&&(i=h),u>a&&(a=u),c>s&&(s=c),h>o&&(o=h)}return this.min.set(r,n,i),this.max.set(a,s,o),this}setFromPoints(e){this.makeEmpty();for(let r=0,n=e.length;r<n;r++)this.expandByPoint(e[r]);return this}setFromCenterAndSize(e,r){let n=lF.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,r=!1){return this.makeEmpty(),this.expandByObject(e,r)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,r=!1){e.updateWorldMatrix(!1,!1);let n=e.geometry;if(void 0!==n){if(r&&void 0!=n.attributes&&void 0!==n.attributes.position){let r=n.attributes.position;for(let n=0,i=r.count;n<i;n++)lF.fromBufferAttribute(r,n).applyMatrix4(e.matrixWorld),this.expandByPoint(lF)}else null===n.boundingBox&&n.computeBoundingBox(),lU.copy(n.boundingBox),lU.applyMatrix4(e.matrixWorld),this.union(lU)}let i=e.children;for(let e=0,n=i.length;e<n;e++)this.expandByObject(i[e],r);return this}containsPoint(e){return!(e.x<this.min.x)&&!(e.x>this.max.x)&&!(e.y<this.min.y)&&!(e.y>this.max.y)&&!(e.z<this.min.z)&&!(e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,r){return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x)&&!(e.min.x>this.max.x)&&!(e.max.y<this.min.y)&&!(e.min.y>this.max.y)&&!(e.max.z<this.min.z)&&!(e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,lF),lF.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let r,n;return e.normal.x>0?(r=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(r=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(r+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(r+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(r+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(r+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),r<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(l$),lX.subVectors(this.max,l$),lV.subVectors(e.a,l$),lj.subVectors(e.b,l$),lH.subVectors(e.c,l$),lW.subVectors(lj,lV),lG.subVectors(lH,lj),lq.subVectors(lV,lH);let r=[0,-lW.z,lW.y,0,-lG.z,lG.y,0,-lq.z,lq.y,lW.z,0,-lW.x,lG.z,0,-lG.x,lq.z,0,-lq.x,-lW.y,lW.x,0,-lG.y,lG.x,0,-lq.y,lq.x,0];return!!(lJ(r,lV,lj,lH,lX)&&lJ(r=[1,0,0,0,1,0,0,0,1],lV,lj,lH,lX))&&(lY.crossVectors(lW,lG),lJ(r=[lY.x,lY.y,lY.z],lV,lj,lH,lX))}clampPoint(e,r){return r.copy(e).clamp(this.min,this.max)}distanceToPoint(e){let r=lF.copy(e).clamp(this.min,this.max);return r.sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(lF).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(lB[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),lB[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),lB[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),lB[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),lB[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),lB[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),lB[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),lB[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(lB)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}let lB=[new lI,new lI,new lI,new lI,new lI,new lI,new lI,new lI],lF=new lI,lU=new lz,lV=new lI,lj=new lI,lH=new lI,lW=new lI,lG=new lI,lq=new lI,l$=new lI,lX=new lI,lY=new lI,lZ=new lI;function lJ(e,r,n,i,a){for(let s=0,o=e.length-3;s<=o;s+=3){lZ.fromArray(e,s);let o=a.x*Math.abs(lZ.x)+a.y*Math.abs(lZ.y)+a.z*Math.abs(lZ.z),l=r.dot(lZ),u=n.dot(lZ),c=i.dot(lZ);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}let lK=new lz,lQ=new lI,l0=new lI;class l1{constructor(e=new lI,r=-1){this.center=e,this.radius=r}set(e,r){return this.center.copy(e),this.radius=r,this}setFromPoints(e,r){let n=this.center;void 0!==r?n.copy(r):lK.setFromPoints(e).getCenter(n);let i=0;for(let r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let r=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=r*r}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,r){let n=this.center.distanceToSquared(e);return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;lQ.subVectors(e,this.center);let r=lQ.lengthSq();if(r>this.radius*this.radius){let e=Math.sqrt(r),n=(e-this.radius)*.5;this.center.addScaledVector(lQ,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(l0.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(lQ.copy(e.center).add(l0)),this.expandByPoint(lQ.copy(e.center).sub(l0))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}let l2=new lI,l3=new lI,l5=new lI,l4=new lI,l6=new lI,l9=new lI,l7=new lI;class l8{constructor(e=new lI,r=new lI(0,0,-1)){this.origin=e,this.direction=r}set(e,r){return this.origin.copy(e),this.direction.copy(r),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,r){return r.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,l2)),this}closestPointToPoint(e,r){r.subVectors(e,this.origin);let n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let r=l2.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(l2.copy(this.direction).multiplyScalar(r).add(this.origin),l2.distanceToSquared(e))}distanceSqToSegment(e,r,n,i){let a,s,o,l;l3.copy(e).add(r).multiplyScalar(.5),l5.copy(r).sub(e).normalize(),l4.copy(this.origin).sub(l3);let u=.5*e.distanceTo(r),c=-this.direction.dot(l5),h=l4.dot(this.direction),d=-l4.dot(l5),p=l4.lengthSq(),f=Math.abs(1-c*c);if(f>0){if(a=c*d-h,s=c*h-d,l=u*f,a>=0){if(s>=-l){if(s<=l){let e=1/f;a*=e,s*=e,o=a*(a+c*s+2*h)+s*(c*a+s+2*d)+p}else o=-(a=Math.max(0,-(c*(s=u)+h)))*a+s*(s+2*d)+p}else o=-(a=Math.max(0,-(c*(s=-u)+h)))*a+s*(s+2*d)+p}else s<=-l?(s=(a=Math.max(0,-(-c*u+h)))>0?-u:Math.min(Math.max(-u,-d),u),o=-a*a+s*(s+2*d)+p):s<=l?(a=0,o=(s=Math.min(Math.max(-u,-d),u))*(s+2*d)+p):(s=(a=Math.max(0,-(c*u+h)))>0?u:Math.min(Math.max(-u,-d),u),o=-a*a+s*(s+2*d)+p)}else s=c>0?-u:u,o=-(a=Math.max(0,-(c*s+h)))*a+s*(s+2*d)+p;return n&&n.copy(this.direction).multiplyScalar(a).add(this.origin),i&&i.copy(l5).multiplyScalar(s).add(l3),o}intersectSphere(e,r){l2.subVectors(e.center,this.origin);let n=l2.dot(this.direction),i=l2.dot(l2)-n*n,a=e.radius*e.radius;if(i>a)return null;let s=Math.sqrt(a-i),o=n-s,l=n+s;return o<0&&l<0?null:o<0?this.at(l,r):this.at(o,r)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let r=e.normal.dot(this.direction);if(0===r)return 0===e.distanceToPoint(this.origin)?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/r;return n>=0?n:null}intersectPlane(e,r){let n=this.distanceToPlane(e);return null===n?null:this.at(n,r)}intersectsPlane(e){let r=e.distanceToPoint(this.origin);if(0===r)return!0;let n=e.normal.dot(this.direction);return n*r<0}intersectBox(e,r){let n,i,a,s,o,l;let u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,d=this.origin;return(u>=0?(n=(e.min.x-d.x)*u,i=(e.max.x-d.x)*u):(n=(e.max.x-d.x)*u,i=(e.min.x-d.x)*u),c>=0?(a=(e.min.y-d.y)*c,s=(e.max.y-d.y)*c):(a=(e.max.y-d.y)*c,s=(e.min.y-d.y)*c),n>s||a>i)?null:((a>n||isNaN(n))&&(n=a),(s<i||isNaN(i))&&(i=s),h>=0?(o=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(o=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),n>l||o>i)?null:((o>n||n!=n)&&(n=o),(l<i||i!=i)&&(i=l),i<0)?null:this.at(n>=0?n:i,r)}intersectsBox(e){return null!==this.intersectBox(e,l2)}intersectTriangle(e,r,n,i,a){let s;l6.subVectors(r,e),l9.subVectors(n,e),l7.crossVectors(l6,l9);let o=this.direction.dot(l7);if(o>0){if(i)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}l4.subVectors(this.origin,e);let l=s*this.direction.dot(l9.crossVectors(l4,l9));if(l<0)return null;let u=s*this.direction.dot(l6.cross(l4));if(u<0||l+u>o)return null;let c=-s*l4.dot(l7);return c<0?null:this.at(c/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ue{constructor(){ue.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,r,n,i,a,s,o,l,u,c,h,d,p,f,m,g){let v=this.elements;return v[0]=e,v[4]=r,v[8]=n,v[12]=i,v[1]=a,v[5]=s,v[9]=o,v[13]=l,v[2]=u,v[6]=c,v[10]=h,v[14]=d,v[3]=p,v[7]=f,v[11]=m,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ue().fromArray(this.elements)}copy(e){let r=this.elements,n=e.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this}copyPosition(e){let r=this.elements,n=e.elements;return r[12]=n[12],r[13]=n[13],r[14]=n[14],this}setFromMatrix3(e){let r=e.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(e,r,n){return e.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,r,n){return this.set(e.x,r.x,n.x,0,e.y,r.y,n.y,0,e.z,r.z,n.z,0,0,0,0,1),this}extractRotation(e){let r=this.elements,n=e.elements,i=1/ut.setFromMatrixColumn(e,0).length(),a=1/ut.setFromMatrixColumn(e,1).length(),s=1/ut.setFromMatrixColumn(e,2).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=0,r[4]=n[4]*a,r[5]=n[5]*a,r[6]=n[6]*a,r[7]=0,r[8]=n[8]*s,r[9]=n[9]*s,r[10]=n[10]*s,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(e){let r=this.elements,n=e.x,i=e.y,a=e.z,s=Math.cos(n),o=Math.sin(n),l=Math.cos(i),u=Math.sin(i),c=Math.cos(a),h=Math.sin(a);if("XYZ"===e.order){let e=s*c,n=s*h,i=o*c,a=o*h;r[0]=l*c,r[4]=-l*h,r[8]=u,r[1]=n+i*u,r[5]=e-a*u,r[9]=-o*l,r[2]=a-e*u,r[6]=i+n*u,r[10]=s*l}else if("YXZ"===e.order){let e=l*c,n=l*h,i=u*c,a=u*h;r[0]=e+a*o,r[4]=i*o-n,r[8]=s*u,r[1]=s*h,r[5]=s*c,r[9]=-o,r[2]=n*o-i,r[6]=a+e*o,r[10]=s*l}else if("ZXY"===e.order){let e=l*c,n=l*h,i=u*c,a=u*h;r[0]=e-a*o,r[4]=-s*h,r[8]=i+n*o,r[1]=n+i*o,r[5]=s*c,r[9]=a-e*o,r[2]=-s*u,r[6]=o,r[10]=s*l}else if("ZYX"===e.order){let e=s*c,n=s*h,i=o*c,a=o*h;r[0]=l*c,r[4]=i*u-n,r[8]=e*u+a,r[1]=l*h,r[5]=a*u+e,r[9]=n*u-i,r[2]=-u,r[6]=o*l,r[10]=s*l}else if("YZX"===e.order){let e=s*l,n=s*u,i=o*l,a=o*u;r[0]=l*c,r[4]=a-e*h,r[8]=i*h+n,r[1]=h,r[5]=s*c,r[9]=-o*c,r[2]=-u*c,r[6]=n*h+i,r[10]=e-a*h}else if("XZY"===e.order){let e=s*l,n=s*u,i=o*l,a=o*u;r[0]=l*c,r[4]=-h,r[8]=u*c,r[1]=e*h+a,r[5]=s*c,r[9]=n*h-i,r[2]=i*h-n,r[6]=o*c,r[10]=a*h+e}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(e){return this.compose(un,e,ui)}lookAt(e,r,n){let i=this.elements;return uo.subVectors(e,r),0===uo.lengthSq()&&(uo.z=1),uo.normalize(),ua.crossVectors(n,uo),0===ua.lengthSq()&&(1===Math.abs(n.z)?uo.x+=1e-4:uo.z+=1e-4,uo.normalize(),ua.crossVectors(n,uo)),ua.normalize(),us.crossVectors(uo,ua),i[0]=ua.x,i[4]=us.x,i[8]=uo.x,i[1]=ua.y,i[5]=us.y,i[9]=uo.y,i[2]=ua.z,i[6]=us.z,i[10]=uo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){let n=e.elements,i=r.elements,a=this.elements,s=n[0],o=n[4],l=n[8],u=n[12],c=n[1],h=n[5],d=n[9],p=n[13],f=n[2],m=n[6],g=n[10],v=n[14],y=n[3],x=n[7],b=n[11],_=n[15],S=i[0],w=i[4],M=i[8],T=i[12],E=i[1],A=i[5],C=i[9],R=i[13],P=i[2],L=i[6],k=i[10],D=i[14],I=i[3],O=i[7],N=i[11],z=i[15];return a[0]=s*S+o*E+l*P+u*I,a[4]=s*w+o*A+l*L+u*O,a[8]=s*M+o*C+l*k+u*N,a[12]=s*T+o*R+l*D+u*z,a[1]=c*S+h*E+d*P+p*I,a[5]=c*w+h*A+d*L+p*O,a[9]=c*M+h*C+d*k+p*N,a[13]=c*T+h*R+d*D+p*z,a[2]=f*S+m*E+g*P+v*I,a[6]=f*w+m*A+g*L+v*O,a[10]=f*M+m*C+g*k+v*N,a[14]=f*T+m*R+g*D+v*z,a[3]=y*S+x*E+b*P+_*I,a[7]=y*w+x*A+b*L+_*O,a[11]=y*M+x*C+b*k+_*N,a[15]=y*T+x*R+b*D+_*z,this}multiplyScalar(e){let r=this.elements;return r[0]*=e,r[4]*=e,r[8]*=e,r[12]*=e,r[1]*=e,r[5]*=e,r[9]*=e,r[13]*=e,r[2]*=e,r[6]*=e,r[10]*=e,r[14]*=e,r[3]*=e,r[7]*=e,r[11]*=e,r[15]*=e,this}determinant(){let e=this.elements,r=e[0],n=e[4],i=e[8],a=e[12],s=e[1],o=e[5],l=e[9],u=e[13],c=e[2],h=e[6],d=e[10],p=e[14],f=e[3],m=e[7],g=e[11],v=e[15];return f*(+a*l*h-i*u*h-a*o*d+n*u*d+i*o*p-n*l*p)+m*(+r*l*p-r*u*d+a*s*d-i*s*p+i*u*c-a*l*c)+g*(+r*u*h-r*o*p-a*s*h+n*s*p+a*o*c-n*u*c)+v*(-i*o*c-r*l*h+r*o*d+i*s*h-n*s*d+n*l*c)}transpose(){let e;let r=this.elements;return e=r[1],r[1]=r[4],r[4]=e,e=r[2],r[2]=r[8],r[8]=e,e=r[6],r[6]=r[9],r[9]=e,e=r[3],r[3]=r[12],r[12]=e,e=r[7],r[7]=r[13],r[13]=e,e=r[11],r[11]=r[14],r[14]=e,this}setPosition(e,r,n){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=r,i[14]=n),this}invert(){let e=this.elements,r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],v=e[15],y=h*g*u-m*d*u+m*l*p-o*g*p-h*l*v+o*d*v,x=f*d*u-c*g*u-f*l*p+s*g*p+c*l*v-s*d*v,b=c*m*u-f*h*u+f*o*p-s*m*p-c*o*v+s*h*v,_=f*h*l-c*m*l-f*o*d+s*m*d+c*o*g-s*h*g,S=r*y+n*x+i*b+a*_;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let w=1/S;return e[0]=y*w,e[1]=(m*d*a-h*g*a-m*i*p+n*g*p+h*i*v-n*d*v)*w,e[2]=(o*g*a-m*l*a+m*i*u-n*g*u-o*i*v+n*l*v)*w,e[3]=(h*l*a-o*d*a-h*i*u+n*d*u+o*i*p-n*l*p)*w,e[4]=x*w,e[5]=(c*g*a-f*d*a+f*i*p-r*g*p-c*i*v+r*d*v)*w,e[6]=(f*l*a-s*g*a-f*i*u+r*g*u+s*i*v-r*l*v)*w,e[7]=(s*d*a-c*l*a+c*i*u-r*d*u-s*i*p+r*l*p)*w,e[8]=b*w,e[9]=(f*h*a-c*m*a-f*n*p+r*m*p+c*n*v-r*h*v)*w,e[10]=(s*m*a-f*o*a+f*n*u-r*m*u-s*n*v+r*o*v)*w,e[11]=(c*o*a-s*h*a-c*n*u+r*h*u+s*n*p-r*o*p)*w,e[12]=_*w,e[13]=(c*m*i-f*h*i+f*n*d-r*m*d-c*n*g+r*h*g)*w,e[14]=(f*o*i-s*m*i-f*n*l+r*m*l+s*n*g-r*o*g)*w,e[15]=(s*h*i-c*o*i+c*n*l-r*h*l-s*n*d+r*o*d)*w,this}scale(e){let r=this.elements,n=e.x,i=e.y,a=e.z;return r[0]*=n,r[4]*=i,r[8]*=a,r[1]*=n,r[5]*=i,r[9]*=a,r[2]*=n,r[6]*=i,r[10]*=a,r[3]*=n,r[7]*=i,r[11]*=a,this}getMaxScaleOnAxis(){let e=this.elements,r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(r,n,i))}makeTranslation(e,r,n){return this.set(1,0,0,e,0,1,0,r,0,0,1,n,0,0,0,1),this}makeRotationX(e){let r=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,r,-n,0,0,n,r,0,0,0,0,1),this}makeRotationY(e){let r=Math.cos(e),n=Math.sin(e);return this.set(r,0,n,0,0,1,0,0,-n,0,r,0,0,0,0,1),this}makeRotationZ(e){let r=Math.cos(e),n=Math.sin(e);return this.set(r,-n,0,0,n,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,r){let n=Math.cos(r),i=Math.sin(r),a=1-n,s=e.x,o=e.y,l=e.z,u=a*s,c=a*o;return this.set(u*s+n,u*o-i*l,u*l+i*o,0,u*o+i*l,c*o+n,c*l-i*s,0,u*l-i*o,c*l+i*s,a*l*l+n,0,0,0,0,1),this}makeScale(e,r,n){return this.set(e,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,r,n,i,a,s){return this.set(1,n,a,0,e,1,s,0,r,i,1,0,0,0,0,1),this}compose(e,r,n){let i=this.elements,a=r._x,s=r._y,o=r._z,l=r._w,u=a+a,c=s+s,h=o+o,d=a*u,p=a*c,f=a*h,m=s*c,g=s*h,v=o*h,y=l*u,x=l*c,b=l*h,_=n.x,S=n.y,w=n.z;return i[0]=(1-(m+v))*_,i[1]=(p+b)*_,i[2]=(f-x)*_,i[3]=0,i[4]=(p-b)*S,i[5]=(1-(d+v))*S,i[6]=(g+y)*S,i[7]=0,i[8]=(f+x)*w,i[9]=(g-y)*w,i[10]=(1-(d+m))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,r,n){let i=this.elements,a=ut.set(i[0],i[1],i[2]).length(),s=ut.set(i[4],i[5],i[6]).length(),o=ut.set(i[8],i[9],i[10]).length(),l=this.determinant();l<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],ur.copy(this);let u=1/a,c=1/s,h=1/o;return ur.elements[0]*=u,ur.elements[1]*=u,ur.elements[2]*=u,ur.elements[4]*=c,ur.elements[5]*=c,ur.elements[6]*=c,ur.elements[8]*=h,ur.elements[9]*=h,ur.elements[10]*=h,r.setFromRotationMatrix(ur),n.x=a,n.y=s,n.z=o,this}makePerspective(e,r,n,i,a,s){let o=this.elements;return o[0]=2*a/(r-e),o[4]=0,o[8]=(r+e)/(r-e),o[12]=0,o[1]=0,o[5]=2*a/(n-i),o[9]=(n+i)/(n-i),o[13]=0,o[2]=0,o[6]=0,o[10]=-(s+a)/(s-a),o[14]=-2*s*a/(s-a),o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,r,n,i,a,s){let o=this.elements,l=1/(r-e),u=1/(n-i),c=1/(s-a);return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-((r+e)*l),o[1]=0,o[5]=2*u,o[9]=0,o[13]=-((n+i)*u),o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-((s+a)*c),o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){let r=this.elements,n=e.elements;for(let e=0;e<16;e++)if(r[e]!==n[e])return!1;return!0}fromArray(e,r=0){for(let n=0;n<16;n++)this.elements[n]=e[n+r];return this}toArray(e=[],r=0){let n=this.elements;return e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],e[r+4]=n[4],e[r+5]=n[5],e[r+6]=n[6],e[r+7]=n[7],e[r+8]=n[8],e[r+9]=n[9],e[r+10]=n[10],e[r+11]=n[11],e[r+12]=n[12],e[r+13]=n[13],e[r+14]=n[14],e[r+15]=n[15],e}}let ut=new lI,ur=new ue,un=new lI(0,0,0),ui=new lI(1,1,1),ua=new lI,us=new lI,uo=new lI,ul=new ue,uu=new lD;class uc{constructor(e=0,r=0,n=0,i=uc.DefaultOrder){this.isEuler=!0,this._x=e,this._y=r,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,r,n,i=this._order){return this._x=e,this._y=r,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,r=this._order,n=!0){let i=e.elements,a=i[0],s=i[4],o=i[8],l=i[1],u=i[5],c=i[9],h=i[2],d=i[6],p=i[10];switch(r){case"XYZ":this._y=Math.asin(le(o,-1,1)),.9999999>Math.abs(o)?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-le(c,-1,1)),.9999999>Math.abs(c)?(this._y=Math.atan2(o,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(le(d,-1,1)),.9999999>Math.abs(d)?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-le(h,-1,1)),.9999999>Math.abs(h)?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(le(l,-1,1)),.9999999>Math.abs(l)?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-le(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(d,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-c,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,r,n){return ul.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ul,r,n)}setFromVector3(e,r=this._order){return this.set(e.x,e.y,e.z,r)}reorder(e){return uu.setFromEuler(this),this.setFromQuaternion(uu,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}uc.DefaultOrder="XYZ",uc.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class uh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}isEnabled(e){return(this.mask&(1<<e|0))!=0}}let ud=0,up=new lI,uf=new lD,um=new ue,ug=new lI,uv=new lI,uy=new lI,ux=new lD,ub=new lI(1,0,0),u_=new lI(0,1,0),uS=new lI(0,0,1),uw={type:"added"},uM={type:"removed"};class uT extends o5{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ud++}),this.uuid=o8(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=uT.DefaultUp.clone();let e=new lI,r=new uc,n=new lD,i=new lI(1,1,1);r._onChange(function(){n.setFromEuler(r,!1)}),n._onChange(function(){r.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new ue},normalMatrix:{value:new lc}}),this.matrix=new ue,this.matrixWorld=new ue,this.matrixAutoUpdate=uT.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=uT.DefaultMatrixWorldAutoUpdate,this.layers=new uh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,r){this.quaternion.setFromAxisAngle(e,r)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,r){return uf.setFromAxisAngle(e,r),this.quaternion.multiply(uf),this}rotateOnWorldAxis(e,r){return uf.setFromAxisAngle(e,r),this.quaternion.premultiply(uf),this}rotateX(e){return this.rotateOnAxis(ub,e)}rotateY(e){return this.rotateOnAxis(u_,e)}rotateZ(e){return this.rotateOnAxis(uS,e)}translateOnAxis(e,r){return up.copy(e).applyQuaternion(this.quaternion),this.position.add(up.multiplyScalar(r)),this}translateX(e){return this.translateOnAxis(ub,e)}translateY(e){return this.translateOnAxis(u_,e)}translateZ(e){return this.translateOnAxis(uS,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(um.copy(this.matrixWorld).invert())}lookAt(e,r,n){e.isVector3?ug.copy(e):ug.set(e,r,n);let i=this.parent;this.updateWorldMatrix(!0,!1),uv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?um.lookAt(uv,ug,this.up):um.lookAt(ug,uv,this.up),this.quaternion.setFromRotationMatrix(um),i&&(um.extractRotation(i.matrixWorld),uf.setFromRotationMatrix(um),this.quaternion.premultiply(uf.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(uw)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}let r=this.children.indexOf(e);return -1!==r&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(uM)),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let r=this.children[e];r.parent=null,r.dispatchEvent(uM)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),um.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),um.multiply(e.parent.matrixWorld)),e.applyMatrix4(um),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,r){if(this[e]===r)return this;for(let n=0,i=this.children.length;n<i;n++){let i=this.children[n],a=i.getObjectByProperty(e,r);if(void 0!==a)return a}}getObjectsByProperty(e,r){let n=[];this[e]===r&&n.push(this);for(let i=0,a=this.children.length;i<a;i++){let a=this.children[i].getObjectsByProperty(e,r);a.length>0&&(n=n.concat(a))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uv,e,uy),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uv,ux,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let r=this.matrixWorld.elements;return e.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(e){e(this);let r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].traverseVisible(e)}traverseAncestors(e){let r=this.parent;null!==r&&(e(r),r.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let r=this.children;for(let n=0,i=r.length;n<i;n++){let i=r[n];(!0===i.matrixWorldAutoUpdate||!0===e)&&i.updateMatrixWorld(e)}}updateWorldMatrix(e,r){let n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===r){let e=this.children;for(let r=0,n=e.length;r<n;r++){let n=e[r];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){let r=void 0===e||"string"==typeof e,n={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};function a(r,n){return void 0===r[n.uuid]&&(r[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);let r=this.geometry.parameters;if(void 0!==r&&void 0!==r.shapes){let n=r.shapes;if(Array.isArray(n))for(let r=0,i=n.length;r<i;r++){let i=n[r];a(e.shapes,i)}else a(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material){if(Array.isArray(this.material)){let r=[];for(let n=0,i=this.material.length;n<i;n++)r.push(a(e.materials,this.material[n]));i.material=r}else i.material=a(e.materials,this.material)}if(this.children.length>0){i.children=[];for(let r=0;r<this.children.length;r++)i.children.push(this.children[r].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let r=0;r<this.animations.length;r++){let n=this.animations[r];i.animations.push(a(e.animations,n))}}if(r){let r=s(e.geometries),i=s(e.materials),a=s(e.textures),o=s(e.images),l=s(e.shapes),u=s(e.skeletons),c=s(e.animations),h=s(e.nodes);r.length>0&&(n.geometries=r),i.length>0&&(n.materials=i),a.length>0&&(n.textures=a),o.length>0&&(n.images=o),l.length>0&&(n.shapes=l),u.length>0&&(n.skeletons=u),c.length>0&&(n.animations=c),h.length>0&&(n.nodes=h)}return n.object=i,n;function s(e){let r=[];for(let n in e){let i=e[n];delete i.metadata,r.push(i)}return r}}clone(e){return new this.constructor().copy(this,e)}copy(e,r=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===r)for(let r=0;r<e.children.length;r++){let n=e.children[r];this.add(n.clone())}return this}}uT.DefaultUp=new lI(0,1,0),uT.DefaultMatrixAutoUpdate=!0,uT.DefaultMatrixWorldAutoUpdate=!0;let uE=new lI,uA=new lI,uC=new lI,uR=new lI,uP=new lI,uL=new lI,uk=new lI,uD=new lI,uI=new lI,uO=new lI;class uN{constructor(e=new lI,r=new lI,n=new lI){this.a=e,this.b=r,this.c=n}static getNormal(e,r,n,i){i.subVectors(n,r),uE.subVectors(e,r),i.cross(uE);let a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,r,n,i,a){uE.subVectors(i,r),uA.subVectors(n,r),uC.subVectors(e,r);let s=uE.dot(uE),o=uE.dot(uA),l=uE.dot(uC),u=uA.dot(uA),c=uA.dot(uC),h=s*u-o*o;if(0===h)return a.set(-2,-1,-1);let d=1/h,p=(u*l-o*c)*d,f=(s*c-o*l)*d;return a.set(1-p-f,f,p)}static containsPoint(e,r,n,i){return this.getBarycoord(e,r,n,i,uR),uR.x>=0&&uR.y>=0&&uR.x+uR.y<=1}static getUV(e,r,n,i,a,s,o,l){return this.getBarycoord(e,r,n,i,uR),l.set(0,0),l.addScaledVector(a,uR.x),l.addScaledVector(s,uR.y),l.addScaledVector(o,uR.z),l}static isFrontFacing(e,r,n,i){return uE.subVectors(n,r),uA.subVectors(e,r),0>uE.cross(uA).dot(i)}set(e,r,n){return this.a.copy(e),this.b.copy(r),this.c.copy(n),this}setFromPointsAndIndices(e,r,n,i){return this.a.copy(e[r]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,r,n,i){return this.a.fromBufferAttribute(e,r),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return uE.subVectors(this.c,this.b),uA.subVectors(this.a,this.b),.5*uE.cross(uA).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return uN.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,r){return uN.getBarycoord(e,this.a,this.b,this.c,r)}getUV(e,r,n,i,a){return uN.getUV(e,this.a,this.b,this.c,r,n,i,a)}containsPoint(e){return uN.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return uN.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,r){let n,i;let a=this.a,s=this.b,o=this.c;uP.subVectors(s,a),uL.subVectors(o,a),uD.subVectors(e,a);let l=uP.dot(uD),u=uL.dot(uD);if(l<=0&&u<=0)return r.copy(a);uI.subVectors(e,s);let c=uP.dot(uI),h=uL.dot(uI);if(c>=0&&h<=c)return r.copy(s);let d=l*h-c*u;if(d<=0&&l>=0&&c<=0)return n=l/(l-c),r.copy(a).addScaledVector(uP,n);uO.subVectors(e,o);let p=uP.dot(uO),f=uL.dot(uO);if(f>=0&&p<=f)return r.copy(o);let m=p*u-l*f;if(m<=0&&u>=0&&f<=0)return i=u/(u-f),r.copy(a).addScaledVector(uL,i);let g=c*f-p*h;if(g<=0&&h-c>=0&&p-f>=0)return uk.subVectors(o,s),i=(h-c)/(h-c+(p-f)),r.copy(s).addScaledVector(uk,i);let v=1/(g+m+d);return n=m*v,i=d*v,r.copy(a).addScaledVector(uP,n).addScaledVector(uL,i)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let uz=0;class uB extends o5{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:uz++}),this.uuid=o8(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let r in e){let n=e[r];if(void 0===n){console.warn("THREE.Material: '"+r+"' parameter is undefined.");continue}let i=this[r];if(void 0===i){console.warn("THREE."+this.type+": '"+r+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[r]=n}}toJSON(e){let r=void 0===e||"string"==typeof e;r&&(e={textures:{},images:{}});let n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){let r=[];for(let n in e){let i=e[n];delete i.metadata,r.push(i)}return r}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),r){let r=i(e.textures),a=i(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let r=e.clippingPlanes,n=null;if(null!==r){let e=r.length;n=Array(e);for(let i=0;i!==e;++i)n[i]=r[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class uF extends uB{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new lM(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}let uU=new lI,uV=new lu;class uj{constructor(e,r,n=!1){if(Array.isArray(e))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=r,this.count=void 0!==e?e.length/r:0,this.normalized=n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,r,n){e*=this.itemSize,n*=r.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=r.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let r=0,n=this.count;r<n;r++)uV.fromBufferAttribute(this,r),uV.applyMatrix3(e),this.setXY(r,uV.x,uV.y);else if(3===this.itemSize)for(let r=0,n=this.count;r<n;r++)uU.fromBufferAttribute(this,r),uU.applyMatrix3(e),this.setXYZ(r,uU.x,uU.y,uU.z);return this}applyMatrix4(e){for(let r=0,n=this.count;r<n;r++)uU.fromBufferAttribute(this,r),uU.applyMatrix4(e),this.setXYZ(r,uU.x,uU.y,uU.z);return this}applyNormalMatrix(e){for(let r=0,n=this.count;r<n;r++)uU.fromBufferAttribute(this,r),uU.applyNormalMatrix(e),this.setXYZ(r,uU.x,uU.y,uU.z);return this}transformDirection(e){for(let r=0,n=this.count;r<n;r++)uU.fromBufferAttribute(this,r),uU.transformDirection(e),this.setXYZ(r,uU.x,uU.y,uU.z);return this}set(e,r=0){return this.array.set(e,r),this}getX(e){let r=this.array[e*this.itemSize];return this.normalized&&(r=ls(r,this.array)),r}setX(e,r){return this.normalized&&(r=lo(r,this.array)),this.array[e*this.itemSize]=r,this}getY(e){let r=this.array[e*this.itemSize+1];return this.normalized&&(r=ls(r,this.array)),r}setY(e,r){return this.normalized&&(r=lo(r,this.array)),this.array[e*this.itemSize+1]=r,this}getZ(e){let r=this.array[e*this.itemSize+2];return this.normalized&&(r=ls(r,this.array)),r}setZ(e,r){return this.normalized&&(r=lo(r,this.array)),this.array[e*this.itemSize+2]=r,this}getW(e){let r=this.array[e*this.itemSize+3];return this.normalized&&(r=ls(r,this.array)),r}setW(e,r){return this.normalized&&(r=lo(r,this.array)),this.array[e*this.itemSize+3]=r,this}setXY(e,r,n){return e*=this.itemSize,this.normalized&&(r=lo(r,this.array),n=lo(n,this.array)),this.array[e+0]=r,this.array[e+1]=n,this}setXYZ(e,r,n,i){return e*=this.itemSize,this.normalized&&(r=lo(r,this.array),n=lo(n,this.array),i=lo(i,this.array)),this.array[e+0]=r,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,r,n,i,a){return e*=this.itemSize,this.normalized&&(r=lo(r,this.array),n=lo(n,this.array),i=lo(i,this.array),a=lo(a,this.array)),this.array[e+0]=r,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class uH extends uj{constructor(e,r,n){super(new Uint16Array(e),r,n)}}class uW extends uj{constructor(e,r,n){super(new Uint32Array(e),r,n)}}class uG extends uj{constructor(e,r,n){super(new Float32Array(e),r,n)}}let uq=0,u$=new ue,uX=new uT,uY=new lI,uZ=new lz,uJ=new lz,uK=new lI;class uQ extends o5{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:uq++}),this.uuid=o8(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ld(e)?uW:uH)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,r){return this.attributes[e]=r,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,r,n=0){this.groups.push({start:e,count:r,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}applyMatrix4(e){let r=this.attributes.position;void 0!==r&&(r.applyMatrix4(e),r.needsUpdate=!0);let n=this.attributes.normal;if(void 0!==n){let r=new lc().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}let i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return u$.makeRotationFromQuaternion(e),this.applyMatrix4(u$),this}rotateX(e){return u$.makeRotationX(e),this.applyMatrix4(u$),this}rotateY(e){return u$.makeRotationY(e),this.applyMatrix4(u$),this}rotateZ(e){return u$.makeRotationZ(e),this.applyMatrix4(u$),this}translate(e,r,n){return u$.makeTranslation(e,r,n),this.applyMatrix4(u$),this}scale(e,r,n){return u$.makeScale(e,r,n),this.applyMatrix4(u$),this}lookAt(e){return uX.lookAt(e),uX.updateMatrix(),this.applyMatrix4(uX.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(uY).negate(),this.translate(uY.x,uY.y,uY.z),this}setFromPoints(e){let r=[];for(let n=0,i=e.length;n<i;n++){let i=e[n];r.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new uG(r,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new lz);let e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new lI(-1/0,-1/0,-1/0),new lI(Infinity,Infinity,Infinity));return}if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),r)for(let e=0,n=r.length;e<n;e++){let n=r[e];uZ.setFromBufferAttribute(n),this.morphTargetsRelative?(uK.addVectors(this.boundingBox.min,uZ.min),this.boundingBox.expandByPoint(uK),uK.addVectors(this.boundingBox.max,uZ.max),this.boundingBox.expandByPoint(uK)):(this.boundingBox.expandByPoint(uZ.min),this.boundingBox.expandByPoint(uZ.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new l1);let e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new lI,1/0);return}if(e){let n=this.boundingSphere.center;if(uZ.setFromBufferAttribute(e),r)for(let e=0,n=r.length;e<n;e++){let n=r[e];uJ.setFromBufferAttribute(n),this.morphTargetsRelative?(uK.addVectors(uZ.min,uJ.min),uZ.expandByPoint(uK),uK.addVectors(uZ.max,uJ.max),uZ.expandByPoint(uK)):(uZ.expandByPoint(uJ.min),uZ.expandByPoint(uJ.max))}uZ.getCenter(n);let i=0;for(let r=0,a=e.count;r<a;r++)uK.fromBufferAttribute(e,r),i=Math.max(i,n.distanceToSquared(uK));if(r)for(let a=0,s=r.length;a<s;a++){let s=r[a],o=this.morphTargetsRelative;for(let r=0,a=s.count;r<a;r++)uK.fromBufferAttribute(s,r),o&&(uY.fromBufferAttribute(e,r),uK.add(uY)),i=Math.max(i,n.distanceToSquared(uK))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,r=this.attributes;if(null===e||void 0===r.position||void 0===r.normal||void 0===r.uv){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=e.array,i=r.position.array,a=r.normal.array,s=r.uv.array,o=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new uj(new Float32Array(4*o),4));let l=this.getAttribute("tangent").array,u=[],c=[];for(let e=0;e<o;e++)u[e]=new lI,c[e]=new lI;let h=new lI,d=new lI,p=new lI,f=new lu,m=new lu,g=new lu,v=new lI,y=new lI,x=this.groups;0===x.length&&(x=[{start:0,count:n.length}]);for(let e=0,r=x.length;e<r;++e){let r=x[e],a=r.start,o=r.count;for(let e=a,r=a+o;e<r;e+=3)!function(e,r,n){h.fromArray(i,3*e),d.fromArray(i,3*r),p.fromArray(i,3*n),f.fromArray(s,2*e),m.fromArray(s,2*r),g.fromArray(s,2*n),d.sub(h),p.sub(h),m.sub(f),g.sub(f);let a=1/(m.x*g.y-g.x*m.y);isFinite(a)&&(v.copy(d).multiplyScalar(g.y).addScaledVector(p,-m.y).multiplyScalar(a),y.copy(p).multiplyScalar(m.x).addScaledVector(d,-g.x).multiplyScalar(a),u[e].add(v),u[r].add(v),u[n].add(v),c[e].add(y),c[r].add(y),c[n].add(y))}(n[e+0],n[e+1],n[e+2])}let b=new lI,_=new lI,S=new lI,w=new lI;function M(e){S.fromArray(a,3*e),w.copy(S);let r=u[e];b.copy(r),b.sub(S.multiplyScalar(S.dot(r))).normalize(),_.crossVectors(w,r);let n=_.dot(c[e]);l[4*e]=b.x,l[4*e+1]=b.y,l[4*e+2]=b.z,l[4*e+3]=n<0?-1:1}for(let e=0,r=x.length;e<r;++e){let r=x[e],i=r.start,a=r.count;for(let e=i,r=i+a;e<r;e+=3)M(n[e+0]),M(n[e+1]),M(n[e+2])}}computeVertexNormals(){let e=this.index,r=this.getAttribute("position");if(void 0!==r){let n=this.getAttribute("normal");if(void 0===n)n=new uj(new Float32Array(3*r.count),3),this.setAttribute("normal",n);else for(let e=0,r=n.count;e<r;e++)n.setXYZ(e,0,0,0);let i=new lI,a=new lI,s=new lI,o=new lI,l=new lI,u=new lI,c=new lI,h=new lI;if(e)for(let d=0,p=e.count;d<p;d+=3){let p=e.getX(d+0),f=e.getX(d+1),m=e.getX(d+2);i.fromBufferAttribute(r,p),a.fromBufferAttribute(r,f),s.fromBufferAttribute(r,m),c.subVectors(s,a),h.subVectors(i,a),c.cross(h),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),u.fromBufferAttribute(n,m),o.add(c),l.add(c),u.add(c),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z),n.setXYZ(m,u.x,u.y,u.z)}else for(let e=0,o=r.count;e<o;e+=3)i.fromBufferAttribute(r,e+0),a.fromBufferAttribute(r,e+1),s.fromBufferAttribute(r,e+2),c.subVectors(s,a),h.subVectors(i,a),c.cross(h),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let r=0,n=e.count;r<n;r++)uK.fromBufferAttribute(e,r),uK.normalize(),e.setXYZ(r,uK.x,uK.y,uK.z)}toNonIndexed(){function e(e,r){let n=e.array,i=e.itemSize,a=e.normalized,s=new n.constructor(r.length*i),o=0,l=0;for(let a=0,u=r.length;a<u;a++){o=e.isInterleavedBufferAttribute?r[a]*e.data.stride+e.offset:r[a]*i;for(let e=0;e<i;e++)s[l++]=n[o++]}return new uj(s,i,a)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let r=new uQ,n=this.index.array,i=this.attributes;for(let a in i){let s=i[a],o=e(s,n);r.setAttribute(a,o)}let a=this.morphAttributes;for(let i in a){let s=[],o=a[i];for(let r=0,i=o.length;r<i;r++){let i=o[r],a=e(i,n);s.push(a)}r.morphAttributes[i]=s}r.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let e=0,n=s.length;e<n;e++){let n=s[e];r.addGroup(n.start,n.count,n.materialIndex)}return r}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let r=this.parameters;for(let n in r)void 0!==r[n]&&(e[n]=r[n]);return e}e.data={attributes:{}};let r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});let n=this.attributes;for(let r in n){let i=n[r];e.data.attributes[r]=i.toJSON(e.data)}let i={},a=!1;for(let r in this.morphAttributes){let n=this.morphAttributes[r],s=[];for(let r=0,i=n.length;r<i;r++){let i=n[r];s.push(i.toJSON(e.data))}s.length>0&&(i[r]=s,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let r={};this.name=e.name;let n=e.index;null!==n&&this.setIndex(n.clone(r));let i=e.attributes;for(let e in i){let n=i[e];this.setAttribute(e,n.clone(r))}let a=e.morphAttributes;for(let e in a){let n=[],i=a[e];for(let e=0,a=i.length;e<a;e++)n.push(i[e].clone(r));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let e=0,r=s.length;e<r;e++){let r=s[e];this.addGroup(r.start,r.count,r.materialIndex)}let o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());let l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}let u0=new ue,u1=new l8,u2=new l1,u3=new lI,u5=new lI,u4=new lI,u6=new lI,u9=new lI,u7=new lu,u8=new lu,ce=new lu,ct=new lI,cr=new lI;class cn extends uT{constructor(e=new uQ,r=new uF){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry,r=e.morphAttributes,n=Object.keys(r);if(n.length>0){let e=r[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=e.length;r<n;r++){let n=e[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=r}}}}getVertexPosition(e,r){let n=this.geometry,i=n.attributes.position,a=n.morphAttributes.position,s=n.morphTargetsRelative;r.fromBufferAttribute(i,e);let o=this.morphTargetInfluences;if(a&&o){u9.set(0,0,0);for(let n=0,i=a.length;n<i;n++){let i=o[n],l=a[n];0!==i&&(u6.fromBufferAttribute(l,e),s?u9.addScaledVector(u6,i):u9.addScaledVector(u6.sub(r),i))}r.add(u9)}return this.isSkinnedMesh&&this.boneTransform(e,r),r}raycast(e,r){let n;let i=this.geometry,a=this.material,s=this.matrixWorld;if(void 0===a||(null===i.boundingSphere&&i.computeBoundingSphere(),u2.copy(i.boundingSphere),u2.applyMatrix4(s),!1===e.ray.intersectsSphere(u2))||(u0.copy(s).invert(),u1.copy(e.ray).applyMatrix4(u0),null!==i.boundingBox&&!1===u1.intersectsBox(i.boundingBox)))return;let o=i.index,l=i.attributes.position,u=i.attributes.uv,c=i.attributes.uv2,h=i.groups,d=i.drawRange;if(null!==o){if(Array.isArray(a))for(let i=0,s=h.length;i<s;i++){let s=h[i],l=a[s.materialIndex],p=Math.max(s.start,d.start),f=Math.min(o.count,Math.min(s.start+s.count,d.start+d.count));for(let i=p;i<f;i+=3){let a=o.getX(i),h=o.getX(i+1),d=o.getX(i+2);(n=ci(this,l,e,u1,u,c,a,h,d))&&(n.faceIndex=Math.floor(i/3),n.face.materialIndex=s.materialIndex,r.push(n))}}else{let i=Math.max(0,d.start),s=Math.min(o.count,d.start+d.count);for(let l=i;l<s;l+=3){let i=o.getX(l),s=o.getX(l+1),h=o.getX(l+2);(n=ci(this,a,e,u1,u,c,i,s,h))&&(n.faceIndex=Math.floor(l/3),r.push(n))}}}else if(void 0!==l){if(Array.isArray(a))for(let i=0,s=h.length;i<s;i++){let s=h[i],o=a[s.materialIndex],p=Math.max(s.start,d.start),f=Math.min(l.count,Math.min(s.start+s.count,d.start+d.count));for(let i=p;i<f;i+=3){let a=i,l=i+1,h=i+2;(n=ci(this,o,e,u1,u,c,a,l,h))&&(n.faceIndex=Math.floor(i/3),n.face.materialIndex=s.materialIndex,r.push(n))}}else{let i=Math.max(0,d.start),s=Math.min(l.count,d.start+d.count);for(let o=i;o<s;o+=3){let i=o,s=o+1,l=o+2;(n=ci(this,a,e,u1,u,c,i,s,l))&&(n.faceIndex=Math.floor(o/3),r.push(n))}}}}}function ci(e,r,n,i,a,s,o,l,u){e.getVertexPosition(o,u3),e.getVertexPosition(l,u5),e.getVertexPosition(u,u4);let c=function(e,r,n,i,a,s,o,l){if(null===(1===r.side?i.intersectTriangle(o,s,a,!0,l):i.intersectTriangle(a,s,o,0===r.side,l)))return null;cr.copy(l),cr.applyMatrix4(e.matrixWorld);let u=n.ray.origin.distanceTo(cr);return u<n.near||u>n.far?null:{distance:u,point:cr.clone(),object:e}}(e,r,n,i,u3,u5,u4,ct);if(c){a&&(u7.fromBufferAttribute(a,o),u8.fromBufferAttribute(a,l),ce.fromBufferAttribute(a,u),c.uv=uN.getUV(ct,u3,u5,u4,u7,u8,ce,new lu)),s&&(u7.fromBufferAttribute(s,o),u8.fromBufferAttribute(s,l),ce.fromBufferAttribute(s,u),c.uv2=uN.getUV(ct,u3,u5,u4,u7,u8,ce,new lu));let e={a:o,b:l,c:u,normal:new lI,materialIndex:0};uN.getNormal(u3,u5,u4,e.normal),c.face=e}return c}class ca extends uQ{constructor(e=1,r=1,n=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:r,depth:n,widthSegments:i,heightSegments:a,depthSegments:s};let o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);let l=[],u=[],c=[],h=[],d=0,p=0;function f(e,r,n,i,a,s,f,m,g,v,y){let x=s/g,b=f/v,_=s/2,S=f/2,w=m/2,M=g+1,T=v+1,E=0,A=0,C=new lI;for(let s=0;s<T;s++){let o=s*b-S;for(let l=0;l<M;l++){let d=l*x-_;C[e]=d*i,C[r]=o*a,C[n]=w,u.push(C.x,C.y,C.z),C[e]=0,C[r]=0,C[n]=m>0?1:-1,c.push(C.x,C.y,C.z),h.push(l/g),h.push(1-s/v),E+=1}}for(let e=0;e<v;e++)for(let r=0;r<g;r++){let n=d+r+M*e,i=d+r+M*(e+1),a=d+(r+1)+M*(e+1),s=d+(r+1)+M*e;l.push(n,i,s),l.push(i,a,s),A+=6}o.addGroup(p,A,y),p+=A,d+=E}f("z","y","x",-1,-1,n,r,e,s,a,0),f("z","y","x",1,-1,n,r,-e,s,a,1),f("x","z","y",1,1,e,n,r,i,s,2),f("x","z","y",1,-1,e,n,-r,i,s,3),f("x","y","z",1,-1,e,r,n,i,a,4),f("x","y","z",-1,-1,e,r,-n,i,a,5),this.setIndex(l),this.setAttribute("position",new uG(u,3)),this.setAttribute("normal",new uG(c,3)),this.setAttribute("uv",new uG(h,2))}static fromJSON(e){return new ca(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function cs(e){let r={};for(let n in e)for(let i in r[n]={},e[n]){let a=e[n][i];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?r[n][i]=a.clone():Array.isArray(a)?r[n][i]=a.slice():r[n][i]=a}return r}function co(e){let r={};for(let n=0;n<e.length;n++){let i=cs(e[n]);for(let e in i)r[e]=i[e]}return r}function cl(e){return null===e.getRenderTarget()&&3001===e.outputEncoding?o1:o2}let cu={clone:cs,merge:co};class cc extends uB{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cs(e.uniforms),this.uniformsGroups=function(e){let r=[];for(let n=0;n<e.length;n++)r.push(e[n].clone());return r}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let r=super.toJSON(e);for(let n in r.glslVersion=this.glslVersion,r.uniforms={},this.uniforms){let i=this.uniforms[n],a=i.value;a&&a.isTexture?r.uniforms[n]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?r.uniforms[n]={type:"c",value:a.getHex()}:a&&a.isVector2?r.uniforms[n]={type:"v2",value:a.toArray()}:a&&a.isVector3?r.uniforms[n]={type:"v3",value:a.toArray()}:a&&a.isVector4?r.uniforms[n]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?r.uniforms[n]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?r.uniforms[n]={type:"m4",value:a.toArray()}:r.uniforms[n]={value:a}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader;let n={};for(let e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(r.extensions=n),r}}class ch extends uT{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ue,this.projectionMatrix=new ue,this.projectionMatrixInverse=new ue}copy(e,r){return super.copy(e,r),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let r=this.matrixWorld.elements;return e.set(-r[8],-r[9],-r[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,r){super.updateWorldMatrix(e,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class cd extends ch{constructor(e=50,r=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let r=.5*this.getFilmHeight()/e;this.fov=2*o7*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(.5*o9*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*o7*Math.atan(Math.tan(.5*o9*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,r,n,i,a,s){this.aspect=e/r,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,r=e*Math.tan(.5*o9*this.fov)/this.zoom,n=2*r,i=this.aspect*n,a=-.5*i,s=this.view;if(null!==this.view&&this.view.enabled){let e=s.fullWidth,o=s.fullHeight;a+=s.offsetX*i/e,r-=s.offsetY*n/o,i*=s.width/e,n*=s.height/o}let o=this.filmOffset;0!==o&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,r,r-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let r=super.toJSON(e);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,null!==this.view&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}class cp extends uT{constructor(e,r,n){super(),this.type="CubeCamera",this.renderTarget=n;let i=new cd(-90,1,e,r);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);let a=new cd(-90,1,e,r);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(-1,0,0),this.add(a);let s=new cd(-90,1,e,r);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);let o=new cd(-90,1,e,r);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(0,-1,0),this.add(o);let l=new cd(-90,1,e,r);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);let u=new cd(-90,1,e,r);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,-1),this.add(u)}update(e,r){null===this.parent&&this.updateMatrixWorld();let n=this.renderTarget,[i,a,s,o,l,u]=this.children,c=e.getRenderTarget(),h=e.toneMapping,d=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;let p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(r,i),e.setRenderTarget(n,1),e.render(r,a),e.setRenderTarget(n,2),e.render(r,s),e.setRenderTarget(n,3),e.render(r,o),e.setRenderTarget(n,4),e.render(r,l),n.texture.generateMipmaps=p,e.setRenderTarget(n,5),e.render(r,u),e.setRenderTarget(c),e.toneMapping=h,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class cf extends lR{constructor(e,r,n,i,a,s,o,l,u,c){super(e=void 0!==e?e:[],r=void 0!==r?r:301,n,i,a,s,o,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class cm extends lL{constructor(e=1,r={}){super(e,e,r),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1};this.texture=new cf([n,n,n,n,n,n],r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:1006}fromEquirectangularTexture(e,r){this.texture.type=r.type,this.texture.encoding=r.encoding,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new ca(5,5,5),a=new cc({name:"CubemapFromEquirect",uniforms:cs(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});a.uniforms.tEquirect.value=r;let s=new cn(i,a),o=r.minFilter;1008===r.minFilter&&(r.minFilter=1006);let l=new cp(1,10,this);return l.update(e,s),r.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,r,n,i){let a=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(r,n,i);e.setRenderTarget(a)}}let cg=new lI,cv=new lI,cy=new lc;class cx{constructor(e=new lI(1,0,0),r=0){this.isPlane=!0,this.normal=e,this.constant=r}set(e,r){return this.normal.copy(e),this.constant=r,this}setComponents(e,r,n,i){return this.normal.set(e,r,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,r){return this.normal.copy(e),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(e,r,n){let i=cg.subVectors(n,r).cross(cv.subVectors(e,r)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,r){return r.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,r){let n=e.delta(cg),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?r.copy(e.start):null;let a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:r.copy(n).multiplyScalar(a).add(e.start)}intersectsLine(e){let r=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return r<0&&n>0||n<0&&r>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,r){let n=r||cy.getNormalMatrix(e),i=this.coplanarPoint(cg).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}let cb=new l1,c_=new lI;class cS{constructor(e=new cx,r=new cx,n=new cx,i=new cx,a=new cx,s=new cx){this.planes=[e,r,n,i,a,s]}set(e,r,n,i,a,s){let o=this.planes;return o[0].copy(e),o[1].copy(r),o[2].copy(n),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){let r=this.planes;for(let n=0;n<6;n++)r[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let r=this.planes,n=e.elements,i=n[0],a=n[1],s=n[2],o=n[3],l=n[4],u=n[5],c=n[6],h=n[7],d=n[8],p=n[9],f=n[10],m=n[11],g=n[12],v=n[13],y=n[14],x=n[15];return r[0].setComponents(o-i,h-l,m-d,x-g).normalize(),r[1].setComponents(o+i,h+l,m+d,x+g).normalize(),r[2].setComponents(o+a,h+u,m+p,x+v).normalize(),r[3].setComponents(o-a,h-u,m-p,x-v).normalize(),r[4].setComponents(o-s,h-c,m-f,x-y).normalize(),r[5].setComponents(o+s,h+c,m+f,x+y).normalize(),this}intersectsObject(e){let r=e.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),cb.copy(r.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(cb)}intersectsSprite(e){return cb.center.set(0,0,0),cb.radius=.7071067811865476,cb.applyMatrix4(e.matrixWorld),this.intersectsSphere(cb)}intersectsSphere(e){let r=this.planes,n=e.center,i=-e.radius;for(let e=0;e<6;e++){let a=r[e].distanceToPoint(n);if(a<i)return!1}return!0}intersectsBox(e){let r=this.planes;for(let n=0;n<6;n++){let i=r[n];if(c_.x=i.normal.x>0?e.max.x:e.min.x,c_.y=i.normal.y>0?e.max.y:e.min.y,c_.z=i.normal.z>0?e.max.z:e.min.z,0>i.distanceToPoint(c_))return!1}return!0}containsPoint(e){let r=this.planes;for(let n=0;n<6;n++)if(0>r[n].distanceToPoint(e))return!1;return!0}clone(){return new this.constructor().copy(this)}}function cw(){let e=null,r=!1,n=null,i=null;function a(r,s){n(r,s),i=e.requestAnimationFrame(a)}return{start:function(){!0!==r&&null!==n&&(i=e.requestAnimationFrame(a),r=!0)},stop:function(){e.cancelAnimationFrame(i),r=!1},setAnimationLoop:function(e){n=e},setContext:function(r){e=r}}}function cM(e,r){let n=r.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(r){r.isInterleavedBufferAttribute&&(r=r.data);let n=i.get(r);n&&(e.deleteBuffer(n.buffer),i.delete(r))},update:function(r,a){if(r.isGLBufferAttribute){let e=i.get(r);(!e||e.version<r.version)&&i.set(r,{buffer:r.buffer,type:r.type,bytesPerElement:r.elementSize,version:r.version});return}r.isInterleavedBufferAttribute&&(r=r.data);let s=i.get(r);void 0===s?i.set(r,function(r,i){let a;let s=r.array,o=r.usage,l=e.createBuffer();if(e.bindBuffer(i,l),e.bufferData(i,s,o),r.onUploadCallback(),s instanceof Float32Array)a=5126;else if(s instanceof Uint16Array){if(r.isFloat16BufferAttribute){if(n)a=5131;else throw Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.")}else a=5123}else if(s instanceof Int16Array)a=5122;else if(s instanceof Uint32Array)a=5125;else if(s instanceof Int32Array)a=5124;else if(s instanceof Int8Array)a=5120;else if(s instanceof Uint8Array)a=5121;else if(s instanceof Uint8ClampedArray)a=5121;else throw Error("THREE.WebGLAttributes: Unsupported buffer data format: "+s);return{buffer:l,type:a,bytesPerElement:s.BYTES_PER_ELEMENT,version:r.version}}(r,a)):s.version<r.version&&(!function(r,i,a){let s=i.array,o=i.updateRange;e.bindBuffer(a,r),-1===o.count?e.bufferSubData(a,0,s):(n?e.bufferSubData(a,o.offset*s.BYTES_PER_ELEMENT,s,o.offset,o.count):e.bufferSubData(a,o.offset*s.BYTES_PER_ELEMENT,s.subarray(o.offset,o.offset+o.count)),o.count=-1),i.onUploadCallback()}(s.buffer,r,a),s.version=r.version)}}}class cT extends uQ{constructor(e=1,r=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:r,widthSegments:n,heightSegments:i};let a=e/2,s=r/2,o=Math.floor(n),l=Math.floor(i),u=o+1,c=l+1,h=e/o,d=r/l,p=[],f=[],m=[],g=[];for(let e=0;e<c;e++){let r=e*d-s;for(let n=0;n<u;n++){let i=n*h-a;f.push(i,-r,0),m.push(0,0,1),g.push(n/o),g.push(1-e/l)}}for(let e=0;e<l;e++)for(let r=0;r<o;r++){let n=r+u*e,i=r+u*(e+1),a=r+1+u*(e+1),s=r+1+u*e;p.push(n,i,s),p.push(i,a,s)}this.setIndex(p),this.setAttribute("position",new uG(f,3)),this.setAttribute("normal",new uG(m,3)),this.setAttribute("uv",new uG(g,2))}static fromJSON(e){return new cT(e.width,e.height,e.widthSegments,e.heightSegments)}}let cE={alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n	if ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n	uniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n	#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( f0, f90, dotVH );\n	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n	float D = D_GGX( alpha, dotNH );\n	return F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n		float alpha = pow2( roughness );\n		vec3 halfDir = normalize( lightDir + viewDir );\n		float dotNL = saturate( dot( normal, lightDir ) );\n		float dotNV = saturate( dot( normal, viewDir ) );\n		float dotNH = saturate( dot( normal, halfDir ) );\n		float dotVH = saturate( dot( viewDir, halfDir ) );\n		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n		return F * ( V * D );\n	}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n	float alpha = pow2( roughness );\n	float invAlpha = 1.0 / alpha;\n	float cos2h = dotNH * dotNH;\n	float sin2h = max( 1.0 - cos2h, 0.0078125 );\n	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float D = D_Charlie( sheenRoughness, dotNH );\n	float V = V_Neubelt( dotNV, dotNL );\n	return sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n	const mat3 XYZ_TO_REC709 = mat3(\n		 3.2404542, -0.9692660,  0.0556434,\n		-1.5371385,  1.8760108, -0.2040259,\n		-0.4985314,  0.0415560,  1.0572252\n	);\n	vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n		vec3 sqrtF0 = sqrt( fresnel0 );\n		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n	}\n	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n	}\n	float IorToFresnel0( float transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n	}\n	vec3 evalSensitivity( float OPD, vec3 shift ) {\n		float phase = 2.0 * PI * OPD * 1.0e-9;\n		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n		xyz /= 1.0685e-7;\n		vec3 rgb = XYZ_TO_REC709 * xyz;\n		return rgb;\n	}\n	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n		vec3 I;\n		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n		float cosTheta2Sq = 1.0 - sinTheta2Sq;\n		if ( cosTheta2Sq < 0.0 ) {\n			 return vec3( 1.0 );\n		}\n		float cosTheta2 = sqrt( cosTheta2Sq );\n		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n		float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n		float R21 = R12;\n		float T121 = 1.0 - R12;\n		float phi12 = 0.0;\n		if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n		float phi21 = PI - phi12;\n		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n		vec3 phi23 = vec3( 0.0 );\n		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n		vec3 phi = vec3( phi21 ) + phi23;\n		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n		vec3 r123 = sqrt( R123 );\n		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n		vec3 C0 = R12 + Rs;\n		I = C0;\n		vec3 Cm = Rs - T121;\n		for ( int m = 1; m <= 2; ++ m ) {\n			Cm *= r123;\n			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n			I += Cm * Sm;\n		}\n		return max( I, vec3( 0.0 ) );\n	}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n		vec3 vSigmaX = dFdx( surf_pos.xyz );\n		vec3 vSigmaY = dFdy( surf_pos.xyz );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 ) * faceDirection;\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n		plane = clippingPlanes[ i ];\n		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n	}\n	#pragma unroll_loop_end\n	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n		bool clipped = true;\n		#pragma unroll_loop_start\n		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n		}\n		#pragma unroll_loop_end\n		if ( clipped ) discard;\n	#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n	diffuseColor *= vColor;\n#elif defined( USE_COLOR )\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR )\n	varying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n	varying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n	vColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n	vColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n	vColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n	vColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\nstruct GeometricContext {\n	vec3 position;\n	vec3 normal;\n	vec3 viewDir;\n#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n	return dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n	return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n	#define cubeUV_minMipLevel 4.0\n	#define cubeUV_minTileSize 16.0\n	float getFace( vec3 direction ) {\n		vec3 absDirection = abs( direction );\n		float face = - 1.0;\n		if ( absDirection.x > absDirection.z ) {\n			if ( absDirection.x > absDirection.y )\n				face = direction.x > 0.0 ? 0.0 : 3.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		} else {\n			if ( absDirection.z > absDirection.y )\n				face = direction.z > 0.0 ? 2.0 : 5.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		}\n		return face;\n	}\n	vec2 getUV( vec3 direction, float face ) {\n		vec2 uv;\n		if ( face == 0.0 ) {\n			uv = vec2( direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 1.0 ) {\n			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n		} else if ( face == 2.0 ) {\n			uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n		} else if ( face == 3.0 ) {\n			uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 4.0 ) {\n			uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n		} else {\n			uv = vec2( direction.x, direction.y ) / abs( direction.z );\n		}\n		return 0.5 * ( uv + 1.0 );\n	}\n	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n		float face = getFace( direction );\n		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n		mipInt = max( mipInt, cubeUV_minMipLevel );\n		float faceSize = exp2( mipInt );\n		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n		if ( face > 2.0 ) {\n			uv.y += faceSize;\n			face -= 3.0;\n		}\n		uv.x += face * faceSize;\n		uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n		uv.x *= CUBEUV_TEXEL_WIDTH;\n		uv.y *= CUBEUV_TEXEL_HEIGHT;\n		#ifdef texture2DGradEXT\n			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n		#else\n			return texture2D( envMap, uv ).rgb;\n		#endif\n	}\n	#define cubeUV_r0 1.0\n	#define cubeUV_v0 0.339\n	#define cubeUV_m0 - 2.0\n	#define cubeUV_r1 0.8\n	#define cubeUV_v1 0.276\n	#define cubeUV_m1 - 1.0\n	#define cubeUV_r4 0.4\n	#define cubeUV_v4 0.046\n	#define cubeUV_m4 2.0\n	#define cubeUV_r5 0.305\n	#define cubeUV_v5 0.016\n	#define cubeUV_m5 3.0\n	#define cubeUV_r6 0.21\n	#define cubeUV_v6 0.0038\n	#define cubeUV_m6 4.0\n	float roughnessToMip( float roughness ) {\n		float mip = 0.0;\n		if ( roughness >= cubeUV_r1 ) {\n			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n		} else if ( roughness >= cubeUV_r4 ) {\n			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n		} else if ( roughness >= cubeUV_r5 ) {\n			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n		} else if ( roughness >= cubeUV_r6 ) {\n			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n		} else {\n			mip = - 2.0 * log2( 1.16 * roughness );		}\n		return mip;\n	}\n	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n		float mipF = fract( mip );\n		float mipInt = floor( mip );\n		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n		if ( mipF == 0.0 ) {\n			return vec4( color0, 1.0 );\n		} else {\n			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n			return vec4( mix( color0, color1, mipF ), 1.0 );\n		}\n	}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n	mat3 m = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n	transformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n	return value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n	vec3 getIBLIrradiance( const in vec3 normal ) {\n		#if defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n			return PI * envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n		#if defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 reflectVec = reflect( - viewDir, normal );\n			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n			return envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) {\n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n	vFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n	varying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float vFogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return vec3( texture2D( gradientMap, coord ).r );\n	#else\n		vec2 fw = fwidth( coord ) * 0.5;\n		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n	#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n	vec4 lightMapTexel = texture2D( lightMap, vUv2 );\n	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n	reflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n	vec3 diffuseColor;\n	float specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Lambert\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	return irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n		if ( cutoffDistance > 0.0 ) {\n			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n		}\n		return distanceFalloff;\n	#else\n		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n		}\n		return 1.0;\n	#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n	return smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n		light.color = directionalLight.color;\n		light.direction = directionalLight.direction;\n		light.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n		vec3 lVector = pointLight.position - geometry.position;\n		light.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		light.color = pointLight.color;\n		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n		light.visible = ( light.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n		vec3 lVector = spotLight.position - geometry.position;\n		light.direction = normalize( lVector );\n		float angleCos = dot( light.direction, spotLight.direction );\n		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n		if ( spotAttenuation > 0.0 ) {\n			float lightDistance = length( lVector );\n			light.color = spotLight.color * spotAttenuation;\n			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n			light.visible = ( light.color != vec3( 0.0 ) );\n		} else {\n			light.color = vec3( 0.0 );\n			light.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n		float dotNL = dot( normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		return irradiance;\n	}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n	vec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float specularShininess;\n	float specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n	material.ior = ior;\n	#ifdef SPECULAR\n		float specularIntensityFactor = specularIntensity;\n		vec3 specularColorFactor = specularColor;\n		#ifdef USE_SPECULARINTENSITYMAP\n			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n		#endif\n		#ifdef USE_SPECULARCOLORMAP\n			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n		#endif\n		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n	#else\n		float specularIntensityFactor = 1.0;\n		vec3 specularColorFactor = vec3( 1.0 );\n		material.specularF90 = 1.0;\n	#endif\n	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n	material.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	material.clearcoatF0 = vec3( 0.04 );\n	material.clearcoatF90 = 1.0;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n	material.iridescence = iridescence;\n	material.iridescenceIOR = iridescenceIOR;\n	#ifdef USE_IRIDESCENCEMAP\n		material.iridescence *= texture2D( iridescenceMap, vUv ).r;\n	#endif\n	#ifdef USE_IRIDESCENCE_THICKNESSMAP\n		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n	#else\n		material.iridescenceThickness = iridescenceThicknessMaximum;\n	#endif\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheenColor;\n	#ifdef USE_SHEENCOLORMAP\n		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n	#endif\n	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n	#ifdef USE_SHEENROUGHNESSMAP\n		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n	#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n	vec3 diffuseColor;\n	float roughness;\n	vec3 specularColor;\n	float specularF90;\n	#ifdef USE_CLEARCOAT\n		float clearcoat;\n		float clearcoatRoughness;\n		vec3 clearcoatF0;\n		float clearcoatF90;\n	#endif\n	#ifdef USE_IRIDESCENCE\n		float iridescence;\n		float iridescenceIOR;\n		float iridescenceThickness;\n		vec3 iridescenceFresnel;\n		vec3 iridescenceF0;\n	#endif\n	#ifdef USE_SHEEN\n		vec3 sheenColor;\n		float sheenRoughness;\n	#endif\n	#ifdef IOR\n		float ior;\n	#endif\n	#ifdef USE_TRANSMISSION\n		float transmission;\n		float transmissionAlpha;\n		float thickness;\n		float attenuationDistance;\n		vec3 attenuationColor;\n	#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float r2 = roughness * roughness;\n	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n	return saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n	return fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	return specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	#ifdef USE_IRIDESCENCE\n		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n	#else\n		vec3 Fr = specularColor;\n	#endif\n	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n	float Ess = fab.x + fab.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometry.normal;\n		vec3 viewDir = geometry.viewDir;\n		vec3 position = geometry.position;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.roughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifdef USE_CLEARCOAT\n		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = dotNLcc * directLight.color;\n		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n	#endif\n	#ifdef USE_IRIDESCENCE\n		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n	#else\n		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n	#endif\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef USE_CLEARCOAT\n		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n	#endif\n	vec3 singleScattering = vec3( 0.0 );\n	vec3 multiScattering = vec3( 0.0 );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	#ifdef USE_IRIDESCENCE\n		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n	#else\n		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n	#endif\n	vec3 totalScattering = singleScattering + multiScattering;\n	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n	reflectedLight.indirectSpecular += radiance * singleScattering;\n	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n	geometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n	float dotNVi = saturate( dot( normal, geometry.viewDir ) );\n	if ( material.iridescenceThickness == 0.0 ) {\n		material.iridescence = 0.0;\n	} else {\n		material.iridescence = saturate( material.iridescence );\n	}\n	if ( material.iridescence > 0.0 ) {\n		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n	}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointLightInfo( pointLight, geometry, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	vec4 spotColor;\n	vec3 spotLightCoord;\n	bool inSpotLightMap;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotLightInfo( spotLight, geometry, directLight );\n		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n		#else\n		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#endif\n		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n		#endif\n		#undef SPOT_LIGHT_MAP_INDEX\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalLightInfo( directionalLight, geometry, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vUv2 );\n		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getIBLIrradiance( geometry.normal );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n	#ifdef USE_CLEARCOAT\n		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n	#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n		varying float vIsPerspective;\n	#else\n		uniform float logDepthBufFC;\n	#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		vFragDepth = 1.0 + gl_Position.w;\n		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n	#else\n		if ( isPerspectiveMatrix( projectionMatrix ) ) {\n			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n			gl_Position.z *= gl_Position.w;\n		}\n	#endif\n#endif",map_fragment:"#ifdef USE_MAP\n	vec4 sampledDiffuseColor = texture2D( map, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n	#endif\n	diffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n	diffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	uniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n	vColor *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		#if defined( USE_COLOR_ALPHA )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n		#elif defined( USE_COLOR )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n		#endif\n	}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	#ifdef MORPHTARGETS_TEXTURE\n		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n		}\n	#else\n		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n	#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	uniform float morphTargetBaseInfluence;\n	#ifdef MORPHTARGETS_TEXTURE\n		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n		uniform sampler2DArray morphTargetsTexture;\n		uniform ivec2 morphTargetsTextureSize;\n		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n			int y = texelIndex / morphTargetsTextureSize.x;\n			int x = texelIndex - y * morphTargetsTextureSize.x;\n			ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n			return texelFetch( morphTargetsTexture, morphUV, 0 );\n		}\n	#else\n		#ifndef USE_MORPHNORMALS\n			uniform float morphTargetInfluences[ 8 ];\n		#else\n			uniform float morphTargetInfluences[ 4 ];\n		#endif\n	#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	#ifdef MORPHTARGETS_TEXTURE\n		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n		}\n	#else\n		transformed += morphTarget0 * morphTargetInfluences[ 0 ];\n		transformed += morphTarget1 * morphTargetInfluences[ 1 ];\n		transformed += morphTarget2 * morphTargetInfluences[ 2 ];\n		transformed += morphTarget3 * morphTargetInfluences[ 3 ];\n		#ifndef USE_MORPHNORMALS\n			transformed += morphTarget4 * morphTargetInfluences[ 4 ];\n			transformed += morphTarget5 * morphTargetInfluences[ 5 ];\n			transformed += morphTarget6 * morphTargetInfluences[ 6 ];\n			transformed += morphTarget7 * morphTargetInfluences[ 7 ];\n		#endif\n	#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	#ifdef USE_TANGENT\n		vec3 tangent = normalize( vTangent );\n		vec3 bitangent = normalize( vBitangent );\n		#ifdef DOUBLE_SIDED\n			tangent = tangent * faceDirection;\n			bitangent = bitangent * faceDirection;\n		#endif\n		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n			mat3 vTBN = mat3( tangent, bitangent, normal );\n		#endif\n	#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	#ifdef USE_TANGENT\n		normal = normalize( vTBN * mapN );\n	#else\n		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n	#endif\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n		vec3 N = surf_norm;\n		vec3 q1perp = cross( q1, N );\n		vec3 q0perp = cross( N, q0 );\n		vec3 T = q1perp * st0.x + q0perp * st1.x;\n		vec3 B = q1perp * st0.y + q0perp * st1.y;\n		float det = max( dot( T, T ), dot( B, B ) );\n		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n	}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	#ifdef USE_TANGENT\n		clearcoatNormal = normalize( vTBN * clearcoatMapN );\n	#else\n		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n	#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n	uniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n	vec4 r = vec4( fract( v * PackFactors ), v );\n	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n	return packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n	return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		struct SpotLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n		return unpackRGBATo2Half( texture2D( shadow, uv ) );\n	}\n	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n		float occlusion = 1.0;\n		vec2 distribution = texture2DDistribution( shadow, uv );\n		float hard_shadow = step( compare , distribution.x );\n		if (hard_shadow != 1.0 ) {\n			float distance = compare - distribution.x ;\n			float variance = max( 0.00000, distribution.y * distribution.y );\n			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n		}\n		return occlusion;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			float dx2 = dx0 / 2.0;\n			float dy2 = dy0 / 2.0;\n			float dx3 = dx1 / 2.0;\n			float dy3 = dy1 / 2.0;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 17.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx = texelSize.x;\n			float dy = texelSize.y;\n			vec2 uv = shadowCoord.xy;\n			vec2 f = fract( uv * shadowMapSize + 0.5 );\n			uv -= f * texelSize;\n			shadow = (\n				texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n						  f.x ),\n					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n						  f.x ),\n					 f.y )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_VSM )\n			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return shadow;\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n		vec3 lightToPosition = shadowCoord.xyz;\n		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;\n		vec3 bd3D = normalize( lightToPosition );\n		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n			return (\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n		#endif\n	}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		vec4 shadowWorldPosition;\n	#endif\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_COORDS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n		shadowWorldPosition = worldPosition;\n		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n		#endif\n		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n	#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	uniform highp sampler2D boneTexture;\n	uniform int boneTextureSize;\n	mat4 getBoneMatrix( const in float i ) {\n		float j = i * 4.0;\n		float x = mod( j, float( boneTextureSize ) );\n		float y = floor( j / float( boneTextureSize ) );\n		float dx = 1.0 / float( boneTextureSize );\n		float dy = 1.0 / float( boneTextureSize );\n		y = dy * ( y + 0.5 );\n		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n		mat4 bone = mat4( v1, v2, v3, v4 );\n		return bone;\n	}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n	return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n	return a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	const mat3 ACESInputMat = mat3(\n		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),\n		vec3( 0.04823, 0.01566, 0.83777 )\n	);\n	const mat3 ACESOutputMat = mat3(\n		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),\n		vec3( -0.07367, -0.00605,  1.07602 )\n	);\n	color *= toneMappingExposure / 0.6;\n	color = ACESInputMat * color;\n	color = RRTAndODTFit( color );\n	color = ACESOutputMat * color;\n	return saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n	material.transmission = transmission;\n	material.transmissionAlpha = 1.0;\n	material.thickness = thickness;\n	material.attenuationDistance = attenuationDistance;\n	material.attenuationColor = attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		material.transmission *= texture2D( transmissionMap, vUv ).r;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		material.thickness *= texture2D( thicknessMap, vUv ).g;\n	#endif\n	vec3 pos = vWorldPosition;\n	vec3 v = normalize( cameraPosition - pos );\n	vec3 n = inverseTransformDirection( normal, viewMatrix );\n	vec4 transmission = getIBLVolumeRefraction(\n		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n		material.attenuationColor, material.attenuationDistance );\n	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n	uniform float transmission;\n	uniform float thickness;\n	uniform float attenuationDistance;\n	uniform vec3 attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		uniform sampler2D transmissionMap;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		uniform sampler2D thicknessMap;\n	#endif\n	uniform vec2 transmissionSamplerSize;\n	uniform sampler2D transmissionSamplerMap;\n	uniform mat4 modelMatrix;\n	uniform mat4 projectionMatrix;\n	varying vec3 vWorldPosition;\n	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n		vec3 modelScale;\n		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n		return normalize( refractionVector ) * thickness * modelScale;\n	}\n	float applyIorToRoughness( const in float roughness, const in float ior ) {\n		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n	}\n	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n		#ifdef texture2DLodEXT\n			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n		#else\n			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n		#endif\n	}\n	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n		if ( isinf( attenuationDistance ) ) {\n			return radiance;\n		} else {\n			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;\n		}\n	}\n	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n		const in vec3 attenuationColor, const in float attenuationDistance ) {\n		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n		vec3 refractedRayExit = position + transmissionRay;\n		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n		vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n		refractionCoords += 1.0;\n		refractionCoords /= 2.0;\n		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n	}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n	varying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n	#ifdef UVS_VERTEX_ONLY\n		vec2 vUv;\n	#else\n		varying vec2 vUv;\n	#endif\n	uniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	varying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n	uniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n	uniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n	uniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n	#else\n		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = texColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <logdepthbuf_fragment>\n	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinbase_vertex>\n		#include <skinnormal_vertex>\n		#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vUv2 );\n		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n	#else\n		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n	varying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n	varying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n	#ifdef OPAQUE\n		gl_FragColor.a = 1.0;\n	#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n	varying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n	vWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n	#define IOR\n	#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n	uniform float ior;\n#endif\n#ifdef SPECULAR\n	uniform float specularIntensity;\n	uniform vec3 specularColor;\n	#ifdef USE_SPECULARINTENSITYMAP\n		uniform sampler2D specularIntensityMap;\n	#endif\n	#ifdef USE_SPECULARCOLORMAP\n		uniform sampler2D specularColorMap;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n	uniform float iridescence;\n	uniform float iridescenceIOR;\n	uniform float iridescenceThicknessMinimum;\n	uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheenColor;\n	uniform float sheenRoughness;\n	#ifdef USE_SHEENCOLORMAP\n		uniform sampler2D sheenColorMap;\n	#endif\n	#ifdef USE_SHEENROUGHNESSMAP\n		uniform sampler2D sheenRoughnessMap;\n	#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n	#include <transmission_fragment>\n	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n	#ifdef USE_SHEEN\n		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n	#endif\n	#ifdef USE_CLEARCOAT\n		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n	#endif\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n	vec2 scale;\n	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}"},cA={common:{diffuse:{value:new lM(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new lc},uv2Transform:{value:new lc},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new lu(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new lM(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new lM(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new lc}},sprite:{diffuse:{value:new lM(16777215)},opacity:{value:1},center:{value:new lu(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new lc}}},cC={basic:{uniforms:co([cA.common,cA.specularmap,cA.envmap,cA.aomap,cA.lightmap,cA.fog]),vertexShader:cE.meshbasic_vert,fragmentShader:cE.meshbasic_frag},lambert:{uniforms:co([cA.common,cA.specularmap,cA.envmap,cA.aomap,cA.lightmap,cA.emissivemap,cA.bumpmap,cA.normalmap,cA.displacementmap,cA.fog,cA.lights,{emissive:{value:new lM(0)}}]),vertexShader:cE.meshlambert_vert,fragmentShader:cE.meshlambert_frag},phong:{uniforms:co([cA.common,cA.specularmap,cA.envmap,cA.aomap,cA.lightmap,cA.emissivemap,cA.bumpmap,cA.normalmap,cA.displacementmap,cA.fog,cA.lights,{emissive:{value:new lM(0)},specular:{value:new lM(1118481)},shininess:{value:30}}]),vertexShader:cE.meshphong_vert,fragmentShader:cE.meshphong_frag},standard:{uniforms:co([cA.common,cA.envmap,cA.aomap,cA.lightmap,cA.emissivemap,cA.bumpmap,cA.normalmap,cA.displacementmap,cA.roughnessmap,cA.metalnessmap,cA.fog,cA.lights,{emissive:{value:new lM(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:cE.meshphysical_vert,fragmentShader:cE.meshphysical_frag},toon:{uniforms:co([cA.common,cA.aomap,cA.lightmap,cA.emissivemap,cA.bumpmap,cA.normalmap,cA.displacementmap,cA.gradientmap,cA.fog,cA.lights,{emissive:{value:new lM(0)}}]),vertexShader:cE.meshtoon_vert,fragmentShader:cE.meshtoon_frag},matcap:{uniforms:co([cA.common,cA.bumpmap,cA.normalmap,cA.displacementmap,cA.fog,{matcap:{value:null}}]),vertexShader:cE.meshmatcap_vert,fragmentShader:cE.meshmatcap_frag},points:{uniforms:co([cA.points,cA.fog]),vertexShader:cE.points_vert,fragmentShader:cE.points_frag},dashed:{uniforms:co([cA.common,cA.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cE.linedashed_vert,fragmentShader:cE.linedashed_frag},depth:{uniforms:co([cA.common,cA.displacementmap]),vertexShader:cE.depth_vert,fragmentShader:cE.depth_frag},normal:{uniforms:co([cA.common,cA.bumpmap,cA.normalmap,cA.displacementmap,{opacity:{value:1}}]),vertexShader:cE.meshnormal_vert,fragmentShader:cE.meshnormal_frag},sprite:{uniforms:co([cA.sprite,cA.fog]),vertexShader:cE.sprite_vert,fragmentShader:cE.sprite_frag},background:{uniforms:{uvTransform:{value:new lc},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:cE.background_vert,fragmentShader:cE.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:cE.backgroundCube_vert,fragmentShader:cE.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:cE.cube_vert,fragmentShader:cE.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cE.equirect_vert,fragmentShader:cE.equirect_frag},distanceRGBA:{uniforms:co([cA.common,cA.displacementmap,{referencePosition:{value:new lI},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:cE.distanceRGBA_vert,fragmentShader:cE.distanceRGBA_frag},shadow:{uniforms:co([cA.lights,cA.fog,{color:{value:new lM(0)},opacity:{value:1}}]),vertexShader:cE.shadow_vert,fragmentShader:cE.shadow_frag}};cC.physical={uniforms:co([cC.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new lu(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new lM(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new lu},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new lM(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new lM(1,1,1)},specularColorMap:{value:null}}]),vertexShader:cE.meshphysical_vert,fragmentShader:cE.meshphysical_frag};let cR={r:0,b:0,g:0};function cP(e,r,n,i,a,s,o){let l,u;let c=new lM(0),h=!0===s?0:1,d=null,p=0,f=null;function m(r,n){r.getRGB(cR,cl(e)),i.buffers.color.setClear(cR.r,cR.g,cR.b,n,o)}return{getClearColor:function(){return c},setClearColor:function(e,r=1){c.set(e),m(c,h=r)},getClearAlpha:function(){return h},setClearAlpha:function(e){m(c,h=e)},render:function(i,s){let o=!1,g=!0===s.isScene?s.background:null;if(g&&g.isTexture){let e=s.backgroundBlurriness>0;g=(e?n:r).get(g)}let v=e.xr,y=v.getSession&&v.getSession();y&&"additive"===y.environmentBlendMode&&(g=null),null===g?m(c,h):g&&g.isColor&&(m(g,1),o=!0),(e.autoClear||o)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),g&&(g.isCubeTexture||306===g.mapping)?(void 0===u&&((u=new cn(new ca(1,1,1),new cc({name:"BackgroundCubeMaterial",uniforms:cs(cC.backgroundCube.uniforms),vertexShader:cC.backgroundCube.vertexShader,fragmentShader:cC.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(e,r,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(u)),u.material.uniforms.envMap.value=g,u.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=s.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=s.backgroundIntensity,u.material.toneMapped=3001!==g.encoding,(d!==g||p!==g.version||f!==e.toneMapping)&&(u.material.needsUpdate=!0,d=g,p=g.version,f=e.toneMapping),u.layers.enableAll(),i.unshift(u,u.geometry,u.material,0,0,null)):g&&g.isTexture&&(void 0===l&&((l=new cn(new cT(2,2),new cc({name:"BackgroundMaterial",uniforms:cs(cC.background.uniforms),vertexShader:cC.background.vertexShader,fragmentShader:cC.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(l)),l.material.uniforms.t2D.value=g,l.material.uniforms.backgroundIntensity.value=s.backgroundIntensity,l.material.toneMapped=3001!==g.encoding,!0===g.matrixAutoUpdate&&g.updateMatrix(),l.material.uniforms.uvTransform.value.copy(g.matrix),(d!==g||p!==g.version||f!==e.toneMapping)&&(l.material.needsUpdate=!0,d=g,p=g.version,f=e.toneMapping),l.layers.enableAll(),i.unshift(l,l.geometry,l.material,0,0,null))}}}function cL(e,r,n,i){let a=e.getParameter(34921),s=i.isWebGL2?null:r.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,l={},u=f(null),c=u,h=!1;function d(r){return i.isWebGL2?e.bindVertexArray(r):s.bindVertexArrayOES(r)}function p(r){return i.isWebGL2?e.deleteVertexArray(r):s.deleteVertexArrayOES(r)}function f(e){let r=[],n=[],i=[];for(let e=0;e<a;e++)r[e]=0,n[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:r,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function m(){let e=c.newAttributes;for(let r=0,n=e.length;r<n;r++)e[r]=0}function g(e){v(e,0)}function v(n,a){let s=c.newAttributes,o=c.enabledAttributes,l=c.attributeDivisors;if(s[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),l[n]!==a){let s=i.isWebGL2?e:r.get("ANGLE_instanced_arrays");s[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,a),l[n]=a}}function y(){let r=c.newAttributes,n=c.enabledAttributes;for(let i=0,a=n.length;i<a;i++)n[i]!==r[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function x(r,n,a,s,o,l){!0===i.isWebGL2&&(5124===a||5125===a)?e.vertexAttribIPointer(r,n,a,o,l):e.vertexAttribPointer(r,n,a,s,o,l)}function b(){_(),h=!0,c!==u&&d((c=u).object)}function _(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(a,u,p,b,_){let S=!1;if(o){let r=function(r,n,a){let o=!0===a.wireframe,u=l[r.id];void 0===u&&(u={},l[r.id]=u);let c=u[n.id];void 0===c&&(c={},u[n.id]=c);let h=c[o];return void 0===h&&(h=f(i.isWebGL2?e.createVertexArray():s.createVertexArrayOES()),c[o]=h),h}(b,p,u);c!==r&&d((c=r).object),(S=function(e,r,n,i){let a=c.attributes,s=r.attributes,o=0,l=n.getAttributes();for(let r in l){let n=l[r];if(n.location>=0){let n=a[r],i=s[r];if(void 0===i&&("instanceMatrix"===r&&e.instanceMatrix&&(i=e.instanceMatrix),"instanceColor"===r&&e.instanceColor&&(i=e.instanceColor)),void 0===n||n.attribute!==i||i&&n.data!==i.data)return!0;o++}}return c.attributesNum!==o||c.index!==i}(a,b,p,_))&&function(e,r,n,i){let a={},s=r.attributes,o=0,l=n.getAttributes();for(let r in l){let n=l[r];if(n.location>=0){let n=s[r];void 0===n&&("instanceMatrix"===r&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===r&&e.instanceColor&&(n=e.instanceColor));let i={};i.attribute=n,n&&n.data&&(i.data=n.data),a[r]=i,o++}}c.attributes=a,c.attributesNum=o,c.index=i}(a,b,p,_)}else{let e=!0===u.wireframe;(c.geometry!==b.id||c.program!==p.id||c.wireframe!==e)&&(c.geometry=b.id,c.program=p.id,c.wireframe=e,S=!0)}null!==_&&n.update(_,34963),(S||h)&&(h=!1,function(a,s,o,l){if(!1===i.isWebGL2&&(a.isInstancedMesh||l.isInstancedBufferGeometry)&&null===r.get("ANGLE_instanced_arrays"))return;m();let u=l.attributes,c=o.getAttributes(),h=s.defaultAttributeValues;for(let r in c){let i=c[r];if(i.location>=0){let s=u[r];if(void 0===s&&("instanceMatrix"===r&&a.instanceMatrix&&(s=a.instanceMatrix),"instanceColor"===r&&a.instanceColor&&(s=a.instanceColor)),void 0!==s){let r=s.normalized,o=s.itemSize,u=n.get(s);if(void 0===u)continue;let c=u.buffer,h=u.type,d=u.bytesPerElement;if(s.isInterleavedBufferAttribute){let n=s.data,u=n.stride,p=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)v(i.location+e,n.meshPerAttribute);!0!==a.isInstancedMesh&&void 0===l._maxInstanceCount&&(l._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<i.locationSize;e++)g(i.location+e);e.bindBuffer(34962,c);for(let e=0;e<i.locationSize;e++)x(i.location+e,o/i.locationSize,h,r,u*d,(p+o/i.locationSize*e)*d)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)v(i.location+e,s.meshPerAttribute);!0!==a.isInstancedMesh&&void 0===l._maxInstanceCount&&(l._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<i.locationSize;e++)g(i.location+e);e.bindBuffer(34962,c);for(let e=0;e<i.locationSize;e++)x(i.location+e,o/i.locationSize,h,r,o*d,o/i.locationSize*e*d)}}else if(void 0!==h){let n=h[r];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(i.location,n);break;case 3:e.vertexAttrib3fv(i.location,n);break;case 4:e.vertexAttrib4fv(i.location,n);break;default:e.vertexAttrib1fv(i.location,n)}}}}y()}(a,u,p,b),null!==_&&e.bindBuffer(34963,n.get(_).buffer))},reset:b,resetDefaultState:_,dispose:function(){for(let e in b(),l){let r=l[e];for(let e in r){let n=r[e];for(let e in n)p(n[e].object),delete n[e];delete r[e]}delete l[e]}},releaseStatesOfGeometry:function(e){if(void 0===l[e.id])return;let r=l[e.id];for(let e in r){let n=r[e];for(let e in n)p(n[e].object),delete n[e];delete r[e]}delete l[e.id]},releaseStatesOfProgram:function(e){for(let r in l){let n=l[r];if(void 0===n[e.id])continue;let i=n[e.id];for(let e in i)p(i[e].object),delete i[e];delete n[e.id]}},initAttributes:m,enableAttribute:g,disableUnusedAttributes:y}}function ck(e,r,n,i){let a;let s=i.isWebGL2;this.setMode=function(e){a=e},this.render=function(r,i){e.drawArrays(a,r,i),n.update(i,a,1)},this.renderInstances=function(i,o,l){let u,c;if(0!==l){if(s)u=e,c="drawArraysInstanced";else if(u=r.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===u){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}u[c](a,i,o,l),n.update(o,a,l)}}}function cD(e,r,n){let i;function a(r){if("highp"===r){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";r="mediump"}return"mediump"===r&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let s="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",l=a(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);let u=s||r.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,h=e.getParameter(34930),d=e.getParameter(35660),p=e.getParameter(3379),f=e.getParameter(34076),m=e.getParameter(34921),g=e.getParameter(36347),v=e.getParameter(36348),y=e.getParameter(36349),x=d>0,b=s||r.has("OES_texture_float"),_=s?e.getParameter(36183):0;return{isWebGL2:s,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===r.has("EXT_texture_filter_anisotropic")){let n=r.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:a,precision:o,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:f,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:b,floatVertexTextures:x&&b,maxSamples:_}}function cI(e){let r=this,n=null,i=0,a=!1,s=!1,o=new cx,l=new lc,u={value:null,needsUpdate:!1};function c(){u.value!==n&&(u.value=n,u.needsUpdate=i>0),r.numPlanes=i,r.numIntersection=0}function h(e,n,i,a){let s=null!==e?e.length:0,c=null;if(0!==s){if(c=u.value,!0!==a||null===c){let r=i+4*s,a=n.matrixWorldInverse;l.getNormalMatrix(a),(null===c||c.length<r)&&(c=new Float32Array(r));for(let r=0,n=i;r!==s;++r,n+=4)o.copy(e[r]).applyMatrix4(a,l),o.normal.toArray(c,n),c[n+3]=o.constant}u.value=c,u.needsUpdate=!0}return r.numPlanes=s,r.numIntersection=0,c}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,s){let o=0!==e.length||r||0!==i||a;return a=r,n=h(e,s,0),i=e.length,o},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1,c()},this.setState=function(r,o,l){let d=r.clippingPlanes,p=r.clipIntersection,f=r.clipShadows,m=e.get(r);if(a&&null!==d&&0!==d.length&&(!s||f)){let e=s?0:i,r=4*e,a=m.clippingState||null;u.value=a,a=h(d,o,r,l);for(let e=0;e!==r;++e)a[e]=n[e];m.clippingState=a,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=e}else s?h(null):c()}}function cO(e){let r=new WeakMap;function n(e,r){return 303===r?e.mapping=301:304===r&&(e.mapping=302),e}function i(e){let n=e.target;n.removeEventListener("dispose",i);let a=r.get(n);void 0!==a&&(r.delete(n),a.dispose())}return{get:function(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){let s=a.mapping;if(303===s||304===s){if(r.has(a)){let e=r.get(a).texture;return n(e,a.mapping)}{let s=a.image;if(!s||!(s.height>0))return null;{let o=new cm(s.height/2);return o.fromEquirectangularTexture(e,a),r.set(a,o),a.addEventListener("dispose",i),n(o.texture,a.mapping)}}}}return a},dispose:function(){r=new WeakMap}}}class cN extends ch{constructor(e=-1,r=1,n=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=r,this.top=n,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,r,n,i,a,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,a=n-e,s=n+e,o=i+r,l=i-r;if(null!==this.view&&this.view.enabled){let e=(this.right-this.left)/this.view.fullWidth/this.zoom,r=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=e*this.view.offsetX,s=a+e*this.view.width,o-=r*this.view.offsetY,l=o-r*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let r=super.toJSON(e);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,null!==this.view&&(r.object.view=Object.assign({},this.view)),r}}let cz=[.125,.215,.35,.446,.526,.582],cB=new cN,cF=new lM,cU=null,cV=(1+Math.sqrt(5))/2,cj=1/cV,cH=[new lI(1,1,1),new lI(-1,1,1),new lI(1,1,-1),new lI(-1,1,-1),new lI(0,cV,cj),new lI(0,cV,-cj),new lI(cj,0,cV),new lI(-cj,0,cV),new lI(cV,cj,0),new lI(-cV,cj,0)];class cW{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,r=0,n=.1,i=100){cU=this._renderer.getRenderTarget(),this._setSize(256);let a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,n,i,a),r>0&&this._blur(a,0,0,r),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,r=null){return this._fromTexture(e,r)}fromCubemap(e,r=null){return this._fromTexture(e,r)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=cX(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=c$(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(cU),e.scissorTest=!1,cq(e,0,0,e.width,e.height)}_fromTexture(e,r){301===e.mapping||302===e.mapping?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),cU=this._renderer.getRenderTarget();let n=r||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,n={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,encoding:3e3,depthBuffer:!1},i=cG(e,r,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=cG(e,r,n);let{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){let r=[],n=[],i=[],a=e,s=e-4+1+cz.length;for(let o=0;o<s;o++){let s=Math.pow(2,a);n.push(s);let l=1/s;o>e-4?l=cz[o-e+4-1]:0===o&&(l=0),i.push(l);let u=1/(s-2),c=-u,h=1+u,d=[c,c,h,c,h,h,c,c,h,h,c,h],p=new Float32Array(108),f=new Float32Array(72),m=new Float32Array(36);for(let e=0;e<6;e++){let r=e%3*2/3-1,n=e>2?0:-1,i=[r,n,0,r+2/3,n,0,r+2/3,n+1,0,r,n,0,r+2/3,n+1,0,r,n+1,0];p.set(i,18*e),f.set(d,12*e);let a=[e,e,e,e,e,e];m.set(a,6*e)}let g=new uQ;g.setAttribute("position",new uj(p,3)),g.setAttribute("uv",new uj(f,2)),g.setAttribute("faceIndex",new uj(m,1)),r.push(g),a>4&&a--}return{lodPlanes:r,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,r,n){let i=new Float32Array(20),a=new lI(0,1,0),s=new cc({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/r,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:cY(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:0,depthTest:!1,depthWrite:!1});return s}(i,e,r)}return i}_compileMaterial(e){let r=new cn(this._lodPlanes[0],e);this._renderer.compile(r,cB)}_sceneToCubeUV(e,r,n,i){let a=new cd(90,1,r,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],l=this._renderer,u=l.autoClear,c=l.toneMapping;l.getClearColor(cF),l.toneMapping=0,l.autoClear=!1;let h=new uF({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),d=new cn(new ca,h),p=!1,f=e.background;f?f.isColor&&(h.color.copy(f),e.background=null,p=!0):(h.color.copy(cF),p=!0);for(let r=0;r<6;r++){let n=r%3;0===n?(a.up.set(0,s[r],0),a.lookAt(o[r],0,0)):1===n?(a.up.set(0,0,s[r]),a.lookAt(0,o[r],0)):(a.up.set(0,s[r],0),a.lookAt(0,0,o[r]));let u=this._cubeSize;cq(i,n*u,r>2?u:0,u,u),l.setRenderTarget(i),p&&l.render(d,a),l.render(e,a)}d.geometry.dispose(),d.material.dispose(),l.toneMapping=c,l.autoClear=u,e.background=f}_textureToCubeUV(e,r){let n=this._renderer,i=301===e.mapping||302===e.mapping;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=cX()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=c$());let a=i?this._cubemapMaterial:this._equirectMaterial,s=new cn(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;let l=this._cubeSize;cq(r,0,0,3*l,2*l),n.setRenderTarget(r),n.render(s,cB)}_applyPMREM(e){let r=this._renderer,n=r.autoClear;r.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){let n=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),i=cH[(r-1)%cH.length];this._blur(e,r-1,r,n,i)}r.autoClear=n}_blur(e,r,n,i,a){let s=this._pingPongRenderTarget;this._halfBlur(e,s,r,n,i,"latitudinal",a),this._halfBlur(s,e,n,n,i,"longitudinal",a)}_halfBlur(e,r,n,i,a,s,o){let l=this._renderer,u=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");let c=new cn(this._lodPlanes[i],u),h=u.uniforms,d=this._sizeLods[n]-1,p=isFinite(a)?Math.PI/(2*d):2*Math.PI/39,f=a/p,m=isFinite(a)?1+Math.floor(3*f):20;m>20&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);let g=[],v=0;for(let e=0;e<20;++e){let r=e/f,n=Math.exp(-r*r/2);g.push(n),0===e?v+=n:e<m&&(v+=2*n)}for(let e=0;e<g.length;e++)g[e]=g[e]/v;h.envMap.value=e.texture,h.samples.value=m,h.weights.value=g,h.latitudinal.value="latitudinal"===s,o&&(h.poleAxis.value=o);let{_lodMax:y}=this;h.dTheta.value=p,h.mipInt.value=y-n;let x=this._sizeLods[i],b=4*(this._cubeSize-x);cq(r,3*x*(i>y-4?i-y+4:0),b,3*x,2*x),l.setRenderTarget(r),l.render(c,cB)}}function cG(e,r,n){let i=new lL(e,r,n);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function cq(e,r,n,i,a){e.viewport.set(r,n,i,a),e.scissor.set(r,n,i,a)}function c$(){return new cc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:cY(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function cX(){return new cc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:cY(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function cY(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function cZ(e){let r=new WeakMap,n=null;function i(e){let n=e.target;n.removeEventListener("dispose",i);let a=r.get(n);void 0!==a&&(r.delete(n),a.dispose())}return{get:function(a){if(a&&a.isTexture){let s=a.mapping,o=303===s||304===s,l=301===s||302===s;if(o||l){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let i=r.get(a);return null===n&&(n=new cW(e)),i=o?n.fromEquirectangular(a,i):n.fromCubemap(a,i),r.set(a,i),i.texture}if(r.has(a))return r.get(a).texture;{let s=a.image;if(!(o&&s&&s.height>0||l&&s&&function(e){let r=0;for(let n=0;n<6;n++)void 0!==e[n]&&r++;return 6===r}(s)))return null;{null===n&&(n=new cW(e));let s=o?n.fromEquirectangular(a):n.fromCubemap(a);return r.set(a,s),a.addEventListener("dispose",i),s.texture}}}}return a},dispose:function(){r=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function cJ(e){let r={};function n(n){let i;if(void 0!==r[n])return r[n];switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return r[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){let r=n(e);return null===r&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),r}}}function cK(e,r,n,i){let a={},s=new WeakMap;function o(e){let l=e.target;for(let e in null!==l.index&&r.remove(l.index),l.attributes)r.remove(l.attributes[e]);l.removeEventListener("dispose",o),delete a[l.id];let u=s.get(l);u&&(r.remove(u),s.delete(l)),i.releaseStatesOfGeometry(l),!0===l.isInstancedBufferGeometry&&delete l._maxInstanceCount,n.memory.geometries--}function l(e){let n=[],i=e.index,a=e.attributes.position,o=0;if(null!==i){let e=i.array;o=i.version;for(let r=0,i=e.length;r<i;r+=3){let i=e[r+0],a=e[r+1],s=e[r+2];n.push(i,a,a,s,s,i)}}else{let e=a.array;o=a.version;for(let r=0,i=e.length/3-1;r<i;r+=3){let e=r+0,i=r+1,a=r+2;n.push(e,i,i,a,a,e)}}let l=new(ld(n)?uW:uH)(n,1);l.version=o;let u=s.get(e);u&&r.remove(u),s.set(e,l)}return{get:function(e,r){return!0===a[r.id]||(r.addEventListener("dispose",o),a[r.id]=!0,n.memory.geometries++),r},update:function(e){let n=e.attributes;for(let e in n)r.update(n[e],34962);let i=e.morphAttributes;for(let e in i){let n=i[e];for(let e=0,i=n.length;e<i;e++)r.update(n[e],34962)}},getWireframeAttribute:function(e){let r=s.get(e);if(r){let n=e.index;null!==n&&r.version<n.version&&l(e)}else l(e);return s.get(e)}}}function cQ(e,r,n,i){let a,s,o;let l=i.isWebGL2;this.setMode=function(e){a=e},this.setIndex=function(e){s=e.type,o=e.bytesPerElement},this.render=function(r,i){e.drawElements(a,i,s,r*o),n.update(i,a,1)},this.renderInstances=function(i,u,c){let h,d;if(0!==c){if(l)h=e,d="drawElementsInstanced";else if(h=r.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===h){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[d](a,u,s,i*o,c),n.update(u,a,c)}}}function c0(e){let r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:r,programs:null,autoReset:!0,reset:function(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0},update:function(e,n,i){switch(r.calls++,n){case 4:r.triangles+=i*(e/3);break;case 1:r.lines+=i*(e/2);break;case 3:r.lines+=i*(e-1);break;case 2:r.lines+=i*e;break;case 0:r.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function c1(e,r){return e[0]-r[0]}function c2(e,r){return Math.abs(r[1])-Math.abs(e[1])}function c3(e,r,n){let i={},a=new Float32Array(8),s=new WeakMap,o=new lP,l=[];for(let e=0;e<8;e++)l[e]=[e,0];return{update:function(u,c,h,d){let p=u.morphTargetInfluences;if(!0===r.isWebGL2){let i=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,a=void 0!==i?i.length:0,l=s.get(c);if(void 0===l||l.count!==a){void 0!==l&&l.texture.dispose();let e=void 0!==c.morphAttributes.position,n=void 0!==c.morphAttributes.normal,i=void 0!==c.morphAttributes.color,u=c.morphAttributes.position||[],h=c.morphAttributes.normal||[],d=c.morphAttributes.color||[],p=0;!0===e&&(p=1),!0===n&&(p=2),!0===i&&(p=3);let f=c.attributes.position.count*p,m=1;f>r.maxTextureSize&&(m=Math.ceil(f/r.maxTextureSize),f=r.maxTextureSize);let g=new Float32Array(f*m*4*a),v=new lk(g,f,m,a);v.type=1015,v.needsUpdate=!0;let y=4*p;for(let r=0;r<a;r++){let a=u[r],s=h[r],l=d[r],c=f*m*4*r;for(let r=0;r<a.count;r++){let u=r*y;!0===e&&(o.fromBufferAttribute(a,r),g[c+u+0]=o.x,g[c+u+1]=o.y,g[c+u+2]=o.z,g[c+u+3]=0),!0===n&&(o.fromBufferAttribute(s,r),g[c+u+4]=o.x,g[c+u+5]=o.y,g[c+u+6]=o.z,g[c+u+7]=0),!0===i&&(o.fromBufferAttribute(l,r),g[c+u+8]=o.x,g[c+u+9]=o.y,g[c+u+10]=o.z,g[c+u+11]=4===l.itemSize?o.w:1)}}l={count:a,texture:v,size:new lu(f,m)},s.set(c,l),c.addEventListener("dispose",function e(){v.dispose(),s.delete(c),c.removeEventListener("dispose",e)})}let u=0;for(let e=0;e<p.length;e++)u+=p[e];let h=c.morphTargetsRelative?1:1-u;d.getUniforms().setValue(e,"morphTargetBaseInfluence",h),d.getUniforms().setValue(e,"morphTargetInfluences",p),d.getUniforms().setValue(e,"morphTargetsTexture",l.texture,n),d.getUniforms().setValue(e,"morphTargetsTextureSize",l.size)}else{let r=void 0===p?0:p.length,n=i[c.id];if(void 0===n||n.length!==r){n=[];for(let e=0;e<r;e++)n[e]=[e,0];i[c.id]=n}for(let e=0;e<r;e++){let r=n[e];r[0]=e,r[1]=p[e]}n.sort(c2);for(let e=0;e<8;e++)e<r&&n[e][1]?(l[e][0]=n[e][0],l[e][1]=n[e][1]):(l[e][0]=Number.MAX_SAFE_INTEGER,l[e][1]=0);l.sort(c1);let s=c.morphAttributes.position,o=c.morphAttributes.normal,u=0;for(let e=0;e<8;e++){let r=l[e],n=r[0],i=r[1];n!==Number.MAX_SAFE_INTEGER&&i?(s&&c.getAttribute("morphTarget"+e)!==s[n]&&c.setAttribute("morphTarget"+e,s[n]),o&&c.getAttribute("morphNormal"+e)!==o[n]&&c.setAttribute("morphNormal"+e,o[n]),a[e]=i,u+=i):(s&&!0===c.hasAttribute("morphTarget"+e)&&c.deleteAttribute("morphTarget"+e),o&&!0===c.hasAttribute("morphNormal"+e)&&c.deleteAttribute("morphNormal"+e),a[e]=0)}let h=c.morphTargetsRelative?1:1-u;d.getUniforms().setValue(e,"morphTargetBaseInfluence",h),d.getUniforms().setValue(e,"morphTargetInfluences",a)}}}}function c5(e,r,n,i){let a=new WeakMap;function s(e){let r=e.target;r.removeEventListener("dispose",s),n.remove(r.instanceMatrix),null!==r.instanceColor&&n.remove(r.instanceColor)}return{update:function(e){let o=i.render.frame,l=e.geometry,u=r.get(e,l);return a.get(u)!==o&&(r.update(u),a.set(u,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",s)&&e.addEventListener("dispose",s),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),u},dispose:function(){a=new WeakMap}}}let c4=new lR,c6=new lk,c9=new class extends lR{constructor(e=null,r=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:r,height:n,depth:i},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},c7=new cf,c8=[],he=[],ht=new Float32Array(16),hr=new Float32Array(9),hn=new Float32Array(4);function hi(e,r,n){let i=e[0];if(i<=0||i>0)return e;let a=r*n,s=c8[a];if(void 0===s&&(s=new Float32Array(a),c8[a]=s),0!==r){i.toArray(s,0);for(let i=1,a=0;i!==r;++i)a+=n,e[i].toArray(s,a)}return s}function ha(e,r){if(e.length!==r.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==r[n])return!1;return!0}function hs(e,r){for(let n=0,i=r.length;n<i;n++)e[n]=r[n]}function ho(e,r){let n=he[r];void 0===n&&(n=new Int32Array(r),he[r]=n);for(let i=0;i!==r;++i)n[i]=e.allocateTextureUnit();return n}function hl(e,r){let n=this.cache;n[0]!==r&&(e.uniform1f(this.addr,r),n[0]=r)}function hu(e,r){let n=this.cache;if(void 0!==r.x)(n[0]!==r.x||n[1]!==r.y)&&(e.uniform2f(this.addr,r.x,r.y),n[0]=r.x,n[1]=r.y);else{if(ha(n,r))return;e.uniform2fv(this.addr,r),hs(n,r)}}function hc(e,r){let n=this.cache;if(void 0!==r.x)(n[0]!==r.x||n[1]!==r.y||n[2]!==r.z)&&(e.uniform3f(this.addr,r.x,r.y,r.z),n[0]=r.x,n[1]=r.y,n[2]=r.z);else if(void 0!==r.r)(n[0]!==r.r||n[1]!==r.g||n[2]!==r.b)&&(e.uniform3f(this.addr,r.r,r.g,r.b),n[0]=r.r,n[1]=r.g,n[2]=r.b);else{if(ha(n,r))return;e.uniform3fv(this.addr,r),hs(n,r)}}function hh(e,r){let n=this.cache;if(void 0!==r.x)(n[0]!==r.x||n[1]!==r.y||n[2]!==r.z||n[3]!==r.w)&&(e.uniform4f(this.addr,r.x,r.y,r.z,r.w),n[0]=r.x,n[1]=r.y,n[2]=r.z,n[3]=r.w);else{if(ha(n,r))return;e.uniform4fv(this.addr,r),hs(n,r)}}function hd(e,r){let n=this.cache,i=r.elements;if(void 0===i){if(ha(n,r))return;e.uniformMatrix2fv(this.addr,!1,r),hs(n,r)}else{if(ha(n,i))return;hn.set(i),e.uniformMatrix2fv(this.addr,!1,hn),hs(n,i)}}function hp(e,r){let n=this.cache,i=r.elements;if(void 0===i){if(ha(n,r))return;e.uniformMatrix3fv(this.addr,!1,r),hs(n,r)}else{if(ha(n,i))return;hr.set(i),e.uniformMatrix3fv(this.addr,!1,hr),hs(n,i)}}function hf(e,r){let n=this.cache,i=r.elements;if(void 0===i){if(ha(n,r))return;e.uniformMatrix4fv(this.addr,!1,r),hs(n,r)}else{if(ha(n,i))return;ht.set(i),e.uniformMatrix4fv(this.addr,!1,ht),hs(n,i)}}function hm(e,r){let n=this.cache;n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r)}function hg(e,r){let n=this.cache;if(void 0!==r.x)(n[0]!==r.x||n[1]!==r.y)&&(e.uniform2i(this.addr,r.x,r.y),n[0]=r.x,n[1]=r.y);else{if(ha(n,r))return;e.uniform2iv(this.addr,r),hs(n,r)}}function hv(e,r){let n=this.cache;if(void 0!==r.x)(n[0]!==r.x||n[1]!==r.y||n[2]!==r.z)&&(e.uniform3i(this.addr,r.x,r.y,r.z),n[0]=r.x,n[1]=r.y,n[2]=r.z);else{if(ha(n,r))return;e.uniform3iv(this.addr,r),hs(n,r)}}function hy(e,r){let n=this.cache;if(void 0!==r.x)(n[0]!==r.x||n[1]!==r.y||n[2]!==r.z||n[3]!==r.w)&&(e.uniform4i(this.addr,r.x,r.y,r.z,r.w),n[0]=r.x,n[1]=r.y,n[2]=r.z,n[3]=r.w);else{if(ha(n,r))return;e.uniform4iv(this.addr,r),hs(n,r)}}function hx(e,r){let n=this.cache;n[0]!==r&&(e.uniform1ui(this.addr,r),n[0]=r)}function hb(e,r){let n=this.cache;if(void 0!==r.x)(n[0]!==r.x||n[1]!==r.y)&&(e.uniform2ui(this.addr,r.x,r.y),n[0]=r.x,n[1]=r.y);else{if(ha(n,r))return;e.uniform2uiv(this.addr,r),hs(n,r)}}function h_(e,r){let n=this.cache;if(void 0!==r.x)(n[0]!==r.x||n[1]!==r.y||n[2]!==r.z)&&(e.uniform3ui(this.addr,r.x,r.y,r.z),n[0]=r.x,n[1]=r.y,n[2]=r.z);else{if(ha(n,r))return;e.uniform3uiv(this.addr,r),hs(n,r)}}function hS(e,r){let n=this.cache;if(void 0!==r.x)(n[0]!==r.x||n[1]!==r.y||n[2]!==r.z||n[3]!==r.w)&&(e.uniform4ui(this.addr,r.x,r.y,r.z,r.w),n[0]=r.x,n[1]=r.y,n[2]=r.z,n[3]=r.w);else{if(ha(n,r))return;e.uniform4uiv(this.addr,r),hs(n,r)}}function hw(e,r,n){let i=this.cache,a=n.allocateTextureUnit();i[0]!==a&&(e.uniform1i(this.addr,a),i[0]=a),n.setTexture2D(r||c4,a)}function hM(e,r,n){let i=this.cache,a=n.allocateTextureUnit();i[0]!==a&&(e.uniform1i(this.addr,a),i[0]=a),n.setTexture3D(r||c9,a)}function hT(e,r,n){let i=this.cache,a=n.allocateTextureUnit();i[0]!==a&&(e.uniform1i(this.addr,a),i[0]=a),n.setTextureCube(r||c7,a)}function hE(e,r,n){let i=this.cache,a=n.allocateTextureUnit();i[0]!==a&&(e.uniform1i(this.addr,a),i[0]=a),n.setTexture2DArray(r||c6,a)}function hA(e,r){e.uniform1fv(this.addr,r)}function hC(e,r){let n=hi(r,this.size,2);e.uniform2fv(this.addr,n)}function hR(e,r){let n=hi(r,this.size,3);e.uniform3fv(this.addr,n)}function hP(e,r){let n=hi(r,this.size,4);e.uniform4fv(this.addr,n)}function hL(e,r){let n=hi(r,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function hk(e,r){let n=hi(r,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function hD(e,r){let n=hi(r,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function hI(e,r){e.uniform1iv(this.addr,r)}function hO(e,r){e.uniform2iv(this.addr,r)}function hN(e,r){e.uniform3iv(this.addr,r)}function hz(e,r){e.uniform4iv(this.addr,r)}function hB(e,r){e.uniform1uiv(this.addr,r)}function hF(e,r){e.uniform2uiv(this.addr,r)}function hU(e,r){e.uniform3uiv(this.addr,r)}function hV(e,r){e.uniform4uiv(this.addr,r)}function hj(e,r,n){let i=this.cache,a=r.length,s=ho(n,a);ha(i,s)||(e.uniform1iv(this.addr,s),hs(i,s));for(let e=0;e!==a;++e)n.setTexture2D(r[e]||c4,s[e])}function hH(e,r,n){let i=this.cache,a=r.length,s=ho(n,a);ha(i,s)||(e.uniform1iv(this.addr,s),hs(i,s));for(let e=0;e!==a;++e)n.setTexture3D(r[e]||c9,s[e])}function hW(e,r,n){let i=this.cache,a=r.length,s=ho(n,a);ha(i,s)||(e.uniform1iv(this.addr,s),hs(i,s));for(let e=0;e!==a;++e)n.setTextureCube(r[e]||c7,s[e])}function hG(e,r,n){let i=this.cache,a=r.length,s=ho(n,a);ha(i,s)||(e.uniform1iv(this.addr,s),hs(i,s));for(let e=0;e!==a;++e)n.setTexture2DArray(r[e]||c6,s[e])}class hq{constructor(e,r,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return hl;case 35664:return hu;case 35665:return hc;case 35666:return hh;case 35674:return hd;case 35675:return hp;case 35676:return hf;case 5124:case 35670:return hm;case 35667:case 35671:return hg;case 35668:case 35672:return hv;case 35669:case 35673:return hy;case 5125:return hx;case 36294:return hb;case 36295:return h_;case 36296:return hS;case 35678:case 36198:case 36298:case 36306:case 35682:return hw;case 35679:case 36299:case 36307:return hM;case 35680:case 36300:case 36308:case 36293:return hT;case 36289:case 36303:case 36311:case 36292:return hE}}(r.type)}}class h${constructor(e,r,n){this.id=e,this.addr=n,this.cache=[],this.size=r.size,this.setValue=function(e){switch(e){case 5126:return hA;case 35664:return hC;case 35665:return hR;case 35666:return hP;case 35674:return hL;case 35675:return hk;case 35676:return hD;case 5124:case 35670:return hI;case 35667:case 35671:return hO;case 35668:case 35672:return hN;case 35669:case 35673:return hz;case 5125:return hB;case 36294:return hF;case 36295:return hU;case 36296:return hV;case 35678:case 36198:case 36298:case 36306:case 35682:return hj;case 35679:case 36299:case 36307:return hH;case 35680:case 36300:case 36308:case 36293:return hW;case 36289:case 36303:case 36311:case 36292:return hG}}(r.type)}}class hX{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,r,n){let i=this.seq;for(let a=0,s=i.length;a!==s;++a){let s=i[a];s.setValue(e,r[s.id],n)}}}let hY=/(\w+)(\])?(\[|\.)?/g;function hZ(e,r){e.seq.push(r),e.map[r.id]=r}class hJ{constructor(e,r){this.seq=[],this.map={};let n=e.getProgramParameter(r,35718);for(let i=0;i<n;++i){let n=e.getActiveUniform(r,i),a=e.getUniformLocation(r,n.name);!function(e,r,n){let i=e.name,a=i.length;for(hY.lastIndex=0;;){let s=hY.exec(i),o=hY.lastIndex,l=s[1],u="]"===s[2],c=s[3];if(u&&(l|=0),void 0===c||"["===c&&o+2===a){hZ(n,void 0===c?new hq(l,e,r):new h$(l,e,r));break}{let e=n.map,r=e[l];void 0===r&&hZ(n,r=new hX(l)),n=r}}}(n,a,this)}}setValue(e,r,n,i){let a=this.map[r];void 0!==a&&a.setValue(e,n,i)}setOptional(e,r,n){let i=r[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,r,n,i){for(let a=0,s=r.length;a!==s;++a){let s=r[a],o=n[s.id];!1!==o.needsUpdate&&s.setValue(e,o.value,i)}}static seqWithValue(e,r){let n=[];for(let i=0,a=e.length;i!==a;++i){let a=e[i];a.id in r&&n.push(a)}return n}}function hK(e,r,n){let i=e.createShader(r);return e.shaderSource(i,n),e.compileShader(i),i}let hQ=0;function h0(e,r,n){let i=e.getShaderParameter(r,35713),a=e.getShaderInfoLog(r).trim();if(i&&""===a)return"";let s=/ERROR: 0:(\d+)/.exec(a);if(!s)return a;{let i=parseInt(s[1]);return n.toUpperCase()+"\n\n"+a+"\n\n"+function(e,r){let n=e.split("\n"),i=[],a=Math.max(r-6,0),s=Math.min(r+6,n.length);for(let e=a;e<s;e++){let a=e+1;i.push(`${a===r?">":" "} ${a}: ${n[e]}`)}return i.join("\n")}(e.getShaderSource(r),i)}}function h1(e){return""!==e}function h2(e,r){let n=r.numSpotLightShadows+r.numSpotLightMaps-r.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,r.numDirLights).replace(/NUM_SPOT_LIGHTS/g,r.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,r.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,r.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,r.numPointLights).replace(/NUM_HEMI_LIGHTS/g,r.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,r.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,r.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,r.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,r.numPointLightShadows)}function h3(e,r){return e.replace(/NUM_CLIPPING_PLANES/g,r.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,r.numClippingPlanes-r.numClipIntersection)}let h5=/^[ \t]*#include +<([\w\d./]+)>/gm;function h4(e){return e.replace(h5,h6)}function h6(e,r){let n=cE[r];if(void 0===n)throw Error("Can not resolve #include <"+r+">");return h4(n)}let h9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function h7(e){return e.replace(h9,h8)}function h8(e,r,n,i){let a="";for(let e=parseInt(r);e<parseInt(n);e++)a+=i.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return a}function de(e){let r="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?r+="\n#define HIGH_PRECISION":"mediump"===e.precision?r+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(r+="\n#define LOW_PRECISION"),r}function dt(e,r,n,i){let a,s,o,l,u,c;let h=e.getContext(),d=n.defines,p=n.vertexShader,f=n.fragmentShader,m=(u="SHADOWMAP_TYPE_BASIC",1===n.shadowMapType?u="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?u="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(u="SHADOWMAP_TYPE_VSM"),u),g=function(e){let r="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:r="ENVMAP_TYPE_CUBE";break;case 306:r="ENVMAP_TYPE_CUBE_UV"}return r}(n),v=(c="ENVMAP_MODE_REFLECTION",n.envMap&&302===n.envMapMode&&(c="ENVMAP_MODE_REFRACTION"),c),y=function(e){let r="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:r="ENVMAP_BLENDING_MULTIPLY";break;case 1:r="ENVMAP_BLENDING_MIX";break;case 2:r="ENVMAP_BLENDING_ADD"}return r}(n),x=function(e){let r=e.envMapCubeUVHeight;if(null===r)return null;let n=Math.log2(r)-2;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:1/r,maxMip:n}}(n),b=n.isWebGL2?"":function(e){let r=[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(h1).join("\n")}(n),_=function(e){let r=[];for(let n in e){let i=e[n];!1!==i&&r.push("#define "+n+" "+i)}return r.join("\n")}(d),S=h.createProgram(),w=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((a=[_].filter(h1).join("\n")).length>0&&(a+="\n"),(s=[b,_].filter(h1).join("\n")).length>0&&(s+="\n")):(a=[de(n),"#define SHADER_NAME "+n.shaderName,_,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+v:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+m:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(h1).join("\n"),s=[b,de(n),"#define SHADER_NAME "+n.shaderName,_,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+g:"",n.envMap?"#define "+v:"",n.envMap?"#define "+y:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+m:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?cE.tonemapping_pars_fragment:"",0!==n.toneMapping?function(e,r){let n;switch(r){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",r),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",cE.encodings_pars_fragment,function(e,r){let n=function(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(r);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(h1).join("\n")),p=h3(p=h2(p=h4(p),n),n),f=h3(f=h2(f=h4(f),n),n),p=h7(p),f=h7(f),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(w="#version 300 es\n",a="precision mediump sampler2DArray;\n#define attribute in\n#define varying out\n#define texture2D texture\n"+a,s=["#define varying in",n.glslVersion===o3?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===o3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+s);let M=w+a+p,T=w+s+f,E=hK(h,35633,M),A=hK(h,35632,T);if(h.attachShader(S,E),h.attachShader(S,A),void 0!==n.index0AttributeName?h.bindAttribLocation(S,0,n.index0AttributeName):!0===n.morphTargets&&h.bindAttribLocation(S,0,"position"),h.linkProgram(S),e.debug.checkShaderErrors){let e=h.getProgramInfoLog(S).trim(),r=h.getShaderInfoLog(E).trim(),n=h.getShaderInfoLog(A).trim(),i=!0,o=!0;if(!1===h.getProgramParameter(S,35714)){i=!1;let r=h0(h,E,"vertex"),n=h0(h,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+h.getError()+" - VALIDATE_STATUS "+h.getProgramParameter(S,35715)+"\n\nProgram Info Log: "+e+"\n"+r+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):(""===r||""===n)&&(o=!1);o&&(this.diagnostics={runnable:i,programLog:e,vertexShader:{log:r,prefix:a},fragmentShader:{log:n,prefix:s}})}return h.deleteShader(E),h.deleteShader(A),this.getUniforms=function(){return void 0===o&&(o=new hJ(h,S)),o},this.getAttributes=function(){return void 0===l&&(l=function(e,r){let n={},i=e.getProgramParameter(r,35721);for(let a=0;a<i;a++){let i=e.getActiveAttrib(r,a),s=i.name,o=1;35674===i.type&&(o=2),35675===i.type&&(o=3),35676===i.type&&(o=4),n[s]={type:i.type,location:e.getAttribLocation(r,s),locationSize:o}}return n}(h,S)),l},this.destroy=function(){i.releaseStatesOfProgram(this),h.deleteProgram(S),this.program=void 0},this.name=n.shaderName,this.id=hQ++,this.cacheKey=r,this.usedTimes=1,this.program=S,this.vertexShader=E,this.fragmentShader=A,this}let dr=0;class dn{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let r=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(r),a=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(a)&&(s.add(a),a.usedTimes++),this}remove(e){let r=this.materialCache.get(e);for(let e of r)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let r=this.materialCache,n=r.get(e);return void 0===n&&(n=new Set,r.set(e,n)),n}_getShaderStage(e){let r=this.shaderCache,n=r.get(e);return void 0===n&&(n=new di(e),r.set(e,n)),n}}class di{constructor(e){this.id=dr++,this.code=e,this.usedTimes=0}}function da(e,r,n,i,a,s,o){let l=new uh,u=new dn,c=[],h=a.isWebGL2,d=a.logarithmicDepthBuffer,p=a.vertexTextures,f=a.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(s,l,c,g,v){let y,x,b,_;let S=g.fog,w=v.geometry,M=s.isMeshStandardMaterial?g.environment:null,T=(s.isMeshStandardMaterial?n:r).get(s.envMap||M),E=T&&306===T.mapping?T.image.height:null,A=m[s.type];null!==s.precision&&(f=a.getMaxPrecision(s.precision))!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",f,"instead.");let C=w.morphAttributes.position||w.morphAttributes.normal||w.morphAttributes.color,R=void 0!==C?C.length:0,P=0;if(void 0!==w.morphAttributes.position&&(P=1),void 0!==w.morphAttributes.normal&&(P=2),void 0!==w.morphAttributes.color&&(P=3),A){let e=cC[A];y=e.vertexShader,x=e.fragmentShader}else y=s.vertexShader,x=s.fragmentShader,u.update(s),b=u.getVertexShaderID(s),_=u.getFragmentShaderID(s);let L=e.getRenderTarget(),k=s.alphaTest>0,D=s.clearcoat>0,I=s.iridescence>0,O={isWebGL2:h,shaderID:A,shaderName:s.type,vertexShader:y,fragmentShader:x,defines:s.defines,customVertexShaderID:b,customFragmentShaderID:_,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:f,instancing:!0===v.isInstancedMesh,instancingColor:!0===v.isInstancedMesh&&null!==v.instanceColor,supportsVertexTextures:p,outputEncoding:null===L?e.outputEncoding:!0===L.isXRRenderTarget?L.texture.encoding:3e3,map:!!s.map,matcap:!!s.matcap,envMap:!!T,envMapMode:T&&T.mapping,envMapCubeUVHeight:E,lightMap:!!s.lightMap,aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:1===s.normalMapType,tangentSpaceNormalMap:0===s.normalMapType,decodeVideoTexture:!!s.map&&!0===s.map.isVideoTexture&&3001===s.map.encoding,clearcoat:D,clearcoatMap:D&&!!s.clearcoatMap,clearcoatRoughnessMap:D&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:D&&!!s.clearcoatNormalMap,iridescence:I,iridescenceMap:I&&!!s.iridescenceMap,iridescenceThicknessMap:I&&!!s.iridescenceThicknessMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularColorMap:!!s.specularColorMap,opaque:!1===s.transparent&&1===s.blending,alphaMap:!!s.alphaMap,alphaTest:k,gradientMap:!!s.gradientMap,sheen:s.sheen>0,sheenColorMap:!!s.sheenColorMap,sheenRoughnessMap:!!s.sheenRoughnessMap,transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!w.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!w.attributes.color&&4===w.attributes.color.itemSize,vertexUvs:!!s.map||!!s.bumpMap||!!s.normalMap||!!s.specularMap||!!s.alphaMap||!!s.emissiveMap||!!s.roughnessMap||!!s.metalnessMap||!!s.clearcoatMap||!!s.clearcoatRoughnessMap||!!s.clearcoatNormalMap||!!s.iridescenceMap||!!s.iridescenceThicknessMap||!!s.displacementMap||!!s.transmissionMap||!!s.thicknessMap||!!s.specularIntensityMap||!!s.specularColorMap||!!s.sheenColorMap||!!s.sheenRoughnessMap,uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.iridescenceMap||s.iridescenceThicknessMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheen>0||s.sheenColorMap||s.sheenRoughnessMap)&&!!s.displacementMap,fog:!!S,useFog:!0===s.fog,fogExp2:S&&S.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==w.morphAttributes.position,morphNormals:void 0!==w.morphAttributes.normal,morphColors:void 0!==w.morphAttributes.color,morphTargetsCount:R,morphTextureStride:P,numDirLights:l.directional.length,numPointLights:l.point.length,numSpotLights:l.spot.length,numSpotLightMaps:l.spotLightMap.length,numRectAreaLights:l.rectArea.length,numHemiLights:l.hemi.length,numDirLightShadows:l.directionalShadowMap.length,numPointLightShadows:l.pointShadowMap.length,numSpotLightShadows:l.spotShadowMap.length,numSpotLightShadowsWithMaps:l.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:s.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:2===s.side,flipSided:1===s.side,useDepthPacking:!!s.depthPacking,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||i.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()};return O},getProgramCacheKey:function(r){let n=[];if(r.shaderID?n.push(r.shaderID):(n.push(r.customVertexShaderID),n.push(r.customFragmentShaderID)),void 0!==r.defines)for(let e in r.defines)n.push(e),n.push(r.defines[e]);return!1===r.isRawShaderMaterial&&(n.push(r.precision),n.push(r.outputEncoding),n.push(r.envMapMode),n.push(r.envMapCubeUVHeight),n.push(r.combine),n.push(r.vertexUvs),n.push(r.fogExp2),n.push(r.sizeAttenuation),n.push(r.morphTargetsCount),n.push(r.morphAttributeCount),n.push(r.numDirLights),n.push(r.numPointLights),n.push(r.numSpotLights),n.push(r.numSpotLightMaps),n.push(r.numHemiLights),n.push(r.numRectAreaLights),n.push(r.numDirLightShadows),n.push(r.numPointLightShadows),n.push(r.numSpotLightShadows),n.push(r.numSpotLightShadowsWithMaps),n.push(r.shadowMapType),n.push(r.toneMapping),n.push(r.numClippingPlanes),n.push(r.numClipIntersection),n.push(r.depthPacking),l.disableAll(),r.isWebGL2&&l.enable(0),r.supportsVertexTextures&&l.enable(1),r.instancing&&l.enable(2),r.instancingColor&&l.enable(3),r.map&&l.enable(4),r.matcap&&l.enable(5),r.envMap&&l.enable(6),r.lightMap&&l.enable(7),r.aoMap&&l.enable(8),r.emissiveMap&&l.enable(9),r.bumpMap&&l.enable(10),r.normalMap&&l.enable(11),r.objectSpaceNormalMap&&l.enable(12),r.tangentSpaceNormalMap&&l.enable(13),r.clearcoat&&l.enable(14),r.clearcoatMap&&l.enable(15),r.clearcoatRoughnessMap&&l.enable(16),r.clearcoatNormalMap&&l.enable(17),r.iridescence&&l.enable(18),r.iridescenceMap&&l.enable(19),r.iridescenceThicknessMap&&l.enable(20),r.displacementMap&&l.enable(21),r.specularMap&&l.enable(22),r.roughnessMap&&l.enable(23),r.metalnessMap&&l.enable(24),r.gradientMap&&l.enable(25),r.alphaMap&&l.enable(26),r.alphaTest&&l.enable(27),r.vertexColors&&l.enable(28),r.vertexAlphas&&l.enable(29),r.vertexUvs&&l.enable(30),r.vertexTangents&&l.enable(31),r.uvsVertexOnly&&l.enable(32),n.push(l.mask),l.disableAll(),r.fog&&l.enable(0),r.useFog&&l.enable(1),r.flatShading&&l.enable(2),r.logarithmicDepthBuffer&&l.enable(3),r.skinning&&l.enable(4),r.morphTargets&&l.enable(5),r.morphNormals&&l.enable(6),r.morphColors&&l.enable(7),r.premultipliedAlpha&&l.enable(8),r.shadowMapEnabled&&l.enable(9),r.physicallyCorrectLights&&l.enable(10),r.doubleSided&&l.enable(11),r.flipSided&&l.enable(12),r.useDepthPacking&&l.enable(13),r.dithering&&l.enable(14),r.specularIntensityMap&&l.enable(15),r.specularColorMap&&l.enable(16),r.transmission&&l.enable(17),r.transmissionMap&&l.enable(18),r.thicknessMap&&l.enable(19),r.sheen&&l.enable(20),r.sheenColorMap&&l.enable(21),r.sheenRoughnessMap&&l.enable(22),r.decodeVideoTexture&&l.enable(23),r.opaque&&l.enable(24),n.push(l.mask),n.push(e.outputEncoding)),n.push(r.customProgramCacheKey),n.join()},getUniforms:function(e){let r;let n=m[e.type];if(n){let e=cC[n];r=cu.clone(e.uniforms)}else r=e.uniforms;return r},acquireProgram:function(r,n){let i;for(let e=0,r=c.length;e<r;e++){let r=c[e];if(r.cacheKey===n){i=r,++i.usedTimes;break}}return void 0===i&&(i=new dt(e,n,r,s),c.push(i)),i},releaseProgram:function(e){if(0==--e.usedTimes){let r=c.indexOf(e);c[r]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){u.remove(e)},programs:c,dispose:function(){u.dispose()}}}function ds(){let e=new WeakMap;return{get:function(r){let n=e.get(r);return void 0===n&&(n={},e.set(r,n)),n},remove:function(r){e.delete(r)},update:function(r,n,i){e.get(r)[n]=i},dispose:function(){e=new WeakMap}}}function dl(e,r){return e.groupOrder!==r.groupOrder?e.groupOrder-r.groupOrder:e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.material.id!==r.material.id?e.material.id-r.material.id:e.z!==r.z?e.z-r.z:e.id-r.id}function du(e,r){return e.groupOrder!==r.groupOrder?e.groupOrder-r.groupOrder:e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.z!==r.z?r.z-e.z:e.id-r.id}function dc(){let e=[],r=0,n=[],i=[],a=[];function s(n,i,a,s,o,l){let u=e[r];return void 0===u?(u={id:n.id,object:n,geometry:i,material:a,groupOrder:s,renderOrder:n.renderOrder,z:o,group:l},e[r]=u):(u.id=n.id,u.object=n,u.geometry=i,u.material=a,u.groupOrder=s,u.renderOrder=n.renderOrder,u.z=o,u.group=l),r++,u}return{opaque:n,transmissive:i,transparent:a,init:function(){r=0,n.length=0,i.length=0,a.length=0},push:function(e,r,o,l,u,c){let h=s(e,r,o,l,u,c);o.transmission>0?i.push(h):!0===o.transparent?a.push(h):n.push(h)},unshift:function(e,r,o,l,u,c){let h=s(e,r,o,l,u,c);o.transmission>0?i.unshift(h):!0===o.transparent?a.unshift(h):n.unshift(h)},finish:function(){for(let n=r,i=e.length;n<i;n++){let r=e[n];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.group=null}},sort:function(e,r){n.length>1&&n.sort(e||dl),i.length>1&&i.sort(r||du),a.length>1&&a.sort(r||du)}}}function dh(){let e=new WeakMap;return{get:function(r,n){let i;let a=e.get(r);return void 0===a?(i=new dc,e.set(r,[i])):n>=a.length?(i=new dc,a.push(i)):i=a[n],i},dispose:function(){e=new WeakMap}}}function dd(){let e={};return{get:function(r){let n;if(void 0!==e[r.id])return e[r.id];switch(r.type){case"DirectionalLight":n={direction:new lI,color:new lM};break;case"SpotLight":n={position:new lI,direction:new lI,color:new lM,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new lI,color:new lM,distance:0,decay:0};break;case"HemisphereLight":n={direction:new lI,skyColor:new lM,groundColor:new lM};break;case"RectAreaLight":n={color:new lM,position:new lI,halfWidth:new lI,halfHeight:new lI}}return e[r.id]=n,n}}}let dp=0;function df(e,r){return(r.castShadow?2:0)-(e.castShadow?2:0)+(r.map?1:0)-(e.map?1:0)}function dm(e,r){let n=new dd,i=function(){let e={};return{get:function(r){let n;if(void 0!==e[r.id])return e[r.id];switch(r.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lu};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lu,shadowCameraNear:1,shadowCameraFar:1e3}}return e[r.id]=n,n}}}(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let e=0;e<9;e++)a.probe.push(new lI);let s=new lI,o=new ue,l=new ue;return{setup:function(s,o){let l=0,u=0,c=0;for(let e=0;e<9;e++)a.probe[e].set(0,0,0);let h=0,d=0,p=0,f=0,m=0,g=0,v=0,y=0,x=0,b=0;s.sort(df);let _=!0!==o?Math.PI:1;for(let e=0,r=s.length;e<r;e++){let r=s[e],o=r.color,S=r.intensity,w=r.distance,M=r.shadow&&r.shadow.map?r.shadow.map.texture:null;if(r.isAmbientLight)l+=o.r*S*_,u+=o.g*S*_,c+=o.b*S*_;else if(r.isLightProbe)for(let e=0;e<9;e++)a.probe[e].addScaledVector(r.sh.coefficients[e],S);else if(r.isDirectionalLight){let e=n.get(r);if(e.color.copy(r.color).multiplyScalar(r.intensity*_),r.castShadow){let e=r.shadow,n=i.get(r);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,a.directionalShadow[h]=n,a.directionalShadowMap[h]=M,a.directionalShadowMatrix[h]=r.shadow.matrix,g++}a.directional[h]=e,h++}else if(r.isSpotLight){let e=n.get(r);e.position.setFromMatrixPosition(r.matrixWorld),e.color.copy(o).multiplyScalar(S*_),e.distance=w,e.coneCos=Math.cos(r.angle),e.penumbraCos=Math.cos(r.angle*(1-r.penumbra)),e.decay=r.decay,a.spot[p]=e;let s=r.shadow;if(r.map&&(a.spotLightMap[x]=r.map,x++,s.updateMatrices(r),r.castShadow&&b++),a.spotLightMatrix[p]=s.matrix,r.castShadow){let e=i.get(r);e.shadowBias=s.bias,e.shadowNormalBias=s.normalBias,e.shadowRadius=s.radius,e.shadowMapSize=s.mapSize,a.spotShadow[p]=e,a.spotShadowMap[p]=M,y++}p++}else if(r.isRectAreaLight){let e=n.get(r);e.color.copy(o).multiplyScalar(S),e.halfWidth.set(.5*r.width,0,0),e.halfHeight.set(0,.5*r.height,0),a.rectArea[f]=e,f++}else if(r.isPointLight){let e=n.get(r);if(e.color.copy(r.color).multiplyScalar(r.intensity*_),e.distance=r.distance,e.decay=r.decay,r.castShadow){let e=r.shadow,n=i.get(r);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,a.pointShadow[d]=n,a.pointShadowMap[d]=M,a.pointShadowMatrix[d]=r.shadow.matrix,v++}a.point[d]=e,d++}else if(r.isHemisphereLight){let e=n.get(r);e.skyColor.copy(r.color).multiplyScalar(S*_),e.groundColor.copy(r.groundColor).multiplyScalar(S*_),a.hemi[m]=e,m++}}f>0&&(r.isWebGL2?(a.rectAreaLTC1=cA.LTC_FLOAT_1,a.rectAreaLTC2=cA.LTC_FLOAT_2):!0===e.has("OES_texture_float_linear")?(a.rectAreaLTC1=cA.LTC_FLOAT_1,a.rectAreaLTC2=cA.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=cA.LTC_HALF_1,a.rectAreaLTC2=cA.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=l,a.ambient[1]=u,a.ambient[2]=c;let S=a.hash;(S.directionalLength!==h||S.pointLength!==d||S.spotLength!==p||S.rectAreaLength!==f||S.hemiLength!==m||S.numDirectionalShadows!==g||S.numPointShadows!==v||S.numSpotShadows!==y||S.numSpotMaps!==x)&&(a.directional.length=h,a.spot.length=p,a.rectArea.length=f,a.point.length=d,a.hemi.length=m,a.directionalShadow.length=g,a.directionalShadowMap.length=g,a.pointShadow.length=v,a.pointShadowMap.length=v,a.spotShadow.length=y,a.spotShadowMap.length=y,a.directionalShadowMatrix.length=g,a.pointShadowMatrix.length=v,a.spotLightMatrix.length=y+x-b,a.spotLightMap.length=x,a.numSpotLightShadowsWithMaps=b,S.directionalLength=h,S.pointLength=d,S.spotLength=p,S.rectAreaLength=f,S.hemiLength=m,S.numDirectionalShadows=g,S.numPointShadows=v,S.numSpotShadows=y,S.numSpotMaps=x,a.version=dp++)},setupView:function(e,r){let n=0,i=0,u=0,c=0,h=0,d=r.matrixWorldInverse;for(let r=0,p=e.length;r<p;r++){let p=e[r];if(p.isDirectionalLight){let e=a.directional[n];e.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(d),n++}else if(p.isSpotLight){let e=a.spot[u];e.position.setFromMatrixPosition(p.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(d),u++}else if(p.isRectAreaLight){let e=a.rectArea[c];e.position.setFromMatrixPosition(p.matrixWorld),e.position.applyMatrix4(d),l.identity(),o.copy(p.matrixWorld),o.premultiply(d),l.extractRotation(o),e.halfWidth.set(.5*p.width,0,0),e.halfHeight.set(0,.5*p.height,0),e.halfWidth.applyMatrix4(l),e.halfHeight.applyMatrix4(l),c++}else if(p.isPointLight){let e=a.point[i];e.position.setFromMatrixPosition(p.matrixWorld),e.position.applyMatrix4(d),i++}else if(p.isHemisphereLight){let e=a.hemi[h];e.direction.setFromMatrixPosition(p.matrixWorld),e.direction.transformDirection(d),h++}}},state:a}}function dg(e,r){let n=new dm(e,r),i=[],a=[];return{init:function(){i.length=0,a.length=0},state:{lightsArray:i,shadowsArray:a,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){a.push(e)}}}function dv(e,r){let n=new WeakMap;return{get:function(i,a=0){let s;let o=n.get(i);return void 0===o?(s=new dg(e,r),n.set(i,[s])):a>=o.length?(s=new dg(e,r),o.push(s)):s=o[a],s},dispose:function(){n=new WeakMap}}}class dy extends uB{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class dx extends uB{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new lI,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function db(e,r,n){let i=new cS,a=new lu,s=new lu,o=new lP,l=new dy({depthPacking:3201}),u=new dx,c={},h=n.maxTextureSize,d={0:1,1:0,2:2},p=new cc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new lu},radius:{value:4}},vertexShader:"void main() {\n	gl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n	const float samples = float( VSM_SAMPLES );\n	float mean = 0.0;\n	float squared_mean = 0.0;\n	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n	for ( float i = 0.0; i < samples; i ++ ) {\n		float uvOffset = uvStart + i * uvStride;\n		#ifdef HORIZONTAL_PASS\n			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n			mean += distribution.x;\n			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n		#else\n			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n			mean += depth;\n			squared_mean += depth * depth;\n		#endif\n	}\n	mean = mean / samples;\n	squared_mean = squared_mean / samples;\n	float std_dev = sqrt( squared_mean - mean * mean );\n	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=p.clone();f.defines.HORIZONTAL_PASS=1;let m=new uQ;m.setAttribute("position",new uj(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let g=new cn(m,p),v=this;function y(r,n,i,a,s,o){let h=null,p=!0===i.isPointLight?r.customDistanceMaterial:r.customDepthMaterial;if(void 0!==p)h=p;else if(h=!0===i.isPointLight?u:l,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){let e=h.uuid,r=n.uuid,i=c[e];void 0===i&&(i={},c[e]=i);let a=i[r];void 0===a&&(a=h.clone(),i[r]=a),h=a}return h.visible=n.visible,h.wireframe=n.wireframe,3===o?h.side=null!==n.shadowSide?n.shadowSide:n.side:h.side=null!==n.shadowSide?n.shadowSide:d[n.side],h.alphaMap=n.alphaMap,h.alphaTest=n.alphaTest,h.map=n.map,h.clipShadows=n.clipShadows,h.clippingPlanes=n.clippingPlanes,h.clipIntersection=n.clipIntersection,h.displacementMap=n.displacementMap,h.displacementScale=n.displacementScale,h.displacementBias=n.displacementBias,h.wireframeLinewidth=n.wireframeLinewidth,h.linewidth=n.linewidth,!0===i.isPointLight&&!0===h.isMeshDistanceMaterial&&(h.referencePosition.setFromMatrixPosition(i.matrixWorld),h.nearDistance=a,h.farDistance=s),h}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(n,l,u){if(!1===v.enabled||!1===v.autoUpdate&&!1===v.needsUpdate||0===n.length)return;let c=e.getRenderTarget(),d=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),x=e.state;x.setBlending(0),x.buffers.color.setClear(1,1,1,1),x.buffers.depth.setTest(!0),x.setScissorTest(!1);for(let c=0,d=n.length;c<d;c++){let d=n[c],m=d.shadow;if(void 0===m){console.warn("THREE.WebGLShadowMap:",d,"has no shadow.");continue}if(!1===m.autoUpdate&&!1===m.needsUpdate)continue;a.copy(m.mapSize);let v=m.getFrameExtents();if(a.multiply(v),s.copy(m.mapSize),(a.x>h||a.y>h)&&(a.x>h&&(s.x=Math.floor(h/v.x),a.x=s.x*v.x,m.mapSize.x=s.x),a.y>h&&(s.y=Math.floor(h/v.y),a.y=s.y*v.y,m.mapSize.y=s.y)),null===m.map){let e=3!==this.type?{minFilter:1003,magFilter:1003}:{};m.map=new lL(a.x,a.y,e),m.map.texture.name=d.name+".shadowMap",m.camera.updateProjectionMatrix()}e.setRenderTarget(m.map),e.clear();let b=m.getViewportCount();for(let n=0;n<b;n++){let a=m.getViewport(n);o.set(s.x*a.x,s.y*a.y,s.x*a.z,s.y*a.w),x.viewport(o),m.updateMatrices(d,n),i=m.getFrustum(),function n(a,s,o,l,u){if(!1===a.visible)return;let c=a.layers.test(s.layers);if(c&&(a.isMesh||a.isLine||a.isPoints)&&(a.castShadow||a.receiveShadow&&3===u)&&(!a.frustumCulled||i.intersectsObject(a))){a.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,a.matrixWorld);let n=r.update(a),i=a.material;if(Array.isArray(i)){let r=n.groups;for(let s=0,c=r.length;s<c;s++){let c=r[s],h=i[c.materialIndex];if(h&&h.visible){let r=y(a,h,l,o.near,o.far,u);e.renderBufferDirect(o,null,n,r,a,c)}}}else if(i.visible){let r=y(a,i,l,o.near,o.far,u);e.renderBufferDirect(o,null,n,r,a,null)}}let h=a.children;for(let e=0,r=h.length;e<r;e++)n(h[e],s,o,l,u)}(l,u,m.camera,d,this.type)}!0!==m.isPointLightShadow&&3===this.type&&function(n,i){let s=r.update(g);p.defines.VSM_SAMPLES!==n.blurSamples&&(p.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,p.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new lL(a.x,a.y)),p.uniforms.shadow_pass.value=n.map.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,s,p,g,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,s,f,g,null)}(m,u),m.needsUpdate=!1}v.needsUpdate=!1,e.setRenderTarget(c,d,m)}}function d_(e,r,n){let i=n.isWebGL2,a=new function(){let r=!1,n=new lP,i=null,a=new lP(0,0,0,0);return{setMask:function(n){i===n||r||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){r=e},setClear:function(r,i,s,o,l){!0===l&&(r*=o,i*=o,s*=o),n.set(r,i,s,o),!1===a.equals(n)&&(e.clearColor(r,i,s,o),a.copy(n))},reset:function(){r=!1,i=null,a.set(-1,0,0,0)}}},s=new function(){let r=!1,n=null,i=null,a=null;return{setTest:function(e){e?U(2929):V(2929)},setMask:function(i){n===i||r||(e.depthMask(i),n=i)},setFunc:function(r){if(i!==r){switch(r){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}i=r}},setLocked:function(e){r=e},setClear:function(r){a!==r&&(e.clearDepth(r),a=r)},reset:function(){r=!1,n=null,i=null,a=null}}},o=new function(){let r=!1,n=null,i=null,a=null,s=null,o=null,l=null,u=null,c=null;return{setTest:function(e){r||(e?U(2960):V(2960))},setMask:function(i){n===i||r||(e.stencilMask(i),n=i)},setFunc:function(r,n,o){(i!==r||a!==n||s!==o)&&(e.stencilFunc(r,n,o),i=r,a=n,s=o)},setOp:function(r,n,i){(o!==r||l!==n||u!==i)&&(e.stencilOp(r,n,i),o=r,l=n,u=i)},setLocked:function(e){r=e},setClear:function(r){c!==r&&(e.clearStencil(r),c=r)},reset:function(){r=!1,n=null,i=null,a=null,s=null,o=null,l=null,u=null,c=null}}},l=new WeakMap,u=new WeakMap,c={},h={},d=new WeakMap,p=[],f=null,m=!1,g=null,v=null,y=null,x=null,b=null,_=null,S=null,w=!1,M=null,T=null,E=null,A=null,C=null,R=e.getParameter(35661),P=!1,L=e.getParameter(7938);-1!==L.indexOf("WebGL")?P=parseFloat(/^WebGL (\d)/.exec(L)[1])>=1:-1!==L.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(L)[1])>=2);let k=null,D={},I=e.getParameter(3088),O=e.getParameter(2978),N=new lP().fromArray(I),z=new lP().fromArray(O);function B(r,n,i){let a=new Uint8Array(4),s=e.createTexture();e.bindTexture(r,s),e.texParameteri(r,10241,9728),e.texParameteri(r,10240,9728);for(let r=0;r<i;r++)e.texImage2D(n+r,0,6408,1,1,0,6408,5121,a);return s}let F={};function U(r){!0!==c[r]&&(e.enable(r),c[r]=!0)}function V(r){!1!==c[r]&&(e.disable(r),c[r]=!1)}F[3553]=B(3553,3553,1),F[34067]=B(34067,34069,6),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),U(2929),s.setFunc(3),G(!1),q(1),U(2884),W(0);let j={100:32774,101:32778,102:32779};if(i)j[103]=32775,j[104]=32776;else{let e=r.get("EXT_blend_minmax");null!==e&&(j[103]=e.MIN_EXT,j[104]=e.MAX_EXT)}let H={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function W(r,n,i,a,s,o,l,u){if(0===r){!0===m&&(V(3042),m=!1);return}if(!1===m&&(U(3042),m=!0),5!==r){if(r!==g||u!==w){if((100!==v||100!==b)&&(e.blendEquation(32774),v=100,b=100),u)switch(r){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",r)}else switch(r){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",r)}y=null,x=null,_=null,S=null,g=r,w=u}return}s=s||n,o=o||i,l=l||a,(n!==v||s!==b)&&(e.blendEquationSeparate(j[n],j[s]),v=n,b=s),(i!==y||a!==x||o!==_||l!==S)&&(e.blendFuncSeparate(H[i],H[a],H[o],H[l]),y=i,x=a,_=o,S=l),g=r,w=!1}function G(r){M!==r&&(r?e.frontFace(2304):e.frontFace(2305),M=r)}function q(r){0!==r?(U(2884),r!==T&&(1===r?e.cullFace(1029):2===r?e.cullFace(1028):e.cullFace(1032))):V(2884),T=r}function $(r,n,i){r?(U(32823),(A!==n||C!==i)&&(e.polygonOffset(n,i),A=n,C=i)):V(32823)}return{buffers:{color:a,depth:s,stencil:o},enable:U,disable:V,bindFramebuffer:function(r,n){return h[r]!==n&&(e.bindFramebuffer(r,n),h[r]=n,i&&(36009===r&&(h[36160]=n),36160===r&&(h[36009]=n)),!0)},drawBuffers:function(i,a){let s=p,o=!1;if(i){if(void 0===(s=d.get(a))&&(s=[],d.set(a,s)),i.isWebGLMultipleRenderTargets){let e=i.texture;if(s.length!==e.length||36064!==s[0]){for(let r=0,n=e.length;r<n;r++)s[r]=36064+r;s.length=e.length,o=!0}}else 36064!==s[0]&&(s[0]=36064,o=!0)}else 1029!==s[0]&&(s[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(s):r.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(r){return f!==r&&(e.useProgram(r),f=r,!0)},setBlending:W,setMaterial:function(e,r){2===e.side?V(2884):U(2884);let n=1===e.side;r&&(n=!n),G(n),1===e.blending&&!1===e.transparent?W(0):W(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),a.setMask(e.colorWrite);let i=e.stencilWrite;o.setTest(i),i&&(o.setMask(e.stencilWriteMask),o.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),o.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),$(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?U(32926):V(32926)},setFlipSided:G,setCullFace:q,setLineWidth:function(r){r!==E&&(P&&e.lineWidth(r),E=r)},setPolygonOffset:$,setScissorTest:function(e){e?U(3089):V(3089)},activeTexture:function(r){void 0===r&&(r=33984+R-1),k!==r&&(e.activeTexture(r),k=r)},bindTexture:function(r,n,i){void 0===i&&(i=null===k?33984+R-1:k);let a=D[i];void 0===a&&(a={type:void 0,texture:void 0},D[i]=a),(a.type!==r||a.texture!==n)&&(k!==i&&(e.activeTexture(i),k=i),e.bindTexture(r,n||F[r]),a.type=r,a.texture=n)},unbindTexture:function(){let r=D[k];void 0!==r&&void 0!==r.type&&(e.bindTexture(r.type,null),r.type=void 0,r.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(r,n){let i=u.get(n);void 0===i&&(i=new WeakMap,u.set(n,i));let a=i.get(r);void 0===a&&(a=e.getUniformBlockIndex(n,r.name),i.set(r,a))},uniformBlockBinding:function(r,n){let i=u.get(n),a=i.get(r);l.get(n)!==a&&(e.uniformBlockBinding(n,a,r.__bindingPointIndex),l.set(n,a))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(r){!1===N.equals(r)&&(e.scissor(r.x,r.y,r.z,r.w),N.copy(r))},viewport:function(r){!1===z.equals(r)&&(e.viewport(r.x,r.y,r.z,r.w),z.copy(r))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===i&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},k=null,D={},h={},d=new WeakMap,p=[],f=null,m=!1,g=null,v=null,y=null,x=null,b=null,_=null,S=null,w=!1,M=null,T=null,E=null,A=null,C=null,N.set(0,0,e.canvas.width,e.canvas.height),z.set(0,0,e.canvas.width,e.canvas.height),a.reset(),s.reset(),o.reset()}}}function dS(e,r,n,i,a,s,o){let l;let u=a.isWebGL2,c=a.maxTextures,h=a.maxCubemapSize,d=a.maxTextureSize,p=a.maxSamples,f=r.has("WEBGL_multisampled_render_to_texture")?r.get("WEBGL_multisampled_render_to_texture"):null,m="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap,v=new WeakMap,y=!1;try{y="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function x(e,r){return y?new OffscreenCanvas(e,r):lp("canvas")}function b(e,r,n,i){let a=1;if((e.width>i||e.height>i)&&(a=i/Math.max(e.width,e.height)),a<1||!0===r){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){let i=r?la:Math.floor,s=i(a*e.width),o=i(a*e.height);void 0===l&&(l=x(s,o));let u=n?x(s,o):l;u.width=s,u.height=o;let c=u.getContext("2d");return c.drawImage(e,0,0,s,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+o+")."),u}"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+").")}return e}function _(e){return ln(e.width)&&ln(e.height)}function S(e,r){return e.generateMipmaps&&r&&1003!==e.minFilter&&1006!==e.minFilter}function w(r){e.generateMipmap(r)}function M(n,i,a,s,o=!1){if(!1===u)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;return 6403===i&&(5126===a&&(l=33326),5131===a&&(l=33325),5121===a&&(l=33321)),33319===i&&(5126===a&&(l=33328),5131===a&&(l=33327),5121===a&&(l=33323)),6408===i&&(5126===a&&(l=34836),5131===a&&(l=34842),5121===a&&(l=3001===s&&!1===o?35907:32856),32819===a&&(l=32854),32820===a&&(l=32855)),(33325===l||33326===l||33327===l||33328===l||34842===l||34836===l)&&r.get("EXT_color_buffer_float"),l}function T(e,r,n){return!0===S(e,n)||e.isFramebufferTexture&&1003!==e.minFilter&&1006!==e.minFilter?Math.log2(Math.max(r.width,r.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?r.mipmaps.length:1}function E(e){return 1003===e||1004===e||1005===e?9728:9729}function A(e){let r=e.target;r.removeEventListener("dispose",A),function(e){let r=i.get(e);if(void 0===r.__webglInit)return;let n=e.source,a=v.get(n);if(a){let i=a[r.__cacheKey];i.usedTimes--,0===i.usedTimes&&R(e),0===Object.keys(a).length&&v.delete(n)}i.remove(e)}(r),r.isVideoTexture&&g.delete(r)}function C(r){let n=r.target;n.removeEventListener("dispose",C),function(r){let n=r.texture,a=i.get(r),s=i.get(n);if(void 0!==s.__webglTexture&&(e.deleteTexture(s.__webglTexture),o.memory.textures--),r.depthTexture&&r.depthTexture.dispose(),r.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)e.deleteFramebuffer(a.__webglFramebuffer[r]),a.__webglDepthbuffer&&e.deleteRenderbuffer(a.__webglDepthbuffer[r]);else{if(e.deleteFramebuffer(a.__webglFramebuffer),a.__webglDepthbuffer&&e.deleteRenderbuffer(a.__webglDepthbuffer),a.__webglMultisampledFramebuffer&&e.deleteFramebuffer(a.__webglMultisampledFramebuffer),a.__webglColorRenderbuffer)for(let r=0;r<a.__webglColorRenderbuffer.length;r++)a.__webglColorRenderbuffer[r]&&e.deleteRenderbuffer(a.__webglColorRenderbuffer[r]);a.__webglDepthRenderbuffer&&e.deleteRenderbuffer(a.__webglDepthRenderbuffer)}if(r.isWebGLMultipleRenderTargets)for(let r=0,a=n.length;r<a;r++){let a=i.get(n[r]);a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--),i.remove(n[r])}i.remove(n),i.remove(r)}(n)}function R(r){let n=i.get(r);e.deleteTexture(n.__webglTexture);let a=r.source,s=v.get(a);delete s[n.__cacheKey],o.memory.textures--}let P=0;function L(e,r){let a=i.get(e);if(e.isVideoTexture&&function(e){let r=o.render.frame;g.get(e)!==r&&(g.set(e,r),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&a.__version!==e.version){let n=e.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(!1===n.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{N(a,e,r);return}}n.bindTexture(3553,a.__webglTexture,33984+r)}let k={1e3:10497,1001:33071,1002:33648},D={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function I(n,s,o){if(o?(e.texParameteri(n,10242,k[s.wrapS]),e.texParameteri(n,10243,k[s.wrapT]),(32879===n||35866===n)&&e.texParameteri(n,32882,k[s.wrapR]),e.texParameteri(n,10240,D[s.magFilter]),e.texParameteri(n,10241,D[s.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),(32879===n||35866===n)&&e.texParameteri(n,32882,33071),(1001!==s.wrapS||1001!==s.wrapT)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,E(s.magFilter)),e.texParameteri(n,10241,E(s.minFilter)),1003!==s.minFilter&&1006!==s.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===r.has("EXT_texture_filter_anisotropic")){let o=r.get("EXT_texture_filter_anisotropic");1003!==s.magFilter&&(1005===s.minFilter||1008===s.minFilter)&&(1015!==s.type||!1!==r.has("OES_texture_float_linear"))&&(!1!==u||1016!==s.type||!1!==r.has("OES_texture_half_float_linear"))&&(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,a.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function O(r,n){let i=!1;void 0===r.__webglInit&&(r.__webglInit=!0,n.addEventListener("dispose",A));let a=n.source,s=v.get(a);void 0===s&&(s={},v.set(a,s));let l=function(e){let r=[];return r.push(e.wrapS),r.push(e.wrapT),r.push(e.wrapR||0),r.push(e.magFilter),r.push(e.minFilter),r.push(e.anisotropy),r.push(e.internalFormat),r.push(e.format),r.push(e.type),r.push(e.generateMipmaps),r.push(e.premultiplyAlpha),r.push(e.flipY),r.push(e.unpackAlignment),r.push(e.encoding),r.join()}(n);if(l!==r.__cacheKey){void 0===s[l]&&(s[l]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,i=!0),s[l].usedTimes++;let a=s[r.__cacheKey];void 0!==a&&(s[r.__cacheKey].usedTimes--,0===a.usedTimes&&R(n)),r.__cacheKey=l,r.__webglTexture=s[l].texture}return i}function N(r,a,o){let l=3553;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(l=35866),a.isData3DTexture&&(l=32879);let c=O(r,a),h=a.source;n.bindTexture(l,r.__webglTexture,33984+o);let p=i.get(h);if(h.version!==p.__version||!0===c){let r;n.activeTexture(33984+o),e.pixelStorei(37440,a.flipY),e.pixelStorei(37441,a.premultiplyAlpha),e.pixelStorei(3317,a.unpackAlignment),e.pixelStorei(37443,0);let i=!u&&(1001!==a.wrapS||1001!==a.wrapT||1003!==a.minFilter&&1006!==a.minFilter)&&!1===_(a.image),f=b(a.image,i,!1,d);f=j(a,f);let m=_(f)||u,g=s.convert(a.format,a.encoding),v=s.convert(a.type),y=M(a.internalFormat,g,v,a.encoding,a.isVideoTexture);I(l,a,m);let x=a.mipmaps,E=u&&!0!==a.isVideoTexture,A=void 0===p.__version||!0===c,C=T(a,f,m);if(a.isDepthTexture)y=6402,u?y=1015===a.type?36012:1014===a.type?33190:1020===a.type?35056:33189:1015===a.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===a.format&&6402===y&&1012!==a.type&&1014!==a.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),a.type=1014,v=s.convert(a.type)),1027===a.format&&6402===y&&(y=34041,1020!==a.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),a.type=1020,v=s.convert(a.type))),A&&(E?n.texStorage2D(3553,1,y,f.width,f.height):n.texImage2D(3553,0,y,f.width,f.height,0,g,v,null));else if(a.isDataTexture){if(x.length>0&&m){E&&A&&n.texStorage2D(3553,C,y,x[0].width,x[0].height);for(let e=0,i=x.length;e<i;e++)r=x[e],E?n.texSubImage2D(3553,e,0,0,r.width,r.height,g,v,r.data):n.texImage2D(3553,e,y,r.width,r.height,0,g,v,r.data);a.generateMipmaps=!1}else E?(A&&n.texStorage2D(3553,C,y,f.width,f.height),n.texSubImage2D(3553,0,0,0,f.width,f.height,g,v,f.data)):n.texImage2D(3553,0,y,f.width,f.height,0,g,v,f.data)}else if(a.isCompressedTexture){if(a.isCompressedArrayTexture){E&&A&&n.texStorage3D(35866,C,y,x[0].width,x[0].height,f.depth);for(let e=0,i=x.length;e<i;e++)r=x[e],1023!==a.format?null!==g?E?n.compressedTexSubImage3D(35866,e,0,0,0,r.width,r.height,f.depth,g,r.data,0,0):n.compressedTexImage3D(35866,e,y,r.width,r.height,f.depth,0,r.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?n.texSubImage3D(35866,e,0,0,0,r.width,r.height,f.depth,g,v,r.data):n.texImage3D(35866,e,y,r.width,r.height,f.depth,0,g,v,r.data)}else{E&&A&&n.texStorage2D(3553,C,y,x[0].width,x[0].height);for(let e=0,i=x.length;e<i;e++)r=x[e],1023!==a.format?null!==g?E?n.compressedTexSubImage2D(3553,e,0,0,r.width,r.height,g,r.data):n.compressedTexImage2D(3553,e,y,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?n.texSubImage2D(3553,e,0,0,r.width,r.height,g,v,r.data):n.texImage2D(3553,e,y,r.width,r.height,0,g,v,r.data)}}else if(a.isDataArrayTexture)E?(A&&n.texStorage3D(35866,C,y,f.width,f.height,f.depth),n.texSubImage3D(35866,0,0,0,0,f.width,f.height,f.depth,g,v,f.data)):n.texImage3D(35866,0,y,f.width,f.height,f.depth,0,g,v,f.data);else if(a.isData3DTexture)E?(A&&n.texStorage3D(32879,C,y,f.width,f.height,f.depth),n.texSubImage3D(32879,0,0,0,0,f.width,f.height,f.depth,g,v,f.data)):n.texImage3D(32879,0,y,f.width,f.height,f.depth,0,g,v,f.data);else if(a.isFramebufferTexture){if(A){if(E)n.texStorage2D(3553,C,y,f.width,f.height);else{let e=f.width,r=f.height;for(let i=0;i<C;i++)n.texImage2D(3553,i,y,e,r,0,g,v,null),e>>=1,r>>=1}}}else if(x.length>0&&m){E&&A&&n.texStorage2D(3553,C,y,x[0].width,x[0].height);for(let e=0,i=x.length;e<i;e++)r=x[e],E?n.texSubImage2D(3553,e,0,0,g,v,r):n.texImage2D(3553,e,y,g,v,r);a.generateMipmaps=!1}else E?(A&&n.texStorage2D(3553,C,y,f.width,f.height),n.texSubImage2D(3553,0,0,0,g,v,f)):n.texImage2D(3553,0,y,g,v,f);S(a,m)&&w(l),p.__version=h.version,a.onUpdate&&a.onUpdate(a)}r.__version=a.version}function z(r,a,o,l,u){let c=s.convert(o.format,o.encoding),h=s.convert(o.type),d=M(o.internalFormat,c,h,o.encoding),p=i.get(a);p.__hasExternalTextures||(32879===u||35866===u?n.texImage3D(u,0,d,a.width,a.height,a.depth,0,c,h,null):n.texImage2D(u,0,d,a.width,a.height,0,c,h,null)),n.bindFramebuffer(36160,r),V(a)?f.framebufferTexture2DMultisampleEXT(36160,l,u,i.get(o).__webglTexture,0,U(a)):(3553===u||u>=34069&&u<=34074)&&e.framebufferTexture2D(36160,l,u,i.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function B(r,n,i){if(e.bindRenderbuffer(36161,r),n.depthBuffer&&!n.stencilBuffer){let a=33189;if(i||V(n)){let r=n.depthTexture;r&&r.isDepthTexture&&(1015===r.type?a=36012:1014===r.type&&(a=33190));let i=U(n);V(n)?f.renderbufferStorageMultisampleEXT(36161,i,a,n.width,n.height):e.renderbufferStorageMultisample(36161,i,a,n.width,n.height)}else e.renderbufferStorage(36161,a,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,r)}else if(n.depthBuffer&&n.stencilBuffer){let a=U(n);i&&!1===V(n)?e.renderbufferStorageMultisample(36161,a,35056,n.width,n.height):V(n)?f.renderbufferStorageMultisampleEXT(36161,a,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,r)}else{let r=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let a=0;a<r.length;a++){let o=r[a],l=s.convert(o.format,o.encoding),u=s.convert(o.type),c=M(o.internalFormat,l,u,o.encoding),h=U(n);i&&!1===V(n)?e.renderbufferStorageMultisample(36161,h,c,n.width,n.height):V(n)?f.renderbufferStorageMultisampleEXT(36161,h,c,n.width,n.height):e.renderbufferStorage(36161,c,n.width,n.height)}}e.bindRenderbuffer(36161,null)}function F(r){let a=i.get(r),s=!0===r.isWebGLCubeRenderTarget;if(r.depthTexture&&!a.__autoAllocateDepthBuffer){if(s)throw Error("target.depthTexture not supported in Cube render targets");!function(r,a){let s=a&&a.isWebGLCubeRenderTarget;if(s)throw Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,r),!(a.depthTexture&&a.depthTexture.isDepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(a.depthTexture).__webglTexture&&a.depthTexture.image.width===a.width&&a.depthTexture.image.height===a.height||(a.depthTexture.image.width=a.width,a.depthTexture.image.height=a.height,a.depthTexture.needsUpdate=!0),L(a.depthTexture,0);let o=i.get(a.depthTexture).__webglTexture,l=U(a);if(1026===a.depthTexture.format)V(a)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,l):e.framebufferTexture2D(36160,36096,3553,o,0);else if(1027===a.depthTexture.format)V(a)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,l):e.framebufferTexture2D(36160,33306,3553,o,0);else throw Error("Unknown depthTexture format")}(a.__webglFramebuffer,r)}else if(s){a.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(36160,a.__webglFramebuffer[i]),a.__webglDepthbuffer[i]=e.createRenderbuffer(),B(a.__webglDepthbuffer[i],r,!1)}else n.bindFramebuffer(36160,a.__webglFramebuffer),a.__webglDepthbuffer=e.createRenderbuffer(),B(a.__webglDepthbuffer,r,!1);n.bindFramebuffer(36160,null)}function U(e){return Math.min(p,e.samples)}function V(e){let n=i.get(e);return u&&e.samples>0&&!0===r.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function j(e,n){let i=e.encoding,a=e.format,s=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||1035===e.format||3e3!==i&&(3001===i?!1===u?!0===r.has("EXT_sRGB")&&1023===a?(e.format=1035,e.minFilter=1006,e.generateMipmaps=!1):n=lT.sRGBToLinear(n):(1023!==a||1009!==s)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),n}this.allocateTextureUnit=function(){let e=P;return e>=c&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+c),P+=1,e},this.resetTextureUnits=function(){P=0},this.setTexture2D=L,this.setTexture2DArray=function(e,r){let a=i.get(e);if(e.version>0&&a.__version!==e.version){N(a,e,r);return}n.bindTexture(35866,a.__webglTexture,33984+r)},this.setTexture3D=function(e,r){let a=i.get(e);if(e.version>0&&a.__version!==e.version){N(a,e,r);return}n.bindTexture(32879,a.__webglTexture,33984+r)},this.setTextureCube=function(r,a){let o=i.get(r);if(r.version>0&&o.__version!==r.version){(function(r,a,o){if(6!==a.image.length)return;let l=O(r,a),c=a.source;n.bindTexture(34067,r.__webglTexture,33984+o);let d=i.get(c);if(c.version!==d.__version||!0===l){let r;n.activeTexture(33984+o),e.pixelStorei(37440,a.flipY),e.pixelStorei(37441,a.premultiplyAlpha),e.pixelStorei(3317,a.unpackAlignment),e.pixelStorei(37443,0);let i=a.isCompressedTexture||a.image[0].isCompressedTexture,p=a.image[0]&&a.image[0].isDataTexture,f=[];for(let e=0;e<6;e++)i||p?f[e]=p?a.image[e].image:a.image[e]:f[e]=b(a.image[e],!1,!0,h),f[e]=j(a,f[e]);let m=f[0],g=_(m)||u,v=s.convert(a.format,a.encoding),y=s.convert(a.type),x=M(a.internalFormat,v,y,a.encoding),E=u&&!0!==a.isVideoTexture,A=void 0===d.__version||!0===l,C=T(a,m,g);if(I(34067,a,g),i){E&&A&&n.texStorage2D(34067,C,x,m.width,m.height);for(let e=0;e<6;e++){r=f[e].mipmaps;for(let i=0;i<r.length;i++){let s=r[i];1023!==a.format?null!==v?E?n.compressedTexSubImage2D(34069+e,i,0,0,s.width,s.height,v,s.data):n.compressedTexImage2D(34069+e,i,x,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):E?n.texSubImage2D(34069+e,i,0,0,s.width,s.height,v,y,s.data):n.texImage2D(34069+e,i,x,s.width,s.height,0,v,y,s.data)}}}else{r=a.mipmaps,E&&A&&(r.length>0&&C++,n.texStorage2D(34067,C,x,f[0].width,f[0].height));for(let e=0;e<6;e++)if(p){E?n.texSubImage2D(34069+e,0,0,0,f[e].width,f[e].height,v,y,f[e].data):n.texImage2D(34069+e,0,x,f[e].width,f[e].height,0,v,y,f[e].data);for(let i=0;i<r.length;i++){let a=r[i],s=a.image[e].image;E?n.texSubImage2D(34069+e,i+1,0,0,s.width,s.height,v,y,s.data):n.texImage2D(34069+e,i+1,x,s.width,s.height,0,v,y,s.data)}}else{E?n.texSubImage2D(34069+e,0,0,0,v,y,f[e]):n.texImage2D(34069+e,0,x,v,y,f[e]);for(let i=0;i<r.length;i++){let a=r[i];E?n.texSubImage2D(34069+e,i+1,0,0,v,y,a.image[e]):n.texImage2D(34069+e,i+1,x,v,y,a.image[e])}}}S(a,g)&&w(34067),d.__version=c.version,a.onUpdate&&a.onUpdate(a)}r.__version=a.version})(o,r,a);return}n.bindTexture(34067,o.__webglTexture,33984+a)},this.rebindTextures=function(e,r,n){let a=i.get(e);void 0!==r&&z(a.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&F(e)},this.setupRenderTarget=function(r){let l=r.texture,c=i.get(r),h=i.get(l);r.addEventListener("dispose",C),!0!==r.isWebGLMultipleRenderTargets&&(void 0===h.__webglTexture&&(h.__webglTexture=e.createTexture()),h.__version=l.version,o.memory.textures++);let d=!0===r.isWebGLCubeRenderTarget,p=!0===r.isWebGLMultipleRenderTargets,f=_(r)||u;if(d){c.__webglFramebuffer=[];for(let r=0;r<6;r++)c.__webglFramebuffer[r]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),p){if(a.drawBuffers){let n=r.texture;for(let r=0,a=n.length;r<a;r++){let a=i.get(n[r]);void 0===a.__webglTexture&&(a.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.")}if(u&&r.samples>0&&!1===V(r)){let i=p?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){let a=i[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);let o=s.convert(a.format,a.encoding),l=s.convert(a.type),u=M(a.internalFormat,o,l,a.encoding,!0===r.isXRRenderTarget),h=U(r);e.renderbufferStorageMultisample(36161,h,u,r.width,r.height),e.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(36161,null),r.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),B(c.__webglDepthRenderbuffer,r,!0)),n.bindFramebuffer(36160,null)}}if(d){n.bindTexture(34067,h.__webglTexture),I(34067,l,f);for(let e=0;e<6;e++)z(c.__webglFramebuffer[e],r,l,36064,34069+e);S(l,f)&&w(34067),n.unbindTexture()}else if(p){let e=r.texture;for(let a=0,s=e.length;a<s;a++){let s=e[a],o=i.get(s);n.bindTexture(3553,o.__webglTexture),I(3553,s,f),z(c.__webglFramebuffer,r,s,36064+a,3553),S(s,f)&&w(3553)}n.unbindTexture()}else{let e=3553;(r.isWebGL3DRenderTarget||r.isWebGLArrayRenderTarget)&&(u?e=r.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(e,h.__webglTexture),I(e,l,f),z(c.__webglFramebuffer,r,l,36064,e),S(l,f)&&w(e),n.unbindTexture()}r.depthBuffer&&F(r)},this.updateRenderTargetMipmap=function(e){let r=_(e)||u,a=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let s=0,o=a.length;s<o;s++){let o=a[s];if(S(o,r)){let r=e.isWebGLCubeRenderTarget?34067:3553,a=i.get(o).__webglTexture;n.bindTexture(r,a),w(r),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(r){if(u&&r.samples>0&&!1===V(r)){let a=r.isWebGLMultipleRenderTargets?r.texture:[r.texture],s=r.width,o=r.height,l=16384,u=[],c=r.stencilBuffer?33306:36096,h=i.get(r),d=!0===r.isWebGLMultipleRenderTargets;if(d)for(let r=0;r<a.length;r++)n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+r,36161,null),n.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+r,3553,null,0);n.bindFramebuffer(36008,h.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,h.__webglFramebuffer);for(let n=0;n<a.length;n++){u.push(36064+n),r.depthBuffer&&u.push(c);let p=void 0!==h.__ignoreDepthValues&&h.__ignoreDepthValues;if(!1===p&&(r.depthBuffer&&(l|=256),r.stencilBuffer&&(l|=1024)),d&&e.framebufferRenderbuffer(36008,36064,36161,h.__webglColorRenderbuffer[n]),!0===p&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),d){let r=i.get(a[n]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,r,0)}e.blitFramebuffer(0,0,s,o,0,0,s,o,l,9728),m&&e.invalidateFramebuffer(36008,u)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),d)for(let r=0;r<a.length;r++){n.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+r,36161,h.__webglColorRenderbuffer[r]);let s=i.get(a[r]).__webglTexture;n.bindFramebuffer(36160,h.__webglFramebuffer),e.framebufferTexture2D(36009,36064+r,3553,s,0)}n.bindFramebuffer(36009,h.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=F,this.setupFrameBufferTexture=z,this.useMultisampledRTT=V}function dw(e,r,n){let i=n.isWebGL2;return{convert:function(n,a=null){let s;if(1009===n)return 5121;if(1017===n)return 32819;if(1018===n)return 32820;if(1010===n)return 5120;if(1011===n)return 5122;if(1012===n)return 5123;if(1013===n)return 5124;if(1014===n)return 5125;if(1015===n)return 5126;if(1016===n)return i?5131:null!==(s=r.get("OES_texture_half_float"))?s.HALF_FLOAT_OES:null;if(1021===n)return 6406;if(1023===n)return 6408;if(1024===n)return 6409;if(1025===n)return 6410;if(1026===n)return 6402;if(1027===n)return 34041;if(1022===n)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===n)return null!==(s=r.get("EXT_sRGB"))?s.SRGB_ALPHA_EXT:null;if(1028===n)return 6403;if(1029===n)return 36244;if(1030===n)return 33319;if(1031===n)return 33320;if(1033===n)return 36249;if(33776===n||33777===n||33778===n||33779===n){if(3001===a){if(null===(s=r.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(33776===n)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===n)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===n)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===n)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(s=r.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===n)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===n)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===n)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===n)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(35840===n||35841===n||35842===n||35843===n){if(null===(s=r.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===n)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return null!==(s=r.get("WEBGL_compressed_texture_etc1"))?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(null===(s=r.get("WEBGL_compressed_texture_etc")))return null;if(37492===n)return 3001===a?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(37496===n)return 3001===a?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(null===(s=r.get("WEBGL_compressed_texture_astc")))return null;if(37808===n)return 3001===a?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return 3001===a?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return 3001===a?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return 3001===a?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return 3001===a?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return 3001===a?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return 3001===a?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return 3001===a?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return 3001===a?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return 3001===a?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return 3001===a?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return 3001===a?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return 3001===a?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return 3001===a?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===n){if(null===(s=r.get("EXT_texture_compression_bptc")))return null;if(36492===n)return 3001===a?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}return 1020===n?i?34042:null!==(s=r.get("WEBGL_depth_texture"))?s.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}class dM extends cd{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class dT extends uT{constructor(){super(),this.isGroup=!0,this.type="Group"}}let dE={type:"move"};class dA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new dT,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new dT,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new lI,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new lI),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new dT,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new lI,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new lI),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let r=this._hand;if(r)for(let n of e.hand.values())this._getHandJoint(r,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,r,n){let i=null,a=null,s=null,o=this._targetRay,l=this._grip,u=this._hand;if(e&&"visible-blurred"!==r.session.visibilityState){if(u&&e.hand){for(let i of(s=!0,e.hand.values())){let e=r.getJointPose(i,n),a=this._getHandJoint(u,i);null!==e&&(a.matrix.fromArray(e.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.jointRadius=e.radius),a.visible=null!==e}let i=u.joints["index-finger-tip"],a=u.joints["thumb-tip"],o=i.position.distanceTo(a.position);u.inputState.pinching&&o>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&o<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&null!==(a=r.getPose(e.gripSpace,n))&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1);null!==o&&(null===(i=r.getPose(e.targetRaySpace,n))&&null!==a&&(i=a),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(dE)))}return null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==a),null!==u&&(u.visible=null!==s),this}_getHandJoint(e,r){if(void 0===e.joints[r.jointName]){let n=new dT;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[r.jointName]=n,e.add(n)}return e.joints[r.jointName]}}class dC extends lR{constructor(e,r,n,i,a,s,o,l,u,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===c&&(n=1014),void 0===n&&1027===c&&(n=1020),super(null,i,a,s,o,l,c,n,u),this.isDepthTexture=!0,this.image={width:e,height:r},this.magFilter=void 0!==o?o:1003,this.minFilter=void 0!==l?l:1003,this.flipY=!1,this.generateMipmaps=!1}}class dR extends o5{constructor(e,r){super();let n=this,i=null,a=1,s=null,o="local-floor",l=null,u=null,c=null,h=null,d=null,p=null,f=r.getContextAttributes(),m=null,g=null,v=[],y=[],x=new Set,b=new Map,_=new cd;_.layers.enable(1),_.viewport=new lP;let S=new cd;S.layers.enable(2),S.viewport=new lP;let w=[_,S],M=new dM;M.layers.enable(1),M.layers.enable(2);let T=null,E=null;function A(e){let r=y.indexOf(e.inputSource);if(-1===r)return;let n=v[r];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function C(){i.removeEventListener("select",A),i.removeEventListener("selectstart",A),i.removeEventListener("selectend",A),i.removeEventListener("squeeze",A),i.removeEventListener("squeezestart",A),i.removeEventListener("squeezeend",A),i.removeEventListener("end",C),i.removeEventListener("inputsourceschange",R);for(let e=0;e<v.length;e++){let r=y[e];null!==r&&(y[e]=null,v[e].disconnect(r))}T=null,E=null,e.setRenderTarget(m),d=null,h=null,c=null,i=null,g=null,I.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function R(e){for(let r=0;r<e.removed.length;r++){let n=e.removed[r],i=y.indexOf(n);i>=0&&(y[i]=null,v[i].disconnect(n))}for(let r=0;r<e.added.length;r++){let n=e.added[r],i=y.indexOf(n);if(-1===i){for(let e=0;e<v.length;e++){if(e>=y.length){y.push(n),i=e;break}if(null===y[e]){y[e]=n,i=e;break}}if(-1===i)break}let a=v[i];a&&a.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let r=v[e];return void 0===r&&(r=new dA,v[e]=r),r.getTargetRaySpace()},this.getControllerGrip=function(e){let r=v[e];return void 0===r&&(r=new dA,v[e]=r),r.getGripSpace()},this.getHand=function(e){let r=v[e];return void 0===r&&(r=new dA,v[e]=r),r.getHandSpace()},this.setFramebufferScaleFactor=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return c},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(u){if(null!==(i=u)){if(m=e.getRenderTarget(),i.addEventListener("select",A),i.addEventListener("selectstart",A),i.addEventListener("selectend",A),i.addEventListener("squeeze",A),i.addEventListener("squeezestart",A),i.addEventListener("squeezeend",A),i.addEventListener("end",C),i.addEventListener("inputsourceschange",R),!0!==f.xrCompatible&&await r.makeXRCompatible(),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2){let n={antialias:void 0!==i.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:a};d=new XRWebGLLayer(i,r,n),i.updateRenderState({baseLayer:d}),g=new lL(d.framebufferWidth,d.framebufferHeight,{format:1023,type:1009,encoding:e.outputEncoding,stencilBuffer:f.stencil})}else{let n=null,s=null,o=null;f.depth&&(o=f.stencil?35056:33190,n=f.stencil?1027:1026,s=f.stencil?1020:1014);let l={colorFormat:32856,depthFormat:o,scaleFactor:a};h=(c=new XRWebGLBinding(i,r)).createProjectionLayer(l),i.updateRenderState({layers:[h]}),g=new lL(h.textureWidth,h.textureHeight,{format:1023,type:1009,depthTexture:new dC(h.textureWidth,h.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0});let u=e.properties.get(g);u.__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(1),l=null,s=await i.requestReferenceSpace(o),I.setContext(i),I.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};let P=new lI,L=new lI;function k(e,r){null===r?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(r.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;M.near=S.near=_.near=e.near,M.far=S.far=_.far=e.far,(T!==M.near||E!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),T=M.near,E=M.far);let r=e.parent,n=M.cameras;k(M,r);for(let e=0;e<n.length;e++)k(n[e],r);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),e.matrix.copy(M.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);let a=e.children;for(let e=0,r=a.length;e<r;e++)a[e].updateMatrixWorld(!0);2===n.length?function(e,r,n){P.setFromMatrixPosition(r.matrixWorld),L.setFromMatrixPosition(n.matrixWorld);let i=P.distanceTo(L),a=r.projectionMatrix.elements,s=n.projectionMatrix.elements,o=a[14]/(a[10]-1),l=a[14]/(a[10]+1),u=(a[9]+1)/a[5],c=(a[9]-1)/a[5],h=(a[8]-1)/a[0],d=(s[8]+1)/s[0],p=i/(-h+d),f=-(p*h);r.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();let m=o+p,g=l+p;e.projectionMatrix.makePerspective(o*h-f,o*d+(i-f),u*l/g*m,c*l/g*m,m,g)}(M,_,S):M.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){return null!==h?h.fixedFoveation:null!==d?d.fixedFoveation:void 0},this.setFoveation=function(e){null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.getPlanes=function(){return x};let D=null,I=new cw;I.setAnimationLoop(function(r,i){if(u=i.getViewerPose(l||s),p=i,null!==u){let r=u.views;null!==d&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let n=!1;r.length!==M.cameras.length&&(M.cameras.length=0,n=!0);for(let i=0;i<r.length;i++){let a=r[i],s=null;if(null!==d)s=d.getViewport(a);else{let r=c.getViewSubImage(h,a);s=r.viewport,0===i&&(e.setRenderTargetTextures(g,r.colorTexture,h.ignoreDepthValues?void 0:r.depthStencilTexture),e.setRenderTarget(g))}let o=w[i];void 0===o&&((o=new cd).layers.enable(i),o.viewport=new lP,w[i]=o),o.matrix.fromArray(a.transform.matrix),o.projectionMatrix.fromArray(a.projectionMatrix),o.viewport.set(s.x,s.y,s.width,s.height),0===i&&M.matrix.copy(o.matrix),!0===n&&M.cameras.push(o)}}for(let e=0;e<v.length;e++){let r=y[e],n=v[e];null!==r&&void 0!==n&&n.update(r,i,l||s)}if(D&&D(r,i),i.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:i.detectedPlanes});let e=null;for(let r of x)i.detectedPlanes.has(r)||(null===e&&(e=[]),e.push(r));if(null!==e)for(let r of e)x.delete(r),b.delete(r),n.dispatchEvent({type:"planeremoved",data:r});for(let e of i.detectedPlanes)if(x.has(e)){let r=b.get(e);e.lastChangedTime>r&&(b.set(e,e.lastChangedTime),n.dispatchEvent({type:"planechanged",data:e}))}else x.add(e),b.set(e,i.lastChangedTime),n.dispatchEvent({type:"planeadded",data:e})}p=null}),this.setAnimationLoop=function(e){D=e},this.dispose=function(){}}}function dP(e,r){function n(n,i){let a,s;n.opacity.value=i.opacity,i.color&&n.diffuse.value.copy(i.color),i.emissive&&n.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(n.map.value=i.map),i.alphaMap&&(n.alphaMap.value=i.alphaMap),i.bumpMap&&(n.bumpMap.value=i.bumpMap,n.bumpScale.value=i.bumpScale,1===i.side&&(n.bumpScale.value*=-1)),i.displacementMap&&(n.displacementMap.value=i.displacementMap,n.displacementScale.value=i.displacementScale,n.displacementBias.value=i.displacementBias),i.emissiveMap&&(n.emissiveMap.value=i.emissiveMap),i.normalMap&&(n.normalMap.value=i.normalMap,n.normalScale.value.copy(i.normalScale),1===i.side&&n.normalScale.value.negate()),i.specularMap&&(n.specularMap.value=i.specularMap),i.alphaTest>0&&(n.alphaTest.value=i.alphaTest);let o=r.get(i).envMap;if(o&&(n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,n.reflectivity.value=i.reflectivity,n.ior.value=i.ior,n.refractionRatio.value=i.refractionRatio),i.lightMap){n.lightMap.value=i.lightMap;let r=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=i.lightMapIntensity*r}i.aoMap&&(n.aoMap.value=i.aoMap,n.aoMapIntensity.value=i.aoMapIntensity),i.map?a=i.map:i.specularMap?a=i.specularMap:i.displacementMap?a=i.displacementMap:i.normalMap?a=i.normalMap:i.bumpMap?a=i.bumpMap:i.roughnessMap?a=i.roughnessMap:i.metalnessMap?a=i.metalnessMap:i.alphaMap?a=i.alphaMap:i.emissiveMap?a=i.emissiveMap:i.clearcoatMap?a=i.clearcoatMap:i.clearcoatNormalMap?a=i.clearcoatNormalMap:i.clearcoatRoughnessMap?a=i.clearcoatRoughnessMap:i.iridescenceMap?a=i.iridescenceMap:i.iridescenceThicknessMap?a=i.iridescenceThicknessMap:i.specularIntensityMap?a=i.specularIntensityMap:i.specularColorMap?a=i.specularColorMap:i.transmissionMap?a=i.transmissionMap:i.thicknessMap?a=i.thicknessMap:i.sheenColorMap?a=i.sheenColorMap:i.sheenRoughnessMap&&(a=i.sheenRoughnessMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uvTransform.value.copy(a.matrix)),i.aoMap?s=i.aoMap:i.lightMap&&(s=i.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),n.uv2Transform.value.copy(s.matrix))}return{refreshFogUniforms:function(r,n){n.color.getRGB(r.fogColor.value,cl(e)),n.isFog?(r.fogNear.value=n.near,r.fogFar.value=n.far):n.isFogExp2&&(r.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,s,o){var l,u,c,h,d,p,f,m,g;let v,y;i.isMeshBasicMaterial?n(e,i):i.isMeshLambertMaterial?n(e,i):i.isMeshToonMaterial?(n(e,i),l=e,i.gradientMap&&(l.gradientMap.value=i.gradientMap)):i.isMeshPhongMaterial?(n(e,i),(u=e).specular.value.copy(i.specular),u.shininess.value=Math.max(i.shininess,1e-4)):i.isMeshStandardMaterial?(n(e,i),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);let i=r.get(n).envMap;i&&(e.envMapIntensity.value=n.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&((c=e).ior.value=i.ior,i.sheen>0&&(c.sheenColor.value.copy(i.sheenColor).multiplyScalar(i.sheen),c.sheenRoughness.value=i.sheenRoughness,i.sheenColorMap&&(c.sheenColorMap.value=i.sheenColorMap),i.sheenRoughnessMap&&(c.sheenRoughnessMap.value=i.sheenRoughnessMap)),i.clearcoat>0&&(c.clearcoat.value=i.clearcoat,c.clearcoatRoughness.value=i.clearcoatRoughness,i.clearcoatMap&&(c.clearcoatMap.value=i.clearcoatMap),i.clearcoatRoughnessMap&&(c.clearcoatRoughnessMap.value=i.clearcoatRoughnessMap),i.clearcoatNormalMap&&(c.clearcoatNormalScale.value.copy(i.clearcoatNormalScale),c.clearcoatNormalMap.value=i.clearcoatNormalMap,1===i.side&&c.clearcoatNormalScale.value.negate())),i.iridescence>0&&(c.iridescence.value=i.iridescence,c.iridescenceIOR.value=i.iridescenceIOR,c.iridescenceThicknessMinimum.value=i.iridescenceThicknessRange[0],c.iridescenceThicknessMaximum.value=i.iridescenceThicknessRange[1],i.iridescenceMap&&(c.iridescenceMap.value=i.iridescenceMap),i.iridescenceThicknessMap&&(c.iridescenceThicknessMap.value=i.iridescenceThicknessMap)),i.transmission>0&&(c.transmission.value=i.transmission,c.transmissionSamplerMap.value=o.texture,c.transmissionSamplerSize.value.set(o.width,o.height),i.transmissionMap&&(c.transmissionMap.value=i.transmissionMap),c.thickness.value=i.thickness,i.thicknessMap&&(c.thicknessMap.value=i.thicknessMap),c.attenuationDistance.value=i.attenuationDistance,c.attenuationColor.value.copy(i.attenuationColor)),c.specularIntensity.value=i.specularIntensity,c.specularColor.value.copy(i.specularColor),i.specularIntensityMap&&(c.specularIntensityMap.value=i.specularIntensityMap),i.specularColorMap&&(c.specularColorMap.value=i.specularColorMap))):i.isMeshMatcapMaterial?(n(e,i),h=e,i.matcap&&(h.matcap.value=i.matcap)):i.isMeshDepthMaterial?n(e,i):i.isMeshDistanceMaterial?(n(e,i),(d=e).referencePosition.value.copy(i.referencePosition),d.nearDistance.value=i.nearDistance,d.farDistance.value=i.farDistance):i.isMeshNormalMaterial?n(e,i):i.isLineBasicMaterial?((p=e).diffuse.value.copy(i.color),p.opacity.value=i.opacity,i.isLineDashedMaterial&&((f=e).dashSize.value=i.dashSize,f.totalSize.value=i.dashSize+i.gapSize,f.scale.value=i.scale)):i.isPointsMaterial?((m=e).diffuse.value.copy(i.color),m.opacity.value=i.opacity,m.size.value=i.size*a,m.scale.value=.5*s,i.map&&(m.map.value=i.map),i.alphaMap&&(m.alphaMap.value=i.alphaMap),i.alphaTest>0&&(m.alphaTest.value=i.alphaTest),i.map?v=i.map:i.alphaMap&&(v=i.alphaMap),void 0!==v&&(!0===v.matrixAutoUpdate&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix))):i.isSpriteMaterial?((g=e).diffuse.value.copy(i.color),g.opacity.value=i.opacity,g.rotation.value=i.rotation,i.map&&(g.map.value=i.map),i.alphaMap&&(g.alphaMap.value=i.alphaMap),i.alphaTest>0&&(g.alphaTest.value=i.alphaTest),i.map?y=i.map:i.alphaMap&&(y=i.alphaMap),void 0!==y&&(!0===y.matrixAutoUpdate&&y.updateMatrix(),g.uvTransform.value.copy(y.matrix))):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function dL(e,r,n,i){let a={},s={},o=[],l=n.isWebGL2?e.getParameter(35375):0;function u(e){let r={boundary:0,storage:0};return"number"==typeof e?(r.boundary=4,r.storage=4):e.isVector2?(r.boundary=8,r.storage=8):e.isVector3||e.isColor?(r.boundary=16,r.storage=12):e.isVector4?(r.boundary=16,r.storage=16):e.isMatrix3?(r.boundary=48,r.storage=48):e.isMatrix4?(r.boundary=64,r.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),r}function c(r){let n=r.target;n.removeEventListener("dispose",c);let i=o.indexOf(n.__bindingPointIndex);o.splice(i,1),e.deleteBuffer(a[n.id]),delete a[n.id],delete s[n.id]}return{bind:function(e,r){let n=r.program;i.uniformBlockBinding(e,n)},update:function(n,h){let d=a[n.id];void 0===d&&(function(e){let r=e.uniforms,n=0,i=0;for(let e=0,a=r.length;e<a;e++){let a=r[e],s={boundary:0,storage:0},o=Array.isArray(a.value)?a.value:[a.value];for(let e=0,r=o.length;e<r;e++){let r=o[e],n=u(r);s.boundary+=n.boundary,s.storage+=n.storage}if(a.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),a.__offset=n,e>0){i=n%16;let e=16-i;0!==i&&e-s.boundary<0&&(n+=16-i,a.__offset=n)}n+=s.storage}(i=n%16)>0&&(n+=16-i),e.__size=n,e.__cache={}}(n),d=function(r){let n=function(){for(let e=0;e<l;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();r.__bindingPointIndex=n;let i=e.createBuffer(),a=r.__size,s=r.usage;return e.bindBuffer(35345,i),e.bufferData(35345,a,s),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,i),i}(n),a[n.id]=d,n.addEventListener("dispose",c));let p=h.program;i.updateUBOMapping(n,p);let f=r.render.frame;s[n.id]!==f&&(function(r){let n=a[r.id],i=r.uniforms,s=r.__cache;e.bindBuffer(35345,n);for(let r=0,n=i.length;r<n;r++){let n=i[r];if(!0===function(e,r,n){let i=e.value;if(void 0===n[r]){if("number"==typeof i)n[r]=i;else{let e=Array.isArray(i)?i:[i],a=[];for(let r=0;r<e.length;r++)a.push(e[r].clone());n[r]=a}return!0}if("number"==typeof i){if(n[r]!==i)return n[r]=i,!0}else{let e=Array.isArray(n[r])?n[r]:[n[r]],a=Array.isArray(i)?i:[i];for(let r=0;r<e.length;r++){let n=e[r];if(!1===n.equals(a[r]))return n.copy(a[r]),!0}}return!1}(n,r,s)){let r=n.__offset,i=Array.isArray(n.value)?n.value:[n.value],a=0;for(let s=0;s<i.length;s++){let o=i[s],l=u(o);"number"==typeof o?(n.__data[0]=o,e.bufferSubData(35345,r+a,n.__data)):o.isMatrix3?(n.__data[0]=o.elements[0],n.__data[1]=o.elements[1],n.__data[2]=o.elements[2],n.__data[3]=o.elements[0],n.__data[4]=o.elements[3],n.__data[5]=o.elements[4],n.__data[6]=o.elements[5],n.__data[7]=o.elements[0],n.__data[8]=o.elements[6],n.__data[9]=o.elements[7],n.__data[10]=o.elements[8],n.__data[11]=o.elements[0]):(o.toArray(n.__data,a),a+=l.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,r,n.__data)}}e.bindBuffer(35345,null)}(n),s[n.id]=f)},dispose:function(){for(let r in a)e.deleteBuffer(a[r]);o=[],a={},s={}}}}function dk(e={}){let r,n,i,a,s,o,l,u,c,h,d,p,f,m,g,v,y,x,b,_,S,w,M,T,E;this.isWebGLRenderer=!0;let A=void 0!==e.canvas?e.canvas:function(){let e=lp("canvas");return e.style.display="block",e}(),C=void 0!==e.context?e.context:null,R=void 0===e.depth||e.depth,P=void 0===e.stencil||e.stencil,L=void 0!==e.antialias&&e.antialias,k=void 0===e.premultipliedAlpha||e.premultipliedAlpha,D=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,I=void 0!==e.powerPreference?e.powerPreference:"default",O=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;r=null!==C?C.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let N=null,z=null,B=[],F=[];this.domElement=A,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;let U=this,V=!1,j=0,H=0,W=null,G=-1,q=null,$=new lP,X=new lP,Y=null,Z=A.width,J=A.height,K=1,Q=null,ee=null,et=new lP(0,0,Z,J),er=new lP(0,0,Z,J),en=!1,ei=new cS,ea=!1,es=!1,eo=null,el=new ue,eu=new lu,ec=new lI,eh={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ed(){return null===W?K:1}let ep=C;function ef(e,r){for(let n=0;n<e.length;n++){let i=e[n],a=A.getContext(i,r);if(null!==a)return a}return null}try{if("setAttribute"in A&&A.setAttribute("data-engine","three.js r148"),A.addEventListener("webglcontextlost",ev,!1),A.addEventListener("webglcontextrestored",ey,!1),A.addEventListener("webglcontextcreationerror",ex,!1),null===ep){let e=["webgl2","webgl","experimental-webgl"];if(!0===U.isWebGL1Renderer&&e.shift(),ep=ef(e,{alpha:!0,depth:R,stencil:P,antialias:L,premultipliedAlpha:k,preserveDrawingBuffer:D,powerPreference:I,failIfMajorPerformanceCaveat:O}),null===ep){if(ef(e))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}}void 0===ep.getShaderPrecisionFormat&&(ep.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function em(){n=new cJ(ep),i=new cD(ep,n,e),n.init(i),M=new dw(ep,n,i),a=new d_(ep,n,i),s=new c0,o=new ds,l=new dS(ep,n,a,o,i,M,s),u=new cO(U),c=new cZ(U),h=new cM(ep,i),T=new cL(ep,n,h,i),d=new cK(ep,h,s,T),p=new c5(ep,d,h,s),_=new c3(ep,i,l),y=new cI(o),f=new da(U,u,c,n,i,T,y),m=new dP(U,o),g=new dh,v=new dv(n,i),b=new cP(U,u,c,a,p,r,k),x=new db(U,p,i),E=new dL(ep,s,i,a),S=new ck(ep,n,s,i),w=new cQ(ep,n,s,i),s.programs=f.programs,U.capabilities=i,U.extensions=n,U.properties=o,U.renderLists=g,U.shadowMap=x,U.state=a,U.info=s}em();let eg=new dR(U,ep);function ev(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),V=!0}function ey(){console.log("THREE.WebGLRenderer: Context Restored."),V=!1;let e=s.autoReset,r=x.enabled,n=x.autoUpdate,i=x.needsUpdate,a=x.type;em(),s.autoReset=e,x.enabled=r,x.autoUpdate=n,x.needsUpdate=i,x.type=a}function ex(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function eb(e){let r=e.target;r.removeEventListener("dispose",eb),function(e){let r=o.get(e).programs;void 0!==r&&(r.forEach(function(e){f.releaseProgram(e)}),e.isShaderMaterial&&f.releaseShaderCache(e))}(r),o.remove(r)}this.xr=eg,this.getContext=function(){return ep},this.getContextAttributes=function(){return ep.getContextAttributes()},this.forceContextLoss=function(){let e=n.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){let e=n.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(e){void 0!==e&&(K=e,this.setSize(Z,J,!1))},this.getSize=function(e){return e.set(Z,J)},this.setSize=function(e,r,n){if(eg.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Z=e,J=r,A.width=Math.floor(e*K),A.height=Math.floor(r*K),!1!==n&&(A.style.width=e+"px",A.style.height=r+"px"),this.setViewport(0,0,e,r)},this.getDrawingBufferSize=function(e){return e.set(Z*K,J*K).floor()},this.setDrawingBufferSize=function(e,r,n){Z=e,J=r,K=n,A.width=Math.floor(e*n),A.height=Math.floor(r*n),this.setViewport(0,0,e,r)},this.getCurrentViewport=function(e){return e.copy($)},this.getViewport=function(e){return e.copy(et)},this.setViewport=function(e,r,n,i){e.isVector4?et.set(e.x,e.y,e.z,e.w):et.set(e,r,n,i),a.viewport($.copy(et).multiplyScalar(K).floor())},this.getScissor=function(e){return e.copy(er)},this.setScissor=function(e,r,n,i){e.isVector4?er.set(e.x,e.y,e.z,e.w):er.set(e,r,n,i),a.scissor(X.copy(er).multiplyScalar(K).floor())},this.getScissorTest=function(){return en},this.setScissorTest=function(e){a.setScissorTest(en=e)},this.setOpaqueSort=function(e){Q=e},this.setTransparentSort=function(e){ee=e},this.getClearColor=function(e){return e.copy(b.getClearColor())},this.setClearColor=function(){b.setClearColor.apply(b,arguments)},this.getClearAlpha=function(){return b.getClearAlpha()},this.setClearAlpha=function(){b.setClearAlpha.apply(b,arguments)},this.clear=function(e=!0,r=!0,n=!0){let i=0;e&&(i|=16384),r&&(i|=256),n&&(i|=1024),ep.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){A.removeEventListener("webglcontextlost",ev,!1),A.removeEventListener("webglcontextrestored",ey,!1),A.removeEventListener("webglcontextcreationerror",ex,!1),g.dispose(),v.dispose(),o.dispose(),u.dispose(),c.dispose(),p.dispose(),T.dispose(),E.dispose(),f.dispose(),eg.dispose(),eg.removeEventListener("sessionstart",eS),eg.removeEventListener("sessionend",ew),eo&&(eo.dispose(),eo=null),eM.stop()},this.renderBufferDirect=function(e,r,n,s,p,f){let g;null===r&&(r=eh);let v=p.isMesh&&0>p.matrixWorld.determinant(),x=function(e,r,n,s,h){var d,p;!0!==r.isScene&&(r=eh),l.resetTextureUnits();let f=r.fog,g=s.isMeshStandardMaterial?r.environment:null,v=null===W?U.outputEncoding:!0===W.isXRRenderTarget?W.texture.encoding:3e3,x=(s.isMeshStandardMaterial?c:u).get(s.envMap||g),b=!0===s.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,S=!!s.normalMap&&!!n.attributes.tangent,w=!!n.morphAttributes.position,M=!!n.morphAttributes.normal,T=!!n.morphAttributes.color,A=s.toneMapped?U.toneMapping:0,C=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,R=void 0!==C?C.length:0,P=o.get(s),L=z.state.lights;if(!0===ea&&(!0===es||e!==q)){let r=e===q&&s.id===G;y.setState(s,e,r)}let k=!1;s.version===P.__version?P.needsLights&&P.lightsStateVersion!==L.state.version?k=!0:P.outputEncoding!==v?k=!0:h.isInstancedMesh&&!1===P.instancing?k=!0:h.isInstancedMesh||!0!==P.instancing?h.isSkinnedMesh&&!1===P.skinning?k=!0:h.isSkinnedMesh||!0!==P.skinning?P.envMap!==x?k=!0:!0===s.fog&&P.fog!==f?k=!0:void 0!==P.numClippingPlanes&&(P.numClippingPlanes!==y.numPlanes||P.numIntersection!==y.numIntersection)?k=!0:P.vertexAlphas!==b?k=!0:P.vertexTangents!==S?k=!0:P.morphTargets!==w?k=!0:P.morphNormals!==M?k=!0:P.morphColors!==T?k=!0:P.toneMapping!==A?k=!0:!0===i.isWebGL2&&P.morphTargetsCount!==R&&(k=!0):k=!0:k=!0:(k=!0,P.__version=s.version);let D=P.currentProgram;!0===k&&(D=eA(s,r,h));let I=!1,O=!1,N=!1,B=D.getUniforms(),F=P.uniforms;if(a.useProgram(D.program)&&(I=!0,O=!0,N=!0),s.id!==G&&(G=s.id,O=!0),I||q!==e){if(B.setValue(ep,"projectionMatrix",e.projectionMatrix),i.logarithmicDepthBuffer&&B.setValue(ep,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),q!==e&&(q=e,O=!0,N=!0),s.isShaderMaterial||s.isMeshPhongMaterial||s.isMeshToonMaterial||s.isMeshStandardMaterial||s.envMap){let r=B.map.cameraPosition;void 0!==r&&r.setValue(ep,ec.setFromMatrixPosition(e.matrixWorld))}(s.isMeshPhongMaterial||s.isMeshToonMaterial||s.isMeshLambertMaterial||s.isMeshBasicMaterial||s.isMeshStandardMaterial||s.isShaderMaterial)&&B.setValue(ep,"isOrthographic",!0===e.isOrthographicCamera),(s.isMeshPhongMaterial||s.isMeshToonMaterial||s.isMeshLambertMaterial||s.isMeshBasicMaterial||s.isMeshStandardMaterial||s.isShaderMaterial||s.isShadowMaterial||h.isSkinnedMesh)&&B.setValue(ep,"viewMatrix",e.matrixWorldInverse)}if(h.isSkinnedMesh){B.setOptional(ep,h,"bindMatrix"),B.setOptional(ep,h,"bindMatrixInverse");let e=h.skeleton;e&&(i.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),B.setValue(ep,"boneTexture",e.boneTexture,l),B.setValue(ep,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let V=n.morphAttributes;if((void 0!==V.position||void 0!==V.normal||void 0!==V.color&&!0===i.isWebGL2)&&_.update(h,n,s,D),(O||P.receiveShadow!==h.receiveShadow)&&(P.receiveShadow=h.receiveShadow,B.setValue(ep,"receiveShadow",h.receiveShadow)),s.isMeshGouraudMaterial&&null!==s.envMap&&(F.envMap.value=x,F.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1),O&&(B.setValue(ep,"toneMappingExposure",U.toneMappingExposure),P.needsLights&&(d=F,p=N,d.ambientLightColor.needsUpdate=p,d.lightProbe.needsUpdate=p,d.directionalLights.needsUpdate=p,d.directionalLightShadows.needsUpdate=p,d.pointLights.needsUpdate=p,d.pointLightShadows.needsUpdate=p,d.spotLights.needsUpdate=p,d.spotLightShadows.needsUpdate=p,d.rectAreaLights.needsUpdate=p,d.hemisphereLights.needsUpdate=p),f&&!0===s.fog&&m.refreshFogUniforms(F,f),m.refreshMaterialUniforms(F,s,K,J,eo),hJ.upload(ep,P.uniformsList,F,l)),s.isShaderMaterial&&!0===s.uniformsNeedUpdate&&(hJ.upload(ep,P.uniformsList,F,l),s.uniformsNeedUpdate=!1),s.isSpriteMaterial&&B.setValue(ep,"center",h.center),B.setValue(ep,"modelViewMatrix",h.modelViewMatrix),B.setValue(ep,"normalMatrix",h.normalMatrix),B.setValue(ep,"modelMatrix",h.matrixWorld),s.isShaderMaterial||s.isRawShaderMaterial){let e=s.uniformsGroups;for(let r=0,n=e.length;r<n;r++)if(i.isWebGL2){let n=e[r];E.update(n,D),E.bind(n,D)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return D}(e,r,n,s,p);a.setMaterial(s,v);let b=n.index,M=1;!0===s.wireframe&&(b=d.getWireframeAttribute(n),M=2);let A=n.drawRange,C=n.attributes.position,R=A.start*M,P=(A.start+A.count)*M;null!==f&&(R=Math.max(R,f.start*M),P=Math.min(P,(f.start+f.count)*M)),null!==b?(R=Math.max(R,0),P=Math.min(P,b.count)):null!=C&&(R=Math.max(R,0),P=Math.min(P,C.count));let L=P-R;if(L<0||L===1/0)return;T.setup(p,s,x,n,b);let k=S;if(null!==b&&(g=h.get(b),(k=w).setIndex(g)),p.isMesh)!0===s.wireframe?(a.setLineWidth(s.wireframeLinewidth*ed()),k.setMode(1)):k.setMode(4);else if(p.isLine){let e=s.linewidth;void 0===e&&(e=1),a.setLineWidth(e*ed()),p.isLineSegments?k.setMode(1):p.isLineLoop?k.setMode(2):k.setMode(3)}else p.isPoints?k.setMode(0):p.isSprite&&k.setMode(4);if(p.isInstancedMesh)k.renderInstances(R,L,p.count);else if(n.isInstancedBufferGeometry){let e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,r=Math.min(n.instanceCount,e);k.renderInstances(R,L,r)}else k.render(R,L)},this.compile=function(e,r){function n(e,r,n){!0===e.transparent&&3===e.side?(e.side=1,e.needsUpdate=!0,eA(e,r,n),e.side=0,e.needsUpdate=!0,eA(e,r,n),e.side=3):eA(e,r,n)}(z=v.get(e)).init(),F.push(z),e.traverseVisible(function(e){e.isLight&&e.layers.test(r.layers)&&(z.pushLight(e),e.castShadow&&z.pushShadow(e))}),z.setupLights(U.physicallyCorrectLights),e.traverse(function(r){let i=r.material;if(i){if(Array.isArray(i))for(let a=0;a<i.length;a++){let s=i[a];n(s,e,r)}else n(i,e,r)}}),F.pop(),z=null};let e_=null;function eS(){eM.stop()}function ew(){eM.start()}let eM=new cw;function eT(e,r,s,o){let u=e.opaque,c=e.transmissive,h=e.transparent;z.setupLightsView(s),c.length>0&&function(e,r,a){let s=i.isWebGL2;null===eo&&(eo=new lL(1,1,{generateMipmaps:!0,type:n.has("EXT_color_buffer_half_float")?1016:1009,minFilter:1008,samples:s&&!0===L?4:0})),U.getDrawingBufferSize(eu),s?eo.setSize(eu.x,eu.y):eo.setSize(la(eu.x),la(eu.y));let o=U.getRenderTarget();U.setRenderTarget(eo),U.clear();let u=U.toneMapping;U.toneMapping=0,eE(e,r,a),U.toneMapping=u,l.updateMultisampleRenderTarget(eo),l.updateRenderTargetMipmap(eo),U.setRenderTarget(o)}(u,r,s),o&&a.viewport($.copy(o)),u.length>0&&eE(u,r,s),c.length>0&&eE(c,r,s),h.length>0&&eE(h,r,s),a.buffers.depth.setTest(!0),a.buffers.depth.setMask(!0),a.buffers.color.setMask(!0),a.setPolygonOffset(!1)}function eE(e,r,n){let i=!0===r.isScene?r.overrideMaterial:null;for(let s=0,o=e.length;s<o;s++){var a;let o=e[s],l=o.object,u=o.geometry,c=null===i?o.material:i,h=o.group;l.layers.test(n.layers)&&(a=c,l.onBeforeRender(U,r,n,u,a,h),l.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,l.matrixWorld),l.normalMatrix.getNormalMatrix(l.modelViewMatrix),a.onBeforeRender(U,r,n,u,l,h),!0===a.transparent&&3===a.side?(a.side=1,a.needsUpdate=!0,U.renderBufferDirect(n,r,u,a,l,h),a.side=0,a.needsUpdate=!0,U.renderBufferDirect(n,r,u,a,l,h),a.side=3):U.renderBufferDirect(n,r,u,a,l,h),l.onAfterRender(U,r,n,u,a,h))}}function eA(e,r,n){!0!==r.isScene&&(r=eh);let i=o.get(e),a=z.state.lights,s=z.state.shadowsArray,l=a.state.version,h=f.getParameters(e,a.state,s,r,n),d=f.getProgramCacheKey(h),p=i.programs;i.environment=e.isMeshStandardMaterial?r.environment:null,i.fog=r.fog,i.envMap=(e.isMeshStandardMaterial?c:u).get(e.envMap||i.environment),void 0===p&&(e.addEventListener("dispose",eb),p=new Map,i.programs=p);let m=p.get(d);if(void 0!==m){if(i.currentProgram===m&&i.lightsStateVersion===l)return eC(e,h),m}else h.uniforms=f.getUniforms(e),e.onBuild(n,h,U),e.onBeforeCompile(h,U),m=f.acquireProgram(h,d),p.set(d,m),i.uniforms=h.uniforms;let g=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(g.clippingPlanes=y.uniform),eC(e,h),i.needsLights=e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights,i.lightsStateVersion=l,i.needsLights&&(g.ambientLightColor.value=a.state.ambient,g.lightProbe.value=a.state.probe,g.directionalLights.value=a.state.directional,g.directionalLightShadows.value=a.state.directionalShadow,g.spotLights.value=a.state.spot,g.spotLightShadows.value=a.state.spotShadow,g.rectAreaLights.value=a.state.rectArea,g.ltc_1.value=a.state.rectAreaLTC1,g.ltc_2.value=a.state.rectAreaLTC2,g.pointLights.value=a.state.point,g.pointLightShadows.value=a.state.pointShadow,g.hemisphereLights.value=a.state.hemi,g.directionalShadowMap.value=a.state.directionalShadowMap,g.directionalShadowMatrix.value=a.state.directionalShadowMatrix,g.spotShadowMap.value=a.state.spotShadowMap,g.spotLightMatrix.value=a.state.spotLightMatrix,g.spotLightMap.value=a.state.spotLightMap,g.pointShadowMap.value=a.state.pointShadowMap,g.pointShadowMatrix.value=a.state.pointShadowMatrix);let v=m.getUniforms(),x=hJ.seqWithValue(v.seq,g);return i.currentProgram=m,i.uniformsList=x,m}function eC(e,r){let n=o.get(e);n.outputEncoding=r.outputEncoding,n.instancing=r.instancing,n.skinning=r.skinning,n.morphTargets=r.morphTargets,n.morphNormals=r.morphNormals,n.morphColors=r.morphColors,n.morphTargetsCount=r.morphTargetsCount,n.numClippingPlanes=r.numClippingPlanes,n.numIntersection=r.numClipIntersection,n.vertexAlphas=r.vertexAlphas,n.vertexTangents=r.vertexTangents,n.toneMapping=r.toneMapping}eM.setAnimationLoop(function(e){e_&&e_(e)}),"undefined"!=typeof self&&eM.setContext(self),this.setAnimationLoop=function(e){e_=e,eg.setAnimationLoop(e),null===e?eM.stop():eM.start()},eg.addEventListener("sessionstart",eS),eg.addEventListener("sessionend",ew),this.render=function(e,r){if(void 0!==r&&!0!==r.isCamera){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!0===V)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===r.parent&&!0===r.matrixWorldAutoUpdate&&r.updateMatrixWorld(),!0===eg.enabled&&!0===eg.isPresenting&&(!0===eg.cameraAutoUpdate&&eg.updateCamera(r),r=eg.getCamera()),!0===e.isScene&&e.onBeforeRender(U,e,r,W),(z=v.get(e,F.length)).init(),F.push(z),el.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ei.setFromProjectionMatrix(el),es=this.localClippingEnabled,ea=y.init(this.clippingPlanes,es,r),(N=g.get(e,B.length)).init(),B.push(N),function e(r,n,i,a){if(!1===r.visible)return;let o=r.layers.test(n.layers);if(o){if(r.isGroup)i=r.renderOrder;else if(r.isLOD)!0===r.autoUpdate&&r.update(n);else if(r.isLight)z.pushLight(r),r.castShadow&&z.pushShadow(r);else if(r.isSprite){if(!r.frustumCulled||ei.intersectsSprite(r)){a&&ec.setFromMatrixPosition(r.matrixWorld).applyMatrix4(el);let e=p.update(r),n=r.material;n.visible&&N.push(r,e,n,i,ec.z,null)}}else if((r.isMesh||r.isLine||r.isPoints)&&(r.isSkinnedMesh&&r.skeleton.frame!==s.render.frame&&(r.skeleton.update(),r.skeleton.frame=s.render.frame),!r.frustumCulled||ei.intersectsObject(r))){a&&ec.setFromMatrixPosition(r.matrixWorld).applyMatrix4(el);let e=p.update(r),n=r.material;if(Array.isArray(n)){let a=e.groups;for(let s=0,o=a.length;s<o;s++){let o=a[s],l=n[o.materialIndex];l&&l.visible&&N.push(r,e,l,i,ec.z,o)}}else n.visible&&N.push(r,e,n,i,ec.z,null)}}let l=r.children;for(let r=0,s=l.length;r<s;r++)e(l[r],n,i,a)}(e,r,0,U.sortObjects),N.finish(),!0===U.sortObjects&&N.sort(Q,ee),!0===ea&&y.beginShadows();let n=z.state.shadowsArray;if(x.render(n,e,r),!0===ea&&y.endShadows(),!0===this.info.autoReset&&this.info.reset(),b.render(N,e),z.setupLights(U.physicallyCorrectLights),r.isArrayCamera){let n=r.cameras;for(let r=0,i=n.length;r<i;r++){let i=n[r];eT(N,e,i,i.viewport)}}else eT(N,e,r);null!==W&&(l.updateMultisampleRenderTarget(W),l.updateRenderTargetMipmap(W)),!0===e.isScene&&e.onAfterRender(U,e,r),T.resetDefaultState(),G=-1,q=null,F.pop(),z=F.length>0?F[F.length-1]:null,B.pop(),N=B.length>0?B[B.length-1]:null},this.getActiveCubeFace=function(){return j},this.getActiveMipmapLevel=function(){return H},this.getRenderTarget=function(){return W},this.setRenderTargetTextures=function(e,r,i){o.get(e.texture).__webglTexture=r,o.get(e.depthTexture).__webglTexture=i;let a=o.get(e);a.__hasExternalTextures=!0,a.__hasExternalTextures&&(a.__autoAllocateDepthBuffer=void 0===i,a.__autoAllocateDepthBuffer||!0!==n.has("WEBGL_multisampled_render_to_texture")||(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),a.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,r){let n=o.get(e);n.__webglFramebuffer=r,n.__useDefaultFramebuffer=void 0===r},this.setRenderTarget=function(e,r=0,n=0){W=e,j=r,H=n;let s=!0,u=null,c=!1,h=!1;if(e){let n=o.get(e);void 0!==n.__useDefaultFramebuffer?(a.bindFramebuffer(36160,null),s=!1):void 0===n.__webglFramebuffer?l.setupRenderTarget(e):n.__hasExternalTextures&&l.rebindTextures(e,o.get(e.texture).__webglTexture,o.get(e.depthTexture).__webglTexture);let d=e.texture;(d.isData3DTexture||d.isDataArrayTexture||d.isCompressedArrayTexture)&&(h=!0);let p=o.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(u=p[r],c=!0):u=i.isWebGL2&&e.samples>0&&!1===l.useMultisampledRTT(e)?o.get(e).__webglMultisampledFramebuffer:p,$.copy(e.viewport),X.copy(e.scissor),Y=e.scissorTest}else $.copy(et).multiplyScalar(K).floor(),X.copy(er).multiplyScalar(K).floor(),Y=en;let d=a.bindFramebuffer(36160,u);if(d&&i.drawBuffers&&s&&a.drawBuffers(e,u),a.viewport($),a.scissor(X),a.setScissorTest(Y),c){let i=o.get(e.texture);ep.framebufferTexture2D(36160,36064,34069+r,i.__webglTexture,n)}else if(h){let i=o.get(e.texture);ep.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,r||0)}G=-1},this.readRenderTargetPixels=function(e,r,s,l,u,c,h){if(!(e&&e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let d=o.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==h&&(d=d[h]),d){a.bindFramebuffer(36160,d);try{let a=e.texture,o=a.format,h=a.type;if(1023!==o&&M.convert(o)!==ep.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let d=1016===h&&(n.has("EXT_color_buffer_half_float")||i.isWebGL2&&n.has("EXT_color_buffer_float"));if(1009!==h&&M.convert(h)!==ep.getParameter(35738)&&!(1015===h&&(i.isWebGL2||n.has("OES_texture_float")||n.has("WEBGL_color_buffer_float")))&&!d){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}r>=0&&r<=e.width-l&&s>=0&&s<=e.height-u&&ep.readPixels(r,s,l,u,M.convert(o),M.convert(h),c)}finally{let e=null!==W?o.get(W).__webglFramebuffer:null;a.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,r,n=0){let i=Math.pow(2,-n),s=Math.floor(r.image.width*i),o=Math.floor(r.image.height*i);l.setTexture2D(r,0),ep.copyTexSubImage2D(3553,n,0,0,e.x,e.y,s,o),a.unbindTexture()},this.copyTextureToTexture=function(e,r,n,i=0){let s=r.image.width,o=r.image.height,u=M.convert(n.format),c=M.convert(n.type);l.setTexture2D(n,0),ep.pixelStorei(37440,n.flipY),ep.pixelStorei(37441,n.premultiplyAlpha),ep.pixelStorei(3317,n.unpackAlignment),r.isDataTexture?ep.texSubImage2D(3553,i,e.x,e.y,s,o,u,c,r.image.data):r.isCompressedTexture?ep.compressedTexSubImage2D(3553,i,e.x,e.y,r.mipmaps[0].width,r.mipmaps[0].height,u,r.mipmaps[0].data):ep.texSubImage2D(3553,i,e.x,e.y,u,c,r.image),0===i&&n.generateMipmaps&&ep.generateMipmap(3553),a.unbindTexture()},this.copyTextureToTexture3D=function(e,r,n,i,s=0){let o;if(U.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let u=e.max.x-e.min.x+1,c=e.max.y-e.min.y+1,h=e.max.z-e.min.z+1,d=M.convert(i.format),p=M.convert(i.type);if(i.isData3DTexture)l.setTexture3D(i,0),o=32879;else if(i.isDataArrayTexture)l.setTexture2DArray(i,0),o=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ep.pixelStorei(37440,i.flipY),ep.pixelStorei(37441,i.premultiplyAlpha),ep.pixelStorei(3317,i.unpackAlignment);let f=ep.getParameter(3314),m=ep.getParameter(32878),g=ep.getParameter(3316),v=ep.getParameter(3315),y=ep.getParameter(32877),x=n.isCompressedTexture?n.mipmaps[0]:n.image;ep.pixelStorei(3314,x.width),ep.pixelStorei(32878,x.height),ep.pixelStorei(3316,e.min.x),ep.pixelStorei(3315,e.min.y),ep.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?ep.texSubImage3D(o,s,r.x,r.y,r.z,u,c,h,d,p,x.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ep.compressedTexSubImage3D(o,s,r.x,r.y,r.z,u,c,h,d,x.data)):ep.texSubImage3D(o,s,r.x,r.y,r.z,u,c,h,d,p,x),ep.pixelStorei(3314,f),ep.pixelStorei(32878,m),ep.pixelStorei(3316,g),ep.pixelStorei(3315,v),ep.pixelStorei(32877,y),0===s&&i.generateMipmaps&&ep.generateMipmap(o),a.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?l.setTextureCube(e,0):e.isData3DTexture?l.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?l.setTexture2DArray(e,0):l.setTexture2D(e,0),a.unbindTexture()},this.resetState=function(){j=0,H=0,W=null,a.reset(),T.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends dk{}).prototype.isWebGL1Renderer=!0;class dD extends uT{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,r){return super.copy(e,r),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let r=super.toJSON(e);return null!==this.fog&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(r.backgroundIntensity=this.backgroundIntensity),r}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class dI{constructor(e,r){this.isInterleavedBuffer=!0,this.array=e,this.stride=r,this.count=void 0!==e?e.length/r:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=o8()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,r,n){e*=this.stride,n*=r.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=r.array[n+i];return this}set(e,r=0){return this.array.set(e,r),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=o8()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let r=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(r,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=o8()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}let dO=new lI;class dN{constructor(e,r,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=r,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let r=0,n=this.data.count;r<n;r++)dO.fromBufferAttribute(this,r),dO.applyMatrix4(e),this.setXYZ(r,dO.x,dO.y,dO.z);return this}applyNormalMatrix(e){for(let r=0,n=this.count;r<n;r++)dO.fromBufferAttribute(this,r),dO.applyNormalMatrix(e),this.setXYZ(r,dO.x,dO.y,dO.z);return this}transformDirection(e){for(let r=0,n=this.count;r<n;r++)dO.fromBufferAttribute(this,r),dO.transformDirection(e),this.setXYZ(r,dO.x,dO.y,dO.z);return this}setX(e,r){return this.normalized&&(r=lo(r,this.array)),this.data.array[e*this.data.stride+this.offset]=r,this}setY(e,r){return this.normalized&&(r=lo(r,this.array)),this.data.array[e*this.data.stride+this.offset+1]=r,this}setZ(e,r){return this.normalized&&(r=lo(r,this.array)),this.data.array[e*this.data.stride+this.offset+2]=r,this}setW(e,r){return this.normalized&&(r=lo(r,this.array)),this.data.array[e*this.data.stride+this.offset+3]=r,this}getX(e){let r=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(r=ls(r,this.array)),r}getY(e){let r=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(r=ls(r,this.array)),r}getZ(e){let r=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(r=ls(r,this.array)),r}getW(e){let r=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(r=ls(r,this.array)),r}setXY(e,r,n){return e=e*this.data.stride+this.offset,this.normalized&&(r=lo(r,this.array),n=lo(n,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=n,this}setXYZ(e,r,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(r=lo(r,this.array),n=lo(n,this.array),i=lo(i,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,r,n,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(r=lo(r,this.array),n=lo(n,this.array),i=lo(i,this.array),a=lo(a,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new dN(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);{console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let r=0;r<this.count;r++){let n=r*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[n+r])}return new uj(new this.array.constructor(e),this.itemSize,this.normalized)}}toJSON(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};{console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let r=0;r<this.count;r++){let n=r*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[n+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}}let dz=new lI,dB=new lP,dF=new lP,dU=new lI,dV=new ue;class dj extends cn{constructor(e,r){super(e,r),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ue,this.bindMatrixInverse=new ue}copy(e,r){return super.copy(e,r),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,r){this.skeleton=e,void 0===r&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.copy(r).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new lP,r=this.geometry.attributes.skinWeight;for(let n=0,i=r.count;n<i;n++){e.fromBufferAttribute(r,n);let i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),r.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,r){let n=this.skeleton,i=this.geometry;dB.fromBufferAttribute(i.attributes.skinIndex,e),dF.fromBufferAttribute(i.attributes.skinWeight,e),dz.copy(r).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let e=0;e<4;e++){let i=dF.getComponent(e);if(0!==i){let a=dB.getComponent(e);dV.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),r.addScaledVector(dU.copy(dz).applyMatrix4(dV),i)}}return r.applyMatrix4(this.bindMatrixInverse)}}class dH extends uT{constructor(){super(),this.isBone=!0,this.type="Bone"}}class dW extends lR{constructor(e=null,r=1,n=1,i,a,s,o,l,u=1003,c=1003,h,d){super(null,s,o,l,u,c,i,a,h,d),this.isDataTexture=!0,this.image={data:e,width:r,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let dG=new ue,dq=new ue;class d${constructor(e=[],r=[]){this.uuid=o8(),this.bones=e.slice(0),this.boneInverses=r,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===r.length)this.calculateInverses();else if(e.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,r=this.bones.length;e<r;e++)this.boneInverses.push(new ue)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,r=this.bones.length;e<r;e++){let r=new ue;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,r=this.bones.length;e<r;e++){let r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,r=this.bones.length;e<r;e++){let r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){let e=this.bones,r=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,a=e.length;i<a;i++){let a=e[i]?e[i].matrixWorld:dq;dG.multiplyMatrices(a,r[i]),dG.toArray(n,16*i)}null!==i&&(i.needsUpdate=!0)}clone(){return new d$(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Math.max(e=li(e),4);let r=new Float32Array(e*e*4);r.set(this.boneMatrices);let n=new dW(r,e,e,1023,1015);return n.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let r=0,n=this.bones.length;r<n;r++){let n=this.bones[r];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,r){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){let i=e.bones[n],a=r[i];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),a=new dH),this.bones.push(a),this.boneInverses.push(new ue().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let r=this.bones,n=this.boneInverses;for(let i=0,a=r.length;i<a;i++){let a=r[i];e.bones.push(a.uuid);let s=n[i];e.boneInverses.push(s.toArray())}return e}}class dX extends uj{constructor(e,r,n,i=1){super(e,r,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}let dY=new ue,dZ=new ue,dJ=[],dK=new ue,dQ=new cn;class d0 extends cn{constructor(e,r,n){super(e,r),this.isInstancedMesh=!0,this.instanceMatrix=new dX(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let e=0;e<n;e++)this.setMatrixAt(e,dK)}copy(e,r){return super.copy(e,r),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,r){r.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,r){r.fromArray(this.instanceMatrix.array,16*e)}raycast(e,r){let n=this.matrixWorld,i=this.count;if(dQ.geometry=this.geometry,dQ.material=this.material,void 0!==dQ.material)for(let a=0;a<i;a++){this.getMatrixAt(a,dY),dZ.multiplyMatrices(n,dY),dQ.matrixWorld=dZ,dQ.raycast(e,dJ);for(let e=0,n=dJ.length;e<n;e++){let n=dJ[e];n.instanceId=a,n.object=this,r.push(n)}dJ.length=0}}setColorAt(e,r){null===this.instanceColor&&(this.instanceColor=new dX(new Float32Array(3*this.instanceMatrix.count),3)),r.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,r){r.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class d1 extends uB{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new lM(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}let d2=new lI,d3=new lI,d5=new ue,d4=new l8,d6=new l1;class d9 extends uT{constructor(e=new uQ,r=new d1){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(null===e.index){let r=e.attributes.position,n=[0];for(let e=1,i=r.count;e<i;e++)d2.fromBufferAttribute(r,e-1),d3.fromBufferAttribute(r,e),n[e]=n[e-1],n[e]+=d2.distanceTo(d3);e.setAttribute("lineDistance",new uG(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,r){let n=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),d6.copy(n.boundingSphere),d6.applyMatrix4(i),d6.radius+=a,!1===e.ray.intersectsSphere(d6))return;d5.copy(i).invert(),d4.copy(e.ray).applyMatrix4(d5);let o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=new lI,c=new lI,h=new lI,d=new lI,p=this.isLineSegments?2:1,f=n.index,m=n.attributes,g=m.position;if(null!==f){let n=Math.max(0,s.start),i=Math.min(f.count,s.start+s.count);for(let a=n,s=i-1;a<s;a+=p){let n=f.getX(a),i=f.getX(a+1);u.fromBufferAttribute(g,n),c.fromBufferAttribute(g,i);let s=d4.distanceSqToSegment(u,c,d,h);if(s>l)continue;d.applyMatrix4(this.matrixWorld);let o=e.ray.origin.distanceTo(d);o<e.near||o>e.far||r.push({distance:o,point:h.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this})}}else{let n=Math.max(0,s.start),i=Math.min(g.count,s.start+s.count);for(let a=n,s=i-1;a<s;a+=p){u.fromBufferAttribute(g,a),c.fromBufferAttribute(g,a+1);let n=d4.distanceSqToSegment(u,c,d,h);if(n>l)continue;d.applyMatrix4(this.matrixWorld);let i=e.ray.origin.distanceTo(d);i<e.near||i>e.far||r.push({distance:i,point:h.clone().applyMatrix4(this.matrixWorld),index:a,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry,r=e.morphAttributes,n=Object.keys(r);if(n.length>0){let e=r[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=e.length;r<n;r++){let n=e[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=r}}}}}let d7=new lI,d8=new lI;class pe extends d9{constructor(e,r){super(e,r),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(null===e.index){let r=e.attributes.position,n=[];for(let e=0,i=r.count;e<i;e+=2)d7.fromBufferAttribute(r,e),d8.fromBufferAttribute(r,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+d7.distanceTo(d8);e.setAttribute("lineDistance",new uG(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class pt extends d9{constructor(e,r){super(e,r),this.isLineLoop=!0,this.type="LineLoop"}}class pr extends uB{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new lM(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let pn=new ue,pi=new l8,pa=new l1,ps=new lI;class po extends uT{constructor(e=new uQ,r=new pr){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),this.material=e.material,this.geometry=e.geometry,this}raycast(e,r){let n=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),pa.copy(n.boundingSphere),pa.applyMatrix4(i),pa.radius+=a,!1===e.ray.intersectsSphere(pa))return;pn.copy(i).invert(),pi.copy(e.ray).applyMatrix4(pn);let o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=n.index,c=n.attributes,h=c.position;if(null!==u){let n=Math.max(0,s.start),a=Math.min(u.count,s.start+s.count);for(let s=n;s<a;s++){let n=u.getX(s);ps.fromBufferAttribute(h,n),pl(ps,n,l,i,e,r,this)}}else{let n=Math.max(0,s.start),a=Math.min(h.count,s.start+s.count);for(let s=n;s<a;s++)ps.fromBufferAttribute(h,s),pl(ps,s,l,i,e,r,this)}}updateMorphTargets(){let e=this.geometry,r=e.morphAttributes,n=Object.keys(r);if(n.length>0){let e=r[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=e.length;r<n;r++){let n=e[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=r}}}}}function pl(e,r,n,i,a,s,o){let l=pi.distanceSqToPoint(e);if(l<n){let n=new lI;pi.closestPointToPoint(e,n),n.applyMatrix4(i);let u=a.ray.origin.distanceTo(n);if(u<a.near||u>a.far)return;s.push({distance:u,distanceToRay:Math.sqrt(l),point:n,index:r,face:null,object:o})}}class pu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,r){let n=this.getUtoTmapping(e);return this.getPoint(n,r)}getPoints(e=5){let r=[];for(let n=0;n<=e;n++)r.push(this.getPoint(n/e));return r}getSpacedPoints(e=5){let r=[];for(let n=0;n<=e;n++)r.push(this.getPointAt(n/e));return r}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let r=[],n,i=this.getPoint(0),a=0;r.push(0);for(let s=1;s<=e;s++)r.push(a+=(n=this.getPoint(s/e)).distanceTo(i)),i=n;return this.cacheArcLengths=r,r}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,r){let n;let i=this.getLengths(),a=0,s=i.length;n=r||e*i[s-1];let o=0,l=s-1,u;for(;o<=l;)if((u=i[a=Math.floor(o+(l-o)/2)]-n)<0)o=a+1;else if(u>0)l=a-1;else{l=a;break}if(i[a=l]===n)return a/(s-1);let c=i[a],h=i[a+1],d=(a+(n-c)/(h-c))/(s-1);return d}getTangent(e,r){let n=e-1e-4,i=e+1e-4;n<0&&(n=0),i>1&&(i=1);let a=this.getPoint(n),s=this.getPoint(i),o=r||(a.isVector2?new lu:new lI);return o.copy(s).sub(a).normalize(),o}getTangentAt(e,r){let n=this.getUtoTmapping(e);return this.getTangent(n,r)}computeFrenetFrames(e,r){let n=new lI,i=[],a=[],s=[],o=new lI,l=new ue;for(let r=0;r<=e;r++){let n=r/e;i[r]=this.getTangentAt(n,new lI)}a[0]=new lI,s[0]=new lI;let u=Number.MAX_VALUE,c=Math.abs(i[0].x),h=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=u&&(u=c,n.set(1,0,0)),h<=u&&(u=h,n.set(0,1,0)),d<=u&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),a[0].crossVectors(i[0],o),s[0].crossVectors(i[0],a[0]);for(let r=1;r<=e;r++){if(a[r]=a[r-1].clone(),s[r]=s[r-1].clone(),o.crossVectors(i[r-1],i[r]),o.length()>Number.EPSILON){o.normalize();let e=Math.acos(le(i[r-1].dot(i[r]),-1,1));a[r].applyMatrix4(l.makeRotationAxis(o,e))}s[r].crossVectors(i[r],a[r])}if(!0===r){let r=Math.acos(le(a[0].dot(a[e]),-1,1));r/=e,i[0].dot(o.crossVectors(a[0],a[e]))>0&&(r=-r);for(let n=1;n<=e;n++)a[n].applyMatrix4(l.makeRotationAxis(i[n],r*n)),s[n].crossVectors(i[n],a[n])}return{tangents:i,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class pc extends pu{constructor(e=0,r=0,n=1,i=1,a=0,s=2*Math.PI,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=r,this.xRadius=n,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=l}getPoint(e,r){let n=r||new lu,i=2*Math.PI,a=this.aEndAngle-this.aStartAngle,s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(a=s?0:i),!0!==this.aClockwise||s||(a===i?a=-i:a-=i);let o=this.aStartAngle+e*a,l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){let e=Math.cos(this.aRotation),r=Math.sin(this.aRotation),n=l-this.aX,i=u-this.aY;l=n*e-i*r+this.aX,u=n*r+i*e+this.aY}return n.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function ph(){let e=0,r=0,n=0,i=0;function a(a,s,o,l){e=a,r=o,n=-3*a+3*s-2*o-l,i=2*a-2*s+o+l}return{initCatmullRom:function(e,r,n,i,s){a(r,n,s*(n-e),s*(i-r))},initNonuniformCatmullRom:function(e,r,n,i,s,o,l){let u=(r-e)/s-(n-e)/(s+o)+(n-r)/o,c=(n-r)/o-(i-r)/(o+l)+(i-n)/l;a(r,n,u*=o,c*=o)},calc:function(a){let s=a*a;return e+r*a+n*s+i*(s*a)}}}let pd=new lI,pp=new ph,pf=new ph,pm=new ph;function pg(e,r,n,i,a){let s=(i-r)*.5,o=(a-n)*.5,l=e*e;return(2*n-2*i+s+o)*(e*l)+(-3*n+3*i-2*s-o)*l+s*e+n}function pv(e,r,n,i){return function(e,r){let n=1-e;return n*n*r}(e,r)+2*(1-e)*e*n+e*e*i}function py(e,r,n,i,a){return function(e,r){let n=1-e;return n*n*n*r}(e,r)+function(e,r){let n=1-e;return 3*n*n*e*r}(e,n)+3*(1-e)*e*e*i+e*e*e*a}class px extends pu{constructor(e=new lu,r=new lu,n=new lu,i=new lu){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=r,this.v2=n,this.v3=i}getPoint(e,r=new lu){let n=this.v0,i=this.v1,a=this.v2,s=this.v3;return r.set(py(e,n.x,i.x,a.x,s.x),py(e,n.y,i.y,a.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class pb extends pu{constructor(e=new lu,r=new lu){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=r}getPoint(e,r=new lu){return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,r){return this.getPoint(e,r)}getTangent(e,r){let n=r||new lu;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class p_ extends pu{constructor(e=new lu,r=new lu,n=new lu){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=r,this.v2=n}getPoint(e,r=new lu){let n=this.v0,i=this.v1,a=this.v2;return r.set(pv(e,n.x,i.x,a.x),pv(e,n.y,i.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pS extends pu{constructor(e=new lI,r=new lI,n=new lI){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=r,this.v2=n}getPoint(e,r=new lI){let n=this.v0,i=this.v1,a=this.v2;return r.set(pv(e,n.x,i.x,a.x),pv(e,n.y,i.y,a.y),pv(e,n.z,i.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pw extends pu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,r=new lu){let n=this.points,i=(n.length-1)*e,a=Math.floor(i),s=i-a,o=n[0===a?a:a-1],l=n[a],u=n[a>n.length-2?n.length-1:a+1],c=n[a>n.length-3?n.length-1:a+2];return r.set(pg(s,o.x,l.x,u.x,c.x),pg(s,o.y,l.y,u.y,c.y)),r}copy(e){super.copy(e),this.points=[];for(let r=0,n=e.points.length;r<n;r++){let n=e.points[r];this.points.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let r=0,n=this.points.length;r<n;r++){let n=this.points[r];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let r=0,n=e.points.length;r<n;r++){let n=e.points[r];this.points.push(new lu().fromArray(n))}return this}}var pM=Object.freeze({__proto__:null,ArcCurve:class extends pc{constructor(e,r,n,i,a,s){super(e,r,n,n,i,a,s),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends pu{constructor(e=[],r=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=r,this.curveType=n,this.tension=i}getPoint(e,r=new lI){let n,i;let a=this.points,s=a.length,o=(s-(this.closed?0:1))*e,l=Math.floor(o),u=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:0===u&&l===s-1&&(l=s-2,u=1),this.closed||l>0?n=a[(l-1)%s]:(pd.subVectors(a[0],a[1]).add(a[0]),n=pd);let c=a[l%s],h=a[(l+1)%s];if(this.closed||l+2<s?i=a[(l+2)%s]:(pd.subVectors(a[s-1],a[s-2]).add(a[s-1]),i=pd),"centripetal"===this.curveType||"chordal"===this.curveType){let e="chordal"===this.curveType?.5:.25,r=Math.pow(n.distanceToSquared(c),e),a=Math.pow(c.distanceToSquared(h),e),s=Math.pow(h.distanceToSquared(i),e);a<1e-4&&(a=1),r<1e-4&&(r=a),s<1e-4&&(s=a),pp.initNonuniformCatmullRom(n.x,c.x,h.x,i.x,r,a,s),pf.initNonuniformCatmullRom(n.y,c.y,h.y,i.y,r,a,s),pm.initNonuniformCatmullRom(n.z,c.z,h.z,i.z,r,a,s)}else"catmullrom"===this.curveType&&(pp.initCatmullRom(n.x,c.x,h.x,i.x,this.tension),pf.initCatmullRom(n.y,c.y,h.y,i.y,this.tension),pm.initCatmullRom(n.z,c.z,h.z,i.z,this.tension));return r.set(pp.calc(u),pf.calc(u),pm.calc(u)),r}copy(e){super.copy(e),this.points=[];for(let r=0,n=e.points.length;r<n;r++){let n=e.points[r];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let r=0,n=this.points.length;r<n;r++){let n=this.points[r];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let r=0,n=e.points.length;r<n;r++){let n=e.points[r];this.points.push(new lI().fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:px,CubicBezierCurve3:class extends pu{constructor(e=new lI,r=new lI,n=new lI,i=new lI){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=r,this.v2=n,this.v3=i}getPoint(e,r=new lI){let n=this.v0,i=this.v1,a=this.v2,s=this.v3;return r.set(py(e,n.x,i.x,a.x,s.x),py(e,n.y,i.y,a.y,s.y),py(e,n.z,i.z,a.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:pc,LineCurve:pb,LineCurve3:class extends pu{constructor(e=new lI,r=new lI){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=r}getPoint(e,r=new lI){return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,r){return this.getPoint(e,r)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:p_,QuadraticBezierCurve3:pS,SplineCurve:pw});class pT extends pu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),r=this.curves[this.curves.length-1].getPoint(1);e.equals(r)||this.curves.push(new pb(r,e))}getPoint(e,r){let n=e*this.getLength(),i=this.getCurveLengths(),a=0;for(;a<i.length;){if(i[a]>=n){let e=i[a]-n,s=this.curves[a],o=s.getLength(),l=0===o?0:1-e/o;return s.getPointAt(l,r)}a++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],r=0;for(let n=0,i=this.curves.length;n<i;n++)e.push(r+=this.curves[n].getLength());return this.cacheLengths=e,e}getSpacedPoints(e=40){let r=[];for(let n=0;n<=e;n++)r.push(this.getPoint(n/e));return this.autoClose&&r.push(r[0]),r}getPoints(e=12){let r;let n=[];for(let i=0,a=this.curves;i<a.length;i++){let s=a[i],o=s.isEllipseCurve?2*e:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(o);for(let e=0;e<l.length;e++){let i=l[e];r&&r.equals(i)||(n.push(i),r=i)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let r=0,n=e.curves.length;r<n;r++){let n=e.curves[r];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let r=0,n=this.curves.length;r<n;r++){let n=this.curves[r];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let r=0,n=e.curves.length;r<n;r++){let n=e.curves[r];this.curves.push(new pM[n.type]().fromJSON(n))}return this}}class pE extends pT{constructor(e){super(),this.type="Path",this.currentPoint=new lu,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let r=1,n=e.length;r<n;r++)this.lineTo(e[r].x,e[r].y);return this}moveTo(e,r){return this.currentPoint.set(e,r),this}lineTo(e,r){let n=new pb(this.currentPoint.clone(),new lu(e,r));return this.curves.push(n),this.currentPoint.set(e,r),this}quadraticCurveTo(e,r,n,i){let a=new p_(this.currentPoint.clone(),new lu(e,r),new lu(n,i));return this.curves.push(a),this.currentPoint.set(n,i),this}bezierCurveTo(e,r,n,i,a,s){let o=new px(this.currentPoint.clone(),new lu(e,r),new lu(n,i),new lu(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){let r=[this.currentPoint.clone()].concat(e),n=new pw(r);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,r,n,i,a,s){let o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,r+l,n,i,a,s),this}absarc(e,r,n,i,a,s){return this.absellipse(e,r,n,n,i,a,s),this}ellipse(e,r,n,i,a,s,o,l){let u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,r+c,n,i,a,s,o,l),this}absellipse(e,r,n,i,a,s,o,l){let u=new pc(e,r,n,i,a,s,o,l);if(this.curves.length>0){let e=u.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(u);let c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class pA extends uQ{constructor(e=[new lu(0,-.5),new lu(.5,0),new lu(0,.5)],r=12,n=0,i=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:r,phiStart:n,phiLength:i},r=Math.floor(r),i=le(i,0,2*Math.PI);let a=[],s=[],o=[],l=[],u=[],c=1/r,h=new lI,d=new lu,p=new lI,f=new lI,m=new lI,g=0,v=0;for(let r=0;r<=e.length-1;r++)switch(r){case 0:g=e[r+1].x-e[r].x,v=e[r+1].y-e[r].y,p.x=1*v,p.y=-g,p.z=0*v,m.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(m.x,m.y,m.z);break;default:g=e[r+1].x-e[r].x,v=e[r+1].y-e[r].y,p.x=1*v,p.y=-g,p.z=0*v,f.copy(p),p.x+=m.x,p.y+=m.y,p.z+=m.z,p.normalize(),l.push(p.x,p.y,p.z),m.copy(f)}for(let a=0;a<=r;a++){let p=n+a*c*i,f=Math.sin(p),m=Math.cos(p);for(let n=0;n<=e.length-1;n++){h.x=e[n].x*f,h.y=e[n].y,h.z=e[n].x*m,s.push(h.x,h.y,h.z),d.x=a/r,d.y=n/(e.length-1),o.push(d.x,d.y);let i=l[3*n+0]*f,c=l[3*n+1],p=l[3*n+0]*m;u.push(i,c,p)}}for(let n=0;n<r;n++)for(let r=0;r<e.length-1;r++){let i=r+n*e.length,s=i+e.length,o=i+e.length+1,l=i+1;a.push(i,s,l),a.push(o,l,s)}this.setIndex(a),this.setAttribute("position",new uG(s,3)),this.setAttribute("uv",new uG(o,2)),this.setAttribute("normal",new uG(u,3))}static fromJSON(e){return new pA(e.points,e.segments,e.phiStart,e.phiLength)}}class pC extends pA{constructor(e=1,r=1,n=4,i=8){let a=new pE;a.absarc(0,-r/2,e,1.5*Math.PI,0),a.absarc(0,r/2,e,0,.5*Math.PI),super(a.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:r,capSegments:n,radialSegments:i}}static fromJSON(e){return new pC(e.radius,e.length,e.capSegments,e.radialSegments)}}class pR extends uQ{constructor(e=1,r=32,n=0,i=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:r,thetaStart:n,thetaLength:i},r=Math.max(3,r);let a=[],s=[],o=[],l=[],u=new lI,c=new lu;s.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let a=0,h=3;a<=r;a++,h+=3){let d=n+a/r*i;u.x=e*Math.cos(d),u.y=e*Math.sin(d),s.push(u.x,u.y,u.z),o.push(0,0,1),c.x=(s[h]/e+1)/2,c.y=(s[h+1]/e+1)/2,l.push(c.x,c.y)}for(let e=1;e<=r;e++)a.push(e,e+1,0);this.setIndex(a),this.setAttribute("position",new uG(s,3)),this.setAttribute("normal",new uG(o,3)),this.setAttribute("uv",new uG(l,2))}static fromJSON(e){return new pR(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class pP extends uQ{constructor(e=1,r=1,n=1,i=32,a=1,s=!1,o=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:r,height:n,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l};let u=this;i=Math.floor(i),a=Math.floor(a);let c=[],h=[],d=[],p=[],f=0,m=[],g=n/2,v=0;function y(n){let a=f,s=new lu,m=new lI,y=0,x=!0===n?e:r,b=!0===n?1:-1;for(let e=1;e<=i;e++)h.push(0,g*b,0),d.push(0,b,0),p.push(.5,.5),f++;let _=f;for(let e=0;e<=i;e++){let r=e/i,n=r*l+o,a=Math.cos(n),u=Math.sin(n);m.x=x*u,m.y=g*b,m.z=x*a,h.push(m.x,m.y,m.z),d.push(0,b,0),s.x=.5*a+.5,s.y=.5*u*b+.5,p.push(s.x,s.y),f++}for(let e=0;e<i;e++){let r=a+e,i=_+e;!0===n?c.push(i,i+1,r):c.push(i+1,i,r),y+=3}u.addGroup(v,y,!0===n?1:2),v+=y}(function(){let s=new lI,y=new lI,x=0,b=(r-e)/n;for(let u=0;u<=a;u++){let c=[],v=u/a,x=v*(r-e)+e;for(let e=0;e<=i;e++){let r=e/i,a=r*l+o,u=Math.sin(a),m=Math.cos(a);y.x=x*u,y.y=-v*n+g,y.z=x*m,h.push(y.x,y.y,y.z),s.set(u,b,m).normalize(),d.push(s.x,s.y,s.z),p.push(r,1-v),c.push(f++)}m.push(c)}for(let e=0;e<i;e++)for(let r=0;r<a;r++){let n=m[r][e],i=m[r+1][e],a=m[r+1][e+1],s=m[r][e+1];c.push(n,i,s),c.push(i,a,s),x+=6}u.addGroup(v,x,0),v+=x})(),!1===s&&(e>0&&y(!0),r>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new uG(h,3)),this.setAttribute("normal",new uG(d,3)),this.setAttribute("uv",new uG(p,2))}static fromJSON(e){return new pP(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class pL extends pP{constructor(e=1,r=1,n=32,i=1,a=!1,s=0,o=2*Math.PI){super(0,e,r,n,i,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new pL(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class pk extends uQ{constructor(e=[],r=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:r,radius:n,detail:i};let a=[],s=[];function o(e){a.push(e.x,e.y,e.z)}function l(r,n){let i=3*r;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function u(e,r,n,i){i<0&&1===e.x&&(s[r]=e.x-1),0===n.x&&0===n.z&&(s[r]=i/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}(function(e){let n=new lI,i=new lI,a=new lI;for(let s=0;s<r.length;s+=3)l(r[s+0],n),l(r[s+1],i),l(r[s+2],a),function(e,r,n,i){let a=i+1,s=[];for(let i=0;i<=a;i++){s[i]=[];let o=e.clone().lerp(n,i/a),l=r.clone().lerp(n,i/a),u=a-i;for(let e=0;e<=u;e++)0===e&&i===a?s[i][e]=o:s[i][e]=o.clone().lerp(l,e/u)}for(let e=0;e<a;e++)for(let r=0;r<2*(a-e)-1;r++){let n=Math.floor(r/2);r%2==0?(o(s[e][n+1]),o(s[e+1][n]),o(s[e][n])):(o(s[e][n+1]),o(s[e+1][n+1]),o(s[e+1][n]))}}(n,i,a,e)})(i),function(e){let r=new lI;for(let n=0;n<a.length;n+=3)r.x=a[n+0],r.y=a[n+1],r.z=a[n+2],r.normalize().multiplyScalar(e),a[n+0]=r.x,a[n+1]=r.y,a[n+2]=r.z}(n),function(){let e=new lI;for(let r=0;r<a.length;r+=3){e.x=a[r+0],e.y=a[r+1],e.z=a[r+2];let n=c(e)/2/Math.PI+.5,i=Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5;s.push(n,1-i)}(function(){let e=new lI,r=new lI,n=new lI,i=new lI,o=new lu,l=new lu,h=new lu;for(let d=0,p=0;d<a.length;d+=9,p+=6){e.set(a[d+0],a[d+1],a[d+2]),r.set(a[d+3],a[d+4],a[d+5]),n.set(a[d+6],a[d+7],a[d+8]),o.set(s[p+0],s[p+1]),l.set(s[p+2],s[p+3]),h.set(s[p+4],s[p+5]),i.copy(e).add(r).add(n).divideScalar(3);let f=c(i);u(o,p+0,e,f),u(l,p+2,r,f),u(h,p+4,n,f)}})(),function(){for(let e=0;e<s.length;e+=6){let r=s[e+0],n=s[e+2],i=s[e+4],a=Math.max(r,n,i),o=Math.min(r,n,i);a>.9&&o<.1&&(r<.2&&(s[e+0]+=1),n<.2&&(s[e+2]+=1),i<.2&&(s[e+4]+=1))}}()}(),this.setAttribute("position",new uG(a,3)),this.setAttribute("normal",new uG(a.slice(),3)),this.setAttribute("uv",new uG(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new pk(e.vertices,e.indices,e.radius,e.details)}}class pD extends pk{constructor(e=1,r=0){let n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,r),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:r}}static fromJSON(e){return new pD(e.radius,e.detail)}}class pI extends pE{constructor(e){super(e),this.uuid=o8(),this.type="Shape",this.holes=[]}getPointsHoles(e){let r=[];for(let n=0,i=this.holes.length;n<i;n++)r[n]=this.holes[n].getPoints(e);return r}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let r=0,n=e.holes.length;r<n;r++){let n=e.holes[r];this.holes.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let r=0,n=this.holes.length;r<n;r++){let n=this.holes[r];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let r=0,n=e.holes.length;r<n;r++){let n=e.holes[r];this.holes.push(new pE().fromJSON(n))}return this}}let pO={triangulate:function(e,r,n=2){let i,a,s,o,l,u,c;let h=r&&r.length,d=h?r[0]*n:e.length,p=pN(e,0,d,n,!0),f=[];if(!p||p.next===p.prev)return f;if(h&&(p=function(e,r,n,i){let a,s,o,l,u;let c=[];for(a=0,s=r.length;a<s;a++)o=r[a]*i,l=a<s-1?r[a+1]*i:e.length,(u=pN(e,o,l,i,!1))===u.next&&(u.steiner=!0),c.push(function(e){let r=e,n=e;do(r.x<n.x||r.x===n.x&&r.y<n.y)&&(n=r),r=r.next;while(r!==e);return n}(u));for(c.sort(pB),a=0;a<c.length;a++)n=function(e,r){let n=function(e,r){let n=r,i=-1/0,a,s=e.x,o=e.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){let e=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=s&&e>i&&(i=e,a=n.x<n.next.x?n:n.next,e===s))return a}n=n.next}while(n!==r);if(!a)return null;let l=a,u=a.x,c=a.y,h=1/0,d;n=a;do{var p,f;s>=n.x&&n.x>=u&&s!==n.x&&pU(o<c?s:i,o,u,c,o<c?i:s,o,n.x,n.y)&&(d=Math.abs(o-n.y)/(s-n.x),pq(n,e)&&(d<h||d===h&&(n.x>a.x||n.x===a.x&&(p=a,f=n,0>pV(p.prev,p,f.prev)&&0>pV(f.next,p,p.next))))&&(a=n,h=d)),n=n.next}while(n!==l);return a}(e,r);if(!n)return r;let i=p$(n,e);return pz(i,i.next),pz(n,n.next)}(c[a],n);return n}(e,r,p,n)),e.length>80*n){i=s=e[0],a=o=e[1];for(let r=n;r<d;r+=n)l=e[r],u=e[r+1],l<i&&(i=l),u<a&&(a=u),l>s&&(s=l),u>o&&(o=u);c=0!==(c=Math.max(s-i,o-a))?32767/c:0}return function e(r,n,i,a,s,o,l){if(!r)return;!l&&o&&function(e,r,n,i){let a=e;do 0===a.z&&(a.z=pF(a.x,a.y,r,n,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,function(e){let r,n,i,a,s,o,l,u,c=1;do{for(n=e,e=null,s=null,o=0;n;){for(o++,i=n,l=0,r=0;r<c&&(l++,i=i.nextZ);r++);for(u=c;l>0||u>0&&i;)0!==l&&(0===u||!i||n.z<=i.z)?(a=n,n=n.nextZ,l--):(a=i,i=i.nextZ,u--),s?s.nextZ=a:e=a,a.prevZ=s,s=a;n=i}s.nextZ=null,c*=2}while(o>1)}(a)}(r,a,s,o);let u=r,c,h;for(;r.prev!==r.next;){if(c=r.prev,h=r.next,o?function(e,r,n,i){let a=e.prev,s=e.next;if(pV(a,e,s)>=0)return!1;let o=a.x,l=e.x,u=s.x,c=a.y,h=e.y,d=s.y,p=o<l?o<u?o:u:l<u?l:u,f=c<h?c<d?c:d:h<d?h:d,m=o>l?o>u?o:u:l>u?l:u,g=c>h?c>d?c:d:h>d?h:d,v=pF(p,f,r,n,i),y=pF(m,g,r,n,i),x=e.prevZ,b=e.nextZ;for(;x&&x.z>=v&&b&&b.z<=y;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==a&&x!==s&&pU(o,c,l,h,u,d,x.x,x.y)&&pV(x.prev,x,x.next)>=0||(x=x.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==a&&b!==s&&pU(o,c,l,h,u,d,b.x,b.y)&&pV(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;x&&x.z>=v;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==a&&x!==s&&pU(o,c,l,h,u,d,x.x,x.y)&&pV(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==a&&b!==s&&pU(o,c,l,h,u,d,b.x,b.y)&&pV(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}(r,a,s,o):function(e){let r=e.prev,n=e.next;if(pV(r,e,n)>=0)return!1;let i=r.x,a=e.x,s=n.x,o=r.y,l=e.y,u=n.y,c=i<a?i<s?i:s:a<s?a:s,h=o<l?o<u?o:u:l<u?l:u,d=i>a?i>s?i:s:a>s?a:s,p=o>l?o>u?o:u:l>u?l:u,f=n.next;for(;f!==r;){if(f.x>=c&&f.x<=d&&f.y>=h&&f.y<=p&&pU(i,o,a,l,s,u,f.x,f.y)&&pV(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}(r)){n.push(c.i/i|0),n.push(r.i/i|0),n.push(h.i/i|0),pY(r),r=h.next,u=h.next;continue}if((r=h)===u){l?1===l?e(r=function(e,r,n){let i=e;do{let a=i.prev,s=i.next.next;!pj(a,s)&&pH(a,i,i.next,s)&&pq(a,s)&&pq(s,a)&&(r.push(a.i/n|0),r.push(i.i/n|0),r.push(s.i/n|0),pY(i),pY(i.next),i=e=s),i=i.next}while(i!==e);return pz(i)}(pz(r),n,i),n,i,a,s,o,2):2===l&&function(r,n,i,a,s,o){let l=r;do{let r=l.next.next;for(;r!==l.prev;){var u,c;if(l.i!==r.i&&(u=l,c=r,u.next.i!==c.i&&u.prev.i!==c.i&&!function(e,r){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==r.i&&n.next.i!==r.i&&pH(n,n.next,e,r))return!0;n=n.next}while(n!==e);return!1}(u,c)&&(pq(u,c)&&pq(c,u)&&function(e,r){let n=e,i=!1,a=(e.x+r.x)/2,s=(e.y+r.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&a<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==e);return i}(u,c)&&(pV(u.prev,u,c.prev)||pV(u,c.prev,c))||pj(u,c)&&pV(u.prev,u,u.next)>0&&pV(c.prev,c,c.next)>0))){let u=p$(l,r);l=pz(l,l.next),u=pz(u,u.next),e(l,n,i,a,s,o,0),e(u,n,i,a,s,o,0);return}r=r.next}l=l.next}while(l!==r)}(r,n,i,a,s,o):e(pz(r),n,i,a,s,o,1);break}}}(p,f,n,i,a,c,0),f}};function pN(e,r,n,i,a){let s,o;if(a===function(e,r,n,i){let a=0;for(let s=r,o=n-i;s<n;s+=i)a+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return a}(e,r,n,i)>0)for(s=r;s<n;s+=i)o=pX(s,e[s],e[s+1],o);else for(s=n-i;s>=r;s-=i)o=pX(s,e[s],e[s+1],o);return o&&pj(o,o.next)&&(pY(o),o=o.next),o}function pz(e,r){if(!e)return e;r||(r=e);let n=e,i;do if(i=!1,!n.steiner&&(pj(n,n.next)||0===pV(n.prev,n,n.next))){if(pY(n),(n=r=n.prev)===n.next)break;i=!0}else n=n.next;while(i||n!==r);return r}function pB(e,r){return e.x-r.x}function pF(e,r,n,i,a){return(e=((e=((e=((e=((e=(e-n)*a|0)|e<<8)&16711935)|e<<4)&252645135)|e<<2)&858993459)|e<<1)&1431655765)|(r=((r=((r=((r=((r=(r-i)*a|0)|r<<8)&16711935)|r<<4)&252645135)|r<<2)&858993459)|r<<1)&1431655765)<<1}function pU(e,r,n,i,a,s,o,l){return(a-o)*(r-l)>=(e-o)*(s-l)&&(e-o)*(i-l)>=(n-o)*(r-l)&&(n-o)*(s-l)>=(a-o)*(i-l)}function pV(e,r,n){return(r.y-e.y)*(n.x-r.x)-(r.x-e.x)*(n.y-r.y)}function pj(e,r){return e.x===r.x&&e.y===r.y}function pH(e,r,n,i){let a=pG(pV(e,r,n)),s=pG(pV(e,r,i)),o=pG(pV(n,i,e)),l=pG(pV(n,i,r));return!!(a!==s&&o!==l||0===a&&pW(e,n,r)||0===s&&pW(e,i,r)||0===o&&pW(n,e,i)||0===l&&pW(n,r,i))}function pW(e,r,n){return r.x<=Math.max(e.x,n.x)&&r.x>=Math.min(e.x,n.x)&&r.y<=Math.max(e.y,n.y)&&r.y>=Math.min(e.y,n.y)}function pG(e){return e>0?1:e<0?-1:0}function pq(e,r){return 0>pV(e.prev,e,e.next)?pV(e,r,e.next)>=0&&pV(e,e.prev,r)>=0:0>pV(e,r,e.prev)||0>pV(e,e.next,r)}function p$(e,r){let n=new pZ(e.i,e.x,e.y),i=new pZ(r.i,r.x,r.y),a=e.next,s=r.prev;return e.next=r,r.prev=e,n.next=a,a.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function pX(e,r,n,i){let a=new pZ(e,r,n);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function pY(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function pZ(e,r,n){this.i=e,this.x=r,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class pJ{static area(e){let r=e.length,n=0;for(let i=r-1,a=0;a<r;i=a++)n+=e[i].x*e[a].y-e[a].x*e[i].y;return .5*n}static isClockWise(e){return 0>pJ.area(e)}static triangulateShape(e,r){let n=[],i=[],a=[];pK(e),pQ(n,e);let s=e.length;r.forEach(pK);for(let e=0;e<r.length;e++)i.push(s),s+=r[e].length,pQ(n,r[e]);let o=pO.triangulate(n,i);for(let e=0;e<o.length;e+=3)a.push(o.slice(e,e+3));return a}}function pK(e){let r=e.length;r>2&&e[r-1].equals(e[0])&&e.pop()}function pQ(e,r){for(let n=0;n<r.length;n++)e.push(r[n].x),e.push(r[n].y)}class p0 extends uQ{constructor(e=new pI([new lu(.5,.5),new lu(-.5,.5),new lu(-.5,-.5),new lu(.5,-.5)]),r={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:r},e=Array.isArray(e)?e:[e];let n=this,i=[],a=[];for(let s=0,o=e.length;s<o;s++){let o=e[s];!function(e){let s,o,l,u;let c=[],h=void 0!==r.curveSegments?r.curveSegments:12,d=void 0!==r.steps?r.steps:1,p=void 0!==r.depth?r.depth:1,f=void 0===r.bevelEnabled||r.bevelEnabled,m=void 0!==r.bevelThickness?r.bevelThickness:.2,g=void 0!==r.bevelSize?r.bevelSize:m-.1,v=void 0!==r.bevelOffset?r.bevelOffset:0,y=void 0!==r.bevelSegments?r.bevelSegments:3,x=r.extrudePath,b=void 0!==r.UVGenerator?r.UVGenerator:p1,_,S=!1;x&&(_=x.getSpacedPoints(d),S=!0,f=!1,s=x.computeFrenetFrames(d,!1),o=new lI,l=new lI,u=new lI),f||(y=0,m=0,g=0,v=0);let w=e.extractPoints(h),M=w.shape,T=w.holes,E=!pJ.isClockWise(M);if(E){M=M.reverse();for(let e=0,r=T.length;e<r;e++){let r=T[e];pJ.isClockWise(r)&&(T[e]=r.reverse())}}let A=pJ.triangulateShape(M,T),C=M;for(let e=0,r=T.length;e<r;e++){let r=T[e];M=M.concat(r)}function R(e,r,n){return r||console.error("THREE.ExtrudeGeometry: vec does not exist"),r.clone().multiplyScalar(n).add(e)}let P=M.length,L=A.length;function k(e,r,n){let i,a,s;let o=e.x-r.x,l=e.y-r.y,u=n.x-e.x,c=n.y-e.y,h=o*o+l*l;if(Math.abs(o*c-l*u)>Number.EPSILON){let d=Math.sqrt(h),p=Math.sqrt(u*u+c*c),f=r.x-l/d,m=r.y+o/d,g=n.x-c/p,v=n.y+u/p,y=((g-f)*c-(v-m)*u)/(o*c-l*u);i=f+o*y-e.x,a=m+l*y-e.y;let x=i*i+a*a;if(x<=2)return new lu(i,a);s=Math.sqrt(x/2)}else{let e=!1;o>Number.EPSILON?u>Number.EPSILON&&(e=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(e=!0):Math.sign(l)===Math.sign(c)&&(e=!0),e?(i=-l,a=o,s=Math.sqrt(h)):(i=o,a=l,s=Math.sqrt(h/2))}return new lu(i/s,a/s)}let D=[];for(let e=0,r=C.length,n=r-1,i=e+1;e<r;e++,n++,i++)n===r&&(n=0),i===r&&(i=0),D[e]=k(C[e],C[n],C[i]);let I=[],O,N=D.concat();for(let e=0,r=T.length;e<r;e++){let r=T[e];O=[];for(let e=0,n=r.length,i=n-1,a=e+1;e<n;e++,i++,a++)i===n&&(i=0),a===n&&(a=0),O[e]=k(r[e],r[i],r[a]);I.push(O),N=N.concat(O)}for(let e=0;e<y;e++){let r=e/y,n=m*Math.cos(r*Math.PI/2),i=g*Math.sin(r*Math.PI/2)+v;for(let e=0,r=C.length;e<r;e++){let r=R(C[e],D[e],i);F(r.x,r.y,-n)}for(let e=0,r=T.length;e<r;e++){let r=T[e];O=I[e];for(let e=0,a=r.length;e<a;e++){let a=R(r[e],O[e],i);F(a.x,a.y,-n)}}}let z=g+v;for(let e=0;e<P;e++){let r=f?R(M[e],N[e],z):M[e];S?(l.copy(s.normals[0]).multiplyScalar(r.x),o.copy(s.binormals[0]).multiplyScalar(r.y),u.copy(_[0]).add(l).add(o),F(u.x,u.y,u.z)):F(r.x,r.y,0)}for(let e=1;e<=d;e++)for(let r=0;r<P;r++){let n=f?R(M[r],N[r],z):M[r];S?(l.copy(s.normals[e]).multiplyScalar(n.x),o.copy(s.binormals[e]).multiplyScalar(n.y),u.copy(_[e]).add(l).add(o),F(u.x,u.y,u.z)):F(n.x,n.y,p/d*e)}for(let e=y-1;e>=0;e--){let r=e/y,n=m*Math.cos(r*Math.PI/2),i=g*Math.sin(r*Math.PI/2)+v;for(let e=0,r=C.length;e<r;e++){let r=R(C[e],D[e],i);F(r.x,r.y,p+n)}for(let e=0,r=T.length;e<r;e++){let r=T[e];O=I[e];for(let e=0,a=r.length;e<a;e++){let a=R(r[e],O[e],i);S?F(a.x,a.y+_[d-1].y,_[d-1].x+n):F(a.x,a.y,p+n)}}}function B(e,r){let a=e.length;for(;--a>=0;){let s=a,o=a-1;o<0&&(o=e.length-1);for(let e=0,a=d+2*y;e<a;e++){let a=P*e,l=P*(e+1),u=r+s+a,c=r+o+a,h=r+o+l,d=r+s+l;!function(e,r,a,s){V(e),V(r),V(s),V(r),V(a),V(s);let o=i.length/3,l=b.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);j(l[0]),j(l[1]),j(l[3]),j(l[1]),j(l[2]),j(l[3])}(u,c,h,d)}}}function F(e,r,n){c.push(e),c.push(r),c.push(n)}function U(e,r,a){V(e),V(r),V(a);let s=i.length/3,o=b.generateTopUV(n,i,s-3,s-2,s-1);j(o[0]),j(o[1]),j(o[2])}function V(e){i.push(c[3*e+0]),i.push(c[3*e+1]),i.push(c[3*e+2])}function j(e){a.push(e.x),a.push(e.y)}(function(){let e=i.length/3;if(f){let e=0*P;for(let r=0;r<L;r++){let n=A[r];U(n[2]+e,n[1]+e,n[0]+e)}e=P*(d+2*y);for(let r=0;r<L;r++){let n=A[r];U(n[0]+e,n[1]+e,n[2]+e)}}else{for(let e=0;e<L;e++){let r=A[e];U(r[2],r[1],r[0])}for(let e=0;e<L;e++){let r=A[e];U(r[0]+P*d,r[1]+P*d,r[2]+P*d)}}n.addGroup(e,i.length/3-e,0)})(),function(){let e=i.length/3,r=0;B(C,0),r+=C.length;for(let e=0,n=T.length;e<n;e++){let n=T[e];B(n,r),r+=n.length}n.addGroup(e,i.length/3-e,1)}()}(o)}this.setAttribute("position",new uG(i,3)),this.setAttribute("uv",new uG(a,2)),this.computeVertexNormals()}toJSON(){let e=super.toJSON(),r=this.parameters.shapes,n=this.parameters.options;return function(e,r,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){let i=e[r];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},r),void 0!==r.extrudePath&&(n.options.extrudePath=r.extrudePath.toJSON()),n}(r,n,e)}static fromJSON(e,r){let n=[];for(let i=0,a=e.shapes.length;i<a;i++){let a=r[e.shapes[i]];n.push(a)}let i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=new pM[i.type]().fromJSON(i)),new p0(n,e.options)}}let p1={generateTopUV:function(e,r,n,i,a){let s=r[3*n],o=r[3*n+1],l=r[3*i],u=r[3*i+1],c=r[3*a],h=r[3*a+1];return[new lu(s,o),new lu(l,u),new lu(c,h)]},generateSideWallUV:function(e,r,n,i,a,s){let o=r[3*n],l=r[3*n+1],u=r[3*n+2],c=r[3*i],h=r[3*i+1],d=r[3*i+2],p=r[3*a],f=r[3*a+1],m=r[3*a+2],g=r[3*s],v=r[3*s+1],y=r[3*s+2];return Math.abs(l-h)<Math.abs(o-c)?[new lu(o,1-u),new lu(c,1-d),new lu(p,1-m),new lu(g,1-y)]:[new lu(l,1-u),new lu(h,1-d),new lu(f,1-m),new lu(v,1-y)]}};class p2 extends pk{constructor(e=1,r=0){let n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,r),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:r}}static fromJSON(e){return new p2(e.radius,e.detail)}}class p3 extends pk{constructor(e=1,r=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,r),this.type="OctahedronGeometry",this.parameters={radius:e,detail:r}}static fromJSON(e){return new p3(e.radius,e.detail)}}class p5 extends uQ{constructor(e=.5,r=1,n=32,i=1,a=0,s=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:r,thetaSegments:n,phiSegments:i,thetaStart:a,thetaLength:s},n=Math.max(3,n),i=Math.max(1,i);let o=[],l=[],u=[],c=[],h=e,d=(r-e)/i,p=new lI,f=new lu;for(let e=0;e<=i;e++){for(let e=0;e<=n;e++){let i=a+e/n*s;p.x=h*Math.cos(i),p.y=h*Math.sin(i),l.push(p.x,p.y,p.z),u.push(0,0,1),f.x=(p.x/r+1)/2,f.y=(p.y/r+1)/2,c.push(f.x,f.y)}h+=d}for(let e=0;e<i;e++){let r=e*(n+1);for(let e=0;e<n;e++){let i=e+r,a=i+n+1,s=i+n+2,l=i+1;o.push(i,a,l),o.push(a,s,l)}}this.setIndex(o),this.setAttribute("position",new uG(l,3)),this.setAttribute("normal",new uG(u,3)),this.setAttribute("uv",new uG(c,2))}static fromJSON(e){return new p5(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class p4 extends uQ{constructor(e=new pI([new lu(0,.5),new lu(-.5,-.5),new lu(.5,-.5)]),r=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:r};let n=[],i=[],a=[],s=[],o=0,l=0;if(!1===Array.isArray(e))u(e);else for(let r=0;r<e.length;r++)u(e[r]),this.addGroup(o,l,r),o+=l,l=0;function u(e){let o=i.length/3,u=e.extractPoints(r),c=u.shape,h=u.holes;!1===pJ.isClockWise(c)&&(c=c.reverse());for(let e=0,r=h.length;e<r;e++){let r=h[e];!0===pJ.isClockWise(r)&&(h[e]=r.reverse())}let d=pJ.triangulateShape(c,h);for(let e=0,r=h.length;e<r;e++){let r=h[e];c=c.concat(r)}for(let e=0,r=c.length;e<r;e++){let r=c[e];i.push(r.x,r.y,0),a.push(0,0,1),s.push(r.x,r.y)}for(let e=0,r=d.length;e<r;e++){let r=d[e],i=r[0]+o,a=r[1]+o,s=r[2]+o;n.push(i,a,s),l+=3}}this.setIndex(n),this.setAttribute("position",new uG(i,3)),this.setAttribute("normal",new uG(a,3)),this.setAttribute("uv",new uG(s,2))}toJSON(){let e=super.toJSON(),r=this.parameters.shapes;return function(e,r){if(r.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){let i=e[n];r.shapes.push(i.uuid)}else r.shapes.push(e.uuid);return r}(r,e)}static fromJSON(e,r){let n=[];for(let i=0,a=e.shapes.length;i<a;i++){let a=r[e.shapes[i]];n.push(a)}return new p4(n,e.curveSegments)}}class p6 extends uQ{constructor(e=1,r=32,n=16,i=0,a=2*Math.PI,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:r,heightSegments:n,phiStart:i,phiLength:a,thetaStart:s,thetaLength:o},r=Math.max(3,Math.floor(r)),n=Math.max(2,Math.floor(n));let l=Math.min(s+o,Math.PI),u=0,c=[],h=new lI,d=new lI,p=[],f=[],m=[],g=[];for(let p=0;p<=n;p++){let v=[],y=p/n,x=0;0==p&&0==s?x=.5/r:p==n&&l==Math.PI&&(x=-.5/r);for(let n=0;n<=r;n++){let l=n/r;h.x=-e*Math.cos(i+l*a)*Math.sin(s+y*o),h.y=e*Math.cos(s+y*o),h.z=e*Math.sin(i+l*a)*Math.sin(s+y*o),f.push(h.x,h.y,h.z),d.copy(h).normalize(),m.push(d.x,d.y,d.z),g.push(l+x,1-y),v.push(u++)}c.push(v)}for(let e=0;e<n;e++)for(let i=0;i<r;i++){let r=c[e][i+1],a=c[e][i],o=c[e+1][i],u=c[e+1][i+1];(0!==e||s>0)&&p.push(r,a,u),(e!==n-1||l<Math.PI)&&p.push(a,o,u)}this.setIndex(p),this.setAttribute("position",new uG(f,3)),this.setAttribute("normal",new uG(m,3)),this.setAttribute("uv",new uG(g,2))}static fromJSON(e){return new p6(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class p9 extends pk{constructor(e=1,r=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,r),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:r}}static fromJSON(e){return new p9(e.radius,e.detail)}}class p7 extends uQ{constructor(e=1,r=.4,n=12,i=48,a=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:r,radialSegments:n,tubularSegments:i,arc:a},n=Math.floor(n),i=Math.floor(i);let s=[],o=[],l=[],u=[],c=new lI,h=new lI,d=new lI;for(let s=0;s<=n;s++)for(let p=0;p<=i;p++){let f=p/i*a,m=s/n*Math.PI*2;h.x=(e+r*Math.cos(m))*Math.cos(f),h.y=(e+r*Math.cos(m))*Math.sin(f),h.z=r*Math.sin(m),o.push(h.x,h.y,h.z),c.x=e*Math.cos(f),c.y=e*Math.sin(f),d.subVectors(h,c).normalize(),l.push(d.x,d.y,d.z),u.push(p/i),u.push(s/n)}for(let e=1;e<=n;e++)for(let r=1;r<=i;r++){let n=(i+1)*e+r-1,a=(i+1)*(e-1)+r-1,o=(i+1)*(e-1)+r,l=(i+1)*e+r;s.push(n,a,l),s.push(a,o,l)}this.setIndex(s),this.setAttribute("position",new uG(o,3)),this.setAttribute("normal",new uG(l,3)),this.setAttribute("uv",new uG(u,2))}static fromJSON(e){return new p7(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class p8 extends uQ{constructor(e=1,r=.4,n=64,i=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:r,tubularSegments:n,radialSegments:i,p:a,q:s},n=Math.floor(n),i=Math.floor(i);let o=[],l=[],u=[],c=[],h=new lI,d=new lI,p=new lI,f=new lI,m=new lI,g=new lI,v=new lI;for(let o=0;o<=n;++o){let x=o/n*a*Math.PI*2;y(x,a,s,e,p),y(x+.01,a,s,e,f),g.subVectors(f,p),v.addVectors(f,p),m.crossVectors(g,v),v.crossVectors(m,g),m.normalize(),v.normalize();for(let e=0;e<=i;++e){let a=e/i*Math.PI*2,s=-r*Math.cos(a),f=r*Math.sin(a);h.x=p.x+(s*v.x+f*m.x),h.y=p.y+(s*v.y+f*m.y),h.z=p.z+(s*v.z+f*m.z),l.push(h.x,h.y,h.z),d.subVectors(h,p).normalize(),u.push(d.x,d.y,d.z),c.push(o/n),c.push(e/i)}}for(let e=1;e<=n;e++)for(let r=1;r<=i;r++){let n=(i+1)*(e-1)+(r-1),a=(i+1)*e+(r-1),s=(i+1)*e+r,l=(i+1)*(e-1)+r;o.push(n,a,l),o.push(a,s,l)}function y(e,r,n,i,a){let s=n/r*e,o=Math.cos(s);a.x=i*(2+o)*.5*Math.cos(e),a.y=i*(2+o)*Math.sin(e)*.5,a.z=i*Math.sin(s)*.5}this.setIndex(o),this.setAttribute("position",new uG(l,3)),this.setAttribute("normal",new uG(u,3)),this.setAttribute("uv",new uG(c,2))}static fromJSON(e){return new p8(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class fe extends uQ{constructor(e=new pS(new lI(-1,-1,0),new lI(-1,1,0),new lI(1,1,0)),r=64,n=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:r,radius:n,radialSegments:i,closed:a};let s=e.computeFrenetFrames(r,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;let o=new lI,l=new lI,u=new lu,c=new lI,h=[],d=[],p=[],f=[];function m(a){c=e.getPointAt(a/r,c);let u=s.normals[a],p=s.binormals[a];for(let e=0;e<=i;e++){let r=e/i*Math.PI*2,a=Math.sin(r),s=-Math.cos(r);l.x=s*u.x+a*p.x,l.y=s*u.y+a*p.y,l.z=s*u.z+a*p.z,l.normalize(),d.push(l.x,l.y,l.z),o.x=c.x+n*l.x,o.y=c.y+n*l.y,o.z=c.z+n*l.z,h.push(o.x,o.y,o.z)}}(function(){for(let e=0;e<r;e++)m(e);m(!1===a?r:0),function(){for(let e=0;e<=r;e++)for(let n=0;n<=i;n++)u.x=e/r,u.y=n/i,p.push(u.x,u.y)}(),function(){for(let e=1;e<=r;e++)for(let r=1;r<=i;r++){let n=(i+1)*(e-1)+(r-1),a=(i+1)*e+(r-1),s=(i+1)*e+r,o=(i+1)*(e-1)+r;f.push(n,a,o),f.push(a,s,o)}}()})(),this.setIndex(f),this.setAttribute("position",new uG(h,3)),this.setAttribute("normal",new uG(d,3)),this.setAttribute("uv",new uG(p,2))}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new fe(new pM[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class ft extends uB{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new lM(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lM(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new lu(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class fr extends ft{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new lu(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return le(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new lM(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new lM(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new lM(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function fn(e,r,n){return fa(e)?new e.constructor(e.subarray(r,void 0!==n?n:e.length)):e.slice(r,n)}function fi(e,r,n){return e&&(n||e.constructor!==r)?"number"==typeof r.BYTES_PER_ELEMENT?new r(e):Array.prototype.slice.call(e):e}function fa(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function fs(e,r,n){let i=e.length,a=new e.constructor(i);for(let s=0,o=0;o!==i;++s){let i=n[s]*r;for(let n=0;n!==r;++n)a[o++]=e[i+n]}return a}function fo(e,r,n,i){let a=1,s=e[0];for(;void 0!==s&&void 0===s[i];)s=e[a++];if(void 0===s)return;let o=s[i];if(void 0!==o){if(Array.isArray(o))do void 0!==(o=s[i])&&(r.push(s.time),n.push.apply(n,o)),s=e[a++];while(void 0!==s);else if(void 0!==o.toArray)do void 0!==(o=s[i])&&(r.push(s.time),o.toArray(n,n.length)),s=e[a++];while(void 0!==s);else do void 0!==(o=s[i])&&(r.push(s.time),n.push(o)),s=e[a++];while(void 0!==s)}}class fl{constructor(e,r,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new r.constructor(n),this.sampleValues=r,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let r=this.parameterPositions,n=this._cachedIndex,i=r[n],a=r[n-1];e:{t:{let s;r:{n:if(!(e<i)){for(let s=n+2;;){if(void 0===i){if(e<a)break n;return n=r.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(a=i,e<(i=r[++n]))break t}s=r.length;break r}if(!(e>=a)){let o=r[1];e<o&&(n=2,a=o);for(let s=n-2;;){if(void 0===a)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(i=a,e>=(a=r[--n-1]))break t}s=n,n=0;break r}break e}for(;n<s;){let i=n+s>>>1;e<r[i]?s=i:n=i+1}if(i=r[n],void 0===(a=r[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=r.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,a,i)}return this.interpolate_(n,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let r=this.resultBuffer,n=this.sampleValues,i=this.valueSize,a=e*i;for(let e=0;e!==i;++e)r[e]=n[a+e];return r}interpolate_(){throw Error("call to abstract method")}intervalChanged_(){}}class fu extends fl{constructor(e,r,n,i){super(e,r,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,r,n){let i=this.parameterPositions,a=e-2,s=e+1,o=i[a],l=i[s];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:a=e,o=2*r-n;break;case 2402:a=i.length-2,o=r+i[a]-i[a+1];break;default:a=e,o=n}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:s=e,l=2*n-r;break;case 2402:s=1,l=n+i[1]-i[0];break;default:s=e-1,l=r}let u=(n-r)*.5,c=this.valueSize;this._weightPrev=u/(r-o),this._weightNext=u/(l-n),this._offsetPrev=a*c,this._offsetNext=s*c}interpolate_(e,r,n,i){let a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,p=this._weightNext,f=(n-r)/(i-r),m=f*f,g=m*f,v=-d*g+2*d*m-d*f,y=(1+d)*g+(-1.5-2*d)*m+(-.5+d)*f+1,x=(-1-p)*g+(1.5+p)*m+.5*f,b=p*g-p*m;for(let e=0;e!==o;++e)a[e]=v*s[c+e]+y*s[u+e]+x*s[l+e]+b*s[h+e];return a}}class fc extends fl{constructor(e,r,n,i){super(e,r,n,i)}interpolate_(e,r,n,i){let a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=(n-r)/(i-r),h=1-c;for(let e=0;e!==o;++e)a[e]=s[u+e]*h+s[l+e]*c;return a}}class fh extends fl{constructor(e,r,n,i){super(e,r,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class fd{constructor(e,r,n,i){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===r||0===r.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=fi(r,this.TimeBufferType),this.values=fi(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){let r;let n=e.constructor;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:fi(e.times,Array),values:fi(e.values,Array)};let n=e.getInterpolation();n!==e.DefaultInterpolation&&(r.interpolation=n)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new fh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new fc(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new fu(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let r;switch(e){case 2300:r=this.InterpolantFactoryMethodDiscrete;break;case 2301:r=this.InterpolantFactoryMethodLinear;break;case 2302:r=this.InterpolantFactoryMethodSmooth}if(void 0===r){let r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(r)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){let r=this.times;for(let n=0,i=r.length;n!==i;++n)r[n]+=e}return this}scale(e){if(1!==e){let r=this.times;for(let n=0,i=r.length;n!==i;++n)r[n]*=e}return this}trim(e,r){let n=this.times,i=n.length,a=0,s=i-1;for(;a!==i&&n[a]<e;)++a;for(;-1!==s&&n[s]>r;)--s;if(++s,0!==a||s!==i){a>=s&&(a=(s=Math.max(s,1))-1);let e=this.getValueSize();this.times=fn(n,a,s),this.values=fn(this.values,a*e,s*e)}return this}validate(){let e=!0,r=this.getValueSize();r-Math.floor(r)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let n=this.times,i=this.values,a=n.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let r=0;r!==a;r++){let i=n[r];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,r,i),e=!1;break}if(null!==s&&s>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,r,i,s),e=!1;break}s=i}if(void 0!==i&&fa(i))for(let r=0,n=i.length;r!==n;++r){let n=i[r];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,r,n),e=!1;break}}return e}optimize(){let e=fn(this.times),r=fn(this.values),n=this.getValueSize(),i=2302===this.getInterpolation(),a=e.length-1,s=1;for(let o=1;o<a;++o){let a=!1,l=e[o],u=e[o+1];if(l!==u&&(1!==o||l!==e[0])){if(i)a=!0;else{let e=o*n,i=e-n,s=e+n;for(let o=0;o!==n;++o){let n=r[e+o];if(n!==r[i+o]||n!==r[s+o]){a=!0;break}}}}if(a){if(o!==s){e[s]=e[o];let i=o*n,a=s*n;for(let e=0;e!==n;++e)r[a+e]=r[i+e]}++s}}if(a>0){e[s]=e[a];for(let e=a*n,i=s*n,o=0;o!==n;++o)r[i+o]=r[e+o];++s}return s!==e.length?(this.times=fn(e,0,s),this.values=fn(r,0,s*n)):(this.times=e,this.values=r),this}clone(){let e=fn(this.times,0),r=fn(this.values,0),n=this.constructor,i=new n(this.name,e,r);return i.createInterpolant=this.createInterpolant,i}}fd.prototype.TimeBufferType=Float32Array,fd.prototype.ValueBufferType=Float32Array,fd.prototype.DefaultInterpolation=2301;class fp extends fd{}fp.prototype.ValueTypeName="bool",fp.prototype.ValueBufferType=Array,fp.prototype.DefaultInterpolation=2300,fp.prototype.InterpolantFactoryMethodLinear=void 0,fp.prototype.InterpolantFactoryMethodSmooth=void 0;class ff extends fd{}ff.prototype.ValueTypeName="color";class fm extends fd{}fm.prototype.ValueTypeName="number";class fg extends fl{constructor(e,r,n,i){super(e,r,n,i)}interpolate_(e,r,n,i){let a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=(n-r)/(i-r),u=e*o;for(let e=u+o;u!==e;u+=4)lD.slerpFlat(a,0,s,u-o,s,u,l);return a}}class fv extends fd{InterpolantFactoryMethodLinear(e){return new fg(this.times,this.values,this.getValueSize(),e)}}fv.prototype.ValueTypeName="quaternion",fv.prototype.DefaultInterpolation=2301,fv.prototype.InterpolantFactoryMethodSmooth=void 0;class fy extends fd{}fy.prototype.ValueTypeName="string",fy.prototype.ValueBufferType=Array,fy.prototype.DefaultInterpolation=2300,fy.prototype.InterpolantFactoryMethodLinear=void 0,fy.prototype.InterpolantFactoryMethodSmooth=void 0;class fx extends fd{}fx.prototype.ValueTypeName="vector";class fb{constructor(e,r=-1,n,i=2500){this.name=e,this.tracks=n,this.duration=r,this.blendMode=i,this.uuid=o8(),this.duration<0&&this.resetDuration()}static parse(e){let r=[],n=e.tracks,i=1/(e.fps||1);for(let e=0,a=n.length;e!==a;++e)r.push((function(e){if(void 0===e.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");let r=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return fm;case"vector":case"vector2":case"vector3":case"vector4":return fx;case"color":return ff;case"quaternion":return fv;case"bool":case"boolean":return fp;case"string":return fy}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){let r=[],n=[];fo(e.keys,r,n,"value"),e.times=r,e.values=n}return void 0!==r.parse?r.parse(e):new r(e.name,e.times,e.values,e.interpolation)})(n[e]).scale(i));let a=new this(e.name,e.duration,r,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){let r=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:r,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,i=n.length;e!==i;++e)r.push(fd.toJSON(n[e]));return i}static CreateFromMorphTargetSequence(e,r,n,i){let a=r.length,s=[];for(let e=0;e<a;e++){let o=[],l=[];o.push((e+a-1)%a,e,(e+1)%a),l.push(0,1,0);let u=function(e){let r=e.length,n=Array(r);for(let e=0;e!==r;++e)n[e]=e;return n.sort(function(r,n){return e[r]-e[n]}),n}(o);o=fs(o,1,u),l=fs(l,1,u),i||0!==o[0]||(o.push(a),l.push(l[0])),s.push(new fm(".morphTargetInfluences["+r[e].name+"]",o,l).scale(1/n))}return new this(e,-1,s)}static findByName(e,r){let n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(let e=0;e<n.length;e++)if(n[e].name===r)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,r,n){let i={},a=/^([\w-]*?)([\d]+)$/;for(let r=0,n=e.length;r<n;r++){let n=e[r],s=n.name.match(a);if(s&&s.length>1){let e=s[1],r=i[e];r||(i[e]=r=[]),r.push(n)}}let s=[];for(let e in i)s.push(this.CreateFromMorphTargetSequence(e,i[e],r,n));return s}static parseAnimation(e,r){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let n=function(e,r,n,i,a){if(0!==n.length){let s=[],o=[];fo(n,s,o,i),0!==s.length&&a.push(new e(r,s,o))}},i=[],a=e.name||"default",s=e.fps||30,o=e.blendMode,l=e.length||-1,u=e.hierarchy||[];for(let e=0;e<u.length;e++){let a=u[e].keys;if(a&&0!==a.length){if(a[0].morphTargets){let e;let r={};for(e=0;e<a.length;e++)if(a[e].morphTargets)for(let n=0;n<a[e].morphTargets.length;n++)r[a[e].morphTargets[n]]=-1;for(let n in r){let r=[],s=[];for(let i=0;i!==a[e].morphTargets.length;++i){let i=a[e];r.push(i.time),s.push(i.morphTarget===n?1:0)}i.push(new fm(".morphTargetInfluence["+n+"]",r,s))}l=r.length*s}else{let s=".bones["+r[e].name+"]";n(fx,s+".position",a,"pos",i),n(fv,s+".quaternion",a,"rot",i),n(fx,s+".scale",a,"scl",i)}}}if(0===i.length)return null;let c=new this(a,l,i,o);return c}resetDuration(){let e=this.tracks,r=0;for(let n=0,i=e.length;n!==i;++n){let e=this.tracks[n];r=Math.max(r,e.times[e.times.length-1])}return this.duration=r,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let r=0;r<this.tracks.length;r++)e=e&&this.tracks[r].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let r=0;r<this.tracks.length;r++)e.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}let f_={enabled:!1,files:{},add:function(e,r){!1!==this.enabled&&(this.files[e]=r)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},fS=new class{constructor(e,r,n){let i;let a=this,s=!1,o=0,l=0,u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=r,this.onError=n,this.itemStart=function(e){l++,!1===s&&void 0!==a.onStart&&a.onStart(e,o,l),s=!0},this.itemEnd=function(e){o++,void 0!==a.onProgress&&a.onProgress(e,o,l),o===l&&(s=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(e){void 0!==a.onError&&a.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,r){return u.push(e,r),this},this.removeHandler=function(e){let r=u.indexOf(e);return -1!==r&&u.splice(r,2),this},this.getHandler=function(e){for(let r=0,n=u.length;r<n;r+=2){let n=u[r],i=u[r+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}};class fw{constructor(e){this.manager=void 0!==e?e:fS,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,r){let n=this;return new Promise(function(i,a){n.load(e,i,r,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}let fM={};class fT extends Error{constructor(e,r){super(e),this.response=r}}class fE extends fw{constructor(e){super(e)}load(e,r,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let a=f_.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout(()=>{r&&r(a),this.manager.itemEnd(e)},0),a;if(void 0!==fM[e]){fM[e].push({onLoad:r,onProgress:n,onError:i});return}fM[e]=[],fM[e].push({onLoad:r,onProgress:n,onError:i});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(s).then(r=>{if(200===r.status||0===r.status){if(0===r.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===r.body||void 0===r.body.getReader)return r;let n=fM[e],i=r.body.getReader(),a=r.headers.get("Content-Length")||r.headers.get("X-File-Size"),s=a?parseInt(a):0,o=0!==s,l=0,u=new ReadableStream({start(e){(function r(){i.read().then(({done:i,value:a})=>{if(i)e.close();else{l+=a.byteLength;let i=new ProgressEvent("progress",{lengthComputable:o,loaded:l,total:s});for(let e=0,r=n.length;e<r;e++){let r=n[e];r.onProgress&&r.onProgress(i)}e.enqueue(a),r()}})})()}});return new Response(u)}throw new fT(`fetch for "${r.url}" responded with ${r.status}: ${r.statusText}`,r)}).then(e=>{switch(l){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>{let r=new DOMParser;return r.parseFromString(e,o)});case"json":return e.json();default:if(void 0===o)return e.text();{let r=/charset="?([^;"\s]*)"?/i.exec(o),n=r&&r[1]?r[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then(e=>i.decode(e))}}}).then(r=>{f_.add(e,r);let n=fM[e];delete fM[e];for(let e=0,i=n.length;e<i;e++){let i=n[e];i.onLoad&&i.onLoad(r)}}).catch(r=>{let n=fM[e];if(void 0===n)throw this.manager.itemError(e),r;delete fM[e];for(let e=0,i=n.length;e<i;e++){let i=n[e];i.onError&&i.onError(r)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class fA extends fw{constructor(e){super(e)}load(e,r,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let a=this,s=f_.get(e);if(void 0!==s)return a.manager.itemStart(e),setTimeout(function(){r&&r(s),a.manager.itemEnd(e)},0),s;let o=lp("img");function l(){c(),f_.add(e,this),r&&r(this),a.manager.itemEnd(e)}function u(r){c(),i&&i(r),a.manager.itemError(e),a.manager.itemEnd(e)}function c(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}}class fC extends fw{constructor(e){super(e)}load(e,r,n,i){let a=new lR,s=new fA(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(e){a.image=e,a.needsUpdate=!0,void 0!==r&&r(a)},n,i),a}}class fR extends uT{constructor(e,r=1){super(),this.isLight=!0,this.type="Light",this.color=new lM(e),this.intensity=r}dispose(){}copy(e,r){return super.copy(e,r),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let r=super.toJSON(e);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,void 0!==this.groundColor&&(r.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(r.object.distance=this.distance),void 0!==this.angle&&(r.object.angle=this.angle),void 0!==this.decay&&(r.object.decay=this.decay),void 0!==this.penumbra&&(r.object.penumbra=this.penumbra),void 0!==this.shadow&&(r.object.shadow=this.shadow.toJSON()),r}}let fP=new ue,fL=new lI,fk=new lI;class fD{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new lu(512,512),this.map=null,this.mapPass=null,this.matrix=new ue,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new cS,this._frameExtents=new lu(1,1),this._viewportCount=1,this._viewports=[new lP(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let r=this.camera,n=this.matrix;fL.setFromMatrixPosition(e.matrixWorld),r.position.copy(fL),fk.setFromMatrixPosition(e.target.matrixWorld),r.lookAt(fk),r.updateMatrixWorld(),fP.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fP),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(fP)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class fI extends fD{constructor(){super(new cd(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let r=this.camera,n=2*o7*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||r.far;(n!==r.fov||i!==r.aspect||a!==r.far)&&(r.fov=n,r.aspect=i,r.far=a,r.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class fO extends fR{constructor(e,r,n=0,i=Math.PI/3,a=0,s=2){super(e,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(uT.DefaultUp),this.updateMatrix(),this.target=new uT,this.distance=n,this.angle=i,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new fI}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,r){return super.copy(e,r),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}let fN=new ue,fz=new lI,fB=new lI;class fF extends fD{constructor(){super(new cd(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new lu(4,2),this._viewportCount=6,this._viewports=[new lP(2,1,1,1),new lP(0,1,1,1),new lP(3,1,1,1),new lP(1,1,1,1),new lP(3,0,1,1),new lP(1,0,1,1)],this._cubeDirections=[new lI(1,0,0),new lI(-1,0,0),new lI(0,0,1),new lI(0,0,-1),new lI(0,1,0),new lI(0,-1,0)],this._cubeUps=[new lI(0,1,0),new lI(0,1,0),new lI(0,1,0),new lI(0,1,0),new lI(0,0,1),new lI(0,0,-1)]}updateMatrices(e,r=0){let n=this.camera,i=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),fz.setFromMatrixPosition(e.matrixWorld),n.position.copy(fz),fB.copy(n.position),fB.add(this._cubeDirections[r]),n.up.copy(this._cubeUps[r]),n.lookAt(fB),n.updateMatrixWorld(),i.makeTranslation(-fz.x,-fz.y,-fz.z),fN.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fN)}}class fU extends fR{constructor(e,r,n=0,i=2){super(e,r),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new fF}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,r){return super.copy(e,r),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class fV extends fD{constructor(){super(new cN(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class fj extends fR{constructor(e,r){super(e,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(uT.DefaultUp),this.updateMatrix(),this.target=new uT,this.shadow=new fV}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class fH extends fR{constructor(e,r){super(e,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class fW{static decodeText(e){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);let r="";for(let n=0,i=e.length;n<i;n++)r+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(r))}catch(e){return r}}static extractUrlBase(e){let r=e.lastIndexOf("/");return -1===r?"./":e.slice(0,r+1)}static resolveURL(e,r){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(r)&&/^\//.test(e)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e))?e:r+e}}class fG extends fw{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,r,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let a=this,s=f_.get(e);if(void 0!==s)return a.manager.itemStart(e),setTimeout(function(){r&&r(s),a.manager.itemEnd(e)},0),s;let o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(n){f_.add(e,n),r&&r(n),a.manager.itemEnd(e)}).catch(function(r){i&&i(r),a.manager.itemError(e),a.manager.itemEnd(e)}),a.manager.itemStart(e)}}let fq="\\[\\]\\.:\\/",f$=RegExp("["+fq+"]","g"),fX="[^"+fq+"]",fY="[^"+fq.replace("\\.","")+"]",fZ=/((?:WC+[\/:])*)/.source.replace("WC",fX),fJ=/(WCOD+)?/.source.replace("WCOD",fY),fK=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",fX),fQ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",fX),f0=RegExp("^"+fZ+fJ+fK+fQ+"$"),f1=["material","materials","bones","map"];class f2{constructor(e,r,n){this.path=r,this.parsedPath=n||f2.parseTrackName(r),this.node=f2.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,r,n){return e&&e.isAnimationObjectGroup?new f2.Composite(e,r,n):new f2(e,r,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(f$,"")}static parseTrackName(e){let r=f0.exec(e);if(null===r)throw Error("PropertyBinding: Cannot parse trackName: "+e);let n={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){let e=n.nodeName.substring(i+1);-1!==f1.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,r){if(void 0===r||""===r||"."===r||-1===r||r===e.name||r===e.uuid)return e;if(e.skeleton){let n=e.skeleton.getBoneByName(r);if(void 0!==n)return n}if(e.children){let n=function(e){for(let i=0;i<e.length;i++){let a=e[i];if(a.name===r||a.uuid===r)return a;let s=n(a.children);if(s)return s}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,r){e[r]=this.targetObject[this.propertyName]}_getValue_array(e,r){let n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)e[r++]=n[i]}_getValue_arrayElement(e,r){e[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,r){this.resolvedProperty.toArray(e,r)}_setValue_direct(e,r){this.targetObject[this.propertyName]=e[r]}_setValue_direct_setNeedsUpdate(e,r){this.targetObject[this.propertyName]=e[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,r){this.targetObject[this.propertyName]=e[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,r){let n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[r++]}_setValue_array_setNeedsUpdate(e,r){let n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,r){let n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,r){this.resolvedProperty[this.propertyIndex]=e[r]}_setValue_arrayElement_setNeedsUpdate(e,r){this.resolvedProperty[this.propertyIndex]=e[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,r){this.resolvedProperty[this.propertyIndex]=e[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,r){this.resolvedProperty.fromArray(e,r)}_setValue_fromArray_setNeedsUpdate(e,r){this.resolvedProperty.fromArray(e,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,r){this.resolvedProperty.fromArray(e,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,r){this.bind(),this.getValue(e,r)}_setValue_unbound(e,r){this.bind(),this.setValue(e,r)}bind(){let e=this.node,r=this.parsedPath,n=r.objectName,i=r.propertyName,a=r.propertyIndex;if(e||(e=f2.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let i=r.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let r=0;r<e.length;r++)if(e[r].name===i){i=r;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(void 0===e[n]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(void 0!==i){if(void 0===e[i]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[i]}}let s=e[i];if(void 0===s){let n=r.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}void 0!==e.morphTargetDictionary[a]&&(a=e.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}f2.Composite=class{constructor(e,r,n){let i=n||f2.parseTrackName(r);this._targetGroup=e,this._bindings=e.subscribe_(r,i)}getValue(e,r){this.bind();let n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,r)}setValue(e,r){let n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=n.length;i!==a;++i)n[i].setValue(e,r)}bind(){let e=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=e.length;r!==n;++r)e[r].bind()}unbind(){let e=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=e.length;r!==n;++r)e[r].unbind()}},f2.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},f2.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},f2.prototype.GetterByBindingType=[f2.prototype._getValue_direct,f2.prototype._getValue_array,f2.prototype._getValue_arrayElement,f2.prototype._getValue_toArray],f2.prototype.SetterByBindingTypeAndVersioning=[[f2.prototype._setValue_direct,f2.prototype._setValue_direct_setNeedsUpdate,f2.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[f2.prototype._setValue_array,f2.prototype._setValue_array_setNeedsUpdate,f2.prototype._setValue_array_setMatrixWorldNeedsUpdate],[f2.prototype._setValue_arrayElement,f2.prototype._setValue_arrayElement_setNeedsUpdate,f2.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[f2.prototype._setValue_fromArray,f2.prototype._setValue_fromArray_setNeedsUpdate,f2.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class f3{constructor(e=1,r=0,n=0){return this.radius=e,this.phi=r,this.theta=n,this}set(e,r,n){return this.radius=e,this.phi=r,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,r,n){return this.radius=Math.sqrt(e*e+r*r+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(le(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"148"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="148");let f5={type:"change"},f4={type:"start"},f6={type:"end"};class f9 extends o5{constructor(e,r){super(),this.object=e,this.domElement=r,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new lI,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:oQ.ROTATE,MIDDLE:oQ.DOLLY,RIGHT:oQ.PAN},this.touches={ONE:o0.ROTATE,TWO:o0.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",W),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(f5),n.update(),a=i.NONE},this.update=function(){let r=new lI,d=new lD().setFromUnitVectors(e.up,new lI(0,1,0)),p=d.clone().invert(),f=new lI,m=new lD,g=2*Math.PI;return function(){let e=n.object.position;r.copy(e).sub(n.target),r.applyQuaternion(d),o.setFromVector3(r),n.autoRotate&&a===i.NONE&&M(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(o.theta+=l.theta*n.dampingFactor,o.phi+=l.phi*n.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let v=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(v)&&isFinite(y)&&(v<-Math.PI?v+=g:v>Math.PI&&(v-=g),y<-Math.PI?y+=g:y>Math.PI&&(y-=g),v<=y?o.theta=Math.max(v,Math.min(y,o.theta)):o.theta=o.theta>(v+y)/2?Math.max(v,o.theta):Math.min(y,o.theta)),o.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,o.phi)),o.makeSafe(),o.radius*=u,o.radius=Math.max(n.minDistance,Math.min(n.maxDistance,o.radius)),!0===n.enableDamping?n.target.addScaledVector(c,n.dampingFactor):n.target.add(c),r.setFromSpherical(o),r.applyQuaternion(p),e.copy(n.target).add(r),n.object.lookAt(n.target),!0===n.enableDamping?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor,c.multiplyScalar(1-n.dampingFactor)):(l.set(0,0,0),c.set(0,0,0)),u=1,!!(h||f.distanceToSquared(n.object.position)>s||8*(1-m.dot(n.object.quaternion))>s)&&(n.dispatchEvent(f5),f.copy(n.object.position),m.copy(n.object.quaternion),h=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",G),n.domElement.removeEventListener("pointerdown",F),n.domElement.removeEventListener("pointercancel",j),n.domElement.removeEventListener("wheel",H),n.domElement.removeEventListener("pointermove",U),n.domElement.removeEventListener("pointerup",V),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",W)};let n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},a=i.NONE,s=1e-6,o=new f3,l=new f3,u=1,c=new lI,h=!1,d=new lu,p=new lu,f=new lu,m=new lu,g=new lu,v=new lu,y=new lu,x=new lu,b=new lu,_=[],S={};function w(){return Math.pow(.95,n.zoomSpeed)}function M(e){l.theta-=e}function T(e){l.phi-=e}let E=function(){let e=new lI;return function(r,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-r),c.add(e)}}(),A=function(){let e=new lI;return function(r,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(r),c.add(e)}}(),C=function(){let e=new lI;return function(r,i){let a=n.domElement;if(n.object.isPerspectiveCamera){let s=n.object.position;e.copy(s).sub(n.target);let o=e.length();E(2*r*(o*=Math.tan(n.object.fov/2*Math.PI/180))/a.clientHeight,n.object.matrix),A(2*i*o/a.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(E(r*(n.object.right-n.object.left)/n.object.zoom/a.clientWidth,n.object.matrix),A(i*(n.object.top-n.object.bottom)/n.object.zoom/a.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function R(e){n.object.isPerspectiveCamera?u/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function P(e){n.object.isPerspectiveCamera?u*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(e){d.set(e.clientX,e.clientY)}function k(e){m.set(e.clientX,e.clientY)}function D(){if(1===_.length)d.set(_[0].pageX,_[0].pageY);else{let e=.5*(_[0].pageX+_[1].pageX),r=.5*(_[0].pageY+_[1].pageY);d.set(e,r)}}function I(){if(1===_.length)m.set(_[0].pageX,_[0].pageY);else{let e=.5*(_[0].pageX+_[1].pageX),r=.5*(_[0].pageY+_[1].pageY);m.set(e,r)}}function O(){let e=_[0].pageX-_[1].pageX,r=_[0].pageY-_[1].pageY;y.set(0,Math.sqrt(e*e+r*r))}function N(e){if(1==_.length)p.set(e.pageX,e.pageY);else{let r=X(e),n=.5*(e.pageX+r.x),i=.5*(e.pageY+r.y);p.set(n,i)}f.subVectors(p,d).multiplyScalar(n.rotateSpeed);let r=n.domElement;M(2*Math.PI*f.x/r.clientHeight),T(2*Math.PI*f.y/r.clientHeight),d.copy(p)}function z(e){if(1===_.length)g.set(e.pageX,e.pageY);else{let r=X(e),n=.5*(e.pageX+r.x),i=.5*(e.pageY+r.y);g.set(n,i)}v.subVectors(g,m).multiplyScalar(n.panSpeed),C(v.x,v.y),m.copy(g)}function B(e){let r=X(e),i=e.pageX-r.x,a=e.pageY-r.y;x.set(0,Math.sqrt(i*i+a*a)),b.set(0,Math.pow(x.y/y.y,n.zoomSpeed)),R(b.y),y.copy(x)}function F(e){!1!==n.enabled&&(0===_.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",U),n.domElement.addEventListener("pointerup",V)),_.push(e),"touch"===e.pointerType?function(e){switch($(e),_.length){case 1:switch(n.touches.ONE){case o0.ROTATE:if(!1===n.enableRotate)return;D(),a=i.TOUCH_ROTATE;break;case o0.PAN:if(!1===n.enablePan)return;I(),a=i.TOUCH_PAN;break;default:a=i.NONE}break;case 2:switch(n.touches.TWO){case o0.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&O(),n.enablePan&&I(),a=i.TOUCH_DOLLY_PAN;break;case o0.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&O(),n.enableRotate&&D(),a=i.TOUCH_DOLLY_ROTATE;break;default:a=i.NONE}break;default:a=i.NONE}a!==i.NONE&&n.dispatchEvent(f4)}(e):function(e){let r;switch(e.button){case 0:r=n.mouseButtons.LEFT;break;case 1:r=n.mouseButtons.MIDDLE;break;case 2:r=n.mouseButtons.RIGHT;break;default:r=-1}switch(r){case oQ.DOLLY:if(!1===n.enableZoom)return;y.set(e.clientX,e.clientY),a=i.DOLLY;break;case oQ.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;k(e),a=i.PAN}else{if(!1===n.enableRotate)return;L(e),a=i.ROTATE}break;case oQ.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;L(e),a=i.ROTATE}else{if(!1===n.enablePan)return;k(e),a=i.PAN}break;default:a=i.NONE}a!==i.NONE&&n.dispatchEvent(f4)}(e))}function U(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch($(e),a){case i.TOUCH_ROTATE:if(!1===n.enableRotate)return;N(e),n.update();break;case i.TOUCH_PAN:if(!1===n.enablePan)return;z(e),n.update();break;case i.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&B(e),n.enablePan&&z(e),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&B(e),n.enableRotate&&N(e),n.update();break;default:a=i.NONE}}(e):function(e){switch(a){case i.ROTATE:if(!1===n.enableRotate)return;!function(e){p.set(e.clientX,e.clientY),f.subVectors(p,d).multiplyScalar(n.rotateSpeed);let r=n.domElement;M(2*Math.PI*f.x/r.clientHeight),T(2*Math.PI*f.y/r.clientHeight),d.copy(p),n.update()}(e);break;case i.DOLLY:if(!1===n.enableZoom)return;x.set(e.clientX,e.clientY),b.subVectors(x,y),b.y>0?R(w()):b.y<0&&P(w()),y.copy(x),n.update();break;case i.PAN:if(!1===n.enablePan)return;g.set(e.clientX,e.clientY),v.subVectors(g,m).multiplyScalar(n.panSpeed),C(v.x,v.y),m.copy(g),n.update()}}(e))}function V(e){q(e),0===_.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",U),n.domElement.removeEventListener("pointerup",V)),n.dispatchEvent(f6),a=i.NONE}function j(e){q(e)}function H(e){!1!==n.enabled&&!1!==n.enableZoom&&a===i.NONE&&(e.preventDefault(),n.dispatchEvent(f4),e.deltaY<0?P(w()):e.deltaY>0&&R(w()),n.update(),n.dispatchEvent(f6))}function W(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let r=!1;switch(e.code){case n.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?T(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(0,n.keyPanSpeed),r=!0;break;case n.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?T(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(0,-n.keyPanSpeed),r=!0;break;case n.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?M(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(n.keyPanSpeed,0),r=!0;break;case n.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?M(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(-n.keyPanSpeed,0),r=!0}r&&(e.preventDefault(),n.update())}(e)}function G(e){!1!==n.enabled&&e.preventDefault()}function q(e){delete S[e.pointerId];for(let r=0;r<_.length;r++)if(_[r].pointerId==e.pointerId){_.splice(r,1);return}}function $(e){let r=S[e.pointerId];void 0===r&&(r=new lu,S[e.pointerId]=r),r.set(e.pageX,e.pageY)}function X(e){let r=e.pointerId===_[0].pointerId?_[1]:_[0];return S[r.pointerId]}n.domElement.addEventListener("contextmenu",G),n.domElement.addEventListener("pointerdown",F),n.domElement.addEventListener("pointercancel",j),n.domElement.addEventListener("wheel",H,{passive:!1}),this.update()}}class f7 extends fw{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new mi(e)}),this.register(function(e){return new mh(e)}),this.register(function(e){return new md(e)}),this.register(function(e){return new ms(e)}),this.register(function(e){return new mo(e)}),this.register(function(e){return new ml(e)}),this.register(function(e){return new mu(e)}),this.register(function(e){return new mn(e)}),this.register(function(e){return new mc(e)}),this.register(function(e){return new ma(e)}),this.register(function(e){return new mt(e)}),this.register(function(e){return new mp(e)}),this.register(function(e){return new mf(e)})}load(e,r,n,i){let a;let s=this;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:fW.extractUrlBase(e),this.manager.itemStart(e);let o=function(r){i?i(r):console.error(r),s.manager.itemError(e),s.manager.itemEnd(e)},l=new fE(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(n){try{s.parse(n,a,function(n){r(n),s.manager.itemEnd(e)},o)}catch(e){o(e)}},n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,r,n,i){let a;let s={},o={};if("string"==typeof e)a=JSON.parse(e);else if(e instanceof ArrayBuffer){let r=fW.decodeText(new Uint8Array(e,0,4));if(r===mm){try{s[me.KHR_BINARY_GLTF]=new mv(e)}catch(e){i&&i(e);return}a=JSON.parse(s[me.KHR_BINARY_GLTF].content)}else a=JSON.parse(fW.decodeText(new Uint8Array(e)))}else a=e;if(void 0===a.asset||a.asset.version[0]<2){i&&i(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let l=new mB(a,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){let r=this.pluginCallbacks[e](l);o[r.name]=r,s[r.name]=!0}if(a.extensionsUsed)for(let e=0;e<a.extensionsUsed.length;++e){let r=a.extensionsUsed[e],n=a.extensionsRequired||[];switch(r){case me.KHR_MATERIALS_UNLIT:s[r]=new mr;break;case me.KHR_DRACO_MESH_COMPRESSION:s[r]=new my(a,this.dracoLoader);break;case me.KHR_TEXTURE_TRANSFORM:s[r]=new mx;break;case me.KHR_MESH_QUANTIZATION:s[r]=new mb;break;default:n.indexOf(r)>=0&&void 0===o[r]&&console.warn('THREE.GLTFLoader: Unknown extension "'+r+'".')}}l.setExtensions(s),l.setPlugins(o),l.parse(n,i)}parseAsync(e,r){let n=this;return new Promise(function(i,a){n.parse(e,r,i,a)})}}function f8(){let e={};return{get:function(r){return e[r]},add:function(r,n){e[r]=n},remove:function(r){delete e[r]},removeAll:function(){e={}}}}let me={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class mt{constructor(e){this.parser=e,this.name=me.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,r=this.parser.json.nodes||[];for(let n=0,i=r.length;n<i;n++){let i=r[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){let r;let n=this.parser,i="light:"+e,a=n.cache.get(i);if(a)return a;let s=n.json,o=s.extensions&&s.extensions[this.name]||{},l=o.lights||[],u=l[e],c=new lM(16777215);void 0!==u.color&&c.fromArray(u.color);let h=void 0!==u.range?u.range:0;switch(u.type){case"directional":(r=new fj(c)).target.position.set(0,0,-1),r.add(r.target);break;case"point":(r=new fU(c)).distance=h;break;case"spot":(r=new fO(c)).distance=h,u.spot=u.spot||{},u.spot.innerConeAngle=void 0!==u.spot.innerConeAngle?u.spot.innerConeAngle:0,u.spot.outerConeAngle=void 0!==u.spot.outerConeAngle?u.spot.outerConeAngle:Math.PI/4,r.angle=u.spot.outerConeAngle,r.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,r.target.position.set(0,0,-1),r.add(r.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return r.position.set(0,0,0),r.decay=2,mI(r,u),void 0!==u.intensity&&(r.intensity=u.intensity),r.name=n.createUniqueName(u.name||"light_"+e),a=Promise.resolve(r),n.cache.add(i,a),a}getDependency(e,r){if("light"===e)return this._loadLight(r)}createNodeAttachment(e){let r=this,n=this.parser,i=n.json,a=i.nodes[e],s=a.extensions&&a.extensions[this.name]||{},o=s.light;return void 0===o?null:this._loadLight(o).then(function(e){return n._getNodeRef(r.cache,o,e)})}}class mr{constructor(){this.name=me.KHR_MATERIALS_UNLIT}getMaterialType(){return uF}extendParams(e,r,n){let i=[];e.color=new lM(1,1,1),e.opacity=1;let a=r.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){let r=a.baseColorFactor;e.color.fromArray(r),e.opacity=r[3]}void 0!==a.baseColorTexture&&i.push(n.assignTexture(e,"map",a.baseColorTexture,3001))}return Promise.all(i)}}class mn{constructor(e){this.parser=e,this.name=me.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=i.extensions[this.name].emissiveStrength;return void 0!==a&&(r.emissiveIntensity=a),Promise.resolve()}}class mi{constructor(e){this.parser=e,this.name=me.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let r=this.parser,n=r.json.materials[e];return n.extensions&&n.extensions[this.name]?fr:null}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=[],s=i.extensions[this.name];if(void 0!==s.clearcoatFactor&&(r.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&a.push(n.assignTexture(r,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(r.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&a.push(n.assignTexture(r,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(a.push(n.assignTexture(r,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){let e=s.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new lu(e,e)}return Promise.all(a)}}class ma{constructor(e){this.parser=e,this.name=me.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let r=this.parser,n=r.json.materials[e];return n.extensions&&n.extensions[this.name]?fr:null}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=[],s=i.extensions[this.name];return void 0!==s.iridescenceFactor&&(r.iridescence=s.iridescenceFactor),void 0!==s.iridescenceTexture&&a.push(n.assignTexture(r,"iridescenceMap",s.iridescenceTexture)),void 0!==s.iridescenceIor&&(r.iridescenceIOR=s.iridescenceIor),void 0===r.iridescenceThicknessRange&&(r.iridescenceThicknessRange=[100,400]),void 0!==s.iridescenceThicknessMinimum&&(r.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&(r.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),void 0!==s.iridescenceThicknessTexture&&a.push(n.assignTexture(r,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(a)}}class ms{constructor(e){this.parser=e,this.name=me.KHR_MATERIALS_SHEEN}getMaterialType(e){let r=this.parser,n=r.json.materials[e];return n.extensions&&n.extensions[this.name]?fr:null}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=[];r.sheenColor=new lM(0,0,0),r.sheenRoughness=0,r.sheen=1;let s=i.extensions[this.name];return void 0!==s.sheenColorFactor&&r.sheenColor.fromArray(s.sheenColorFactor),void 0!==s.sheenRoughnessFactor&&(r.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&a.push(n.assignTexture(r,"sheenColorMap",s.sheenColorTexture,3001)),void 0!==s.sheenRoughnessTexture&&a.push(n.assignTexture(r,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(a)}}class mo{constructor(e){this.parser=e,this.name=me.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let r=this.parser,n=r.json.materials[e];return n.extensions&&n.extensions[this.name]?fr:null}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=[],s=i.extensions[this.name];return void 0!==s.transmissionFactor&&(r.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&a.push(n.assignTexture(r,"transmissionMap",s.transmissionTexture)),Promise.all(a)}}class ml{constructor(e){this.parser=e,this.name=me.KHR_MATERIALS_VOLUME}getMaterialType(e){let r=this.parser,n=r.json.materials[e];return n.extensions&&n.extensions[this.name]?fr:null}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=[],s=i.extensions[this.name];r.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&a.push(n.assignTexture(r,"thicknessMap",s.thicknessTexture)),r.attenuationDistance=s.attenuationDistance||1/0;let o=s.attenuationColor||[1,1,1];return r.attenuationColor=new lM(o[0],o[1],o[2]),Promise.all(a)}}class mu{constructor(e){this.parser=e,this.name=me.KHR_MATERIALS_IOR}getMaterialType(e){let r=this.parser,n=r.json.materials[e];return n.extensions&&n.extensions[this.name]?fr:null}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=i.extensions[this.name];return r.ior=void 0!==a.ior?a.ior:1.5,Promise.resolve()}}class mc{constructor(e){this.parser=e,this.name=me.KHR_MATERIALS_SPECULAR}getMaterialType(e){let r=this.parser,n=r.json.materials[e];return n.extensions&&n.extensions[this.name]?fr:null}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let a=[],s=i.extensions[this.name];r.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&a.push(n.assignTexture(r,"specularIntensityMap",s.specularTexture));let o=s.specularColorFactor||[1,1,1];return r.specularColor=new lM(o[0],o[1],o[2]),void 0!==s.specularColorTexture&&a.push(n.assignTexture(r,"specularColorMap",s.specularColorTexture,3001)),Promise.all(a)}}class mh{constructor(e){this.parser=e,this.name=me.KHR_TEXTURE_BASISU}loadTexture(e){let r=this.parser,n=r.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;let a=i.extensions[this.name],s=r.options.ktx2Loader;if(!s){if(!(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures")}return r.loadTextureImage(e,a.source,s)}}class md{constructor(e){this.parser=e,this.name=me.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let r=this.name,n=this.parser,i=n.json,a=i.textures[e];if(!a.extensions||!a.extensions[r])return null;let s=a.extensions[r],o=i.images[s.source],l=n.textureLoader;if(o.uri){let e=n.options.manager.getHandler(o.uri);null!==e&&(l=e)}return this.detectSupport().then(function(a){if(a)return n.loadTextureImage(e,s.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(r)>=0)throw Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){e(1===r.height)}})),this.isSupported}}class mp{constructor(e){this.name=me.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let r=this.parser.json,n=r.bufferViews[e];if(!n.extensions||!n.extensions[this.name])return null;{let e=n.extensions[this.name],i=this.parser.getDependency("buffer",e.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(!(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files")}return i.then(function(r){let n=e.byteOffset||0,i=e.byteLength||0,s=e.count,o=e.byteStride,l=new Uint8Array(r,n,i);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(s,o,l,e.mode,e.filter).then(function(e){return e.buffer}):a.ready.then(function(){let r=new ArrayBuffer(s*o);return a.decodeGltfBuffer(new Uint8Array(r),s,o,l,e.mode,e.filter),r})})}}}class mf{constructor(e){this.name=me.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let r=this.parser.json,n=r.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;let i=r.meshes[n.mesh];for(let e of i.primitives)if(e.mode!==mM.TRIANGLES&&e.mode!==mM.TRIANGLE_STRIP&&e.mode!==mM.TRIANGLE_FAN&&void 0!==e.mode)return null;let a=n.extensions[this.name],s=a.attributes,o=[],l={};for(let e in s)o.push(this.parser.getDependency("accessor",s[e]).then(r=>(l[e]=r,l[e])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(e=>{let r=e.pop(),n=r.isGroup?r.children:[r],i=e[0].count,a=[];for(let e of n){let r=new ue,n=new lI,s=new lD,o=new lI(1,1,1),u=new d0(e.geometry,e.material,i);for(let e=0;e<i;e++)l.TRANSLATION&&n.fromBufferAttribute(l.TRANSLATION,e),l.ROTATION&&s.fromBufferAttribute(l.ROTATION,e),l.SCALE&&o.fromBufferAttribute(l.SCALE,e),u.setMatrixAt(e,r.compose(n,s,o));for(let r in l)"TRANSLATION"!==r&&"ROTATION"!==r&&"SCALE"!==r&&e.geometry.setAttribute(r,l[r]);uT.prototype.copy.call(u,e),u.frustumCulled=!1,this.parser.assignFinalMaterial(u),a.push(u)}return r.isGroup?(r.clear(),r.add(...a),r):a[0]}))}}let mm="glTF",mg={JSON:1313821514,BIN:5130562};class mv{constructor(e){this.name=me.KHR_BINARY_GLTF,this.content=null,this.body=null;let r=new DataView(e,0,12);if(this.header={magic:fW.decodeText(new Uint8Array(e.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==mm)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw Error("THREE.GLTFLoader: Legacy binary file detected.");let n=this.header.length-12,i=new DataView(e,12),a=0;for(;a<n;){let r=i.getUint32(a,!0);a+=4;let n=i.getUint32(a,!0);if(a+=4,n===mg.JSON){let n=new Uint8Array(e,12+a,r);this.content=fW.decodeText(n)}else if(n===mg.BIN){let n=12+a;this.body=e.slice(n,n+r)}a+=r}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.")}}class my{constructor(e,r){if(!r)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=me.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(e,r){let n=this.json,i=this.dracoLoader,a=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,o={},l={},u={};for(let e in s){let r=mR[e]||e.toLowerCase();o[r]=s[e]}for(let r in e.attributes){let i=mR[r]||r.toLowerCase();if(void 0!==s[r]){let a=n.accessors[e.attributes[r]],s=mT[a.componentType];u[i]=s.name,l[i]=!0===a.normalized}}return r.getDependency("bufferView",a).then(function(e){return new Promise(function(r){i.decodeDracoFile(e,function(e){for(let r in e.attributes){let n=e.attributes[r],i=l[r];void 0!==i&&(n.normalized=i)}r(e)},o,u)})})}}class mx{constructor(){this.name=me.KHR_TEXTURE_TRANSFORM}extendTexture(e,r){return void 0!==r.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===r.offset&&void 0===r.rotation&&void 0===r.scale||(e=e.clone(),void 0!==r.offset&&e.offset.fromArray(r.offset),void 0!==r.rotation&&(e.rotation=r.rotation),void 0!==r.scale&&e.repeat.fromArray(r.scale),e.needsUpdate=!0),e}}class mb{constructor(){this.name=me.KHR_MESH_QUANTIZATION}}class m_ extends fl{constructor(e,r,n,i){super(e,r,n,i)}copySampleValue_(e){let r=this.resultBuffer,n=this.sampleValues,i=this.valueSize,a=e*i*3+i;for(let e=0;e!==i;e++)r[e]=n[a+e];return r}interpolate_(e,r,n,i){let a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=2*o,u=3*o,c=i-r,h=(n-r)/c,d=h*h,p=d*h,f=e*u,m=f-u,g=-2*p+3*d,v=p-d,y=1-g,x=v-d+h;for(let e=0;e!==o;e++){let r=s[m+e+o],n=s[m+e+l]*c,i=s[f+e+o],u=s[f+e]*c;a[e]=y*r+x*n+g*i+v*u}return a}}let mS=new lD;class mw extends m_{interpolate_(e,r,n,i){let a=super.interpolate_(e,r,n,i);return mS.fromArray(a).normalize().toArray(a),a}}let mM={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},mT={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},mE={9728:1003,9729:1006,9984:1004,9985:1007,9986:1005,9987:1008},mA={33071:1001,33648:1002,10497:1e3},mC={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},mR={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},mP={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},mL={CUBICSPLINE:void 0,LINEAR:2301,STEP:2300},mk={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function mD(e,r,n){for(let i in n.extensions)void 0===e[i]&&(r.userData.gltfExtensions=r.userData.gltfExtensions||{},r.userData.gltfExtensions[i]=n.extensions[i])}function mI(e,r){void 0!==r.extras&&("object"==typeof r.extras?Object.assign(e.userData,r.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+r.extras))}function mO(e){let r="",n=Object.keys(e).sort();for(let i=0,a=n.length;i<a;i++)r+=n[i]+":"+e[n[i]]+";";return r}function mN(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}let mz=new ue;class mB{constructor(e={},r={}){this.json=e,this.extensions={},this.plugins={},this.options=r,this.cache=new f8,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,a=-1;"undefined"!=typeof navigator&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a=(i=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||i&&a<98?this.textureLoader=new fC(this.options.manager):this.textureLoader=new fG(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new fE(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,r){let n=this,i=this.json,a=this.extensions;this.cache.removeAll(),this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(r){let s={scene:r[0][i.scene||0],scenes:r[0],animations:r[1],cameras:r[2],asset:i.asset,parser:n,userData:{}};mD(a,s,i),mI(s,i),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(s)})).then(function(){e(s)})}).catch(r)}_markDefs(){let e=this.json.nodes||[],r=this.json.skins||[],n=this.json.meshes||[];for(let n=0,i=r.length;n<i;n++){let i=r[n].joints;for(let r=0,n=i.length;r<n;r++)e[i[r]].isBone=!0}for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0!==i.mesh&&(this._addNodeRef(this.meshCache,i.mesh),void 0!==i.skin&&(n[i.mesh].isSkinnedMesh=!0)),void 0!==i.camera&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(e,r){void 0!==r&&(void 0===e.refs[r]&&(e.refs[r]=e.uses[r]=0),e.refs[r]++)}_getNodeRef(e,r,n){if(e.refs[r]<=1)return n;let i=n.clone(),a=(e,r)=>{let n=this.associations.get(e);for(let[i,s]of(null!=n&&this.associations.set(r,n),e.children.entries()))a(s,r.children[i])};return a(n,i),i.name+="_instance_"+e.uses[r]++,i}_invokeOne(e){let r=Object.values(this.plugins);r.push(this);for(let n=0;n<r.length;n++){let i=e(r[n]);if(i)return i}return null}_invokeAll(e){let r=Object.values(this.plugins);r.unshift(this);let n=[];for(let i=0;i<r.length;i++){let a=e(r[i]);a&&n.push(a)}return n}getDependency(e,r){let n=e+":"+r,i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(r);break;case"node":i=this._invokeOne(function(e){return e.loadNode&&e.loadNode(r)});break;case"mesh":i=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(r)});break;case"accessor":i=this.loadAccessor(r);break;case"bufferView":i=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(r)});break;case"buffer":i=this.loadBuffer(r);break;case"material":i=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(r)});break;case"texture":i=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(r)});break;case"skin":i=this.loadSkin(r);break;case"animation":i=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(r)});break;case"camera":i=this.loadCamera(r);break;default:if(!(i=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,r)})))throw Error("Unknown type: "+e)}this.cache.add(n,i)}return i}getDependencies(e){let r=this.cache.get(e);if(!r){let n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];r=Promise.all(i.map(function(r,i){return n.getDependency(e,i)})),this.cache.add(e,r)}return r}loadBuffer(e){let r=this.json.buffers[e],n=this.fileLoader;if(r.type&&"arraybuffer"!==r.type)throw Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(void 0===r.uri&&0===e)return Promise.resolve(this.extensions[me.KHR_BINARY_GLTF].body);let i=this.options;return new Promise(function(e,a){n.load(fW.resolveURL(r.uri,i.path),e,void 0,function(){a(Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(e){let r=this.json.bufferViews[e];return this.getDependency("buffer",r.buffer).then(function(e){let n=r.byteLength||0,i=r.byteOffset||0;return e.slice(i,i+n)})}loadAccessor(e){let r=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){let e=mC[i.type],r=mT[i.componentType],n=!0===i.normalized,a=new r(i.count*e);return Promise.resolve(new uj(a,e,n))}let a=[];return void 0!==i.bufferView?a.push(this.getDependency("bufferView",i.bufferView)):a.push(null),void 0!==i.sparse&&(a.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(a).then(function(e){let a,s;let o=e[0],l=mC[i.type],u=mT[i.componentType],c=u.BYTES_PER_ELEMENT,h=i.byteOffset||0,d=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,p=!0===i.normalized;if(d&&d!==c*l){let e=Math.floor(h/d),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count,f=r.cache.get(n);f||(a=new u(o,e*d,i.count*d/c),f=new dI(a,d/c),r.cache.add(n,f)),s=new dN(f,l,h%d/c,p)}else a=null===o?new u(i.count*l):new u(o,h,i.count*l),s=new uj(a,l,p);if(void 0!==i.sparse){let r=mC.SCALAR,n=mT[i.sparse.indices.componentType],a=i.sparse.indices.byteOffset||0,c=i.sparse.values.byteOffset||0,h=new n(e[1],a,i.sparse.count*r),d=new u(e[2],c,i.sparse.count*l);null!==o&&(s=new uj(s.array.slice(),s.itemSize,s.normalized));for(let e=0,r=h.length;e<r;e++){let r=h[e];if(s.setX(r,d[e*l]),l>=2&&s.setY(r,d[e*l+1]),l>=3&&s.setZ(r,d[e*l+2]),l>=4&&s.setW(r,d[e*l+3]),l>=5)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return s})}loadTexture(e){let r=this.json,n=this.options,i=r.textures[e],a=i.source,s=r.images[a],o=this.textureLoader;if(s.uri){let e=n.manager.getHandler(s.uri);null!==e&&(o=e)}return this.loadTextureImage(e,a,o)}loadTextureImage(e,r,n){let i=this,a=this.json,s=a.textures[e],o=a.images[r],l=(o.uri||o.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];let u=this.loadImageSource(r,n).then(function(r){r.flipY=!1,r.name=s.name||o.name||"";let n=a.samplers||{},l=n[s.sampler]||{};return r.magFilter=mE[l.magFilter]||1006,r.minFilter=mE[l.minFilter]||1008,r.wrapS=mA[l.wrapS]||1e3,r.wrapT=mA[l.wrapT]||1e3,i.associations.set(r,{textures:e}),r}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,r){let n=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());let a=n.images[e],s=self.URL||self.webkitURL,o=a.uri||"",l=!1;if(void 0!==a.bufferView)o=this.getDependency("bufferView",a.bufferView).then(function(e){l=!0;let r=new Blob([e],{type:a.mimeType});return o=s.createObjectURL(r)});else if(void 0===a.uri)throw Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let u=Promise.resolve(o).then(function(e){return new Promise(function(n,a){let s=n;!0===r.isImageBitmapLoader&&(s=function(e){let r=new lR(e);r.needsUpdate=!0,n(r)}),r.load(fW.resolveURL(e,i.path),s,void 0,a)})}).then(function(e){var r;return!0===l&&s.revokeObjectURL(o),e.userData.mimeType=a.mimeType||((r=a.uri).search(/\.jpe?g($|\?)/i)>0||0===r.search(/^data\:image\/jpeg/)?"image/jpeg":r.search(/\.webp($|\?)/i)>0||0===r.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e});return this.sourceCache[e]=u,u}assignTexture(e,r,n,i){let a=this;return this.getDependency("texture",n.index).then(function(s){if(!s)return null;if(void 0===n.texCoord||0==n.texCoord||"aoMap"===r&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+r+" not yet supported."),a.extensions[me.KHR_TEXTURE_TRANSFORM]){let e=void 0!==n.extensions?n.extensions[me.KHR_TEXTURE_TRANSFORM]:void 0;if(e){let r=a.associations.get(s);s=a.extensions[me.KHR_TEXTURE_TRANSFORM].extendTexture(s,e),a.associations.set(s,r)}}return void 0!==i&&(s.encoding=i),e[r]=s,s})}assignFinalMaterial(e){let r=e.geometry,n=e.material,i=void 0===r.attributes.tangent,a=void 0!==r.attributes.color,s=void 0===r.attributes.normal;if(e.isPoints){let e="PointsMaterial:"+n.uuid,r=this.cache.get(e);r||(r=new pr,uB.prototype.copy.call(r,n),r.color.copy(n.color),r.map=n.map,r.sizeAttenuation=!1,this.cache.add(e,r)),n=r}else if(e.isLine){let e="LineBasicMaterial:"+n.uuid,r=this.cache.get(e);r||(r=new d1,uB.prototype.copy.call(r,n),r.color.copy(n.color),this.cache.add(e,r)),n=r}if(i||a||s){let e="ClonedMaterial:"+n.uuid+":";i&&(e+="derivative-tangents:"),a&&(e+="vertex-colors:"),s&&(e+="flat-shading:");let r=this.cache.get(e);r||(r=n.clone(),a&&(r.vertexColors=!0),s&&(r.flatShading=!0),i&&(r.normalScale&&(r.normalScale.y*=-1),r.clearcoatNormalScale&&(r.clearcoatNormalScale.y*=-1)),this.cache.add(e,r),this.associations.set(r,this.associations.get(n))),n=r}n.aoMap&&void 0===r.attributes.uv2&&void 0!==r.attributes.uv&&r.setAttribute("uv2",r.attributes.uv),e.material=n}getMaterialType(){return ft}loadMaterial(e){let r;let n=this,i=this.json,a=this.extensions,s=i.materials[e],o={},l=s.extensions||{},u=[];if(l[me.KHR_MATERIALS_UNLIT]){let e=a[me.KHR_MATERIALS_UNLIT];r=e.getMaterialType(),u.push(e.extendParams(o,s,n))}else{let i=s.pbrMetallicRoughness||{};if(o.color=new lM(1,1,1),o.opacity=1,Array.isArray(i.baseColorFactor)){let e=i.baseColorFactor;o.color.fromArray(e),o.opacity=e[3]}void 0!==i.baseColorTexture&&u.push(n.assignTexture(o,"map",i.baseColorTexture,3001)),o.metalness=void 0!==i.metallicFactor?i.metallicFactor:1,o.roughness=void 0!==i.roughnessFactor?i.roughnessFactor:1,void 0!==i.metallicRoughnessTexture&&(u.push(n.assignTexture(o,"metalnessMap",i.metallicRoughnessTexture)),u.push(n.assignTexture(o,"roughnessMap",i.metallicRoughnessTexture))),r=this._invokeOne(function(r){return r.getMaterialType&&r.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(r){return r.extendMaterialParams&&r.extendMaterialParams(e,o)})))}!0===s.doubleSided&&(o.side=2);let c=s.alphaMode||mk.OPAQUE;if(c===mk.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,c===mk.MASK&&(o.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&r!==uF&&(u.push(n.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new lu(1,1),void 0!==s.normalTexture.scale)){let e=s.normalTexture.scale;o.normalScale.set(e,e)}return void 0!==s.occlusionTexture&&r!==uF&&(u.push(n.assignTexture(o,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(o.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&r!==uF&&(o.emissive=new lM().fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&r!==uF&&u.push(n.assignTexture(o,"emissiveMap",s.emissiveTexture,3001)),Promise.all(u).then(function(){let i=new r(o);return s.name&&(i.name=s.name),mI(i,s),n.associations.set(i,{materials:e}),s.extensions&&mD(a,i,s),i})}createUniqueName(e){let r=f2.sanitizeNodeName(e||""),n=r;for(let e=1;this.nodeNamesUsed[n];++e)n=r+"_"+e;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){let r=this,n=this.extensions,i=this.primitiveCache,a=[];for(let s=0,o=e.length;s<o;s++){let o=e[s],l=function(e){let r=e.extensions&&e.extensions[me.KHR_DRACO_MESH_COMPRESSION];return r?"draco:"+r.bufferView+":"+r.indices+":"+mO(r.attributes):e.indices+":"+mO(e.attributes)+":"+e.mode}(o),u=i[l];if(u)a.push(u.promise);else{let e;e=o.extensions&&o.extensions[me.KHR_DRACO_MESH_COMPRESSION]?function(e){return n[me.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,r).then(function(n){return mF(n,e,r)})}(o):mF(new uQ,o,r),i[l]={primitive:o,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){let r=this,n=this.json,i=this.extensions,a=n.meshes[e],s=a.primitives,o=[];for(let e=0,r=s.length;e<r;e++){var l;let r=void 0===s[e].material?(void 0===(l=this.cache).DefaultMaterial&&(l.DefaultMaterial=new ft({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),l.DefaultMaterial):this.getDependency("material",s[e].material);o.push(r)}return o.push(r.loadGeometries(s)),Promise.all(o).then(function(n){let o=n.slice(0,n.length-1),l=n[n.length-1],u=[];for(let n=0,c=l.length;n<c;n++){let c;let h=l[n],d=s[n],p=o[n];if(d.mode===mM.TRIANGLES||d.mode===mM.TRIANGLE_STRIP||d.mode===mM.TRIANGLE_FAN||void 0===d.mode)!0!==(c=!0===a.isSkinnedMesh?new dj(h,p):new cn(h,p)).isSkinnedMesh||c.geometry.attributes.skinWeight.normalized||c.normalizeSkinWeights(),d.mode===mM.TRIANGLE_STRIP?c.geometry=mU(c.geometry,1):d.mode===mM.TRIANGLE_FAN&&(c.geometry=mU(c.geometry,2));else if(d.mode===mM.LINES)c=new pe(h,p);else if(d.mode===mM.LINE_STRIP)c=new d9(h,p);else if(d.mode===mM.LINE_LOOP)c=new pt(h,p);else if(d.mode===mM.POINTS)c=new po(h,p);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);Object.keys(c.geometry.morphAttributes).length>0&&function(e,r){if(e.updateMorphTargets(),void 0!==r.weights)for(let n=0,i=r.weights.length;n<i;n++)e.morphTargetInfluences[n]=r.weights[n];if(r.extras&&Array.isArray(r.extras.targetNames)){let n=r.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let r=0,i=n.length;r<i;r++)e.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}(c,a),c.name=r.createUniqueName(a.name||"mesh_"+e),mI(c,a),d.extensions&&mD(i,c,d),r.assignFinalMaterial(c),u.push(c)}for(let n=0,i=u.length;n<i;n++)r.associations.set(u[n],{meshes:e,primitives:n});if(1===u.length)return u[0];let c=new dT;r.associations.set(c,{meshes:e});for(let e=0,r=u.length;e<r;e++)c.add(u[e]);return c})}loadCamera(e){let r;let n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return"perspective"===n.type?r=new cd(ll.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(r=new cN(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(r.name=this.createUniqueName(n.name)),mI(r,n),Promise.resolve(r)}loadSkin(e){let r=this.json.skins[e],n=[];for(let e=0,i=r.joints.length;e<i;e++)n.push(this.getDependency("node",r.joints[e]));return void 0!==r.inverseBindMatrices?n.push(this.getDependency("accessor",r.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(e){let n=e.pop(),i=[],a=[];for(let s=0,o=e.length;s<o;s++){let o=e[s];if(o){i.push(o);let e=new ue;null!==n&&e.fromArray(n.array,16*s),a.push(e)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[s])}return new d$(i,a)})}loadAnimation(e){let r=this.json,n=r.animations[e],i=[],a=[],s=[],o=[],l=[];for(let e=0,r=n.channels.length;e<r;e++){let r=n.channels[e],u=n.samplers[r.sampler],c=r.target,h=c.node,d=void 0!==n.parameters?n.parameters[u.input]:u.input,p=void 0!==n.parameters?n.parameters[u.output]:u.output;i.push(this.getDependency("node",h)),a.push(this.getDependency("accessor",d)),s.push(this.getDependency("accessor",p)),o.push(u),l.push(c)}return Promise.all([Promise.all(i),Promise.all(a),Promise.all(s),Promise.all(o),Promise.all(l)]).then(function(r){let i=r[0],a=r[1],s=r[2],o=r[3],l=r[4],u=[];for(let e=0,r=i.length;e<r;e++){let r;let n=i[e],c=a[e],h=s[e],d=o[e],p=l[e];if(void 0===n)continue;switch(n.updateMatrix(),mP[p.path]){case mP.weights:r=fm;break;case mP.rotation:r=fv;break;case mP.position:case mP.scale:default:r=fx}let f=n.name?n.name:n.uuid,m=void 0!==d.interpolation?mL[d.interpolation]:2301,g=[];mP[p.path]===mP.weights?n.traverse(function(e){e.morphTargetInfluences&&g.push(e.name?e.name:e.uuid)}):g.push(f);let v=h.array;if(h.normalized){let e=mN(v.constructor),r=new Float32Array(v.length);for(let n=0,i=v.length;n<i;n++)r[n]=v[n]*e;v=r}for(let e=0,n=g.length;e<n;e++){let n=new r(g[e]+"."+mP[p.path],c.array,v,m);"CUBICSPLINE"===d.interpolation&&(n.createInterpolant=function(e){let r=this instanceof fv?mw:m_;return new r(this.times,this.values,this.getValueSize()/3,e)},n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(n)}}let c=n.name?n.name:"animation_"+e;return new fb(c,void 0,u)})}createNodeMesh(e){let r=this.json,n=this,i=r.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then(function(e){let r=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&r.traverse(function(e){if(e.isMesh)for(let r=0,n=i.weights.length;r<n;r++)e.morphTargetInfluences[r]=i.weights[r]}),r})}loadNode(e){let r=this.json,n=this.extensions,i=this,a=r.nodes[e],s=a.name?i.createUniqueName(a.name):"";return(function(){let r=[],n=i._invokeOne(function(r){return r.createNodeMesh&&r.createNodeMesh(e)});n&&r.push(n),void 0!==a.camera&&r.push(i.getDependency("camera",a.camera).then(function(e){return i._getNodeRef(i.cameraCache,a.camera,e)})),i._invokeAll(function(r){return r.createNodeAttachment&&r.createNodeAttachment(e)}).forEach(function(e){r.push(e)});let s=[],o=a.children||[];for(let e=0,r=o.length;e<r;e++)s.push(i.getDependency("node",o[e]));let l=void 0===a.skin?Promise.resolve(null):i.getDependency("skin",a.skin);return Promise.all([Promise.all(r),Promise.all(s),l])})().then(function(r){let o;let l=r[0],u=r[1],c=r[2];if((o=!0===a.isBone?new dH:l.length>1?new dT:1===l.length?l[0]:new uT)!==l[0])for(let e=0,r=l.length;e<r;e++)o.add(l[e]);if(a.name&&(o.userData.name=a.name,o.name=s),mI(o,a),a.extensions&&mD(n,o,a),void 0!==a.matrix){let e=new ue;e.fromArray(a.matrix),o.applyMatrix4(e)}else void 0!==a.translation&&o.position.fromArray(a.translation),void 0!==a.rotation&&o.quaternion.fromArray(a.rotation),void 0!==a.scale&&o.scale.fromArray(a.scale);i.associations.has(o)||i.associations.set(o,{}),i.associations.get(o).nodes=e,null!==c&&o.traverse(function(e){e.isSkinnedMesh&&e.bind(c,mz)});for(let e=0,r=u.length;e<r;e++)o.add(u[e]);return o})}loadScene(e){let r=this.extensions,n=this.json.scenes[e],i=this,a=new dT;n.name&&(a.name=i.createUniqueName(n.name)),mI(a,n),n.extensions&&mD(r,a,n);let s=n.nodes||[],o=[];for(let e=0,r=s.length;e<r;e++)o.push(i.getDependency("node",s[e]));return Promise.all(o).then(function(e){for(let r=0,n=e.length;r<n;r++)a.add(e[r]);return i.associations=(e=>{let r=new Map;for(let[e,n]of i.associations)(e instanceof uB||e instanceof lR)&&r.set(e,n);return e.traverse(e=>{let n=i.associations.get(e);null!=n&&r.set(e,n)}),r})(a),a})}}function mF(e,r,n){let i=r.attributes,a=[];for(let r in i){let s=mR[r]||r.toLowerCase();s in e.attributes||a.push(function(r,i){return n.getDependency("accessor",r).then(function(r){e.setAttribute(i,r)})}(i[r],s))}if(void 0!==r.indices&&!e.index){let i=n.getDependency("accessor",r.indices).then(function(r){e.setIndex(r)});a.push(i)}return mI(e,r),!function(e,r,n){let i=r.attributes,a=new lz;if(void 0===i.POSITION)return;{let e=n.json.accessors[i.POSITION],r=e.min,s=e.max;if(void 0!==r&&void 0!==s){if(a.set(new lI(r[0],r[1],r[2]),new lI(s[0],s[1],s[2])),e.normalized){let r=mN(mT[e.componentType]);a.min.multiplyScalar(r),a.max.multiplyScalar(r)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}let s=r.targets;if(void 0!==s){let e=new lI,r=new lI;for(let i=0,a=s.length;i<a;i++){let a=s[i];if(void 0!==a.POSITION){let i=n.json.accessors[a.POSITION],s=i.min,o=i.max;if(void 0!==s&&void 0!==o){if(r.setX(Math.max(Math.abs(s[0]),Math.abs(o[0]))),r.setY(Math.max(Math.abs(s[1]),Math.abs(o[1]))),r.setZ(Math.max(Math.abs(s[2]),Math.abs(o[2]))),i.normalized){let e=mN(mT[i.componentType]);r.multiplyScalar(e)}e.max(r)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(e)}e.boundingBox=a;let o=new l1;a.getCenter(o.center),o.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=o}(e,r,n),Promise.all(a).then(function(){return void 0!==r.targets?function(e,r,n){let i=!1,a=!1,s=!1;for(let e=0,n=r.length;e<n;e++){let n=r[e];if(void 0!==n.POSITION&&(i=!0),void 0!==n.NORMAL&&(a=!0),void 0!==n.COLOR_0&&(s=!0),i&&a&&s)break}if(!i&&!a&&!s)return Promise.resolve(e);let o=[],l=[],u=[];for(let c=0,h=r.length;c<h;c++){let h=r[c];if(i){let r=void 0!==h.POSITION?n.getDependency("accessor",h.POSITION):e.attributes.position;o.push(r)}if(a){let r=void 0!==h.NORMAL?n.getDependency("accessor",h.NORMAL):e.attributes.normal;l.push(r)}if(s){let r=void 0!==h.COLOR_0?n.getDependency("accessor",h.COLOR_0):e.attributes.color;u.push(r)}}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u)]).then(function(r){let n=r[0],o=r[1],l=r[2];return i&&(e.morphAttributes.position=n),a&&(e.morphAttributes.normal=o),s&&(e.morphAttributes.color=l),e.morphTargetsRelative=!0,e})}(e,r.targets,n):e})}function mU(e,r){let n=e.getIndex();if(null===n){let r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)r.push(e);e.setIndex(r),n=e.getIndex()}let i=n.count-2,a=[];if(2===r)for(let e=1;e<=i;e++)a.push(n.getX(0)),a.push(n.getX(e)),a.push(n.getX(e+1));else for(let e=0;e<i;e++)e%2==0?(a.push(n.getX(e)),a.push(n.getX(e+1)),a.push(n.getX(e+2))):(a.push(n.getX(e+2)),a.push(n.getX(e+1)),a.push(n.getX(e)));a.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let s=e.clone();return s.setIndex(a),s}let mV=()=>(0,D.jsx)(ag.$,{size:"xl",position:"absolute",left:"50%",top:"50%",ml:"calc(0px - var(--spinner-size) / 2)",mt:"calc(0px - var(--spinner-size))"}),mj=(0,I.forwardRef)((e,r)=>{let{children:n}=e;return(0,D.jsx)(aK.xu,{ref:r,className:"voxel-dog",m:"auto",mt:["-20px","-60px","-120px"],mb:["-40px","-140px","-200px"],w:[280,480,640],h:[280,480,640],position:"relative",children:n})}),mH=()=>{let e=(0,I.useRef)(),[r,n]=(0,I.useState)(!1),i=(0,I.useRef)(),a=(0,I.useCallback)(()=>{let{current:r}=i,{current:n}=e;if(n&&r){let e=n.clientWidth,i=n.clientHeight;r.setSize(e,i)}},[]);return(0,I.useEffect)(()=>{let{current:r}=e;if(r){let e=r.clientWidth,a=r.clientHeight,s=new dk({antialias:!0,alpha:!0});s.setPixelRatio(window.devicePixelRatio),s.setSize(e,a),s.outputEncoding=3001,r.appendChild(s.domElement),i.current=s;let o=new dD,l=new lI(-.5,1.2,0),u=new lI(20*Math.sin(.2*Math.PI),10,20*Math.cos(.2*Math.PI)),c=.005*a+4.8,h=new cN(-c,c,c,-c,.01);h.position.copy(u),h.lookAt(l);let d=new fH(13421772,1);o.add(d);let p=new f9(h,s.domElement);p.autoRotate=!0,p.target=l,(function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{receiveShadow:!0,castShadow:!0},{receiveShadow:i,castShadow:a}=n;return new Promise((n,s)=>{let o=new f7;o.load(r,r=>{let s=r.scene;s.name="dog",s.position.y=0,s.position.x=0,s.receiveShadow=i,s.castShadow=a,e.add(s),s.traverse(function(e){e.isMesh&&(e.castShadow=a,e.receiveShadow=i)}),n(s)},void 0,function(e){s(e)})})})(o,"/dog.glb",{receiveShadow:!1,castShadow:!1}).then(()=>{g(),n(!1)});let f=null,m=0,g=()=>{if(f=requestAnimationFrame(g),(m=m<=100?m+1:m)<=100){let e=-Math.sqrt(1-Math.pow(m/120-1,4))*Math.PI*20;h.position.y=10,h.position.x=u.x*Math.cos(e)+u.z*Math.sin(e),h.position.z=u.z*Math.cos(e)-u.x*Math.sin(e),h.lookAt(l)}else p.update();s.render(o,h)};return()=>{cancelAnimationFrame(f),s.domElement.remove(),s.dispose()}}},[]),(0,I.useEffect)(()=>(window.addEventListener("resize",a,!1),()=>{window.removeEventListener("resize",a,!1)}),[a]),(0,D.jsx)(mj,{ref:e,children:r&&(0,D.jsx)(mV,{})})},mW=e=>{let{children:r,router:n}=e;return(0,D.jsxs)(aK.xu,{as:"main",pb:8,children:[(0,D.jsxs)(aU(),{children:[(0,D.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,D.jsx)("title",{children:" Astrum Stellar - Homepage"})]}),(0,D.jsx)(oK,{path:n.asPath}),(0,D.jsxs)(aQ.W,{maxW:"container.md",pt:14,children:[(0,D.jsx)(mH,{}),r]})]})};var mG=n(1857),mq=n.n(mG);let m$=()=>(0,D.jsx)(mq(),{id:"6389e21b62ffc498",children:'@import url("https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@300;700&display=swap");@import url("https://fonts.googleapis.com/css2?family=Zeyada&display=swap");@import url("https://fonts.googleapis.com/css2?family=Babylonica&display=swap");'});var mX=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"],mY=n(8554);function mZ(e){return"function"==typeof e}var mJ=e=>function(...r){var n;let i=[...r],a=r[r.length-1];return(n=a,(0,eB.Kn)(n)&&mX.every(e=>Object.prototype.hasOwnProperty.call(n,e))&&i.length>1)?i=i.slice(0,i.length-1):a=e,(function(...e){return r=>e.reduce((e,r)=>r(e),r)})(...i.map(e=>r=>mZ(e)?e(r):function(...e){return mY({},...e,mQ)}(r,e)))(a)},mK=mJ(at);function mQ(e,r,n,i){if((mZ(e)||mZ(r))&&Object.prototype.hasOwnProperty.call(i,n))return(...n)=>{let i=mZ(e)?e(...n):e,a=mZ(r)?r(...n):r;return mY({},i,a,mQ)}}mJ(ar);let m0=mK({config:{initialColorMode:"light",useSystemColorMode:!0},styles:{global:e=>({body:{bg:e4("#d7d7ce40","#1D212E60")(e)}})},components:{Heading:{variants:{"section-title":{textDecoration:"underline",fontSize:20,textUnderlineOffset:6,textDecorationColor:"#F3F3F3",textDecorationThickness:3,marginTop:3,marginBottom:4}}},Link:{baseStyle:e=>({color:e4("#3d7aed","#ff63c3")(e),textUnderlineOffest:3})}},colors:{glassTeal:"#88ccca"},fonts:{heading:"'M PLUS Rounded 1c'",heading:"''Zeyada', cursive'",heading:"''Babylonica', cursive'"}}),m1=e=>{let{Component:r,pageProps:n,router:i}=e;return(0,D.jsxs)(aB,{theme:m0,children:[(0,D.jsx)(m$,{}),(0,D.jsx)(mW,{router:i,children:(0,D.jsx)(ak.M,{mode:"sync",initial:!0,children:(0,I.createElement)(r,{...n,key:i.route})})})]})};var m2=m1},7663:function(e){!function(){var r={229:function(e){var r,n,i,a=e.exports={};function s(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(n){try{return r.call(null,e,0)}catch(n){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var u=[],c=!1,h=-1;function d(){c&&i&&(c=!1,i.length?u=i.concat(u):h=-1,u.length&&p())}function p(){if(!c){var e=l(d);c=!0;for(var r=u.length;r;){for(i=u,u=[];++h<r;)i&&i[h].run();h=-1,r=u.length}i=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(r){try{return n.call(null,e)}catch(r){return n.call(this,e)}}}(e)}}function f(e,r){this.fun=e,this.array=r}function m(){}a.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)r[n-1]=arguments[n];u.push(new f(e,r)),1!==u.length||c||l(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},n={};function i(e){var a=n[e];if(void 0!==a)return a.exports;var s=n[e]={exports:{}},o=!0;try{r[e](s,s.exports,i),o=!1}finally{o&&delete n[e]}return s.exports}i.ab="//";var a=i(229);e.exports=a}()},9008:function(e,r,n){e.exports=n(3121)},5675:function(e,r,n){e.exports=n(9749)},1664:function(e,r,n){e.exports=n(1551)},9590:function(e){var r="undefined"!=typeof Element,n="function"==typeof Map,i="function"==typeof Set,a="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;e.exports=function(e,s){try{return function e(s,o){if(s===o)return!0;if(s&&o&&"object"==typeof s&&"object"==typeof o){var l,u,c,h;if(s.constructor!==o.constructor)return!1;if(Array.isArray(s)){if((l=s.length)!=o.length)return!1;for(u=l;0!=u--;)if(!e(s[u],o[u]))return!1;return!0}if(n&&s instanceof Map&&o instanceof Map){if(s.size!==o.size)return!1;for(h=s.entries();!(u=h.next()).done;)if(!o.has(u.value[0]))return!1;for(h=s.entries();!(u=h.next()).done;)if(!e(u.value[1],o.get(u.value[0])))return!1;return!0}if(i&&s instanceof Set&&o instanceof Set){if(s.size!==o.size)return!1;for(h=s.entries();!(u=h.next()).done;)if(!o.has(u.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(s)&&ArrayBuffer.isView(o)){if((l=s.length)!=o.length)return!1;for(u=l;0!=u--;)if(s[u]!==o[u])return!1;return!0}if(s.constructor===RegExp)return s.source===o.source&&s.flags===o.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===o.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===o.toString();if((l=(c=Object.keys(s)).length)!==Object.keys(o).length)return!1;for(u=l;0!=u--;)if(!Object.prototype.hasOwnProperty.call(o,c[u]))return!1;if(r&&s instanceof Element)return!1;for(u=l;0!=u--;)if(("_owner"!==c[u]&&"__v"!==c[u]&&"__o"!==c[u]||!s.$$typeof)&&!e(s[c[u]],o[c[u]]))return!1;return!0}return s!=s&&o!=o}(e,s)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},9921:function(e,r){"use strict";/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n="function"==typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,h=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,x=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function S(e){if("object"==typeof e&&null!==e){var r=e.$$typeof;switch(r){case i:switch(e=e.type){case h:case d:case s:case l:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case p:case v:case g:case u:return e;default:return r}}case a:return r}}}function w(e){return S(e)===d}r.AsyncMode=h,r.ConcurrentMode=d,r.ContextConsumer=c,r.ContextProvider=u,r.Element=i,r.ForwardRef=p,r.Fragment=s,r.Lazy=v,r.Memo=g,r.Portal=a,r.Profiler=l,r.StrictMode=o,r.Suspense=f,r.isAsyncMode=function(e){return w(e)||S(e)===h},r.isConcurrentMode=w,r.isContextConsumer=function(e){return S(e)===c},r.isContextProvider=function(e){return S(e)===u},r.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},r.isForwardRef=function(e){return S(e)===p},r.isFragment=function(e){return S(e)===s},r.isLazy=function(e){return S(e)===v},r.isMemo=function(e){return S(e)===g},r.isPortal=function(e){return S(e)===a},r.isProfiler=function(e){return S(e)===l},r.isStrictMode=function(e){return S(e)===o},r.isSuspense=function(e){return S(e)===f},r.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===l||e===o||e===f||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===g||e.$$typeof===u||e.$$typeof===c||e.$$typeof===p||e.$$typeof===x||e.$$typeof===b||e.$$typeof===_||e.$$typeof===y)},r.typeOf=S},9864:function(e,r,n){"use strict";e.exports=n(9921)},7462:function(e,r,n){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}n.d(r,{Z:function(){return i}})},3951:function(e,r,n){"use strict";n.d(r,{XQ:function(){return a}});var i=n(5432);function a(e,r){return Array.isArray(e)?e.map(e=>null===e?null:r(e)):(0,i.Kn)(e)?Object.keys(e).reduce((n,i)=>(n[i]=r(e[i]),n),{}):null!=e?r(e):null}Object.freeze(["base","sm","md","lg","xl","2xl"])},9222:function(e,r,n){"use strict";n.d(r,{z:function(){return v}});var i=n(7294),[a,s]=(0,n(5227).k)({strict:!1,name:"ButtonGroupContext"}),o=n(4579),l=n(5432),u=n(5893);function c(e){let{children:r,className:n,...a}=e,s=(0,i.isValidElement)(r)?(0,i.cloneElement)(r,{"aria-hidden":!0,focusable:!1}):r,c=(0,l.cx)("chakra-button__icon",n);return(0,u.jsx)(o.m.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...a,className:c,children:s})}c.displayName="ButtonIcon";var h=n(295);function d(e){let{label:r,placement:n,spacing:a="0.5rem",children:s=(0,u.jsx)(h.$,{color:"currentColor",width:"1em",height:"1em"}),className:c,__css:d,...p}=e,f=(0,l.cx)("chakra-button__spinner",c),m="start"===n?"marginEnd":"marginStart",g=(0,i.useMemo)(()=>({display:"flex",alignItems:"center",position:r?"relative":"absolute",[m]:r?a:0,fontSize:"1em",lineHeight:"normal",...d}),[d,r,m,a]);return(0,u.jsx)(o.m.div,{className:f,...p,__css:g,children:s})}d.displayName="ButtonSpinner";var p=n(1103),f=n(5059),m=n(1639),g=n(3179),v=(0,f.G)((e,r)=>{let n=s(),a=(0,m.mq)("Button",{...n,...e}),{isDisabled:c=null==n?void 0:n.isDisabled,isLoading:h,isActive:f,children:v,leftIcon:x,rightIcon:b,loadingText:_,iconSpacing:S="0.5rem",type:w,spinner:M,spinnerPlacement:T="start",className:E,as:A,...C}=(0,g.Lr)(e),R=(0,i.useMemo)(()=>{let e={...null==a?void 0:a._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...a,...!!n&&{_focus:e}}},[a,n]),{ref:P,type:L}=function(e){let[r,n]=(0,i.useState)(!e),a=(0,i.useCallback)(e=>{e&&n("BUTTON"===e.tagName)},[]);return{ref:a,type:r?"button":void 0}}(A),k={rightIcon:b,leftIcon:x,iconSpacing:S,children:v};return(0,u.jsxs)(o.m.button,{ref:(0,p.qq)(r,P),as:A,type:null!=w?w:L,"data-active":(0,l.PB)(f),"data-loading":(0,l.PB)(h),__css:R,className:(0,l.cx)("chakra-button",E),...C,disabled:c||h,children:[h&&"start"===T&&(0,u.jsx)(d,{className:"chakra-button__spinner--start",label:_,placement:"start",spacing:S,children:M}),h?_||(0,u.jsx)(o.m.span,{opacity:0,children:(0,u.jsx)(y,{...k})}):(0,u.jsx)(y,{...k}),h&&"end"===T&&(0,u.jsx)(d,{className:"chakra-button__spinner--end",label:_,placement:"end",spacing:S,children:M})]})});function y(e){let{leftIcon:r,rightIcon:n,children:i,iconSpacing:a}=e;return(0,u.jsxs)(u.Fragment,{children:[r&&(0,u.jsx)(c,{marginEnd:a,children:r}),i,n&&(0,u.jsx)(c,{marginStart:a,children:n})]})}v.displayName="Button"},6989:function(e,r,n){"use strict";n.d(r,{P:function(){return h}});var i=n(6877),a=n(5059),s=n(1639),o=n(3179),l=n(4579),u=n(5893);function c(e){return(0,u.jsx)(i.J,{focusable:"false","aria-hidden":!0,...e,children:(0,u.jsx)("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}var h=(0,a.G)(function(e,r){let n=(0,s.mq)("CloseButton",e),{children:i,isDisabled:a,__css:h,...d}=(0,o.Lr)(e);return(0,u.jsx)(l.m.button,{type:"button","aria-label":"Close",ref:r,disabled:a,__css:{outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,...n,...h},...d,children:i||(0,u.jsx)(c,{width:"1em",height:"1em"})})});h.displayName="CloseButton"},2498:function(e,r,n){"use strict";n.d(r,{If:function(){return s},ff:function(){return o},kc:function(){return a}});var i=n(7294),a=(0,i.createContext)({});function s(){let e=(0,i.useContext)(a);if(void 0===e)throw Error("useColorMode must be used within a ColorModeProvider");return e}function o(e,r){let{colorMode:n}=s();return"dark"===n?r:e}a.displayName="ColorModeContext"},1735:function(e,r,n){"use strict";function i(e){return null!=e&&"object"==typeof e&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function a(e){var r;if(!i(e))return!1;let n=null!=(r=e.ownerDocument.defaultView)?r:window;return e instanceof n.HTMLElement}function s(e){var r,n;return null!=(n=null==(r=o(e))?void 0:r.defaultView)?n:window}function o(e){return i(e)?e.ownerDocument:document}function l(e){return o(e).activeElement}n.d(r,{Re:function(){return a},kR:function(){return s},vY:function(){return l}})},9136:function(e,r,n){"use strict";n.d(r,{EB:function(){return o},Wq:function(){return l}});var i=n(1735),a=e=>e.hasAttribute("tabindex"),s=e=>a(e)&&-1===e.tabIndex;function o(e){var r;if(!(0,i.Re)(e)||function e(r){return!!(r.parentElement&&e(r.parentElement))||r.hidden}(e)||!0===Boolean((r=e).getAttribute("disabled"))||!0===Boolean(r.getAttribute("aria-disabled")))return!1;let{localName:n}=e;if(["input","select","textarea","button"].indexOf(n)>=0)return!0;let s={a:()=>e.hasAttribute("href"),audio:()=>e.hasAttribute("controls"),video:()=>e.hasAttribute("controls")};return n in s?s[n]():!!function(e){let r=e.getAttribute("contenteditable");return"false"!==r&&null!=r}(e)||a(e)}function l(e){return!!e&&(0,i.Re)(e)&&o(e)&&!s(e)}},6877:function(e,r,n){"use strict";n.d(r,{J:function(){return c}});var i=n(5059),a=n(1639),s=n(4579),o=n(5432),l=n(5893),u={path:(0,l.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.5",children:[(0,l.jsx)("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),(0,l.jsx)("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),(0,l.jsx)("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},c=(0,i.G)((e,r)=>{let{as:n,viewBox:i,color:c="currentColor",focusable:h=!1,children:d,className:p,__css:f,...m}=e,g=(0,o.cx)("chakra-icon",p),v=(0,a.mq)("Icon",e),y={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:c,...f,...v},x={ref:r,focusable:h,className:g,__css:y},b=null!=i?i:u.viewBox;if(n&&"string"!=typeof n)return(0,l.jsx)(s.m.svg,{as:n,...x,...m});let _=null!=d?d:u.path;return(0,l.jsx)(s.m.svg,{verticalAlign:"middle",viewBox:b,...x,...m,children:_})});c.displayName="Icon"},78:function(e,r,n){"use strict";n.d(r,{I:function(){return l}});var i=n(6877),a=n(5059),s=n(7294),o=n(5893);function l(e){let{viewBox:r="0 0 24 24",d:n,displayName:l,defaultProps:u={}}=e,c=s.Children.toArray(e.path),h=(0,a.G)((e,a)=>(0,o.jsx)(i.J,{ref:a,viewBox:r,...u,...e,children:c.length?c:(0,o.jsx)("path",{fill:"currentColor",d:n})}));return h.displayName=l,h}},3100:function(e,r,n){"use strict";n.d(r,{xu:function(){return o}});var i=n(4579),a=n(5059),s=n(5893),o=(0,i.m)("div");o.displayName="Box";var l=(0,a.G)(function(e,r){let{size:n,centerContent:i=!0,...a}=e;return(0,s.jsx)(o,{ref:r,boxSize:n,__css:{...i?{display:"flex",alignItems:"center",justifyContent:"center"}:{},flexShrink:0,flexGrow:0},...a})});l.displayName="Square",(0,a.G)(function(e,r){let{size:n,...i}=e;return(0,s.jsx)(l,{size:n,ref:r,borderRadius:"9999px",...i})}).displayName="Circle"},4418:function(e,r,n){"use strict";n.d(r,{X:function(){return c}});var i=n(5059),a=n(1639),s=n(3179),o=n(4579),l=n(5432),u=n(5893),c=(0,i.G)(function(e,r){let n=(0,a.mq)("Heading",e),{className:i,...c}=(0,s.Lr)(e);return(0,u.jsx)(o.m.h2,{ref:r,className:(0,l.cx)("chakra-heading",e.className),...c,__css:n})});c.displayName="Heading"},8911:function(e,r,n){"use strict";n.d(r,{x:function(){return h}});var i=n(5059),a=n(1639),s=n(3179),o=n(4579),l=n(5432),u=n(888),c=n(5893),h=(0,i.G)(function(e,r){let n=(0,a.mq)("Text",e),{className:i,align:h,decoration:d,casing:p,...f}=(0,s.Lr)(e),m=(0,u.oA)({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return(0,c.jsx)(o.m.p,{ref:r,className:(0,l.cx)("chakra-text",e.className),...m,...f,__css:n})});h.displayName="Text"},6979:function(e,r,n){"use strict";n.d(r,{W:function(){return c}});var i=n(5059),a=n(3179),s=n(1639),o=n(4579),l=n(5432),u=n(5893),c=(0,i.G)(function(e,r){let{className:n,centerContent:i,...c}=(0,a.Lr)(e),h=(0,s.mq)("Container",e);return(0,u.jsx)(o.m.div,{ref:r,className:(0,l.cx)("chakra-container",n),...c,__css:{...h,...i&&{display:"flex",flexDirection:"column",alignItems:"center"}}})});c.displayName="Container"},3838:function(e,r,n){"use strict";n.d(r,{r:function(){return c}});var i=n(5059),a=n(1639),s=n(3179),o=n(4579),l=n(5432),u=n(5893),c=(0,i.G)(function(e,r){let n=(0,a.mq)("Link",e),{className:i,isExternal:c,...h}=(0,s.Lr)(e);return(0,u.jsx)(o.m.a,{target:c?"_blank":void 0,rel:c?"noopener":void 0,ref:r,className:(0,l.cx)("chakra-link",i),...h,__css:n})});c.displayName="Link"},888:function(e,r,n){"use strict";function i(e){let r=Object.assign({},e);for(let e in r)void 0===r[e]&&delete r[e];return r}function a(e,...r){if(null==e)throw TypeError("Cannot convert undefined or null to object");let n={...e};for(let e of r)if(null!=e)for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(r in n&&delete n[r],n[r]=e[r]);return n}n.d(r,{V8:function(){return a},oA:function(){return i}})},6810:function(e,r,n){"use strict";n.d(r,{L:function(){return o},h:function(){return l}});var i=n(5227),a=n(5893),[s,o]=(0,i.k)({strict:!1,name:"PortalManagerContext"});function l(e){let{children:r,zIndex:n}=e;return(0,a.jsx)(s,{value:{zIndex:n},children:r})}l.displayName="PortalManager"},9598:function(e,r,n){"use strict";n.d(r,{h:function(){return g}});var i=n(6810),a=n(6245),s=n(5227),o=n(3935),l=n(7294),u=n(5893),[c,h]=(0,s.k)({strict:!1,name:"PortalContext"}),d="chakra-portal",p=e=>(0,u.jsx)("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),f=e=>{let{appendToParentPortal:r,children:n}=e,[s,f]=(0,l.useState)(null),m=(0,l.useRef)(null),[,g]=(0,l.useState)({});(0,l.useEffect)(()=>g({}),[]);let v=h(),y=(0,i.L)();(0,a.G)(()=>{if(!s)return;let e=s.ownerDocument,n=r&&null!=v?v:e.body;if(!n)return;m.current=e.createElement("div"),m.current.className=d,n.appendChild(m.current),g({});let i=m.current;return()=>{n.contains(i)&&n.removeChild(i)}},[s]);let x=(null==y?void 0:y.zIndex)?(0,u.jsx)(p,{zIndex:null==y?void 0:y.zIndex,children:n}):n;return m.current?(0,o.createPortal)((0,u.jsx)(c,{value:m.current,children:x}),m.current):(0,u.jsx)("span",{ref:e=>{e&&f(e)}})},m=e=>{let{children:r,containerRef:n,appendToParentPortal:i}=e,s=n.current,h=null!=s?s:"undefined"!=typeof window?document.body:void 0,p=(0,l.useMemo)(()=>{let e=null==s?void 0:s.ownerDocument.createElement("div");return e&&(e.className=d),e},[s]),[,f]=(0,l.useState)({});return((0,a.G)(()=>f({}),[]),(0,a.G)(()=>{if(p&&h)return h.appendChild(p),()=>{h.removeChild(p)}},[p,h]),h&&p)?(0,o.createPortal)((0,u.jsx)(c,{value:i?p:null,children:r}),p):null};function g(e){let r={appendToParentPortal:!0,...e},{containerRef:n,...i}=r;return n?(0,u.jsx)(m,{containerRef:n,...i}):(0,u.jsx)(f,{...i})}g.className=d,g.selector=".chakra-portal",g.displayName="Portal"},2495:function(e,r,n){"use strict";n.d(r,{W:function(){return a}});var i=n(7294);function a(e){return i.Children.toArray(e).filter(e=>(0,i.isValidElement)(e))}},5227:function(e,r,n){"use strict";n.d(r,{k:function(){return a}});var i=n(7294);function a(e={}){let{name:r,strict:n=!0,hookName:a="useContext",providerName:s="Provider",errorMessage:o}=e,l=(0,i.createContext)(void 0);return l.displayName=r,[l.Provider,function e(){var r;let u=(0,i.useContext)(l);if(!u&&n){let n=Error(null!=o?o:`${a} returned \`undefined\`. Seems you forgot to wrap component within ${s}`);throw n.name="ContextError",null==(r=Error.captureStackTrace)||r.call(Error,n,e),n}return u},l]}},1103:function(e,r,n){"use strict";n.d(r,{lq:function(){return a},qq:function(){return s}});var i=n(7294);function a(...e){return r=>{e.forEach(e=>{!function(e,r){if(null!=e){if("function"==typeof e){e(r);return}try{e.current=r}catch(n){throw Error(`Cannot assign value '${r}' to ref '${e}'`)}}}(e,r)})}}function s(...e){return(0,i.useMemo)(()=>a(...e),e)}},6245:function(e,r,n){"use strict";n.d(r,{G:function(){return a}});var i=n(7294),a=Boolean(null==globalThis?void 0:globalThis.document)?i.useLayoutEffect:i.useEffect},5432:function(e,r,n){"use strict";n.d(r,{Kn:function(){return a},PB:function(){return l},PP:function(){return h},Pu:function(){return s},Qm:function(){return u},cx:function(){return i},v0:function(){return c}});var i=(...e)=>e.filter(Boolean).join(" ");function a(e){let r=typeof e;return null!=e&&("object"===r||"function"===r)&&!Array.isArray(e)}function s(e,...r){return o(e)?e(...r):e}var o=e=>"function"==typeof e,l=e=>e?"":void 0,u=e=>!!e||void 0;function c(...e){return function(r){e.some(e=>(null==e||e(r),null==r?void 0:r.defaultPrevented))}}function h(...e){return function(r){e.forEach(e=>{null==e||e(r)})}}},295:function(e,r,n){"use strict";n.d(r,{$:function(){return d}});var i=n(917),a=n(5059),s=n(1639),o=n(3179),l=n(4579),u=n(5432),c=n(5893),h=(0,i.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),d=(0,a.G)((e,r)=>{let n=(0,s.mq)("Spinner",e),{label:i="Loading...",thickness:a="2px",speed:d="0.45s",emptyColor:p="transparent",className:f,...m}=(0,o.Lr)(e),g=(0,u.cx)("chakra-spinner",f),v={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:a,borderBottomColor:p,borderLeftColor:p,animation:`${h} ${d} linear infinite`,...n};return(0,c.jsx)(l.m.div,{ref:r,__css:v,className:g,...m,children:i&&(0,c.jsx)(l.m.span,{srOnly:!0,children:i})})});d.displayName="Spinner"},3179:function(e,r,n){"use strict";n.d(r,{D:function(){return eL},Lr:function(){return eD},Ud:function(){return ek},ZR:function(){return eM},c0:function(){return ex},cC:function(){return eS},fj:function(){return eP},gJ:function(){return en},iv:function(){return eC},k0:function(){return eR},oE:function(){return e_}});var i=n(5432),a=n(8554),s=e=>/!(important)?$/.test(e),o=e=>"string"==typeof e?e.replace(/!(important)?$/,"").trim():e,l=(e,r)=>n=>{let a=String(r),l=s(a),u=o(a),c=e?`${e}.${u}`:u,h=(0,i.Kn)(n.__cssMap)&&c in n.__cssMap?n.__cssMap[c].varRef:r;return h=o(h),l?`${h} !important`:h};function u(e){let{scale:r,transform:n,compose:i}=e,a=(e,a)=>{var s;let o=l(r,e)(a),u=null!=(s=null==n?void 0:n(o,a))?s:o;return i&&(u=i(u,a)),u};return a}var c=(...e)=>r=>e.reduce((e,r)=>r(e),r);function h(e,r){return n=>{let i={property:n,scale:e};return i.transform=u({scale:e,transform:r}),i}}var d=({rtl:e,ltr:r})=>n=>"rtl"===n.direction?e:r,p=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"],f={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:"var(--chakra-blur) var(--chakra-brightness) var(--chakra-contrast) var(--chakra-grayscale) var(--chakra-hue-rotate) var(--chakra-invert) var(--chakra-saturate) var(--chakra-sepia) var(--chakra-drop-shadow)"},m={backdropFilter:"var(--chakra-backdrop-blur) var(--chakra-backdrop-brightness) var(--chakra-backdrop-contrast) var(--chakra-backdrop-grayscale) var(--chakra-backdrop-hue-rotate) var(--chakra-backdrop-invert) var(--chakra-backdrop-opacity) var(--chakra-backdrop-saturate) var(--chakra-backdrop-sepia)","--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"},g={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},v="& > :not(style) ~ :not(style)",y={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},x=new Set(Object.values(y)),b=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),_=e=>e.trim(),S=e=>"string"==typeof e&&e.includes("(")&&e.includes(")"),w=e=>{let r=parseFloat(e.toString()),n=e.toString().replace(String(r),"");return{unitless:!n,value:r,unit:n}},M=e=>r=>`${e}(${r})`,T={filter:e=>"auto"!==e?e:f,backdropFilter:e=>"auto"!==e?e:m,ring:e=>({"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":T.px(e),boxShadow:"var(--chakra-ring-offset-shadow), var(--chakra-ring-shadow), var(--chakra-shadow, 0 0 #0000)"}),bgClip:e=>"text"===e?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e},transform:e=>"auto"===e?["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...p].join(" "):"auto-gpu"===e?["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...p].join(" "):e,vh:e=>"$100vh"===e?"var(--chakra-vh)":e,px(e){if(null==e)return e;let{unitless:r}=w(e);return r||"number"==typeof e?`${e}px`:e},fraction:e=>"number"!=typeof e||e>1?e:`${100*e}%`,float:(e,r)=>"rtl"===r.direction?({left:"right",right:"left"})[e]:e,degree(e){if(/^var\(--.+\)$/.test(e)||null==e)return e;let r="string"==typeof e&&!e.endsWith("deg");return"number"==typeof e||r?`${e}deg`:e},gradient:(e,r)=>(function(e,r){var n,i;if(null==e||b.has(e))return e;let{type:a,values:s}=null!=(i=null==(n=/(?<type>^[a-z-A-Z]+)\((?<values>(.*))\)/g.exec(e))?void 0:n.groups)?i:{};if(!a||!s)return e;let o=a.includes("-gradient")?a:`${a}-gradient`,[l,...u]=s.split(",").map(_).filter(Boolean);if((null==u?void 0:u.length)===0)return e;let c=l in y?y[l]:l;u.unshift(c);let h=u.map(e=>{if(x.has(e))return e;let n=e.indexOf(" "),[i,a]=-1!==n?[e.substr(0,n),e.substr(n+1)]:[e],s=S(a)?a:a&&a.split(" "),o=`colors.${i}`,l=o in r.__cssMap?r.__cssMap[o].varRef:i;return s?[l,...Array.isArray(s)?s:[s]].join(" "):l});return`${o}(${h.join(", ")})`})(e,null!=r?r:{}),blur:M("blur"),opacity:M("opacity"),brightness:M("brightness"),contrast:M("contrast"),dropShadow:M("drop-shadow"),grayscale:M("grayscale"),hueRotate:M("hue-rotate"),invert:M("invert"),saturate:M("saturate"),sepia:M("sepia"),bgImage(e){if(null==e)return e;let r=S(e)||b.has(e);return r?e:`url(${e})`},outline(e){let r="0"===String(e)||"none"===String(e);return null!==e&&r?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var r;let{space:n,divide:i}=null!=(r=g[e])?r:{},a={flexDirection:e};return n&&(a[n]=1),i&&(a[i]=1),a}},E={borderWidths:h("borderWidths"),borderStyles:h("borderStyles"),colors:h("colors"),borders:h("borders"),radii:h("radii",T.px),space:h("space",c(T.vh,T.px)),spaceT:h("space",c(T.vh,T.px)),degreeT:e=>({property:e,transform:T.degree}),prop:(e,r,n)=>({property:e,scale:r,...r&&{transform:u({scale:r,transform:n})}}),propT:(e,r)=>({property:e,transform:r}),sizes:h("sizes",c(T.vh,T.px)),sizesT:h("sizes",c(T.vh,T.fraction)),shadows:h("shadows"),logical:function(e){let{property:r,scale:n,transform:i}=e;return{scale:n,property:d(r),transform:n?u({scale:n,compose:i}):i}},blur:h("blur",T.blur)},A={background:E.colors("background"),backgroundColor:E.colors("backgroundColor"),backgroundImage:E.propT("backgroundImage",T.bgImage),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:T.bgClip},bgSize:E.prop("backgroundSize"),bgPosition:E.prop("backgroundPosition"),bg:E.colors("background"),bgColor:E.colors("backgroundColor"),bgPos:E.prop("backgroundPosition"),bgRepeat:E.prop("backgroundRepeat"),bgAttachment:E.prop("backgroundAttachment"),bgGradient:E.propT("backgroundImage",T.gradient),bgClip:{transform:T.bgClip}};Object.assign(A,{bgImage:A.backgroundImage,bgImg:A.backgroundImage});var C={border:E.borders("border"),borderWidth:E.borderWidths("borderWidth"),borderStyle:E.borderStyles("borderStyle"),borderColor:E.colors("borderColor"),borderRadius:E.radii("borderRadius"),borderTop:E.borders("borderTop"),borderBlockStart:E.borders("borderBlockStart"),borderTopLeftRadius:E.radii("borderTopLeftRadius"),borderStartStartRadius:E.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:E.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:E.radii("borderTopRightRadius"),borderStartEndRadius:E.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:E.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:E.borders("borderRight"),borderInlineEnd:E.borders("borderInlineEnd"),borderBottom:E.borders("borderBottom"),borderBlockEnd:E.borders("borderBlockEnd"),borderBottomLeftRadius:E.radii("borderBottomLeftRadius"),borderBottomRightRadius:E.radii("borderBottomRightRadius"),borderLeft:E.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:E.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:E.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:E.borders(["borderLeft","borderRight"]),borderInline:E.borders("borderInline"),borderY:E.borders(["borderTop","borderBottom"]),borderBlock:E.borders("borderBlock"),borderTopWidth:E.borderWidths("borderTopWidth"),borderBlockStartWidth:E.borderWidths("borderBlockStartWidth"),borderTopColor:E.colors("borderTopColor"),borderBlockStartColor:E.colors("borderBlockStartColor"),borderTopStyle:E.borderStyles("borderTopStyle"),borderBlockStartStyle:E.borderStyles("borderBlockStartStyle"),borderBottomWidth:E.borderWidths("borderBottomWidth"),borderBlockEndWidth:E.borderWidths("borderBlockEndWidth"),borderBottomColor:E.colors("borderBottomColor"),borderBlockEndColor:E.colors("borderBlockEndColor"),borderBottomStyle:E.borderStyles("borderBottomStyle"),borderBlockEndStyle:E.borderStyles("borderBlockEndStyle"),borderLeftWidth:E.borderWidths("borderLeftWidth"),borderInlineStartWidth:E.borderWidths("borderInlineStartWidth"),borderLeftColor:E.colors("borderLeftColor"),borderInlineStartColor:E.colors("borderInlineStartColor"),borderLeftStyle:E.borderStyles("borderLeftStyle"),borderInlineStartStyle:E.borderStyles("borderInlineStartStyle"),borderRightWidth:E.borderWidths("borderRightWidth"),borderInlineEndWidth:E.borderWidths("borderInlineEndWidth"),borderRightColor:E.colors("borderRightColor"),borderInlineEndColor:E.colors("borderInlineEndColor"),borderRightStyle:E.borderStyles("borderRightStyle"),borderInlineEndStyle:E.borderStyles("borderInlineEndStyle"),borderTopRadius:E.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:E.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:E.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:E.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(C,{rounded:C.borderRadius,roundedTop:C.borderTopRadius,roundedTopLeft:C.borderTopLeftRadius,roundedTopRight:C.borderTopRightRadius,roundedTopStart:C.borderStartStartRadius,roundedTopEnd:C.borderStartEndRadius,roundedBottom:C.borderBottomRadius,roundedBottomLeft:C.borderBottomLeftRadius,roundedBottomRight:C.borderBottomRightRadius,roundedBottomStart:C.borderEndStartRadius,roundedBottomEnd:C.borderEndEndRadius,roundedLeft:C.borderLeftRadius,roundedRight:C.borderRightRadius,roundedStart:C.borderInlineStartRadius,roundedEnd:C.borderInlineEndRadius,borderStart:C.borderInlineStart,borderEnd:C.borderInlineEnd,borderTopStartRadius:C.borderStartStartRadius,borderTopEndRadius:C.borderStartEndRadius,borderBottomStartRadius:C.borderEndStartRadius,borderBottomEndRadius:C.borderEndEndRadius,borderStartRadius:C.borderInlineStartRadius,borderEndRadius:C.borderInlineEndRadius,borderStartWidth:C.borderInlineStartWidth,borderEndWidth:C.borderInlineEndWidth,borderStartColor:C.borderInlineStartColor,borderEndColor:C.borderInlineEndColor,borderStartStyle:C.borderInlineStartStyle,borderEndStyle:C.borderInlineEndStyle});var R={color:E.colors("color"),textColor:E.colors("color"),fill:E.colors("fill"),stroke:E.colors("stroke")},P={boxShadow:E.shadows("boxShadow"),mixBlendMode:!0,blendMode:E.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:E.prop("backgroundBlendMode"),opacity:!0};Object.assign(P,{shadow:P.boxShadow});var L={filter:{transform:T.filter},blur:E.blur("--chakra-blur"),brightness:E.propT("--chakra-brightness",T.brightness),contrast:E.propT("--chakra-contrast",T.contrast),hueRotate:E.degreeT("--chakra-hue-rotate"),invert:E.propT("--chakra-invert",T.invert),saturate:E.propT("--chakra-saturate",T.saturate),dropShadow:E.propT("--chakra-drop-shadow",T.dropShadow),backdropFilter:{transform:T.backdropFilter},backdropBlur:E.blur("--chakra-backdrop-blur"),backdropBrightness:E.propT("--chakra-backdrop-brightness",T.brightness),backdropContrast:E.propT("--chakra-backdrop-contrast",T.contrast),backdropHueRotate:E.degreeT("--chakra-backdrop-hue-rotate"),backdropInvert:E.propT("--chakra-backdrop-invert",T.invert),backdropSaturate:E.propT("--chakra-backdrop-saturate",T.saturate)},k={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:T.flexDirection},experimental_spaceX:{static:{[v]:{marginInlineStart:"calc(var(--chakra-space-x) * calc(1 - var(--chakra-space-x-reverse)))",marginInlineEnd:"calc(var(--chakra-space-x) * var(--chakra-space-x-reverse))"}},transform:u({scale:"space",transform:e=>null!==e?{"--chakra-space-x":e}:null})},experimental_spaceY:{static:{[v]:{marginTop:"calc(var(--chakra-space-y) * calc(1 - var(--chakra-space-y-reverse)))",marginBottom:"calc(var(--chakra-space-y) * var(--chakra-space-y-reverse))"}},transform:u({scale:"space",transform:e=>null!=e?{"--chakra-space-y":e}:null})},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:E.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:E.space("gap"),rowGap:E.space("rowGap"),columnGap:E.space("columnGap")};Object.assign(k,{flexDir:k.flexDirection});var D={gridGap:E.space("gridGap"),gridColumnGap:E.space("gridColumnGap"),gridRowGap:E.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},I={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:T.outline},outlineOffset:!0,outlineColor:E.colors("outlineColor")},O={width:E.sizesT("width"),inlineSize:E.sizesT("inlineSize"),height:E.sizes("height"),blockSize:E.sizes("blockSize"),boxSize:E.sizes(["width","height"]),minWidth:E.sizes("minWidth"),minInlineSize:E.sizes("minInlineSize"),minHeight:E.sizes("minHeight"),minBlockSize:E.sizes("minBlockSize"),maxWidth:E.sizes("maxWidth"),maxInlineSize:E.sizes("maxInlineSize"),maxHeight:E.sizes("maxHeight"),maxBlockSize:E.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:E.propT("float",T.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(O,{w:O.width,h:O.height,minW:O.minWidth,maxW:O.maxWidth,minH:O.minHeight,maxH:O.maxHeight,overscroll:O.overscrollBehavior,overscrollX:O.overscrollBehaviorX,overscrollY:O.overscrollBehaviorY});var N={listStyleType:!0,listStylePosition:!0,listStylePos:E.prop("listStylePosition"),listStyleImage:!0,listStyleImg:E.prop("listStyleImage")},z=(e=>{let r=new WeakMap,n=(n,i,a,s)=>{if(void 0===n)return e(n,i,a);r.has(n)||r.set(n,new Map);let o=r.get(n);if(o.has(i))return o.get(i);let l=e(n,i,a,s);return o.set(i,l),l};return n})(function(e,r,n,i){let a="string"==typeof r?r.split("."):[r];for(i=0;i<a.length&&e;i+=1)e=e[a[i]];return void 0===e?n:e}),B={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},F={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},U=(e,r,n)=>{let i={},a=z(e,r,{});for(let e in a){let r=e in n&&null!=n[e];r||(i[e]=a[e])}return i},V={position:!0,pos:E.prop("position"),zIndex:E.prop("zIndex","zIndices"),inset:E.spaceT("inset"),insetX:E.spaceT(["left","right"]),insetInline:E.spaceT("insetInline"),insetY:E.spaceT(["top","bottom"]),insetBlock:E.spaceT("insetBlock"),top:E.spaceT("top"),insetBlockStart:E.spaceT("insetBlockStart"),bottom:E.spaceT("bottom"),insetBlockEnd:E.spaceT("insetBlockEnd"),left:E.spaceT("left"),insetInlineStart:E.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:E.spaceT("right"),insetInlineEnd:E.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(V,{insetStart:V.insetInlineStart,insetEnd:V.insetInlineEnd});var j={ring:{transform:T.ring},ringColor:E.colors("--chakra-ring-color"),ringOffset:E.prop("--chakra-ring-offset-width"),ringOffsetColor:E.colors("--chakra-ring-offset-color"),ringInset:E.prop("--chakra-ring-inset")},H={margin:E.spaceT("margin"),marginTop:E.spaceT("marginTop"),marginBlockStart:E.spaceT("marginBlockStart"),marginRight:E.spaceT("marginRight"),marginInlineEnd:E.spaceT("marginInlineEnd"),marginBottom:E.spaceT("marginBottom"),marginBlockEnd:E.spaceT("marginBlockEnd"),marginLeft:E.spaceT("marginLeft"),marginInlineStart:E.spaceT("marginInlineStart"),marginX:E.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:E.spaceT("marginInline"),marginY:E.spaceT(["marginTop","marginBottom"]),marginBlock:E.spaceT("marginBlock"),padding:E.space("padding"),paddingTop:E.space("paddingTop"),paddingBlockStart:E.space("paddingBlockStart"),paddingRight:E.space("paddingRight"),paddingBottom:E.space("paddingBottom"),paddingBlockEnd:E.space("paddingBlockEnd"),paddingLeft:E.space("paddingLeft"),paddingInlineStart:E.space("paddingInlineStart"),paddingInlineEnd:E.space("paddingInlineEnd"),paddingX:E.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:E.space("paddingInline"),paddingY:E.space(["paddingTop","paddingBottom"]),paddingBlock:E.space("paddingBlock")};Object.assign(H,{m:H.margin,mt:H.marginTop,mr:H.marginRight,me:H.marginInlineEnd,marginEnd:H.marginInlineEnd,mb:H.marginBottom,ml:H.marginLeft,ms:H.marginInlineStart,marginStart:H.marginInlineStart,mx:H.marginX,my:H.marginY,p:H.padding,pt:H.paddingTop,py:H.paddingY,px:H.paddingX,pb:H.paddingBottom,pl:H.paddingLeft,ps:H.paddingInlineStart,paddingStart:H.paddingInlineStart,pr:H.paddingRight,pe:H.paddingInlineEnd,paddingEnd:H.paddingInlineEnd});var W={textDecorationColor:E.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:E.shadows("textShadow")},G={clipPath:!0,transform:E.propT("transform",T.transform),transformOrigin:!0,translateX:E.spaceT("--chakra-translate-x"),translateY:E.spaceT("--chakra-translate-y"),skewX:E.degreeT("--chakra-skew-x"),skewY:E.degreeT("--chakra-skew-y"),scaleX:E.prop("--chakra-scale-x"),scaleY:E.prop("--chakra-scale-y"),scale:E.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:E.degreeT("--chakra-rotate")},q={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:E.prop("transitionDuration","transition.duration"),transitionProperty:E.prop("transitionProperty","transition.property"),transitionTimingFunction:E.prop("transitionTimingFunction","transition.easing")},$={fontFamily:E.prop("fontFamily","fonts"),fontSize:E.prop("fontSize","fontSizes",T.px),fontWeight:E.prop("fontWeight","fontWeights"),lineHeight:E.prop("lineHeight","lineHeights"),letterSpacing:E.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(!0===e)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},X={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:E.spaceT("scrollMargin"),scrollMarginTop:E.spaceT("scrollMarginTop"),scrollMarginBottom:E.spaceT("scrollMarginBottom"),scrollMarginLeft:E.spaceT("scrollMarginLeft"),scrollMarginRight:E.spaceT("scrollMarginRight"),scrollMarginX:E.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:E.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:E.spaceT("scrollPadding"),scrollPaddingTop:E.spaceT("scrollPaddingTop"),scrollPaddingBottom:E.spaceT("scrollPaddingBottom"),scrollPaddingLeft:E.spaceT("scrollPaddingLeft"),scrollPaddingRight:E.spaceT("scrollPaddingRight"),scrollPaddingX:E.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:E.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function Y(e){return(0,i.Kn)(e)&&e.reference?e.reference:String(e)}var Z=(e,...r)=>r.map(Y).join(` ${e} `).replace(/calc/g,""),J=(...e)=>`calc(${Z("+",...e)})`,K=(...e)=>`calc(${Z("-",...e)})`,Q=(...e)=>`calc(${Z("*",...e)})`,ee=(...e)=>`calc(${Z("/",...e)})`,et=e=>{let r=Y(e);return null==r||Number.isNaN(parseFloat(r))?Q(r,-1):String(r).startsWith("-")?String(r).slice(1):`-${r}`},er=Object.assign(e=>({add:(...r)=>er(J(e,...r)),subtract:(...r)=>er(K(e,...r)),multiply:(...r)=>er(Q(e,...r)),divide:(...r)=>er(ee(e,...r)),negate:()=>er(et(e)),toString:()=>e.toString()}),{add:J,subtract:K,multiply:Q,divide:ee,negate:et});function en(e,r,n){let i=function(e,r=""){return function(e){let r=function(e,r="-"){return e.replace(/\s+/g,r)}(e.toString());return(function(e){if(e.includes("\\."))return e;let r=!Number.isInteger(parseFloat(e.toString()));return r?e.replace(".","\\."):e})(r).replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}(`--${function(e,r=""){return[r,e].filter(Boolean).join("-")}(e,r)}`)}(e,n);return{variable:i,reference:`var(${i}${r?`, ${r}`:""})`}}function ei(e){if(null==e)return e;let{unitless:r}=function(e){let r=parseFloat(e.toString()),n=e.toString().replace(String(r),"");return{unitless:!n,value:r,unit:n}}(e);return r||"number"==typeof e?`${e}px`:e}var ea=(e,r)=>parseInt(e[1],10)>parseInt(r[1],10)?1:-1,es=e=>Object.fromEntries(Object.entries(e).sort(ea));function eo(e){let r=es(e);return Object.assign(Object.values(r),r)}function el(e){var r;return e?"number"==typeof(e=null!=(r=ei(e))?r:e)?`${e+-.02}`:e.replace(/(\d+\.?\d*)/u,e=>`${parseFloat(e)+-.02}`):e}function eu(e,r){let n=["@media screen"];return e&&n.push("and",`(min-width: ${ei(e)})`),r&&n.push("and",`(max-width: ${ei(r)})`),n.join(" ")}var ec={hover:(e,r)=>`${e}:hover ${r}, ${e}[data-hover] ${r}`,focus:(e,r)=>`${e}:focus ${r}, ${e}[data-focus] ${r}`,focusVisible:(e,r)=>`${e}:focus-visible ${r}`,focusWithin:(e,r)=>`${e}:focus-within ${r}`,active:(e,r)=>`${e}:active ${r}, ${e}[data-active] ${r}`,disabled:(e,r)=>`${e}:disabled ${r}, ${e}[data-disabled] ${r}`,invalid:(e,r)=>`${e}:invalid ${r}, ${e}[data-invalid] ${r}`,checked:(e,r)=>`${e}:checked ${r}, ${e}[data-checked] ${r}`,indeterminate:(e,r)=>`${e}:indeterminate ${r}, ${e}[aria-checked=mixed] ${r}, ${e}[data-indeterminate] ${r}`,readOnly:(e,r)=>`${e}:read-only ${r}, ${e}[readonly] ${r}, ${e}[data-read-only] ${r}`,expanded:(e,r)=>`${e}:read-only ${r}, ${e}[aria-expanded=true] ${r}, ${e}[data-expanded] ${r}`,placeholderShown:(e,r)=>`${e}:placeholder-shown ${r}`},eh=e=>ep(r=>e(r,"&"),"[role=group]","[data-group]",".group"),ed=e=>ep(r=>e(r,"~ &"),"[data-peer]",".peer"),ep=(e,...r)=>r.map(e).join(", "),ef={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:eh(ec.hover),_peerHover:ed(ec.hover),_groupFocus:eh(ec.focus),_peerFocus:ed(ec.focus),_groupFocusVisible:eh(ec.focusVisible),_peerFocusVisible:ed(ec.focusVisible),_groupActive:eh(ec.active),_peerActive:ed(ec.active),_groupDisabled:eh(ec.disabled),_peerDisabled:ed(ec.disabled),_groupInvalid:eh(ec.invalid),_peerInvalid:ed(ec.invalid),_groupChecked:eh(ec.checked),_peerChecked:ed(ec.checked),_groupFocusWithin:eh(ec.focusWithin),_peerFocusWithin:ed(ec.focusWithin),_peerPlaceholderShown:ed(ec.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]"},em=Object.keys(ef);function eg(e,r){return en(String(e).replace(/\./g,"-"),void 0,r)}var ev=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur"];function ey(e,r=1/0){return((0,i.Kn)(e)||Array.isArray(e))&&r?Object.entries(e).reduce((e,[n,a])=>((0,i.Kn)(a)||Array.isArray(a)?Object.entries(ey(a,r-1)).forEach(([r,i])=>{e[`${n}.${r}`]=i}):e[n]=a,e),{}):e}function ex(e){var r;let n=function(e){let{__cssMap:r,__cssVars:n,__breakpoints:i,...a}=e;return a}(e),s=function(e,r){let n={};for(let i of r)i in e&&(n[i]=e[i]);return n}(n,ev),o=n.semanticTokens,l=function({tokens:e,semanticTokens:r}){var n,i;let a=Object.entries(null!=(n=ey(e))?n:{}).map(([e,r])=>[e,{isSemantic:!1,value:r}]),s=Object.entries(null!=(i=ey(r,1))?i:{}).map(([e,r])=>[e,{isSemantic:!0,value:r}]);return Object.fromEntries([...a,...s])}({tokens:s,semanticTokens:o}),u=null==(r=n.config)?void 0:r.cssVarPrefix,{cssMap:c,cssVars:h}=function(e,r){let n={},s={};for(let[o,l]of Object.entries(e)){let{isSemantic:u,value:c}=l,{variable:h,reference:d}=eg(o,null==r?void 0:r.cssVarPrefix);if(!u){if(o.startsWith("space")){let e=o.split("."),[r,...n]=e,i=`${r}.-${n.join(".")}`,a=er.negate(c),l=er.negate(d);s[i]={value:a,var:h,varRef:l}}n[h]=c,s[o]={value:c,var:h,varRef:d};continue}let p=n=>{let i=String(o).split(".")[0],a=[i,n].join("."),s=e[a];if(!s)return n;let{reference:l}=eg(a,null==r?void 0:r.cssVarPrefix);return l},f=(0,i.Kn)(c)?c:{default:c};n=a(n,Object.entries(f).reduce((e,[r,n])=>{var i;let a=p(n);if("default"===r)return e[h]=a,e;let s=null!=(i=null==ef?void 0:ef[r])?i:r;return e[s]={[h]:a},e},{})),s[o]={value:d,var:h,varRef:d}}return{cssVars:n,cssMap:s}}(l,{cssVarPrefix:u});return Object.assign(n,{__cssVars:{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0",...h},__cssMap:c,__breakpoints:function(e){var r;if(!e)return null;e.base=null!=(r=e.base)?r:"0px";let n=eo(e),a=Object.entries(e).sort(ea).map(([e,r],n,i)=>{var a;let[,s]=null!=(a=i[n+1])?a:[];return s=parseFloat(s)>0?el(s):void 0,{_minW:el(r),breakpoint:e,minW:r,maxW:s,maxWQuery:eu(null,s),minWQuery:eu(r),minMaxQuery:eu(r,s)}}),s=function(e){let r=Object.keys(es(e));return new Set(r)}(e),o=Array.from(s.values());return{keys:s,normalized:n,isResponsive(e){let r=Object.keys(e);return r.length>0&&r.every(e=>s.has(e))},asObject:es(e),asArray:eo(e),details:a,media:[null,...n.map(e=>eu(e)).slice(1)],toArrayValue(e){if(!(0,i.Kn)(e))throw Error("toArrayValue: value must be an object");let r=o.map(r=>{var n;return null!=(n=e[r])?n:null});for(;null===function(e){let r=null==e?0:e.length;return r?e[r-1]:void 0}(r);)r.pop();return r},toObjectValue(e){if(!Array.isArray(e))throw Error("toObjectValue: value must be an array");return e.reduce((e,r,n)=>{let i=o[n];return null!=i&&null!=r&&(e[i]=r),e},{})}}}(n.breakpoints)}),n}var eb=a({},A,C,R,k,O,L,j,I,D,{srOnly:{transform:e=>!0===e?B:"focusable"===e?F:{}},layerStyle:{processResult:!0,transform:(e,r,n)=>U(r,`layerStyles.${e}`,n)},textStyle:{processResult:!0,transform:(e,r,n)=>U(r,`textStyles.${e}`,n)},apply:{processResult:!0,transform:(e,r,n)=>U(r,e,n)}},V,P,H,X,$,W,G,N,q),e_=Object.keys(Object.assign({},H,O,k,D,V)),eS=[...Object.keys(eb),...em],ew={...eb,...ef},eM=e=>e in ew,eT=e=>r=>{if(!r.__breakpoints)return e;let{isResponsive:n,toArrayValue:a,media:s}=r.__breakpoints,o={};for(let l in e){let u=(0,i.Pu)(e[l],r);if(null==u)continue;if(!Array.isArray(u=(0,i.Kn)(u)&&n(u)?a(u):u)){o[l]=u;continue}let c=u.slice(0,s.length).length;for(let e=0;e<c;e+=1){let r=null==s?void 0:s[e];if(!r){o[l]=u[e];continue}o[r]=o[r]||{},null!=u[e]&&(o[r][l]=u[e])}}return o},eE=(e,r)=>e.startsWith("--")&&"string"==typeof r&&!/^var\(--.+\)$/.test(r),eA=(e,r)=>{var n,i;if(null==r)return r;let a=r=>{var n,i;return null==(i=null==(n=e.__cssMap)?void 0:n[r])?void 0:i.varRef},s=e=>{var r;return null!=(r=a(e))?r:e},[o,l]=function(e){let r=[],n="",i=!1;for(let a=0;a<e.length;a++){let s=e[a];"("===s?(i=!0,n+=s):")"===s?(i=!1,n+=s):","!==s||i?n+=s:(r.push(n),n="")}return(n=n.trim())&&r.push(n),r}(r);return r=null!=(i=null!=(n=a(o))?n:s(l))?i:s(r)},eC=e=>r=>{let n=function(e){let{configs:r={},pseudos:n={},theme:s}=e,o=(e,l=!1)=>{var u,c,h;let d=(0,i.Pu)(e,s),p=eT(d)(s),f={};for(let e in p){let m=p[e],g=(0,i.Pu)(m,s);e in n&&(e=n[e]),eE(e,g)&&(g=eA(s,g));let v=r[e];if(!0===v&&(v={property:e}),(0,i.Kn)(g)){f[e]=null!=(u=f[e])?u:{},f[e]=a({},f[e],o(g,!0));continue}let y=null!=(h=null==(c=null==v?void 0:v.transform)?void 0:c.call(v,g,s,d))?h:g;y=(null==v?void 0:v.processResult)?o(y,!0):y;let x=(0,i.Pu)(null==v?void 0:v.property,s);if(!l&&(null==v?void 0:v.static)){let e=(0,i.Pu)(v.static,s);f=a({},f,e)}if(x&&Array.isArray(x)){for(let e of x)f[e]=y;continue}if(x){"&"===x&&(0,i.Kn)(y)?f=a({},f,y):f[x]=y;continue}if((0,i.Kn)(y)){f=a({},f,y);continue}f[e]=y}return f};return o}({theme:r,pseudos:ef,configs:eb});return n(e)};function eR(e){return e}function eP(e){return e}function eL(e){return{definePartsStyle:e=>e,defineMultiStyleConfig:r=>({parts:e,...r})}}function ek(e){return r=>{var n;let{variant:s,size:o,theme:l}=r,u=function(e){let r=e.__breakpoints;return function(e,n,s,o){var l,u,c;if(!r)return;let h={},d=(c=r.toArrayValue,Array.isArray(s)?s:(0,i.Kn)(s)?c(s):null!=s?[s]:void 0);if(!d)return h;let p=d.length,f=1===p,m=!!e.parts;for(let s=0;s<p;s++){let c=r.details[s],p=r.details[function(e,r){for(let n=r+1;n<e.length;n++)if(null!=e[n])return n;return -1}(d,s)],g=eu(c.minW,null==p?void 0:p._minW),v=(0,i.Pu)(null==(l=e[n])?void 0:l[d[s]],o);if(v){if(m){null==(u=e.parts)||u.forEach(e=>{a(h,{[e]:f?v[e]:{[g]:v[e]}})});continue}if(!m){f?a(h,v):h[g]=v;continue}h[g]=v}}return h}}(l);return a({},(0,i.Pu)(null!=(n=e.baseStyle)?n:{},r),u(e,"sizes",o,r),u(e,"variants",s,r))}}function eD(e){return function(e,r=[]){let n=Object.assign({},e);for(let e of r)e in n&&delete n[e];return n}(e,["styleConfig","size","variant","colorScheme"])}},4579:function(e,r,n){"use strict";n.d(r,{m:function(){return g}});var i,a=n(4920),s=n(2498),o=n(3179),l=n(1759),u=n(6597),c=n(888),h=n(6829),d=n(7294),p=null!=(i=h.Z.default)?i:h.Z,f=({baseStyle:e})=>r=>{let{theme:n,css:i,__css:a,sx:s,...h}=r,d=(0,l.lw)(h,(e,r)=>(0,o.ZR)(r)),p=(0,u.Pu)(e,r),f=(0,c.V8)({},a,p,(0,l.YU)(d),s),m=(0,o.iv)(f)(r.theme);return i?[m,i]:m};function m(e,r){let{baseStyle:n,...i}=null!=r?r:{};i.shouldForwardProp||(i.shouldForwardProp=a.x);let o=f({baseStyle:n}),l=p(e,i)(o),u=d.forwardRef(function(e,r){let{colorMode:n,forced:i}=(0,s.If)();return d.createElement(l,{ref:r,"data-theme":i?n:void 0,...e})});return u}var g=function(){let e=new Map;return new Proxy(m,{apply:(e,r,n)=>m(...n),get:(r,n)=>(e.has(n)||e.set(n,m(n)),e.get(n))})}()},4629:function(e,r,n){"use strict";n.d(r,{LP:function(){return o},uP:function(){return s}});var i=n(5119),a=n(2498);function s(){let e=(0,a.If)(),r=(0,i.F)();return{...e,theme:r}}function o(e,r,n){let i=Array.isArray(r)?r:[r],a=Array.isArray(n)?n:[n];return n=>{let s=a.filter(Boolean),o=i.map((r,i)=>{var a,o;if("breakpoints"===e)return function(e,r,n){var i,a;if(null==r)return r;let s=r=>{var n,i;return null==(i=null==(n=e.__breakpoints)?void 0:n.asArray)?void 0:i[r]};return null!=(a=null!=(i=s(r))?i:s(n))?a:n}(n,r,null!=(a=s[i])?a:r);let l=`${e}.${r}`;return function(e,r,n){var i,a;if(null==r)return r;let s=r=>{var n,i;return null==(i=null==(n=e.__cssMap)?void 0:n[r])?void 0:i.value};return null!=(a=null!=(i=s(r))?i:s(n))?a:n}(n,l,null!=(o=s[i])?o:r)});return Array.isArray(r)?o:o[0]}}},4920:function(e,r,n){"use strict";n.d(r,{x:function(){return o}});var i=n(3179),a=new Set([...i.cC,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),s=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function o(e){return s.has(e)||!a.has(e)}},5119:function(e,r,n){"use strict";n.d(r,{F:function(){return s}});var i=n(1683),a=n(7294);function s(){let e=(0,a.useContext)(i.T);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}},5059:function(e,r,n){"use strict";n.d(r,{G:function(){return a}});var i=n(7294);function a(e){return(0,i.forwardRef)(e)}},1639:function(e,r,n){"use strict";n.d(r,{jC:function(){return d},mq:function(){return h}});var i=n(4629),a=n(3179),s=n(1759),o=n(8554),l=n(7294),u=n(9590);function c(e,r={}){var n;let{styleConfig:c,...h}=r,{theme:d,colorMode:p}=(0,i.uP)(),f=e?(0,s.Wf)(d,`components.${e}`):void 0,m=c||f,g=o({theme:d,colorMode:p},null!=(n=null==m?void 0:m.defaultProps)?n:{},(0,s.YU)((0,s.CE)(h,["children"]))),v=(0,l.useRef)({});if(m){let e=(0,a.Ud)(m),r=e(g),n=u(v.current,r);n||(v.current=r)}return v.current}function h(e,r={}){return c(e,r)}function d(e,r={}){return c(e,r)}},6597:function(e,r,n){"use strict";function i(e,...r){return"function"==typeof e?e(...r):e}n.d(r,{Pu:function(){return i}})},1759:function(e,r,n){"use strict";function i(e,r){let n={};return Object.keys(e).forEach(i=>{r.includes(i)||(n[i]=e[i])}),n}n.d(r,{CE:function(){return i},Wf:function(){return a},YU:function(){return o},lw:function(){return s}}),n(8554);var a=(e=>{let r=new WeakMap,n=(n,i,a,s)=>{if(void 0===n)return e(n,i,a);r.has(n)||r.set(n,new Map);let o=r.get(n);if(o.has(i))return o.get(i);let l=e(n,i,a,s);return o.set(i,l),l};return n})(function(e,r,n,i){let a="string"==typeof r?r.split("."):[r];for(i=0;i<a.length&&e;i+=1)e=e[a[i]];return void 0===e?n:e});function s(e,r){let n={};return Object.keys(e).forEach(i=>{let a=e[i],s=r(a,i,e);s&&(n[i]=a)}),n}var o=e=>s(e,e=>null!=e)},7297:function(e,r,n){"use strict";function i(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}n.d(r,{Z:function(){return i}})},5820:function(e,r,n){"use strict";n.d(r,{M:function(){return v}});var i=n(7294),a=n(404),s=n(8868);function o(){let e=(0,i.useRef)(!1);return(0,s.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var l=n(240),u=n(6681);class c extends i.Component{getSnapshotBeforeUpdate(e){let r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=r.offsetHeight||0,e.width=r.offsetWidth||0,e.top=r.offsetTop,e.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:r}){let n=(0,i.useId)(),a=(0,i.useRef)(null),s=(0,i.useRef)({width:0,height:0,top:0,left:0});return(0,i.useInsertionEffect)(()=>{let{width:e,height:i,top:o,left:l}=s.current;if(r||!a.current||!e||!i)return;a.current.dataset.motionPopId=n;let u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${i}px !important;
            top: ${o}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[r]),i.createElement(c,{isPresent:r,childRef:a,sizeRef:s},i.cloneElement(e,{ref:a}))}let d=({children:e,initial:r,isPresent:n,onExitComplete:a,custom:s,presenceAffectsLayout:o,mode:c})=>{let d=(0,u.h)(p),f=(0,i.useId)(),m=(0,i.useMemo)(()=>({id:f,initial:r,isPresent:n,custom:s,onExitComplete:e=>{for(let r of(d.set(e,!0),d.values()))if(!r)return;a&&a()},register:e=>(d.set(e,!1),()=>d.delete(e))}),o?void 0:[n]);return(0,i.useMemo)(()=>{d.forEach((e,r)=>d.set(r,!1))},[n]),i.useEffect(()=>{n||d.size||!a||a()},[n]),"popLayout"===c&&(e=i.createElement(h,{isPresent:n},e)),i.createElement(l.O.Provider,{value:m},e)};function p(){return new Map}var f=n(5364),m=n(5411);let g=e=>e.key||"",v=({children:e,custom:r,initial:n=!0,onExitComplete:l,exitBeforeEnter:u,presenceAffectsLayout:c=!0,mode:h="sync"})=>{u&&(h="wait");let[p]=function(){let e=o(),[r,n]=(0,i.useState)(0),s=(0,i.useCallback)(()=>{e.current&&n(r+1)},[r]),l=(0,i.useCallback)(()=>a.Z_.postRender(s),[s]);return[l,r]}(),v=(0,i.useContext)(f.p).forceRender;v&&(p=v);let y=o(),x=function(e){let r=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&r.push(e)}),r}(e),b=x,_=new Set,S=(0,i.useRef)(b),w=(0,i.useRef)(new Map).current,M=(0,i.useRef)(!0);if((0,s.L)(()=>{M.current=!1,function(e,r){e.forEach(e=>{let n=g(e);r.set(n,e)})}(x,w),S.current=b}),(0,m.z)(()=>{M.current=!0,w.clear(),_.clear()}),M.current)return i.createElement(i.Fragment,null,b.map(e=>i.createElement(d,{key:g(e),isPresent:!0,initial:!!n&&void 0,presenceAffectsLayout:c,mode:h},e)));b=[...b];let T=S.current.map(g),E=x.map(g),A=T.length;for(let e=0;e<A;e++){let r=T[e];-1===E.indexOf(r)&&_.add(r)}return"wait"===h&&_.size&&(b=[]),_.forEach(e=>{if(-1!==E.indexOf(e))return;let n=w.get(e);if(!n)return;let a=T.indexOf(e),s=()=>{w.delete(e),_.delete(e);let r=S.current.findIndex(r=>r.key===e);if(S.current.splice(r,1),!_.size){if(S.current=x,!1===y.current)return;p(),l&&l()}};b.splice(a,0,i.createElement(d,{key:g(n),isPresent:!1,onExitComplete:s,custom:r,presenceAffectsLayout:c,mode:h},n))}),b=b.map(e=>{let r=e.key;return _.has(r)?e:i.createElement(d,{key:g(e),isPresent:!0,presenceAffectsLayout:c,mode:h},e)}),i.createElement(i.Fragment,null,_.size?b:b.map(e=>(0,i.cloneElement)(e)))}},5947:function(e,r,n){"use strict";n.d(r,{hO:function(){return o},oO:function(){return s}});var i=n(7294),a=n(240);function s(){let e=(0,i.useContext)(a.O);if(null===e)return[!0,null];let{isPresent:r,onExitComplete:n,register:s}=e,o=(0,i.useId)();(0,i.useEffect)(()=>s(o),[]);let l=()=>n&&n(o);return!r&&n?[!1,l]:[!0]}function o(){var e;return null===(e=(0,i.useContext)(a.O))||e.isPresent}},5364:function(e,r,n){"use strict";n.d(r,{p:function(){return a}});var i=n(7294);let a=(0,i.createContext)({})},240:function(e,r,n){"use strict";n.d(r,{O:function(){return a}});var i=n(7294);let a=(0,i.createContext)(null)},7367:function(e,r,n){"use strict";n.d(r,{w:function(){return i}});let i={delta:0,timestamp:0}},404:function(e,r,n){"use strict";n.d(r,{qY:function(){return f},iW:function(){return m},Z_:function(){return p}});let i=1/60*1e3,a="undefined"!=typeof performance?()=>performance.now():()=>Date.now(),s="undefined"!=typeof window?e=>window.requestAnimationFrame(e):e=>setTimeout(()=>e(a()),i);var o=n(7367);let l=!0,u=!1,c=!1,h=["read","update","preRender","render","postRender"],d=h.reduce((e,r)=>(e[r]=function(e){let r=[],n=[],i=0,a=!1,s=!1,o=new WeakSet,l={schedule:(e,s=!1,l=!1)=>{let u=l&&a,c=u?r:n;return s&&o.add(e),-1===c.indexOf(e)&&(c.push(e),u&&a&&(i=r.length)),e},cancel:e=>{let r=n.indexOf(e);-1!==r&&n.splice(r,1),o.delete(e)},process:u=>{if(a){s=!0;return}if(a=!0,[r,n]=[n,r],n.length=0,i=r.length)for(let n=0;n<i;n++){let i=r[n];i(u),o.has(i)&&(l.schedule(i),e())}a=!1,s&&(s=!1,l.process(u))}};return l}(()=>u=!0),e),{}),p=h.reduce((e,r)=>{let n=d[r];return e[r]=(e,r=!1,i=!1)=>(u||y(),n.schedule(e,r,i)),e},{}),f=h.reduce((e,r)=>(e[r]=d[r].cancel,e),{}),m=h.reduce((e,r)=>(e[r]=()=>d[r].process(o.w),e),{}),g=e=>d[e].process(o.w),v=e=>{u=!1,o.w.delta=l?i:Math.max(Math.min(e-o.w.timestamp,40),1),o.w.timestamp=e,c=!0,h.forEach(g),c=!1,u&&(l=!1,s(v))},y=()=>{u=!0,l=!0,c||s(v)}},1615:function(e,r,n){"use strict";n.d(r,{E:function(){return iG}});var i,a,s,o,l,u=n(7294);let c=(0,u.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),h=(0,u.createContext)({});var d=n(240),p=n(8868);let f=(0,u.createContext)({strict:!1});function m(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function g(e){return"string"==typeof e||Array.isArray(e)}function v(e){return"object"==typeof e&&"function"==typeof e.start}let y=["initial","animate","exit","whileHover","whileDrag","whileTap","whileFocus","whileInView"];function x(e){return v(e.animate)||y.some(r=>g(e[r]))}function b(e){return Boolean(x(e)||e.variants)}function _(e){return Array.isArray(e)?e.join(" "):e}let S=e=>({isEnabled:r=>e.some(e=>!!r[e])}),w={measureLayout:S(["layout","layoutId","drag"]),animation:S(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:S(["exit"]),drag:S(["drag","dragControls"]),focus:S(["whileFocus"]),hover:S(["whileHover","onHoverStart","onHoverEnd"]),tap:S(["whileTap","onTap","onTapStart","onTapCancel"]),pan:S(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:S(["whileInView","onViewportEnter","onViewportLeave"])};var M=n(1741),T=n(6681);let E={hasAnimatedSinceResize:!0,hasEverUpdated:!1},A=1;var C=n(5364);class R extends u.Component{getSnapshotBeforeUpdate(){let{visualElement:e,props:r}=this.props;return e&&e.setProps(r),null}componentDidUpdate(){}render(){return this.props.children}}let P=(0,u.createContext)({}),L=Symbol.for("motionComponentSymbol"),k=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function D(e){if("string"!=typeof e||e.includes("-"));else if(k.indexOf(e)>-1||/[A-Z]/.test(e))return!0;return!1}let I={},O=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],N=new Set(O);function z(e,{layout:r,layoutId:n}){return N.has(e)||e.startsWith("origin")||(r||void 0!==n)&&(!!I[e]||"opacity"===e)}let B=e=>!!(null==e?void 0:e.getVelocity),F={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},U=(e,r)=>O.indexOf(e)-O.indexOf(r);function V(e){return e.startsWith("--")}let j=(e,r)=>r&&"number"==typeof e?r.transform(e):e,H=(e,r,n)=>Math.min(Math.max(n,e),r),W={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},G={...W,transform:e=>H(0,1,e)},q={...W,default:1},$=e=>Math.round(1e5*e)/1e5,X=/(-)?([\d]*\.?[\d])+/g,Y=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Z=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function J(e){return"string"==typeof e}let K=e=>({test:r=>J(r)&&r.endsWith(e)&&1===r.split(" ").length,parse:parseFloat,transform:r=>`${r}${e}`}),Q=K("deg"),ee=K("%"),et=K("px"),er=K("vh"),en=K("vw"),ei={...ee,parse:e=>ee.parse(e)/100,transform:e=>ee.transform(100*e)},ea={...W,transform:Math.round},es={borderWidth:et,borderTopWidth:et,borderRightWidth:et,borderBottomWidth:et,borderLeftWidth:et,borderRadius:et,radius:et,borderTopLeftRadius:et,borderTopRightRadius:et,borderBottomRightRadius:et,borderBottomLeftRadius:et,width:et,maxWidth:et,height:et,maxHeight:et,size:et,top:et,right:et,bottom:et,left:et,padding:et,paddingTop:et,paddingRight:et,paddingBottom:et,paddingLeft:et,margin:et,marginTop:et,marginRight:et,marginBottom:et,marginLeft:et,rotate:Q,rotateX:Q,rotateY:Q,rotateZ:Q,scale:q,scaleX:q,scaleY:q,scaleZ:q,skew:Q,skewX:Q,skewY:Q,distance:et,translateX:et,translateY:et,translateZ:et,x:et,y:et,z:et,perspective:et,transformPerspective:et,opacity:G,originX:ei,originY:ei,originZ:et,zIndex:ea,fillOpacity:G,strokeOpacity:G,numOctaves:ea};function eo(e,r,n,i){let{style:a,vars:s,transform:o,transformKeys:l,transformOrigin:u}=e;l.length=0;let c=!1,h=!1,d=!0;for(let e in r){let n=r[e];if(V(e)){s[e]=n;continue}let i=es[e],p=j(n,i);if(N.has(e)){if(c=!0,o[e]=p,l.push(e),!d)continue;n!==(i.default||0)&&(d=!1)}else e.startsWith("origin")?(h=!0,u[e]=p):a[e]=p}if(!r.transform&&(c||i?a.transform=function({transform:e,transformKeys:r},{enableHardwareAcceleration:n=!0,allowTransformNone:i=!0},a,s){let o="";for(let n of(r.sort(U),r))o+=`${F[n]||n}(${e[n]}) `;return n&&!e.z&&(o+="translateZ(0)"),o=o.trim(),s?o=s(e,a?"":o):i&&a&&(o="none"),o}(e,n,d,i):a.transform&&(a.transform="none")),h){let{originX:e="50%",originY:r="50%",originZ:n=0}=u;a.transformOrigin=`${e} ${r} ${n}`}}let el=()=>({style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}});function eu(e,r,n){for(let i in r)B(r[i])||z(i,n)||(e[i]=r[i])}function ec(e,r,n){let i={},a=function(e,r,n){let i=e.style||{},a={};return eu(a,i,e),Object.assign(a,function({transformTemplate:e},r,n){return(0,u.useMemo)(()=>{let i=el();return eo(i,r,{enableHardwareAcceleration:!n},e),Object.assign({},i.vars,i.style)},[r])}(e,r,n)),e.transformValues?e.transformValues(a):a}(e,r,n);return e.drag&&!1!==e.dragListener&&(i.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),i.style=a,i}let eh=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","viewport"]);function ed(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||eh.has(e)}let ep=e=>!ed(e);try{(i=require("@emotion/is-prop-valid").default)&&(ep=e=>e.startsWith("on")?!ed(e):i(e))}catch(e){}function ef(e,r,n){return"string"==typeof e?e:et.transform(r+n*e)}let em={offset:"stroke-dashoffset",array:"stroke-dasharray"},eg={offset:"strokeDashoffset",array:"strokeDasharray"};function ev(e,{attrX:r,attrY:n,originX:i,originY:a,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},c,h,d){if(eo(e,u,c,d),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:p,style:f,dimensions:m}=e;p.transform&&(m&&(f.transform=p.transform),delete p.transform),m&&(void 0!==i||void 0!==a||f.transform)&&(f.transformOrigin=function(e,r,n){let i=ef(r,e.x,e.width),a=ef(n,e.y,e.height);return`${i} ${a}`}(m,void 0!==i?i:.5,void 0!==a?a:.5)),void 0!==r&&(p.x=r),void 0!==n&&(p.y=n),void 0!==s&&function(e,r,n=1,i=0,a=!0){e.pathLength=1;let s=a?em:eg;e[s.offset]=et.transform(-i);let o=et.transform(r),l=et.transform(n);e[s.array]=`${o} ${l}`}(p,s,o,l,!1)}let ey=()=>({...el(),attrs:{}}),ex=e=>"string"==typeof e&&"svg"===e.toLowerCase();function eb(e,r,n,i){let a=(0,u.useMemo)(()=>{let n=ey();return ev(n,r,{enableHardwareAcceleration:!1},ex(i),e.transformTemplate),{...n.attrs,style:{...n.style}}},[r]);if(e.style){let r={};eu(r,e.style,e),a.style={...r,...a.style}}return a}let e_=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function eS(e,{style:r,vars:n},i,a){for(let s in Object.assign(e.style,r,a&&a.getProjectionStyles(i)),n)e.style.setProperty(s,n[s])}let ew=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function eM(e,r,n,i){for(let n in eS(e,r,void 0,i),r.attrs)e.setAttribute(ew.has(n)?n:e_(n),r.attrs[n])}function eT(e,r){let{style:n}=e,i={};for(let a in n)(B(n[a])||r.style&&B(r.style[a])||z(a,e))&&(i[a]=n[a]);return i}function eE(e,r){let n=eT(e,r);for(let i in e)if(B(e[i])||B(r[i])){let r="x"===i||"y"===i?"attr"+i.toUpperCase():i;n[r]=e[i]}return n}function eA(e,r,n,i={},a={}){return"function"==typeof r&&(r=r(void 0!==n?n:e.custom,i,a)),"string"==typeof r&&(r=e.variants&&e.variants[r]),"function"==typeof r&&(r=r(void 0!==n?n:e.custom,i,a)),r}let eC=e=>Array.isArray(e),eR=e=>Boolean(e&&"object"==typeof e&&e.mix&&e.toValue),eP=e=>eC(e)?e[e.length-1]||0:e;function eL(e){let r=B(e)?e.get():e;return eR(r)?r.toValue():r}let ek=e=>(r,n)=>{let i=(0,u.useContext)(h),a=(0,u.useContext)(d.O),s=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:r,onMount:n},i,a,s){let o={latestValues:function(e,r,n,i){let a={},s=i(e,{});for(let e in s)a[e]=eL(s[e]);let{initial:o,animate:l}=e,u=x(e),c=b(e);r&&c&&!u&&!1!==e.inherit&&(void 0===o&&(o=r.initial),void 0===l&&(l=r.animate));let h=!!n&&!1===n.initial;h=h||!1===o;let d=h?l:o;if(d&&"boolean"!=typeof d&&!v(d)){let r=Array.isArray(d)?d:[d];r.forEach(r=>{let n=eA(e,r);if(!n)return;let{transitionEnd:i,transition:s,...o}=n;for(let e in o){let r=o[e];if(Array.isArray(r)){let e=h?r.length-1:0;r=r[e]}null!==r&&(a[e]=r)}for(let e in i)a[e]=i[e]})}return a}(i,a,s,e),renderState:r()};return n&&(o.mount=e=>n(i,e,o)),o})(e,r,i,a);return n?s():(0,T.h)(s)},eD={useVisualState:ek({scrapeMotionValuesFromProps:eE,createRenderState:ey,onMount:(e,r,{renderState:n,latestValues:i})=>{try{n.dimensions="function"==typeof r.getBBox?r.getBBox():r.getBoundingClientRect()}catch(e){n.dimensions={x:0,y:0,width:0,height:0}}ev(n,i,{enableHardwareAcceleration:!1},ex(r.tagName),e.transformTemplate),eM(r,n)}})},eI={useVisualState:ek({scrapeMotionValuesFromProps:eT,createRenderState:el})};function eO(e,r,n,i={passive:!0}){return e.addEventListener(r,n,i),()=>e.removeEventListener(r,n)}function eN(e,r,n,i){(0,u.useEffect)(()=>{let a=e.current;if(n&&a)return eO(a,r,n,i)},[e,r,n,i])}(a=o||(o={})).Animate="animate",a.Hover="whileHover",a.Tap="whileTap",a.Drag="whileDrag",a.Focus="whileFocus",a.InView="whileInView",a.Exit="exit";let ez=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function eB(e,r="page"){return{point:{x:e[r+"X"],y:e[r+"Y"]}}}let eF=e=>r=>ez(r)&&e(r,eB(r));function eU(e,r,n,i){return eO(e,r,eF(n),i)}function eV(e,r,n,i){return eN(e,r,n&&eF(n),i)}function ej(e){let r=null;return()=>{let n=()=>{r=null};return null===r&&(r=e,n)}}let eH=ej("dragHorizontal"),eW=ej("dragVertical");function eG(e){let r=!1;if("y"===e)r=eW();else if("x"===e)r=eH();else{let e=eH(),n=eW();e&&n?r=()=>{e(),n()}:(e&&e(),n&&n())}return r}function eq(){let e=eG(!0);return!e||(e(),!1)}function e$(e,r,n,i){return(a,s)=>{!("touch"===a.type||eq())&&(n&&e.animationState&&e.animationState.setActive(o.Hover,r),i&&i(a,s))}}let eX=(e,r)=>!!r&&(e===r||eX(e,r.parentElement));var eY=n(5411);let eZ=(e,r)=>n=>r(e(n)),eJ=(...e)=>e.reduce(eZ),eK=new WeakMap,eQ=new WeakMap,e0=e=>{let r=eK.get(e.target);r&&r(e)},e1=e=>{e.forEach(e0)},e2={some:0,all:1};function e3(e,r,n,{root:i,margin:a,amount:s="some",once:l}){(0,u.useEffect)(()=>{if(!e||!n.current)return;let u={root:null==i?void 0:i.current,rootMargin:a,threshold:"number"==typeof s?s:e2[s]},c=e=>{let{isIntersecting:i}=e;if(r.isInView===i||(r.isInView=i,l&&!i&&r.hasEnteredView))return;i&&(r.hasEnteredView=!0),n.animationState&&n.animationState.setActive(o.InView,i);let a=n.getProps(),s=i?a.onViewportEnter:a.onViewportLeave;s&&s(e)};return function(e,r,n){let i=function({root:e,...r}){let n=e||document;eQ.has(n)||eQ.set(n,{});let i=eQ.get(n),a=JSON.stringify(r);return i[a]||(i[a]=new IntersectionObserver(e1,{root:e,...r})),i[a]}(r);return eK.set(e,n),i.observe(e),()=>{eK.delete(e),i.unobserve(e)}}(n.current,u,c)},[e,i,a,s])}function e5(e,r,n,{fallback:i=!0}){(0,u.useEffect)(()=>{e&&i&&requestAnimationFrame(()=>{r.hasEnteredView=!0;let{onViewportEnter:e}=n.getProps();e&&e(null),n.animationState&&n.animationState.setActive(o.InView,!0)})},[e])}let e4=e=>r=>(e(r),null),e6={inView:e4(function({visualElement:e,whileInView:r,onViewportEnter:n,onViewportLeave:i,viewport:a={}}){let s=(0,u.useRef)({hasEnteredView:!1,isInView:!1}),o=Boolean(r||n||i);a.once&&s.current.hasEnteredView&&(o=!1);let l="undefined"==typeof IntersectionObserver?e5:e3;l(o,s.current,e,a)}),tap:e4(function({onTap:e,onTapStart:r,onTapCancel:n,whileTap:i,visualElement:a,...s}){let l=(0,u.useRef)(!1),c=(0,u.useRef)(null),h={passive:!(r||e||n||s.onPointerDown)};function d(){c.current&&c.current(),c.current=null}function p(){d(),l.current=!1;let e=a.getProps();return e.whileTap&&a.animationState&&a.animationState.setActive(o.Tap,!1),!eq()}function f(e,r){var n,i,s,o;p()&&(eX(a.current,e.target)?null===(o=(s=a.getProps()).onTap)||void 0===o||o.call(s,e,r):null===(i=(n=a.getProps()).onTapCancel)||void 0===i||i.call(n,e,r))}function m(e,r){var n,i;p()&&(null===(i=(n=a.getProps()).onTapCancel)||void 0===i||i.call(n,e,r))}let g=(0,u.useCallback)((e,r)=>{var n;if(d(),l.current)return;l.current=!0,c.current=eJ(eU(window,"pointerup",f,h),eU(window,"pointercancel",m,h));let i=a.getProps();i.whileTap&&a.animationState&&a.animationState.setActive(o.Tap,!0),null===(n=i.onTapStart)||void 0===n||n.call(i,e,r)},[Boolean(r),a]);eV(a,"pointerdown",e||r||n||i?g:void 0,h),(0,eY.z)(d)}),focus:e4(function({whileFocus:e,visualElement:r}){let{animationState:n}=r,i=(0,u.useCallback)(()=>{n&&n.setActive(o.Focus,!0)},[n]),a=(0,u.useCallback)(()=>{n&&n.setActive(o.Focus,!1)},[n]);eN(r,"focus",e?i:void 0),eN(r,"blur",e?a:void 0)}),hover:e4(function({onHoverStart:e,onHoverEnd:r,whileHover:n,visualElement:i}){eV(i,"pointerenter",(0,u.useMemo)(()=>e||n?e$(i,!0,Boolean(n),e):void 0,[e,Boolean(n),i]),{passive:!e}),eV(i,"pointerleave",(0,u.useMemo)(()=>r||n?e$(i,!1,Boolean(n),r):void 0,[e,Boolean(n),i]),{passive:!r})})};var e9=n(5947);function e7(e,r){if(!Array.isArray(r))return!1;let n=r.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(r[i]!==e[i])return!1;return!0}let e8=e=>/^\-?\d*\.?\d+$/.test(e),te=e=>/^0[^.\s]+$/.test(e);var tt=n(7367),tr=n(404);function tn(e,r){-1===e.indexOf(r)&&e.push(r)}function ti(e,r){let n=e.indexOf(r);n>-1&&e.splice(n,1)}class ta{constructor(){this.subscriptions=[]}add(e){return tn(this.subscriptions,e),()=>ti(this.subscriptions,e)}notify(e,r,n){let i=this.subscriptions.length;if(i){if(1===i)this.subscriptions[0](e,r,n);else for(let a=0;a<i;a++){let i=this.subscriptions[a];i&&i(e,r,n)}}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function ts(e,r){return r?e*(1e3/r):0}let to=e=>!isNaN(parseFloat(e));class tl{constructor(e,r={}){this.version="8.5.5",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(e,r=!0)=>{this.prev=this.current,this.current=e;let{delta:n,timestamp:i}=tt.w;this.lastUpdated!==i&&(this.timeDelta=n,this.lastUpdated=i,tr.Z_.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>tr.Z_.postRender(this.velocityCheck),this.velocityCheck=({timestamp:e})=>{e!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=to(this.current),this.owner=r.owner}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new ta);let n=this.events[e].add(r);return"change"===e?()=>{n(),tr.Z_.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){r&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,r)}setWithVelocity(e,r,n){this.set(r),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?ts(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r)||null,this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){this.animation=null}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tu(e,r){return new tl(e,r)}let tc=(e,r)=>n=>Boolean(J(n)&&Z.test(n)&&n.startsWith(e)||r&&Object.prototype.hasOwnProperty.call(n,r)),th=(e,r,n)=>i=>{if(!J(i))return i;let[a,s,o,l]=i.match(X);return{[e]:parseFloat(a),[r]:parseFloat(s),[n]:parseFloat(o),alpha:void 0!==l?parseFloat(l):1}},td=e=>H(0,255,e),tp={...W,transform:e=>Math.round(td(e))},tf={test:tc("rgb","red"),parse:th("red","green","blue"),transform:({red:e,green:r,blue:n,alpha:i=1})=>"rgba("+tp.transform(e)+", "+tp.transform(r)+", "+tp.transform(n)+", "+$(G.transform(i))+")"},tm={test:tc("#"),parse:function(e){let r="",n="",i="",a="";return e.length>5?(r=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),a=e.substring(7,9)):(r=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),a=e.substring(4,5),r+=r,n+=n,i+=i,a+=a),{red:parseInt(r,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}},transform:tf.transform},tg={test:tc("hsl","hue"),parse:th("hue","saturation","lightness"),transform:({hue:e,saturation:r,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+ee.transform($(r))+", "+ee.transform($(n))+", "+$(G.transform(i))+")"},tv={test:e=>tf.test(e)||tm.test(e)||tg.test(e),parse:e=>tf.test(e)?tf.parse(e):tg.test(e)?tg.parse(e):tm.parse(e),transform:e=>J(e)?e:e.hasOwnProperty("red")?tf.transform(e):tg.transform(e)},ty="${c}",tx="${n}";function tb(e){"number"==typeof e&&(e=`${e}`);let r=[],n=0,i=0,a=e.match(Y);a&&(n=a.length,e=e.replace(Y,ty),r.push(...a.map(tv.parse)));let s=e.match(X);return s&&(i=s.length,e=e.replace(X,tx),r.push(...s.map(W.parse))),{values:r,numColors:n,numNumbers:i,tokenised:e}}function t_(e){return tb(e).values}function tS(e){let{values:r,numColors:n,tokenised:i}=tb(e),a=r.length;return e=>{let r=i;for(let i=0;i<a;i++)r=r.replace(i<n?ty:tx,i<n?tv.transform(e[i]):$(e[i]));return r}}let tw=e=>"number"==typeof e?0:e,tM={test:function(e){var r,n;return isNaN(e)&&J(e)&&((null===(r=e.match(X))||void 0===r?void 0:r.length)||0)+((null===(n=e.match(Y))||void 0===n?void 0:n.length)||0)>0},parse:t_,createTransformer:tS,getAnimatableNone:function(e){let r=t_(e),n=tS(e);return n(r.map(tw))}},tT=new Set(["brightness","contrast","saturate","opacity"]);function tE(e){let[r,n]=e.slice(0,-1).split("(");if("drop-shadow"===r)return e;let[i]=n.match(X)||[];if(!i)return e;let a=n.replace(i,""),s=tT.has(r)?1:0;return i!==n&&(s*=100),r+"("+s+a+")"}let tA=/([a-z-]*)\(.*?\)/g,tC={...tM,getAnimatableNone:e=>{let r=e.match(tA);return r?r.map(tE).join(" "):e}},tR={...es,color:tv,backgroundColor:tv,outlineColor:tv,fill:tv,stroke:tv,borderColor:tv,borderTopColor:tv,borderRightColor:tv,borderBottomColor:tv,borderLeftColor:tv,filter:tC,WebkitFilter:tC},tP=e=>tR[e];function tL(e,r){var n;let i=tP(e);return i!==tC&&(i=tM),null===(n=i.getAnimatableNone)||void 0===n?void 0:n.call(i,r)}let tk=e=>r=>r.test(e),tD=[W,et,ee,Q,en,er,{test:e=>"auto"===e,parse:e=>e}],tI=e=>tD.find(tk(e)),tO=[...tD,tv,tM],tN=e=>tO.find(tk(e));function tz(e,r,n){let i=e.getProps();return eA(i,r,void 0!==n?n:i.custom,function(e){let r={};return e.values.forEach((e,n)=>r[n]=e.get()),r}(e),function(e){let r={};return e.values.forEach((e,n)=>r[n]=e.getVelocity()),r}(e))}function tB(e){return Boolean(B(e)&&e.add)}let tF="data-"+e_("framerAppearId");var tU=function(){},tV=function(){};let tj=e=>1e3*e,tH={current:!1},tW=e=>r=>r<=.5?e(2*r)/2:(2-e(2*(1-r)))/2,tG=e=>r=>1-e(1-r),tq=e=>e*e,t$=tG(tq),tX=tW(tq),tY=(e,r,n)=>-n*e+n*r+e;function tZ(e,r,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(r-e)*6*n:n<.5?r:n<2/3?e+(r-e)*(2/3-n)*6:e}let tJ=(e,r,n)=>{let i=e*e;return Math.sqrt(Math.max(0,n*(r*r-i)+i))},tK=[tm,tf,tg],tQ=e=>tK.find(r=>r.test(e));function t0(e){let r=tQ(e);tV(Boolean(r),`'${e}' is not an animatable color. Use the equivalent color code instead.`);let n=r.parse(e);return r===tg&&(n=function({hue:e,saturation:r,lightness:n,alpha:i}){e/=360,n/=100;let a=0,s=0,o=0;if(r/=100){let i=n<.5?n*(1+r):n+r-n*r,l=2*n-i;a=tZ(l,i,e+1/3),s=tZ(l,i,e),o=tZ(l,i,e-1/3)}else a=s=o=n;return{red:Math.round(255*a),green:Math.round(255*s),blue:Math.round(255*o),alpha:i}}(n)),n}let t1=(e,r)=>{let n=t0(e),i=t0(r),a={...n};return e=>(a.red=tJ(n.red,i.red,e),a.green=tJ(n.green,i.green,e),a.blue=tJ(n.blue,i.blue,e),a.alpha=tY(n.alpha,i.alpha,e),tf.transform(a))};function t2(e,r){return"number"==typeof e?n=>tY(e,r,n):tv.test(e)?t1(e,r):t4(e,r)}let t3=(e,r)=>{let n=[...e],i=n.length,a=e.map((e,n)=>t2(e,r[n]));return e=>{for(let r=0;r<i;r++)n[r]=a[r](e);return n}},t5=(e,r)=>{let n={...e,...r},i={};for(let a in n)void 0!==e[a]&&void 0!==r[a]&&(i[a]=t2(e[a],r[a]));return e=>{for(let r in i)n[r]=i[r](e);return n}},t4=(e,r)=>{let n=tM.createTransformer(r),i=tb(e),a=tb(r),s=i.numColors===a.numColors&&i.numNumbers>=a.numNumbers;return s?eJ(t3(i.values,a.values),n):(tU(!0,`Complex values '${e}' and '${r}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),n=>`${n>0?r:e}`)},t6=(e,r,n)=>{let i=r-e;return 0===i?1:(n-e)/i},t9=(e,r)=>n=>tY(e,r,n);function t7(e,r,{clamp:n=!0,ease:i,mixer:a}={}){let s=e.length;tV(s===r.length,"Both input and output ranges must be the same length"),tV(!i||!Array.isArray(i)||i.length===s-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),e[0]>e[s-1]&&(e=[...e].reverse(),r=[...r].reverse());let o=function(e,r,n){let i=[],a=n||function(e){if("number"==typeof e);else if("string"==typeof e)return tv.test(e)?t1:t4;else if(Array.isArray(e))return t3;else if("object"==typeof e)return t5;return t9}(e[0]),s=e.length-1;for(let n=0;n<s;n++){let s=a(e[n],e[n+1]);if(r){let e=Array.isArray(r)?r[n]:r;s=eJ(e,s)}i.push(s)}return i}(r,i,a),l=o.length,u=r=>{let n=0;if(l>1)for(;n<e.length-2&&!(r<e[n+1]);n++);let i=t6(e[n],e[n+1],r);return o[n](i)};return n?r=>u(H(e[0],e[s-1],r)):u}let t8=e=>e,re=(e,r,n)=>(((1-3*n+3*r)*e+(3*n-6*r))*e+3*r)*e;function rt(e,r,n,i){if(e===r&&n===i)return t8;let a=r=>(function(e,r,n,i,a){let s,o;let l=0;do(s=re(o=r+(n-r)/2,i,a)-e)>0?n=o:r=o;while(Math.abs(s)>1e-7&&++l<12);return o})(r,0,1,e,n);return e=>0===e||1===e?e:re(a(e),r,i)}let rr=e=>1-Math.sin(Math.acos(e)),rn=tG(rr),ri=tW(rn),ra=rt(.33,1.53,.69,.99),rs=tG(ra),ro=tW(rs),rl=e=>(e*=2)<1?.5*rs(e):.5*(2-Math.pow(2,-10*(e-1))),ru={linear:t8,easeIn:tq,easeInOut:tX,easeOut:t$,circIn:rr,circInOut:ri,circOut:rn,backIn:rs,backInOut:ro,backOut:ra,anticipate:rl},rc=e=>{if(Array.isArray(e)){tV(4===e.length,"Cubic bezier arrays must contain four numerical values.");let[r,n,i,a]=e;return rt(r,n,i,a)}return"string"==typeof e?(tV(void 0!==ru[e],`Invalid easing type '${e}'`),ru[e]):e},rh=e=>Array.isArray(e)&&"number"!=typeof e[0];function rd({keyframes:e,ease:r=tX,times:n,duration:i=300}){e=[...e];let a=rh(r)?r.map(rc):rc(r),s={done:!1,value:e[0]},o=(n&&n.length===e.length?n:function(e){let r=e.length;return e.map((e,n)=>0!==n?n/(r-1):0)}(e)).map(e=>e*i);function l(){var r;return t7(o,e,{ease:Array.isArray(a)?a:(r=e).map(()=>a||tX).splice(0,r.length-1)})}let u=l();return{next:e=>(s.value=u(e),s.done=e>=i,s),flipTarget:()=>{e.reverse(),u=l()}}}function rp(e,r){return e*Math.sqrt(1-r*r)}let rf=["duration","bounce"],rm=["stiffness","damping","mass"];function rg(e,r){return r.some(r=>void 0!==e[r])}function rv({keyframes:e,restDelta:r,restSpeed:n,...i}){let a=e[0],s=e[e.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:c,velocity:h,duration:d,isResolvedFromDuration:p}=function(e){let r={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!rg(e,rm)&&rg(e,rf)){let n=function({duration:e=800,bounce:r=.25,velocity:n=0,mass:i=1}){let a,s;tU(e<=1e4,"Spring duration must be 10 seconds or less");let o=1-r;o=H(.05,1,o),e=H(.01,10,e/1e3),o<1?(a=r=>{let i=r*o,a=i*e,s=rp(r,o);return .001-(i-n)/s*Math.exp(-a)},s=r=>{let i=r*o,s=i*e,l=Math.pow(o,2)*Math.pow(r,2)*e,u=rp(Math.pow(r,2),o),c=-a(r)+.001>0?-1:1;return c*((s*n+n-l)*Math.exp(-s))/u}):(a=r=>{let i=Math.exp(-r*e),a=(r-n)*e+1;return -.001+i*a},s=r=>{let i=Math.exp(-r*e),a=(n-r)*(e*e);return i*a});let l=5/e,u=function(e,r,n){let i=n;for(let n=1;n<12;n++)i-=e(i)/r(i);return i}(a,s,l);if(e*=1e3,isNaN(u))return{stiffness:100,damping:10,duration:e};{let r=Math.pow(u,2)*i;return{stiffness:r,damping:2*o*Math.sqrt(i*r),duration:e}}}(e);(r={...r,...n,velocity:0,mass:1}).isResolvedFromDuration=!0}return r}(i),f=ry,m=h?-(h/1e3):0,g=u/(2*Math.sqrt(l*c));function v(){let e=s-a,i=Math.sqrt(l/c)/1e3,o=5>Math.abs(e);if(n||(n=o?.01:2),r||(r=o?.005:.5),g<1){let r=rp(i,g);f=n=>s-Math.exp(-g*i*n)*((m+g*i*e)/r*Math.sin(r*n)+e*Math.cos(r*n))}else if(1===g)f=r=>s-Math.exp(-i*r)*(e+(m+i*e)*r);else{let r=i*Math.sqrt(g*g-1);f=n=>{let a=Math.min(r*n,300);return s-Math.exp(-g*i*n)*((m+g*i*e)*Math.sinh(a)+r*e*Math.cosh(a))/r}}}return v(),{next:e=>{let i=f(e);if(p)o.done=e>=d;else{let a=m;if(0!==e){if(g<1){let r=Math.max(0,e-5);a=ts(i-f(r),e-r)}else a=0}let l=Math.abs(a)<=n,u=Math.abs(s-i)<=r;o.done=l&&u}return o.value=o.done?s:i,o},flipTarget:()=>{m=-m,[a,s]=[s,a],v()}}}rv.needsInterpolation=(e,r)=>"string"==typeof e||"string"==typeof r;let ry=e=>0,rx={decay:function({keyframes:e=[0],velocity:r=0,power:n=.8,timeConstant:i=350,restDelta:a=.5,modifyTarget:s}){let o=e[0],l={done:!1,value:o},u=n*r,c=o+u,h=void 0===s?c:s(c);return h!==c&&(u=h-o),{next:e=>{let r=-u*Math.exp(-e/i);return l.done=!(r>a||r<-a),l.value=l.done?h:h+r,l},flipTarget:()=>{}}},keyframes:rd,tween:rd,spring:rv};function rb(e,r,n=0){return e-r-n}let r_=e=>{let r=({delta:r})=>e(r);return{start:()=>tr.Z_.update(r,!0),stop:()=>tr.qY.update(r)}};function rS({duration:e,driver:r=r_,elapsed:n=0,repeat:i=0,repeatType:a="loop",repeatDelay:s=0,keyframes:o,autoplay:l=!0,onPlay:u,onStop:c,onComplete:h,onRepeat:d,onUpdate:p,type:f="keyframes",...m}){var g;let v,y;let x=n,b=0,_=e,S=!1,w=!0,M=rx[o.length>2?"keyframes":f]||rd,T=o[0],E=o[o.length-1],A={done:!1,value:T};(null===(g=M.needsInterpolation)||void 0===g?void 0:g.call(M,T,E))&&(y=t7([0,100],[T,E],{clamp:!1}),o=[0,100]);let C=M({...m,duration:e,keyframes:o});function R(e){if(w||(e=-e),n+=e,S||(A=C.next(Math.max(0,n)),y&&(A.value=y(A.value)),S=w?A.done:n<=0),p&&p(A.value),S){if(0===b&&(_=void 0!==_?_:n),b<i){var r,o;r=n,o=_,(w?r>=o+s:r<=-s)&&(b++,"reverse"===a?n=function(e,r=0,n=0,i=!0){return i?rb(r+-e,r,n):r-(e-r)+n}(n,_,s,w=b%2==0):(n=rb(n,_,s),"mirror"===a&&C.flipTarget()),S=!1,d&&d())}else v&&v.stop(),h&&h()}}return l&&(u&&u(),(v=r(R)).start()),{stop:()=>{c&&c(),v&&v.stop()},set currentTime(t){n=x,R(t)},sample:r=>{n=x;let i=e&&"number"==typeof e?Math.max(.5*e,50):50,a=0;for(R(0);a<=r;){let e=r-a;R(Math.min(e,i)),a+=i}return A}}}let rw=([e,r,n,i])=>`cubic-bezier(${e}, ${r}, ${n}, ${i})`,rM={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rw([0,.65,.55,1]),circOut:rw([.55,0,1,.45]),backIn:rw([.31,.01,.66,-.59]),backOut:rw([.33,1.53,.69,.99])},rT={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},rE={},rA={};for(let e in rT)rA[e]=()=>(void 0===rE[e]&&(rE[e]=rT[e]()),rE[e]);let rC=new Set(["opacity"]);function rR(e,r){let n=performance.now(),i=({timestamp:a})=>{let s=a-n;s>=r&&(tr.qY.read(i),e(s-r))};return tr.Z_.read(i,!0),()=>tr.qY.read(i)}let rP=()=>({type:"spring",stiffness:500,damping:25,restSpeed:10}),rL=e=>({type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}),rk=()=>({type:"keyframes",ease:"linear",duration:.3}),rD={type:"keyframes",duration:.8},rI={x:rP,y:rP,z:rP,rotate:rP,rotateX:rP,rotateY:rP,rotateZ:rP,scaleX:rL,scaleY:rL,scale:rL,opacity:rk,backgroundColor:rk,color:rk,default:rL},rO=(e,{keyframes:r})=>{if(r.length>2)return rD;{let n=rI[e]||rI.default;return n(r[1])}},rN=(e,r)=>"zIndex"!==e&&!!("number"==typeof r||Array.isArray(r)||"string"==typeof r&&tM.test(r)&&!r.startsWith("url("));function rz(e){return 0===e||"string"==typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function rB(e){return"number"==typeof e?0:tL("",e)}function rF(e,r){return e[r]||e.default||e}let rU=(e,r,n,i={})=>a=>{let s=rF(i,e)||{},o=s.delay||i.delay||0,{elapsed:l=0}=i;l-=tj(o);let u=function(e,r,n,i){let a=rN(r,n),s=void 0!==i.from?i.from:e.get();return("none"===s&&a&&"string"==typeof n?s=tL(r,n):rz(s)&&"string"==typeof n?s=rB(n):!Array.isArray(n)&&rz(n)&&"string"==typeof s&&(n=rB(s)),Array.isArray(n))?(null===n[0]&&(n[0]=s),n):[s,n]}(r,e,n,s),c=u[0],h=u[u.length-1],d=rN(e,c),p=rN(e,h);tU(d===p,`You are trying to animate ${e} from "${c}" to "${h}". ${c} is not an animatable value - to enable this animation set ${c} to a value animatable to ${h} via the \`style\` property.`);let f={keyframes:u,velocity:r.getVelocity(),...s,elapsed:l,onUpdate:e=>{r.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{a(),s.onComplete&&s.onComplete()}};if(!d||!p||tH.current||!1===s.type)return function({keyframes:e,elapsed:r,onUpdate:n,onComplete:i}){let a=()=>{n&&n(e[e.length-1]),i&&i()};return r?{stop:rR(a,-r)}:a()}(f);if("inertia"===s.type)return function({keyframes:e,velocity:r=0,min:n,max:i,power:a=.8,timeConstant:s=750,bounceStiffness:o=500,bounceDamping:l=10,restDelta:u=1,modifyTarget:c,driver:h,onUpdate:d,onComplete:p,onStop:f}){let m;let g=e[0];function v(e){return void 0!==n&&e<n||void 0!==i&&e>i}function y(e){return void 0===n?i:void 0===i?n:Math.abs(n-e)<Math.abs(i-e)?n:i}function x(e){null==m||m.stop(),m=rS({keyframes:[0,1],velocity:0,...e,driver:h,onUpdate:r=>{var n;null==d||d(r),null===(n=e.onUpdate)||void 0===n||n.call(e,r)},onComplete:p,onStop:f})}function b(e){x({type:"spring",stiffness:o,damping:l,restDelta:u,...e})}if(v(g))b({velocity:r,keyframes:[g,y(g)]});else{let e,i,o=a*r+g;void 0!==c&&(o=c(o));let l=y(o),h=l===n?-1:1,d=n=>{e=i,i=n,r=ts(n-e,tt.w.delta),(1===h&&n>l||-1===h&&n<l)&&b({keyframes:[n,l],velocity:r})};x({type:"decay",keyframes:[g,0],velocity:r,timeConstant:s,power:a,restDelta:u,modifyTarget:c,onUpdate:v(o)?d:void 0})}return{stop:()=>null==m?void 0:m.stop()}}(f);!function({when:e,delay:r,delayChildren:n,staggerChildren:i,staggerDirection:a,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:c,...h}){return!!Object.keys(h).length}(s)&&(f={...f,...rO(e,f)}),f.duration&&(f.duration=tj(f.duration)),f.repeatDelay&&(f.repeatDelay=tj(f.repeatDelay));let m=r.owner,g=m&&m.current;if(m&&g instanceof HTMLElement&&!(null==m?void 0:m.getProps().onUpdate)){let n=function(e,r,{onUpdate:n,onComplete:i,...a}){var s;let o=rA.waapi()&&rC.has(r)&&!a.repeatDelay&&"mirror"!==a.repeatType&&0!==a.damping;if(!o)return!1;let{keyframes:l,duration:u=300,elapsed:c=0,ease:h}=a;if("spring"===a.type||!(!(s=a.ease)||Array.isArray(s)||"string"==typeof s&&rM[s])){if(a.repeat===1/0)return;let e=rS({...a,elapsed:0}),r={done:!1,value:l[0]},n=[],i=0;for(;!r.done&&i<2e4;)n.push((r=e.sample(i)).value),i+=10;l=n,u=i-10,h="linear"}let d=function(e,r,n,{delay:i=0,duration:a,repeat:s=0,repeatType:o="loop",ease:l,times:u}={}){return e.animate({[r]:n,offset:u},{delay:i,duration:a,easing:function(e){if(e)return Array.isArray(e)?rw(e):rM[e]}(l),fill:"both",iterations:s+1,direction:"reverse"===o?"alternate":"normal"})}(e.owner.current,r,l,{...a,delay:-c,duration:u,ease:h});return d.onfinish=()=>{e.set(function(e,{repeat:r,repeatType:n="loop"}){let i=r&&"loop"!==n&&r%2==1?0:e.length-1;return e[i]}(l,a)),tr.Z_.update(()=>d.cancel()),i&&i()},{get currentTime(){return d.currentTime||0},set currentTime(t){d.currentTime=t},stop:()=>{let{currentTime:r}=d;if(r){let n=rS({...a,autoplay:!1});e.setWithVelocity(n.sample(r-10).value,n.sample(r).value,10)}tr.Z_.update(()=>d.cancel())}}}(r,e,f);if(n)return n}return rS(f)};function rV(e,r,n={}){var i;let a=tz(e,r,n.custom),{transition:s=e.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(s=n.transitionOverride);let o=a?()=>rj(e,a,n):()=>Promise.resolve(),l=(null===(i=e.variantChildren)||void 0===i?void 0:i.size)?(i=0)=>{let{delayChildren:a=0,staggerChildren:o,staggerDirection:l}=s;return function(e,r,n=0,i=0,a=1,s){let o=[],l=(e.variantChildren.size-1)*i,u=1===a?(e=0)=>e*i:(e=0)=>l-e*i;return Array.from(e.variantChildren).sort(rH).forEach((e,i)=>{e.notify("AnimationStart",r),o.push(rV(e,r,{...s,delay:n+u(i)}).then(()=>e.notify("AnimationComplete",r)))}),Promise.all(o)}(e,r,a+i,o,l,n)}:()=>Promise.resolve(),{when:u}=s;if(!u)return Promise.all([o(),l(n.delay)]);{let[e,r]="beforeChildren"===u?[o,l]:[l,o];return e().then(r)}}function rj(e,r,{delay:n=0,transitionOverride:i,type:a}={}){var s;let{transition:o=e.getDefaultTransition(),transitionEnd:l,...u}=e.makeTargetAnimatable(r),c=e.getValue("willChange");i&&(o=i);let h=[],d=a&&(null===(s=e.animationState)||void 0===s?void 0:s.getState()[a]);for(let r in u){let i=e.getValue(r),a=u[r];if(!i||void 0===a||d&&function({protectedKeys:e,needsAnimating:r},n){let i=e.hasOwnProperty(n)&&!0!==r[n];return r[n]=!1,i}(d,r))continue;let s={delay:n,elapsed:0,...o};if(window.HandoffAppearAnimations&&!i.hasAnimated){let n=e.getProps()[tF];n&&(s.elapsed=window.HandoffAppearAnimations(n,r,i,tr.Z_))}let l=i.start(rU(r,i,a,e.shouldReduceMotion&&N.has(r)?{type:!1}:s));tB(c)&&(c.add(r),l=l.then(()=>c.remove(r))),h.push(l)}return Promise.all(h).then(()=>{l&&function(e,r){let n=tz(e,r),{transitionEnd:i={},transition:a={},...s}=n?e.makeTargetAnimatable(n,!1):{};for(let r in s={...s,...i}){var o;let n=eP(s[r]);o=r,e.hasValue(o)?e.getValue(o).set(n):e.addValue(o,tu(n))}}(e,l)})}function rH(e,r){return e.sortNodePosition(r)}let rW=[o.Animate,o.InView,o.Focus,o.Hover,o.Tap,o.Drag,o.Exit],rG=[...rW].reverse(),rq=rW.length;function r$(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let rX={animation:e4(({visualElement:e,animate:r})=>{e.animationState||(e.animationState=function(e){let r=r=>Promise.all(r.map(({animation:r,options:n})=>(function(e,r,n={}){let i;if(e.notify("AnimationStart",r),Array.isArray(r)){let a=r.map(r=>rV(e,r,n));i=Promise.all(a)}else if("string"==typeof r)i=rV(e,r,n);else{let a="function"==typeof r?tz(e,r,n.custom):r;i=rj(e,a,n)}return i.then(()=>e.notify("AnimationComplete",r))})(e,r,n))),n={[o.Animate]:r$(!0),[o.InView]:r$(),[o.Hover]:r$(),[o.Tap]:r$(),[o.Drag]:r$(),[o.Focus]:r$(),[o.Exit]:r$()},i=!0,a=(r,n)=>{let i=tz(e,n);if(i){let{transition:e,transitionEnd:n,...a}=i;r={...r,...a,...n}}return r};function s(s,o){let l=e.getProps(),u=e.getVariantContext(!0)||{},c=[],h=new Set,d={},p=1/0;for(let r=0;r<rq;r++){var f;let m=rG[r],y=n[m],x=void 0!==l[m]?l[m]:u[m],b=g(x),_=m===o?y.isActive:null;!1===_&&(p=r);let S=x===u[m]&&x!==l[m]&&b;if(S&&i&&e.manuallyAnimateOnMount&&(S=!1),y.protectedKeys={...d},!y.isActive&&null===_||!x&&!y.prevProp||v(x)||"boolean"==typeof x)continue;let w=(f=y.prevProp,"string"==typeof x?x!==f:!!Array.isArray(x)&&!e7(x,f)),M=w||m===o&&y.isActive&&!S&&b||r>p&&b,T=Array.isArray(x)?x:[x],E=T.reduce(a,{});!1===_&&(E={});let{prevResolvedValues:A={}}=y,C={...A,...E},R=e=>{M=!0,h.delete(e),y.needsAnimating[e]=!0};for(let e in C){let r=E[e],n=A[e];d.hasOwnProperty(e)||(r!==n?eC(r)&&eC(n)?!e7(r,n)||w?R(e):y.protectedKeys[e]=!0:void 0!==r?R(e):h.add(e):void 0!==r&&h.has(e)?R(e):y.protectedKeys[e]=!0)}y.prevProp=x,y.prevResolvedValues=E,y.isActive&&(d={...d,...E}),i&&e.blockInitialAnimation&&(M=!1),M&&!S&&c.push(...T.map(e=>({animation:e,options:{type:m,...s}})))}if(h.size){let r={};h.forEach(n=>{let i=e.getBaseTarget(n);void 0!==i&&(r[n]=i)}),c.push({animation:r})}let m=Boolean(c.length);return i&&!1===l.initial&&!e.manuallyAnimateOnMount&&(m=!1),i=!1,m?r(c):Promise.resolve()}return{animateChanges:s,setActive:function(r,i,a){var o;if(n[r].isActive===i)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(r,i)}),n[r].isActive=i;let l=s(a,r);for(let e in n)n[e].protectedKeys={};return l},setAnimateFunction:function(n){r=n(e)},getState:()=>n}}(e)),v(r)&&(0,u.useEffect)(()=>r.subscribe(e),[r])}),exit:e4(e=>{let{custom:r,visualElement:n}=e,[i,a]=(0,e9.oO)(),s=(0,u.useContext)(d.O);(0,u.useEffect)(()=>{n.isPresent=i;let e=n.animationState&&n.animationState.setActive(o.Exit,!i,{custom:s&&s.custom||r});e&&!i&&e.then(a)},[i])})},rY=(e,r)=>Math.abs(e-r);class rZ{constructor(e,r,{transformPagePoint:n}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let e=rQ(this.lastMoveEventInfo,this.history),r=null!==this.startEvent,n=function(e,r){let n=rY(e.x,r.x),i=rY(e.y,r.y);return Math.sqrt(n**2+i**2)}(e.offset,{x:0,y:0})>=3;if(!r&&!n)return;let{point:i}=e,{timestamp:a}=tt.w;this.history.push({...i,timestamp:a});let{onStart:s,onMove:o}=this.handlers;r||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,r)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=rJ(r,this.transformPagePoint),tr.Z_.update(this.updatePoint,!0)},this.handlePointerUp=(e,r)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let{onEnd:n,onSessionEnd:i}=this.handlers,a=rQ("pointercancel"===e.type?this.lastMoveEventInfo:rJ(r,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),i&&i(e,a)},!ez(e))return;this.handlers=r,this.transformPagePoint=n;let i=eB(e),a=rJ(i,this.transformPagePoint),{point:s}=a,{timestamp:o}=tt.w;this.history=[{...s,timestamp:o}];let{onSessionStart:l}=r;l&&l(e,rQ(a,this.history)),this.removeListeners=eJ(eU(window,"pointermove",this.handlePointerMove),eU(window,"pointerup",this.handlePointerUp),eU(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),tr.qY.update(this.updatePoint)}}function rJ(e,r){return r?{point:r(e.point)}:e}function rK(e,r){return{x:e.x-r.x,y:e.y-r.y}}function rQ({point:e},r){return{point:e,delta:rK(e,r0(r)),offset:rK(e,r[0]),velocity:function(e,r){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null,a=r0(e);for(;n>=0&&(i=e[n],!(a.timestamp-i.timestamp>tj(.1)));)n--;if(!i)return{x:0,y:0};let s=(a.timestamp-i.timestamp)/1e3;if(0===s)return{x:0,y:0};let o={x:(a.x-i.x)/s,y:(a.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}(r,0)}}function r0(e){return e[e.length-1]}function r1(e){return e.max-e.min}function r2(e,r=0,n=.01){return Math.abs(e-r)<=n}function r3(e,r,n,i=.5){e.origin=i,e.originPoint=tY(r.min,r.max,e.origin),e.scale=r1(n)/r1(r),(r2(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=tY(n.min,n.max,e.origin)-e.originPoint,(r2(e.translate)||isNaN(e.translate))&&(e.translate=0)}function r5(e,r,n,i){r3(e.x,r.x,n.x,null==i?void 0:i.originX),r3(e.y,r.y,n.y,null==i?void 0:i.originY)}function r4(e,r,n){e.min=n.min+r.min,e.max=e.min+r1(r)}function r6(e,r,n){e.min=r.min-n.min,e.max=e.min+r1(r)}function r9(e,r,n){r6(e.x,r.x,n.x),r6(e.y,r.y,n.y)}function r7(e,r,n){return{min:void 0!==r?e.min+r:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function r8(e,r){let n=r.min-e.min,i=r.max-e.max;return r.max-r.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function ne(e,r,n){return{min:nt(e,r),max:nt(e,n)}}function nt(e,r){return"number"==typeof e?e:e[r]||0}let nr=()=>({translate:0,scale:1,origin:0,originPoint:0}),nn=()=>({x:nr(),y:nr()}),ni=()=>({min:0,max:0}),na=()=>({x:ni(),y:ni()});function ns(e){return[e("x"),e("y")]}function no({top:e,left:r,right:n,bottom:i}){return{x:{min:r,max:n},y:{min:e,max:i}}}function nl(e){return void 0===e||1===e}function nu({scale:e,scaleX:r,scaleY:n}){return!nl(e)||!nl(r)||!nl(n)}function nc(e){return nu(e)||nh(e)||e.z||e.rotate||e.rotateX||e.rotateY}function nh(e){var r,n;return(r=e.x)&&"0%"!==r||(n=e.y)&&"0%"!==n}function nd(e,r,n,i,a){return void 0!==a&&(e=i+a*(e-i)),i+n*(e-i)+r}function np(e,r=0,n=1,i,a){e.min=nd(e.min,r,n,i,a),e.max=nd(e.max,r,n,i,a)}function nf(e,{x:r,y:n}){np(e.x,r.translate,r.scale,r.originPoint),np(e.y,n.translate,n.scale,n.originPoint)}function nm(e){return Number.isInteger(e)?e:e>1.0000000000001||e<.999999999999?e:1}function ng(e,r){e.min=e.min+r,e.max=e.max+r}function nv(e,r,[n,i,a]){let s=void 0!==r[a]?r[a]:.5,o=tY(e.min,e.max,s);np(e,r[n],r[i],o,r.scale)}let ny=["x","scaleX","originX"],nx=["y","scaleY","originY"];function nb(e,r){nv(e.x,r,ny),nv(e.y,r,nx)}function n_(e,r){return no(function(e,r){if(!r)return e;let n=r({x:e.left,y:e.top}),i=r({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),r))}let nS=new WeakMap;class nw{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=na(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){if(!1===this.visualElement.isPresent)return;let n=e=>{this.stopAnimation(),r&&this.snapToCursor(eB(e,"page").point)},i=(e,r)=>{var n;let{drag:i,dragPropagation:a,onDragStart:s}=this.getProps();(!i||a||(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=eG(i),this.openGlobalLock))&&(this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ns(e=>{var r,n;let i=this.getAxisMotionValue(e).get()||0;if(ee.test(i)){let a=null===(n=null===(r=this.visualElement.projection)||void 0===r?void 0:r.layout)||void 0===n?void 0:n.layoutBox[e];if(a){let e=r1(a);i=e*(parseFloat(i)/100)}}this.originPoint[e]=i}),null==s||s(e,r),null===(n=this.visualElement.animationState)||void 0===n||n.setActive(o.Drag,!0))},a=(e,r)=>{let{dragPropagation:n,dragDirectionLock:i,onDirectionLock:a,onDrag:s}=this.getProps();if(!n&&!this.openGlobalLock)return;let{offset:o}=r;if(i&&null===this.currentDirection){this.currentDirection=function(e,r=10){let n=null;return Math.abs(e.y)>r?n="y":Math.abs(e.x)>r&&(n="x"),n}(o),null!==this.currentDirection&&(null==a||a(this.currentDirection));return}this.updateAxis("x",r.point,o),this.updateAxis("y",r.point,o),this.visualElement.render(),null==s||s(e,r)},s=(e,r)=>this.stop(e,r);this.panSession=new rZ(e,{onSessionStart:n,onStart:i,onMove:a,onSessionEnd:s},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,r){let n=this.isDragging;if(this.cancel(),!n)return;let{velocity:i}=r;this.startAnimation(i);let{onDragEnd:a}=this.getProps();null==a||a(e,r)}cancel(){var e,r;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(e=this.panSession)||void 0===e||e.end(),this.panSession=void 0;let{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(r=this.visualElement.animationState)||void 0===r||r.setActive(o.Drag,!1)}updateAxis(e,r,n){let{drag:i}=this.getProps();if(!n||!nM(e,i,this.currentDirection))return;let a=this.getAxisMotionValue(e),s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,{min:r,max:n},i){return void 0!==r&&e<r?e=i?tY(r,e,i.min):Math.max(e,r):void 0!==n&&e>n&&(e=i?tY(n,e,i.max):Math.min(e,n)),e}(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){let{dragConstraints:e,dragElastic:r}=this.getProps(),{layout:n}=this.visualElement.projection||{},i=this.constraints;e&&m(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=function(e,{top:r,left:n,bottom:i,right:a}){return{x:r7(e.x,n,a),y:r7(e.y,r,i)}}(n.layoutBox,e):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:ne(e,"left","right"),y:ne(e,"top","bottom")}}(r),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ns(e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,r){let n={};return void 0!==r.min&&(n.min=r.min-e.min),void 0!==r.max&&(n.max=r.max-e.min),n}(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){var e;let{dragConstraints:r,onMeasureDragConstraints:n}=this.getProps();if(!r||!m(r))return!1;let i=r.current;tV(null!==i,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");let{projection:a}=this.visualElement;if(!a||!a.layout)return!1;let s=function(e,r,n){let i=n_(e,n),{scroll:a}=r;return a&&(ng(i.x,a.offset.x),ng(i.y,a.offset.y)),i}(i,a.root,this.visualElement.getTransformPagePoint()),o={x:r8((e=a.layout.layoutBox).x,s.x),y:r8(e.y,s.y)};if(n){let e=n(function({x:e,y:r}){return{top:r.min,right:e.max,bottom:r.max,left:e.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=no(e))}return o}startAnimation(e){let{drag:r,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=ns(o=>{if(!nM(o,r,this.currentDirection))return;let u=(null==l?void 0:l[o])||{};s&&(u={min:0,max:0});let c={type:"inertia",velocity:n?e[o]:0,bounceStiffness:i?200:1e6,bounceDamping:i?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...a,...u};return this.startAxisValueAnimation(o,c)});return Promise.all(u).then(o)}startAxisValueAnimation(e,r){let n=this.getAxisMotionValue(e);return n.start(rU(e,n,0,r))}stopAnimation(){ns(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){var r;let n="_drag"+e.toUpperCase(),i=this.visualElement.getProps()[n];return i||this.visualElement.getValue(e,(null===(r=this.visualElement.getProps().initial)||void 0===r?void 0:r[e])||0)}snapToCursor(e){ns(r=>{let{drag:n}=this.getProps();if(!nM(r,n,this.currentDirection))return;let{projection:i}=this.visualElement,a=this.getAxisMotionValue(r);if(i&&i.layout){let{min:n,max:s}=i.layout.layoutBox[r];a.set(e[r]-tY(n,s,.5))}})}scalePositionWithinConstraints(){var e;if(!this.visualElement.current)return;let{drag:r,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!m(n)||!i||!this.constraints)return;this.stopAnimation();let a={x:0,y:0};ns(e=>{let r=this.getAxisMotionValue(e);if(r){let n=r.get();a[e]=function(e,r){let n=.5,i=r1(e),a=r1(r);return a>i?n=t6(r.min,r.max-i,e.min):i>a&&(n=t6(e.min,e.max-a,r.min)),H(0,1,n)}({min:n,max:n},this.constraints[e])}});let{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",null===(e=i.root)||void 0===e||e.updateScroll(),i.updateLayout(),this.resolveConstraints(),ns(e=>{if(!nM(e,r,null))return;let n=this.getAxisMotionValue(e),{min:i,max:s}=this.constraints[e];n.set(tY(i,s,a[e]))})}addListeners(){var e;if(!this.visualElement.current)return;nS.set(this.visualElement,this);let r=this.visualElement.current,n=eU(r,"pointerdown",e=>{let{drag:r,dragListener:n=!0}=this.getProps();r&&n&&this.start(e)}),i=()=>{let{dragConstraints:e}=this.getProps();m(e)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,s=a.addEventListener("measure",i);a&&!a.layout&&(null===(e=a.root)||void 0===e||e.updateScroll(),a.updateLayout()),i();let o=eO(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:e,hasLayoutChanged:r})=>{this.isDragging&&r&&(ns(r=>{let n=this.getAxisMotionValue(r);n&&(this.originPoint[r]+=e[r].translate,n.set(n.get()+e[r].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),null==l||l()}}getProps(){let e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=.35,dragMomentum:o=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function nM(e,r,n){return(!0===r||r===e)&&(null===n||n===e)}let nT={pan:e4(function({onPan:e,onPanStart:r,onPanEnd:n,onPanSessionStart:i,visualElement:a}){let s=(0,u.useRef)(null),{transformPagePoint:o}=(0,u.useContext)(c),l={onSessionStart:i,onStart:r,onMove:e,onEnd:(e,r)=>{s.current=null,n&&n(e,r)}};(0,u.useEffect)(()=>{null!==s.current&&s.current.updateHandlers(l)}),eV(a,"pointerdown",(e||r||n||i)&&function(e){s.current=new rZ(e,l,{transformPagePoint:o})}),(0,eY.z)(()=>s.current&&s.current.end())}),drag:e4(function(e){let{dragControls:r,visualElement:n}=e,i=(0,T.h)(()=>new nw(n));(0,u.useEffect)(()=>r&&r.subscribe(i),[i,r]),(0,u.useEffect)(()=>i.addListeners(),[i])})};function nE(e){return"string"==typeof e&&e.startsWith("var(--")}let nA=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function nC(e,r,n=1){tV(n<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);let[i,a]=function(e){let r=nA.exec(e);if(!r)return[,];let[,n,i]=r;return[n,i]}(e);if(!i)return;let s=window.getComputedStyle(r).getPropertyValue(i);return s?s.trim():nE(a)?nC(a,r,n+1):a}let nR=new Set(["width","height","top","left","right","bottom","x","y"]),nP=e=>nR.has(e),nL=e=>Object.keys(e).some(nP),nk=e=>e===W||e===et;(s=l||(l={})).width="width",s.height="height",s.left="left",s.right="right",s.top="top",s.bottom="bottom";let nD=(e,r)=>parseFloat(e.split(", ")[r]),nI=(e,r)=>(n,{transform:i})=>{if("none"===i||!i)return 0;let a=i.match(/^matrix3d\((.+)\)$/);if(a)return nD(a[1],r);{let r=i.match(/^matrix\((.+)\)$/);return r?nD(r[1],e):0}},nO=new Set(["x","y","z"]),nN=O.filter(e=>!nO.has(e)),nz={width:({x:e},{paddingLeft:r="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(r)-parseFloat(n),height:({y:e},{paddingTop:r="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(r)-parseFloat(n),top:(e,{top:r})=>parseFloat(r),left:(e,{left:r})=>parseFloat(r),bottom:({y:e},{top:r})=>parseFloat(r)+(e.max-e.min),right:({x:e},{left:r})=>parseFloat(r)+(e.max-e.min),x:nI(4,13),y:nI(5,14)},nB=(e,r,n)=>{let i=r.measureViewportBox(),a=r.current,s=getComputedStyle(a),{display:o}=s,l={};"none"===o&&r.setStaticValue("display",e.display||"block"),n.forEach(e=>{l[e]=nz[e](i,s)}),r.render();let u=r.measureViewportBox();return n.forEach(n=>{let i=r.getValue(n);i&&i.jump(l[n]),e[n]=nz[n](u,s)}),e},nF=(e,r,n={},i={})=>{r={...r},i={...i};let a=Object.keys(r).filter(nP),s=[],o=!1,l=[];if(a.forEach(a=>{let u;let c=e.getValue(a);if(!e.hasValue(a))return;let h=n[a],d=tI(h),p=r[a];if(eC(p)){let e=p.length,r=null===p[0]?1:0;d=tI(h=p[r]);for(let n=r;n<e;n++)u?tV(tI(p[n])===u,"All keyframes must be of the same type"):tV((u=tI(p[n]))===d||nk(d)&&nk(u),"Keyframes must be of the same dimension as the current value")}else u=tI(p);if(d!==u){if(nk(d)&&nk(u)){let e=c.get();"string"==typeof e&&c.set(parseFloat(e)),"string"==typeof p?r[a]=parseFloat(p):Array.isArray(p)&&u===et&&(r[a]=p.map(parseFloat))}else(null==d?void 0:d.transform)&&(null==u?void 0:u.transform)&&(0===h||0===p)?0===h?c.set(u.transform(h)):r[a]=d.transform(p):(o||(s=function(e){let r=[];return nN.forEach(n=>{let i=e.getValue(n);void 0!==i&&(r.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),r.length&&e.render(),r}(e),o=!0),l.push(a),i[a]=void 0!==i[a]?i[a]:r[a],c.jump(p))}}),!l.length)return{target:r,transitionEnd:i};{let n=l.indexOf("height")>=0?window.pageYOffset:null,a=nB(r,e,l);return s.length&&s.forEach(([r,n])=>{e.getValue(r).set(n)}),e.render(),M.j&&null!==n&&window.scrollTo({top:n}),{target:a,transitionEnd:i}}},nU=(e,r,n,i)=>{var a,s;let o=function(e,{...r},n){let i=e.current;if(!(i instanceof Element))return{target:r,transitionEnd:n};for(let a in n&&(n={...n}),e.values.forEach(e=>{let r=e.get();if(!nE(r))return;let n=nC(r,i);n&&e.set(n)}),r){let e=r[a];if(!nE(e))continue;let s=nC(e,i);s&&(r[a]=s,n&&void 0===n[a]&&(n[a]=e))}return{target:r,transitionEnd:n}}(e,r,i);return r=o.target,i=o.transitionEnd,a=r,s=i,nL(a)?nF(e,a,n,s):{target:a,transitionEnd:s}},nV={current:null},nj={current:!1},nH=Object.keys(w),nW=nH.length,nG=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class nq{constructor({parent:e,props:r,reducedMotionConfig:n,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.isPresent=!0,this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>tr.Z_.render(this.render,!1,!0);let{latestValues:s,renderState:o}=i;this.latestValues=s,this.baseTarget={...s},this.initialValues=r.initial?{...s}:{},this.renderState=o,this.parent=e,this.props=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=a,this.isControllingVariants=x(r),this.isVariantNode=b(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);let{willChange:l,...u}=this.scrapeMotionValuesFromProps(r,{});for(let e in u){let r=u[e];void 0!==s[e]&&B(r)&&(r.set(s[e],!1),tB(l)&&l.add(e))}}scrapeMotionValuesFromProps(e,r){return{}}mount(e){var r;this.current=e,this.projection&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=null===(r=this.parent)||void 0===r?void 0:r.addVariantChild(this)),this.values.forEach((e,r)=>this.bindToMotionValue(r,e)),nj.current||function(){if(nj.current=!0,M.j){if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),r=()=>nV.current=e.matches;e.addListener(r),r()}else nV.current=!1}}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||nV.current),this.parent&&this.parent.children.add(this),this.setProps(this.props)}unmount(){var e,r,n;for(let i in null===(e=this.projection)||void 0===e||e.unmount(),tr.qY.update(this.notifyUpdate),tr.qY.render(this.render),this.valueSubscriptions.forEach(e=>e()),null===(r=this.removeFromVariantTree)||void 0===r||r.call(this),null===(n=this.parent)||void 0===n||n.children.delete(this),this.events)this.events[i].clear();this.current=null}bindToMotionValue(e,r){let n=N.has(e),i=r.on("change",r=>{this.latestValues[e]=r,this.props.onUpdate&&tr.Z_.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),a()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures({children:e,...r},n,i,a,s,o){let l=[];for(let e=0;e<nW;e++){let n=nH[e],{isEnabled:i,Component:a}=w[n];i(r)&&a&&l.push((0,u.createElement)(a,{key:n,...r,visualElement:this}))}if(!this.projection&&s){this.projection=new s(a,this.latestValues,this.parent&&this.parent.projection);let{layoutId:e,layout:n,drag:i,dragConstraints:l,layoutScroll:u,layoutRoot:c}=r;this.projection.setOptions({layoutId:e,layout:n,alwaysMeasureLayout:Boolean(i)||l&&m(l),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"==typeof n?n:"both",initialPromotionConfig:o,layoutScroll:u,layoutRoot:c})}return l}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):na()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}makeTargetAnimatable(e,r=!0){return this.makeTargetAnimatableFromInstance(e,this.props,r)}setProps(e){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender();let r=this.props;this.props=e;for(let r=0;r<nG.length;r++){let n=nG[r];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);let i=e["on"+n];i&&(this.propEventSubscriptions[n]=this.on(n,i))}this.prevMotionValues=function(e,r,n){let{willChange:i}=r;for(let a in r){let s=r[a],o=n[a];if(B(s))e.addValue(a,s),tB(i)&&i.add(a);else if(B(o))e.addValue(a,tu(s,{owner:e})),tB(i)&&i.remove(a);else if(o!==s){if(e.hasValue(a)){let r=e.getValue(a);r.hasAnimated||r.set(s)}else{let r=e.getStaticValue(a);e.addValue(a,tu(void 0!==r?r:s,{owner:e}))}}}for(let i in n)void 0===r[i]&&e.removeValue(i);return r}(this,this.scrapeMotionValuesFromProps(e,r),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){var r;return null===(r=this.props.variants)||void 0===r?void 0:r[e]}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){var e;return this.isVariantNode?this:null===(e=this.parent)||void 0===e?void 0:e.getClosestVariantNode()}getVariantContext(e=!1){var r,n;if(e)return null===(r=this.parent)||void 0===r?void 0:r.getVariantContext();if(!this.isControllingVariants){let e=(null===(n=this.parent)||void 0===n?void 0:n.getVariantContext())||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}let i={};for(let e=0;e<nX;e++){let r=n$[e],n=this.props[r];(g(n)||!1===n)&&(i[r]=n)}return i}addVariantChild(e){var r;let n=this.getClosestVariantNode();if(n)return null===(r=n.variantChildren)||void 0===r||r.add(e),()=>n.variantChildren.delete(e)}addValue(e,r){r!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,r)),this.values.set(e,r),this.latestValues[e]=r.get()}removeValue(e){var r;this.values.delete(e),null===(r=this.valueSubscriptions.get(e))||void 0===r||r(),this.valueSubscriptions.delete(e),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==r&&(n=tu(r,{owner:this}),this.addValue(e,n)),n}readValue(e){return void 0===this.latestValues[e]&&this.current?this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;let{initial:n}=this.props,i="string"==typeof n||"object"==typeof n?null===(r=eA(this.props,n))||void 0===r?void 0:r[e]:void 0;if(n&&void 0!==i)return i;let a=this.getBaseTargetFromProps(this.props,e);return void 0===a||B(a)?void 0!==this.initialValues[e]&&void 0===i?void 0:this.baseTarget[e]:a}on(e,r){return this.events[e]||(this.events[e]=new ta),this.events[e].add(r)}notify(e,...r){var n;null===(n=this.events[e])||void 0===n||n.notify(...r)}}let n$=["initial",...rW],nX=n$.length;class nY extends nq{sortInstanceNodePosition(e,r){return 2&e.compareDocumentPosition(r)?1:-1}getBaseTargetFromProps(e,r){var n;return null===(n=e.style)||void 0===n?void 0:n[r]}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:r,...n},{transformValues:i},a){let s=function(e,r,n){var i;let a={};for(let s in e){let e=function(e,r){if(!r)return;let n=r[e]||r.default||r;return n.from}(s,r);a[s]=void 0!==e?e:null===(i=n.getValue(s))||void 0===i?void 0:i.get()}return a}(n,e||{},this);if(i&&(r&&(r=i(r)),n&&(n=i(n)),s&&(s=i(s))),a){!function(e,r,n){var i,a;let s=Object.keys(r).filter(r=>!e.hasValue(r)),o=s.length;if(o)for(let l=0;l<o;l++){let o=s[l],u=r[o],c=null;Array.isArray(u)&&(c=u[0]),null===c&&(c=null!==(a=null!==(i=n[o])&&void 0!==i?i:e.readValue(o))&&void 0!==a?a:r[o]),null!=c&&("string"==typeof c&&(e8(c)||te(c))?c=parseFloat(c):!tN(c)&&tM.test(u)&&(c=tL(o,u)),e.addValue(o,tu(c,{owner:e})),void 0===n[o]&&(n[o]=c),null!==c&&e.setBaseTarget(o,c))}}(this,n,s);let e=nU(this,n,s,r);r=e.transitionEnd,n=e.target}return{transition:e,transitionEnd:r,...n}}}class nZ extends nY{readValueFromInstance(e,r){if(N.has(r)){let e=tP(r);return e&&e.default||0}{let n=window.getComputedStyle(e),i=(V(r)?n.getPropertyValue(r):n[r])||0;return"string"==typeof i?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return n_(e,r)}build(e,r,n,i){eo(e,r,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,r){return eT(e,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;B(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}renderInstance(e,r,n,i){eS(e,r,n,i)}}class nJ extends nY{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){var n;return N.has(r)?(null===(n=tP(r))||void 0===n?void 0:n.default)||0:(r=ew.has(r)?r:e_(r),e.getAttribute(r))}measureInstanceViewportBox(){return na()}scrapeMotionValuesFromProps(e,r){return eE(e,r)}build(e,r,n,i){ev(e,r,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,r,n,i){eM(e,r,n,i)}mount(e){this.isSVGTag=ex(e.tagName),super.mount(e)}}let nK=(e,r)=>D(e)?new nJ(r,{enableHardwareAcceleration:!1}):new nZ(r,{enableHardwareAcceleration:!0});function nQ(e,r){return r.max===r.min?0:e/(r.max-r.min)*100}let n0={correct:(e,r)=>{if(!r.target)return e;if("string"==typeof e){if(!et.test(e))return e;e=parseFloat(e)}let n=nQ(e,r.target.x),i=nQ(e,r.target.y);return`${n}% ${i}%`}},n1="_$css",n2={correct:(e,{treeScale:r,projectionDelta:n})=>{let i=e,a=e.includes("var("),s=[];a&&(e=e.replace(nA,e=>(s.push(e),n1)));let o=tM.parse(e);if(o.length>5)return i;let l=tM.createTransformer(e),u="number"!=typeof o[0]?1:0,c=n.x.scale*r.x,h=n.y.scale*r.y;o[0+u]/=c,o[1+u]/=h;let d=tY(c,h,.5);"number"==typeof o[2+u]&&(o[2+u]/=d),"number"==typeof o[3+u]&&(o[3+u]/=d);let p=l(o);if(a){let e=0;p=p.replace(n1,()=>{let r=s[e];return e++,r})}return p}};class n3 extends u.Component{componentDidMount(){let{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=e;Object.assign(I,n5),a&&(r.group&&r.group.add(a),n&&n.register&&i&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),E.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:r,visualElement:n,drag:i,isPresent:a}=this.props,s=n.projection;return s&&(s.isPresent=a,i||e.layoutDependency!==r||void 0===r?s.willUpdate():this.safeToRemove(),e.isPresent===a||(a?s.promote():s.relegate()||tr.Z_.postRender(()=>{var e;(null===(e=s.getStack())||void 0===e?void 0:e.members.length)||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())}componentWillUnmount(){let{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),(null==r?void 0:r.group)&&r.group.remove(i),(null==n?void 0:n.deregister)&&n.deregister(i))}safeToRemove(){let{safeToRemove:e}=this.props;null==e||e()}render(){return null}}let n5={borderRadius:{...n0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:n0,borderTopRightRadius:n0,borderBottomLeftRadius:n0,borderBottomRightRadius:n0,boxShadow:n2},n4=["TopLeft","TopRight","BottomLeft","BottomRight"],n6=n4.length,n9=e=>"string"==typeof e?parseFloat(e):e,n7=e=>"number"==typeof e||et.test(e);function n8(e,r){return void 0!==e[r]?e[r]:e.borderRadius}let ie=ir(0,.5,rn),it=ir(.5,.95,t8);function ir(e,r,n){return i=>i<e?0:i>r?1:n(t6(e,r,i))}function ii(e,r){e.min=r.min,e.max=r.max}function ia(e,r){ii(e.x,r.x),ii(e.y,r.y)}function is(e,r,n,i,a){return e-=r,e=i+1/n*(e-i),void 0!==a&&(e=i+1/a*(e-i)),e}function io(e,r,[n,i,a],s,o){!function(e,r=0,n=1,i=.5,a,s=e,o=e){if(ee.test(r)){r=parseFloat(r);let e=tY(o.min,o.max,r/100);r=e-o.min}if("number"!=typeof r)return;let l=tY(s.min,s.max,i);e===s&&(l-=r),e.min=is(e.min,r,n,l,a),e.max=is(e.max,r,n,l,a)}(e,r[n],r[i],r[a],r.scale,s,o)}let il=["x","scaleX","originX"],iu=["y","scaleY","originY"];function ic(e,r,n,i){io(e.x,r,il,null==n?void 0:n.x,null==i?void 0:i.x),io(e.y,r,iu,null==n?void 0:n.y,null==i?void 0:i.y)}function ih(e){return 0===e.translate&&1===e.scale}function id(e){return ih(e.x)&&ih(e.y)}function ip(e,r){return e.x.min===r.x.min&&e.x.max===r.x.max&&e.y.min===r.y.min&&e.y.max===r.y.max}function im(e){return r1(e.x)/r1(e.y)}class ig{constructor(){this.members=[]}add(e){tn(this.members,e),e.scheduleRender()}remove(e){if(ti(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let r;let n=this.members.findIndex(r=>e===r);if(0===n)return!1;for(let e=n;e>=0;e--){let n=this.members[e];if(!1!==n.isPresent){r=n;break}}return!!r&&(this.promote(r),!0)}promote(e,r){var n;let i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,r&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),(null===(n=e.root)||void 0===n?void 0:n.isUpdating)&&(e.isLayoutDirty=!0);let{crossfade:a}=e.options;!1===a&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{var r,n,i,a,s;null===(n=(r=e.options).onExitComplete)||void 0===n||n.call(r),null===(s=null===(i=e.resumingFrom)||void 0===i?void 0:(a=i.options).onExitComplete)||void 0===s||s.call(a)})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function iv(e,r,n){let i="",a=e.x.translate/r.x,s=e.y.translate/r.y;if((a||s)&&(i=`translate3d(${a}px, ${s}px, 0) `),(1!==r.x||1!==r.y)&&(i+=`scale(${1/r.x}, ${1/r.y}) `),n){let{rotate:e,rotateX:r,rotateY:a}=n;e&&(i+=`rotate(${e}deg) `),r&&(i+=`rotateX(${r}deg) `),a&&(i+=`rotateY(${a}deg) `)}let o=e.x.scale*r.x,l=e.y.scale*r.y;return(1!==o||1!==l)&&(i+=`scale(${o}, ${l})`),i||"none"}let iy=(e,r)=>e.depth-r.depth;class ix{constructor(){this.children=[],this.isDirty=!1}add(e){tn(this.children,e),this.isDirty=!0}remove(e){ti(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(iy),this.isDirty=!1,this.children.forEach(e)}}let ib=["","X","Y","Z"],i_=0;function iS({attachResizeListener:e,defaultParent:r,measureScroll:n,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(e,n={},i=null==r?void 0:r()){this.id=i_++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isTransformDirty=!1,this.isProjectionDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.nodes.forEach(iT),this.nodes.forEach(iP),this.nodes.forEach(iL)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.elementId=e,this.latestValues=n,this.root=i?i.root||i:this,this.path=i?[...i.path,i]:[],this.parent=i,this.depth=i?i.depth+1:0,e&&this.root.registerPotentialNode(e,this);for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new ix)}addEventListener(e,r){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new ta),this.eventHandlers.get(e).add(r)}notifyListeners(e,...r){let n=this.eventHandlers.get(e);null==n||n.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}registerPotentialNode(e,r){this.potentialNodes.set(e,r)}mount(r,n=!1){var i;if(this.instance)return;this.isSVG=r instanceof SVGElement&&"svg"!==r.tagName,this.instance=r;let{layoutId:a,layout:s,visualElement:o}=this.options;if(o&&!o.current&&o.mount(r),this.root.nodes.add(this),null===(i=this.parent)||void 0===i||i.children.add(this),this.elementId&&this.root.potentialNodes.delete(this.elementId),n&&(s||a)&&(this.isLayoutDirty=!0),e){let n;let i=()=>this.root.updateBlockedByResize=!1;e(r,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=rR(i,250),E.hasAnimatedSinceResize&&(E.hasAnimatedSinceResize=!1,this.nodes.forEach(iR))})}a&&this.root.registerSharedNode(a,this),!1!==this.options.animate&&o&&(a||s)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:r,hasRelativeTargetChanged:n,layout:i})=>{var a,s,l,u,c;if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let h=null!==(s=null!==(a=this.options.transition)&&void 0!==a?a:o.getDefaultTransition())&&void 0!==s?s:iz,{onLayoutAnimationStart:d,onLayoutAnimationComplete:p}=o.getProps(),f=!this.targetLayout||!ip(this.targetLayout,i)||n,m=!r&&n;if(this.options.layoutRoot||(null===(l=this.resumeFrom)||void 0===l?void 0:l.instance)||m||r&&(f||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,m);let r={...rF(h,"layout"),onPlay:d,onComplete:p};(o.shouldReduceMotion||this.options.layoutRoot)&&(r.delay=0,r.type=!1),this.startAnimation(r)}else r||0!==this.animationProgress||iR(this),this.isLead()&&(null===(c=(u=this.options).onExitComplete)||void 0===c||c.call(u));this.targetLayout=i})}unmount(){var e,r;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(e=this.getStack())||void 0===e||e.remove(this),null===(r=this.parent)||void 0===r||r.children.delete(this),this.instance=void 0,tr.qY.preRender(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){var e;return this.isAnimationBlocked||(null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimationBlocked())||!1}startUpdate(){var e;!this.isUpdateBlocked()&&(this.isUpdating=!0,null===(e=this.nodes)||void 0===e||e.forEach(ik),this.animationId++)}getTransformTemplate(){var e;return null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate}willUpdate(e=!0){var r,n,i;if(this.root.isUpdateBlocked()){null===(n=(r=this.options).onExitComplete)||void 0===n||n.call(r);return}if(this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let r=this.path[e];r.shouldResetTransform=!0,r.updateScroll("snapshot"),r.options.layoutRoot&&r.willUpdate(!1)}let{layoutId:a,layout:s}=this.options;(void 0!==a||s)&&(this.prevTransformTemplateValue=null===(i=this.getTransformTemplate())||void 0===i?void 0:i(this.latestValues,""),this.updateSnapshot(),e&&this.notifyListeners("willUpdate"))}didUpdate(){let e=this.isUpdateBlocked();if(e){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(iA);return}this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(iB),this.potentialNodes.clear()),this.nodes.forEach(iC),this.nodes.forEach(iw),this.nodes.forEach(iM),this.clearAllSnapshots(),tr.iW.update(),tr.iW.preRender(),tr.iW.render())}clearAllSnapshots(){this.nodes.forEach(iE),this.sharedNodes.forEach(iD)}scheduleUpdateProjection(){tr.Z_.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){tr.Z_.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){var e;if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++){let r=this.path[e];r.updateScroll()}let r=this.layout;this.layout=this.measure(!1),this.layoutCorrected=na(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox),null===(e=this.options.visualElement)||void 0===e||e.notify("LayoutMeasure",this.layout.layoutBox,null==r?void 0:r.layoutBox)}updateScroll(e="measure"){let r=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(r=!1),r&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){var e;if(!a)return;let r=this.isLayoutDirty||this.shouldResetTransform,n=this.projectionDelta&&!id(this.projectionDelta),i=null===(e=this.getTransformTemplate())||void 0===e?void 0:e(this.latestValues,""),s=i!==this.prevTransformTemplateValue;r&&(n||nc(this.latestValues)||s)&&(a(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var r;let n=this.measurePageBox(),i=this.removeElementScroll(n);return e&&(i=this.removeTransform(i)),iF((r=i).x),iF(r.y),{animationId:this.root.animationId,measuredBox:n,layoutBox:i,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:e}=this.options;if(!e)return na();let r=e.measureViewportBox(),{scroll:n}=this.root;return n&&(ng(r.x,n.offset.x),ng(r.y,n.offset.y)),r}removeElementScroll(e){let r=na();ia(r,e);for(let n=0;n<this.path.length;n++){let i=this.path[n],{scroll:a,options:s}=i;if(i!==this.root&&a&&s.layoutScroll){if(a.isRoot){ia(r,e);let{scroll:n}=this.root;n&&(ng(r.x,-n.offset.x),ng(r.y,-n.offset.y))}ng(r.x,a.offset.x),ng(r.y,a.offset.y)}}return r}applyTransform(e,r=!1){let n=na();ia(n,e);for(let e=0;e<this.path.length;e++){let i=this.path[e];!r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&nb(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),nc(i.latestValues)&&nb(n,i.latestValues)}return nc(this.latestValues)&&nb(n,this.latestValues),n}removeTransform(e){var r;let n=na();ia(n,e);for(let e=0;e<this.path.length;e++){let i=this.path[e];if(!i.instance||!nc(i.latestValues))continue;nu(i.latestValues)&&i.updateSnapshot();let a=na(),s=i.measurePageBox();ia(a,s),ic(n,i.latestValues,null===(r=i.snapshot)||void 0===r?void 0:r.layoutBox,a)}return nc(this.latestValues)&&ic(n,this.latestValues),n}setTargetDelta(e){this.targetDelta=e,this.isProjectionDirty=!0,this.root.scheduleUpdateProjection()}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}resolveTargetDelta(){var e,r,n,i;let a=this.getLead();if(this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),!this.isProjectionDirty&&!this.attemptToResolveRelativeTarget)return;let{layout:s,layoutId:o}=this.options;if(this.layout&&(s||o)){if(!this.targetDelta&&!this.relativeTarget){let e=this.getClosestProjectingParent();e&&e.layout?(this.relativeParent=e,this.relativeTarget=na(),this.relativeTargetOrigin=na(),r9(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),ia(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if((this.relativeTarget||this.targetDelta)&&((this.target||(this.target=na(),this.targetWithTransforms=na()),this.relativeTarget&&this.relativeTargetOrigin&&(null===(e=this.relativeParent)||void 0===e?void 0:e.target))?(r=this.target,n=this.relativeTarget,i=this.relativeParent.target,r4(r.x,n.x,i.x),r4(r.y,n.y,i.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):ia(this.target,this.layout.layoutBox),nf(this.target,this.targetDelta)):ia(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;let e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target?(this.relativeParent=e,this.relativeTarget=na(),this.relativeTargetOrigin=na(),r9(this.relativeTargetOrigin,this.target,e.target),ia(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){return!this.parent||nu(this.parent.latestValues)||nh(this.parent.latestValues)?void 0:(this.parent.relativeTarget||this.parent.targetDelta||this.parent.options.layoutRoot)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()}calcProjection(){var e;let{isProjectionDirty:r,isTransformDirty:n}=this;this.isProjectionDirty=this.isTransformDirty=!1;let i=this.getLead(),a=Boolean(this.resumingFrom)||this!==i,s=!0;if(r&&(s=!1),a&&n&&(s=!1),s)return;let{layout:o,layoutId:l}=this.options;if(this.isTreeAnimating=Boolean((null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(o||l))return;ia(this.layoutCorrected,this.layout.layoutBox),function(e,r,n,i=!1){var a,s;let o,l;let u=n.length;if(u){r.x=r.y=1;for(let c=0;c<u;c++)l=(o=n[c]).projectionDelta,(null===(s=null===(a=o.instance)||void 0===a?void 0:a.style)||void 0===s?void 0:s.display)!=="contents"&&(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&nb(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(r.x*=l.x.scale,r.y*=l.y.scale,nf(e,l)),i&&nc(o.latestValues)&&nb(e,o.latestValues));r.x=nm(r.x),r.y=nm(r.y)}}(this.layoutCorrected,this.treeScale,this.path,a);let{target:u}=i;if(!u)return;this.projectionDelta||(this.projectionDelta=nn(),this.projectionDeltaWithTransform=nn());let c=this.treeScale.x,h=this.treeScale.y,d=this.projectionTransform;r5(this.projectionDelta,this.layoutCorrected,u,this.latestValues),this.projectionTransform=iv(this.projectionDelta,this.treeScale),(this.projectionTransform!==d||this.treeScale.x!==c||this.treeScale.y!==h)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",u))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var r,n,i;null===(n=(r=this.options).scheduleRender)||void 0===n||n.call(r),e&&(null===(i=this.getStack())||void 0===i||i.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e,r=!1){var n,i;let a=this.snapshot,s=(null==a?void 0:a.latestValues)||{},o={...this.latestValues},l=nn();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!r;let u=na(),c=(null==a?void 0:a.source)!==(null===(n=this.layout)||void 0===n?void 0:n.source),h=1>=((null===(i=this.getStack())||void 0===i?void 0:i.members.length)||0),d=Boolean(c&&!h&&!0===this.options.crossfade&&!this.path.some(iN));this.animationProgress=0,this.mixTargetDelta=r=>{var n,i,a;let p=r/1e3;iI(l.x,e.x,p),iI(l.y,e.y,p),this.setTargetDelta(l),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&(null===(n=this.relativeParent)||void 0===n?void 0:n.layout)&&(r9(u,this.layout.layoutBox,this.relativeParent.layout.layoutBox),i=this.relativeTarget,a=this.relativeTargetOrigin,iO(i.x,a.x,u.x,p),iO(i.y,a.y,u.y,p)),c&&(this.animationValues=o,function(e,r,n,i,a,s){a?(e.opacity=tY(0,void 0!==n.opacity?n.opacity:1,ie(i)),e.opacityExit=tY(void 0!==r.opacity?r.opacity:1,0,it(i))):s&&(e.opacity=tY(void 0!==r.opacity?r.opacity:1,void 0!==n.opacity?n.opacity:1,i));for(let a=0;a<n6;a++){let s=`border${n4[a]}Radius`,o=n8(r,s),l=n8(n,s);if(void 0===o&&void 0===l)continue;o||(o=0),l||(l=0);let u=0===o||0===l||n7(o)===n7(l);u?(e[s]=Math.max(tY(n9(o),n9(l),i),0),(ee.test(l)||ee.test(o))&&(e[s]+="%")):e[s]=l}(r.rotate||n.rotate)&&(e.rotate=tY(r.rotate||0,n.rotate||0,i))}(o,s,this.latestValues,p,d,h)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=p},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var r,n;this.notifyListeners("animationStart"),null===(r=this.currentAnimation)||void 0===r||r.stop(),this.resumingFrom&&(null===(n=this.resumingFrom.currentAnimation)||void 0===n||n.stop()),this.pendingAnimation&&(tr.qY.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tr.Z_.update(()=>{E.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,r,n={}){let i=B(e)?e:tu(e);return i.start(rU("",i,1e3,n)),{stop:()=>i.stop(),isAnimating:()=>i.isAnimating()}}(0,0,{...e,onUpdate:r=>{var n;this.mixTargetDelta(r),null===(n=e.onUpdate)||void 0===n||n.call(e,r)},onComplete:()=>{var r;null===(r=e.onComplete)||void 0===r||r.call(e),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){var e;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(e=this.getStack())||void 0===e||e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){var e;this.currentAnimation&&(null===(e=this.mixTargetDelta)||void 0===e||e.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:r,target:n,layout:i,latestValues:a}=e;if(r&&n&&i){if(this!==e&&this.layout&&i&&iU(this.options.animationType,this.layout.layoutBox,i.layoutBox)){n=this.target||na();let r=r1(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+r;let i=r1(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+i}ia(r,n),nb(r,a),r5(this.projectionDeltaWithTransform,this.layoutCorrected,r,a)}}registerSharedNode(e,r){var n,i,a;this.sharedNodes.has(e)||this.sharedNodes.set(e,new ig);let s=this.sharedNodes.get(e);s.add(r),r.promote({transition:null===(n=r.options.initialPromotionConfig)||void 0===n?void 0:n.transition,preserveFollowOpacity:null===(a=null===(i=r.options.initialPromotionConfig)||void 0===i?void 0:i.shouldPreserveFollowOpacity)||void 0===a?void 0:a.call(i,r)})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){var e;let{layoutId:r}=this.options;return r&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;let{layoutId:r}=this.options;return r?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:r,preserveFollowOpacity:n}={}){let i=this.getStack();i&&i.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),r&&this.setOptions({transition:r})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){let{visualElement:e}=this.options;if(!e)return;let r=!1,{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(r=!0),!r)return;let i={};for(let r=0;r<ib.length;r++){let a="rotate"+ib[r];n[a]&&(i[a]=n[a],e.setStaticValue(a,0))}for(let r in null==e||e.render(),i)e.setStaticValue(r,i[r]);e.scheduleRender()}getProjectionStyles(e={}){var r,n;let i={};if(!this.instance||this.isSVG)return i;if(!this.isVisible)return{visibility:"hidden"};i.visibility="";let a=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=eL(e.pointerEvents)||"",i.transform=a?a(this.latestValues,""):"none",i;let s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){let r={};return this.options.layoutId&&(r.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,r.pointerEvents=eL(e.pointerEvents)||""),this.hasProjected&&!nc(this.latestValues)&&(r.transform=a?a({},""):"none",this.hasProjected=!1),r}let o=s.animationValues||s.latestValues;this.applyTransformsToTarget(),i.transform=iv(this.projectionDeltaWithTransform,this.treeScale,o),a&&(i.transform=a(o,i.transform));let{x:l,y:u}=this.projectionDelta;for(let e in i.transformOrigin=`${100*l.origin}% ${100*u.origin}% 0`,s.animationValues?i.opacity=s===this?null!==(n=null!==(r=o.opacity)&&void 0!==r?r:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:i.opacity=s===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0,I){if(void 0===o[e])continue;let{correct:r,applyTo:n}=I[e],a="none"===i.transform?o[e]:r(o[e],s);if(n){let e=n.length;for(let r=0;r<e;r++)i[n[r]]=a}else i[e]=a}return this.options.layoutId&&(i.pointerEvents=s===this?eL(e.pointerEvents)||"":"none"),i}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var r;return null===(r=e.currentAnimation)||void 0===r?void 0:r.stop()}),this.root.nodes.forEach(iA),this.root.sharedNodes.clear()}}}function iw(e){e.updateLayout()}function iM(e){var r,n,i;let a=(null===(r=e.resumeFrom)||void 0===r?void 0:r.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&a&&e.hasListeners("didUpdate")){let{layoutBox:r,measuredBox:n}=e.layout,{animationType:i}=e.options,s=a.source!==e.layout.source;"size"===i?ns(e=>{let n=s?a.measuredBox[e]:a.layoutBox[e],i=r1(n);n.min=r[e].min,n.max=n.min+i}):iU(i,a.layoutBox,r)&&ns(e=>{let n=s?a.measuredBox[e]:a.layoutBox[e],i=r1(r[e]);n.max=n.min+i});let o=nn();r5(o,r,a.layoutBox);let l=nn();s?r5(l,e.applyTransform(n,!0),a.measuredBox):r5(l,r,a.layoutBox);let u=!id(o),c=!1;if(!e.resumeFrom){let n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){let{snapshot:i,layout:s}=n;if(i&&s){let o=na();r9(o,a.layoutBox,i.layoutBox);let l=na();r9(l,r,s.layoutBox),ip(o,l)||(c=!0),n.options.layoutRoot&&(e.relativeTarget=l,e.relativeTargetOrigin=o,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:a,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else e.isLead()&&(null===(i=(n=e.options).onExitComplete)||void 0===i||i.call(n));e.options.transition=void 0}function iT(e){e.isProjectionDirty||(e.isProjectionDirty=Boolean(e.parent&&e.parent.isProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=Boolean(e.parent&&e.parent.isTransformDirty))}function iE(e){e.clearSnapshot()}function iA(e){e.clearMeasurements()}function iC(e){let{visualElement:r}=e.options;(null==r?void 0:r.getProps().onBeforeLayoutMeasure)&&r.notify("BeforeLayoutMeasure"),e.resetTransform()}function iR(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function iP(e){e.resolveTargetDelta()}function iL(e){e.calcProjection()}function ik(e){e.resetRotation()}function iD(e){e.removeLeadSnapshot()}function iI(e,r,n){e.translate=tY(r.translate,0,n),e.scale=tY(r.scale,1,n),e.origin=r.origin,e.originPoint=r.originPoint}function iO(e,r,n,i){e.min=tY(r.min,n.min,i),e.max=tY(r.max,n.max,i)}function iN(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let iz={duration:.45,ease:[.4,0,.1,1]};function iB(e,r){let n=e.root;for(let r=e.path.length-1;r>=0;r--)if(Boolean(e.path[r].instance)){n=e.path[r];break}let i=n&&n!==e.root?n.instance:document,a=i.querySelector(`[data-projection-id="${r}"]`);a&&e.mount(a,!0)}function iF(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function iU(e,r,n){return"position"===e||"preserve-aspect"===e&&!r2(im(r),im(n),.2)}let iV=iS({attachResizeListener:(e,r)=>eO(e,"resize",r),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ij={current:void 0},iH=iS({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ij.current){let e=new iV(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),ij.current=e}return ij.current},resetTransform:(e,r)=>{e.style.transform=void 0!==r?r:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),iW={...rX,...e6,...nT,measureLayout:function(e){let[r,n]=(0,e9.oO)(),i=(0,u.useContext)(C.p);return u.createElement(n3,{...e,layoutGroup:i,switchLayoutGroup:(0,u.useContext)(P),isPresent:r,safeToRemove:n})}},iG=function(e){function r(r,n={}){return function({preloadedFeatures:e,createVisualElement:r,projectionNodeConstructor:n,useRender:i,useVisualState:a,Component:s}){e&&function(e){for(let r in e)"projectionNodeConstructor"===r?w.projectionNodeConstructor=e[r]:w[r].Component=e[r]}(e);let o=(0,u.forwardRef)(function(o,l){var v,y;let b={...(0,u.useContext)(c),...o,layoutId:function({layoutId:e}){let r=(0,u.useContext)(C.p).id;return r&&void 0!==e?r+"-"+e:e}(o)},{isStatic:S}=b,L=null,k=function(e){let{initial:r,animate:n}=function(e,r){if(x(e)){let{initial:r,animate:n}=e;return{initial:!1===r||g(r)?r:void 0,animate:g(n)?n:void 0}}return!1!==e.inherit?r:{}}(e,(0,u.useContext)(h));return(0,u.useMemo)(()=>({initial:r,animate:n}),[_(r),_(n)])}(o),D=S?void 0:(0,T.h)(()=>{if(E.hasEverUpdated)return A++}),I=a(o,S);if(!S&&M.j){k.visualElement=function(e,r,n,i){let a=(0,u.useContext)(h).visualElement,s=(0,u.useContext)(f),o=(0,u.useContext)(d.O),l=(0,u.useContext)(c).reducedMotion,m=(0,u.useRef)();i=i||s.renderer,!m.current&&i&&(m.current=i(e,{visualState:r,parent:a,props:n,presenceId:o?o.id:void 0,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));let g=m.current;(0,p.L)(()=>{g&&g.render()});let v=window.HandoffAppearAnimations?p.L:u.useEffect;return v(()=>{g&&g.animationState&&g.animationState.animateChanges()}),g}(s,I,b,r);let i=(0,u.useContext)(f).strict,a=(0,u.useContext)(P);k.visualElement&&(L=k.visualElement.loadFeatures(b,i,e,D,n||w.projectionNodeConstructor,a))}return u.createElement(R,{visualElement:k.visualElement,props:b},L,u.createElement(h.Provider,{value:k},i(s,o,D,(v=k.visualElement,y=l,(0,u.useCallback)(e=>{e&&I.mount&&I.mount(e),v&&(e?v.mount(e):v.unmount()),y&&("function"==typeof y?y(e):m(y)&&(y.current=e))},[v])),I,S,k.visualElement)))});return o[L]=s,o}(e(r,n))}if("undefined"==typeof Proxy)return r;let n=new Map;return new Proxy(r,{get:(e,i)=>(n.has(i)||n.set(i,r(i)),n.get(i))})}((e,r)=>(function(e,{forwardMotionProps:r=!1},n,i,a){let s=D(e)?eD:eI;return{...s,preloadedFeatures:n,useRender:function(e=!1){let r=(r,n,i,a,{latestValues:s},o)=>{let l=D(r)?eb:ec,c=l(n,s,o,r),h=function(e,r,n){let i={};for(let a in e)("values"!==a||"object"!=typeof e.values)&&(ep(a)||!0===n&&ed(a)||!r&&!ed(a)||e.draggable&&a.startsWith("onDrag"))&&(i[a]=e[a]);return i}(n,"string"==typeof r,e),d={...h,...c,ref:a},{children:p}=n,f=(0,u.useMemo)(()=>B(p)?p.get():p,[p]);return i&&(d["data-projection-id"]=i),(0,u.createElement)(r,{...d,children:f})};return r}(r),createVisualElement:i,projectionNodeConstructor:a,Component:e}})(e,r,iW,nK,iH))},1741:function(e,r,n){"use strict";n.d(r,{j:function(){return i}});let i="undefined"!=typeof document},6681:function(e,r,n){"use strict";n.d(r,{h:function(){return a}});var i=n(7294);function a(e){let r=(0,i.useRef)(null);return null===r.current&&(r.current=e()),r.current}},8868:function(e,r,n){"use strict";n.d(r,{L:function(){return s}});var i=n(7294),a=n(1741);let s=a.j?i.useLayoutEffect:i.useEffect},5411:function(e,r,n){"use strict";n.d(r,{z:function(){return a}});var i=n(7294);function a(e){return(0,i.useEffect)(()=>()=>e(),[])}}},function(e){var r=function(r){return e(e.s=r)};e.O(0,[774,179],function(){return r(1118),r(880)}),_N_E=e.O()}]);